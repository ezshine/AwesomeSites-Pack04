import{_ as e,r as a,c as l,a as t,o as s,b as n,d as o,t as r,u as i,F as u,e as c,n as d,f as v,g as m,h as p,w as _,i as g,j as h,k as b,l as y,m as $,p as k,q as f,s as w,v as C,x as L,L as M,y as A,z as T,A as I,B,C as S,D as x,E,G as H,H as O,I as V,J as N,K as R}from"./vendor.58cc7c02a224c841.js";const P={class:"nav"},G={class:"visually-hidden"},U={key:0,class:"nav__list | mainNavList"},D=["onClick"],F=["href"],j={class:"nav__list | secNavList"},z=["innerHTML"],Z=e({__name:"Navigation",props:{isAlt:{type:Boolean},mainNav:{type:Array,default:()=>[]}},setup(e){const{$l:h}=t;a(0);const b=l((()=>[{label:h("menu.terms.label"),url:h("menu.terms.link"),type:"button",callback:y},{label:h("menu.privacy.label"),url:h("menu.privacy.link"),isExternal:!0},{label:h("menu.cookies.label"),url:h("menu.cookies.link"),type:"button",id:"ot-sdk-btn",class:"ot-sdk-show-settings",callback:window.onCookiesOpen??null}].filter((e=>e.label))));function y(){t.$store.isLegalsOpen=!0}return(a,l)=>{return s(),n("nav",P,[o("h2",G,r(i(h)("menu.mainnav")),1),!e.isAlt||a.$store.shouldShowCTA?(s(),n("ul",U,[(s(!0),n(u,null,c(e.mainNav,((e,a)=>(s(),n("li",{key:e.label,class:d(["navItem | stg",{"is-hl":0===a}]),style:v(`--stg: ${a+1}`)},[o("button",{onClick:e.cb},[o("span",null,r(e.label),1)],8,D)],6)))),128)),a.$store.shouldShowCTA&&i(h)("menu.discoverFragrance.label")?(s(),n("li",{key:0,class:"navItem navItem--sm | stg | is-hl",style:v(`--stg: ${e.mainNav.length}`)},[o("a",{href:(t=i(h)("menu.discoverFragrance.url"),t.replace(/<[^>]*>?/gm,""))},[o("span",null,r(i(h)("menu.discoverFragrance.label")),1)],8,F)],4)):m("",!0)])):m("",!0),o("ul",j,[(s(!0),n(u,null,c(i(b),((a,l)=>(s(),n("li",{key:a.label,class:"navItem | stg",style:v(`--stg: ${l+e.mainNav.length+1}`)},[(s(),p(g(a.type??"a"),{id:a.id,ref_for:!0,ref:a.isExternal?"noopener noreferrer":null,class:d([a.class,"links"]),target:a.isExternal?"_blank":null,onClick:e=>a.callback?a.callback():null},{default:_((()=>[o("span",{innerHTML:a.label},null,8,z)])),_:2},1032,["id","class","target","onClick"]))],4)))),128))])]);var t}}},[["__scopeId","data-v-0bb5a4a7"]]),q={},J={width:"19",height:"18",fill:"currentColor",stroke:"currentColor",viewBox:"0 0 19 18","aria-hidden":"true",class:"iconVolume"},W=[o("path",{"stroke-width":".5",d:"M12.161 17.041V.892l-5.543 5.07H2.915v6.01h3.703l5.543 5.07ZM3.773 6.821H6.95l4.352-3.983v12.257L6.95 11.112H3.773V6.821Z"},null,-1),o("path",{class:"iconVolume__crossed",pathLength:"100","stroke-width":"1.25",d:"M1 17 17 1"},null,-1),o("path",{class:"iconVolume__wave","stroke-width":".5",d:"M18 8.967a3.901 3.901 0 0 0-3.895-3.897v.858a3.038 3.038 0 1 1 0 6.077v.858A3.9 3.9 0 0 0 18 8.967Z"},null,-1)];const K=e(q,[["render",function(e,a){return s(),n("svg",J,W)}]]),Q=["aria-label"],X=e({__name:"VolumeButton",setup(e){const l=a(),o=a();return h((()=>{o.value=l.value.$el.querySelector(".iconVolume__wave")})),(e,a)=>(s(),n("button",{class:d(["volumeBtn",{"is-muted":e.$store.isAudioMuted}]),"aria-label":e.$l("aria.sound"),onClick:a[0]||(a[0]=()=>function(e=!t.$store.isAudioMuted){t.$store.isAudioMuted=e,e||(y({target:l.value.$el,delay:300,name:"dancebutton",duration:1e3,ease:"inOutCubic",complete(e){e.style=""}}),y({target:o.value,name:"soundwave",delay:300,duration:1e3,ease:"inOutCubic",complete(e){e.style=""}}))}())},[b(K,{ref_key:"svg",ref:l,class:"volumeBtn__svg | up ov"},null,512)],10,Q))}},[["__scopeId","data-v-e2ef01eb"]]),Y=["href"],ee={class:"sr-only"},ae=(e=>(I("data-v-b63ad09f"),e=e(),B(),e))((()=>o("span",{class:"menuBtn__icon","aria-hidden":"true"},[o("span",{class:"menuBtn__bar"}),o("span",{class:"menuBtn__bar"})],-1))),le=e({__name:"HeaderNav",setup(e){const{$l:u,$router:c,$webgl:p,$route:g}=t,h=$("viewport"),y=a(!1),I=a(!1),B=a(),S=a(),x=a(),E=k(),H=!1,O=a(H.value),V=a(),{toggle:N}=f(B),R={Home:[{label:u("menu.play"),cb:function(){t.$analytics.rawEvent({event:"trackEvent",eventCategory:"Minisite_TuttiTwilly",eventAction:"click_start_menu"}),c.push("/game"),F()}}],Game:[{label:u("menu.continue"),cb:function(){F()}},{label:u("menu.retry"),cb:j}],End:[{label:u("menu.retry"),cb:j}]},P=a(R[g.name]),G=a(P.value),U=l((()=>{var e;return(null==(e=P.value)?void 0:e.length)||0}));function D(e=!y.value,a=!0){y.value=e,t.$store.isMenuOpen=y.value,y.value?a&&t.$audio.playSound("sfx_UI_menu_open"):a&&t.$audio.playSound("sfx_UI_menu_close"),document.body.classList.toggle("menu-open",y.value),y.value?B.value.scrollTop=0:(clearTimeout(V.value),I.value=!0,V.value=setTimeout((()=>{C((()=>{I.value=!1,O.value=H.value,G.value=P.value}))}),600)),N(y.value)}function F(){D(!1,!1)}function j(){t.$analytics.rawEvent({event:"trackEvent",eventCategory:"Minisite_TuttiTwilly",eventAction:"menu_click_replay"}),c.push("/game"),p.game.restart(),F()}return w((()=>[h.width,h.height]),(function(){(function(){if(E.isDesktop)return;const{width:e,height:a}=h;C((()=>{const l=t.$i18n.locale.rtl,{top:s,left:n,width:o}=S.value.getBoundingClientRect(),r=parseFloat(getComputedStyle(S.value).getPropertyValue("--size")),i=(o-r)/2,u=l?window.innerWidth-(n+i+r/2):n+i+r/2,c=s+i+r/2,d=Math.hypot(e-u,a-c),v=r/d;x.value.style.setProperty("--bgSize",`${d}px`),x.value.style.setProperty("--sclBtn",v/2)}))})(),F()}),{immediate:!0}),w((()=>c.currentRoute.value),(({name:e})=>{P.value=R[e],I.value||(O.value=H.value,G.value=P.value)})),(e,a)=>{const l=L("router-link");return i(E).isDesktop?m("",!0):(s(),n("header",{key:0,id:"header",ref_key:"header",ref:x,class:d(["header",{"header--alt":O.value}]),tabindex:"-1"},[o("div",{class:"header__wrapper",style:v(`--maxStg: ${i(U)+4}`)},[o("a",{ref:"noopener noreferrer",class:"header__title | pr | stg",href:(t=i(u)("menu.hermesUrl"),t.replace(/<[^>]*>?/gm,"")),target:"_blank",style:v(`--stg: ${i(U)+4}`)},[b(M)],12,Y),o("button",{ref_key:"menuBtn",ref:S,class:"header__menuBtn | menuBtn",onClick:a[0]||(a[0]=()=>D())},[o("span",ee,r(i(u)("aria.mainnav")),1),ae],512),b(X,{class:"header__volumeBtn"}),o("div",{ref_key:"scrollArea",ref:B,class:"header__scrollarea"},[b(l,{to:"/",class:"header__tuttitwillyLogo | stg",style:"--stg: 0",onClick:F},{default:_((()=>[b(A)])),_:1}),b(Z,{class:"header__navigation","is-alt":O.value,"main-nav":G.value},null,8,["is-alt","main-nav"]),b(T,{"label-type":"name",class:"header__langswitcher | stg",style:v(`--stg: ${i(U)+3}`)},null,8,["style"])],512)],4)],2));var t}}},[["__scopeId","data-v-b63ad09f"]]),te={key:0,class:"rotate-device"},se=(e=>(I("data-v-bb51520d"),e=e(),B(),e))((()=>o("div",{class:"rotate-background"},null,-1))),ne={class:"rotate-wrapper"},oe={class:"icon-wrapper"},re={class:"icon-rotate"},ie=e({__name:"RotateDevice",setup(e){const l=a();return w(t.$viewport,(()=>l.value=matchMedia("only screen and (max-width: 1440px) and (orientation: landscape)").matches),{immediate:!0}),(e,a)=>{const t=L("SvgIcon");return l.value?(s(),n("div",te,[se,o("div",ne,[o("div",oe,[o("div",re,[b(t,{id:"rotate-mobile",class:"arrow-left"})])])])])):m("",!0)}}},[["__scopeId","data-v-bb51520d"]]),ue=o("div",{class:"background"},null,-1),ce=["innerHTML"],de=["aria-label"],ve={__name:"Legals",setup(e){function a(){t.$store.isLegalsOpen=!1}return(e,l)=>(s(),n("div",{class:d(["legals scrollable",{show:i(t).$store.isLegalsOpen}])},[ue,o("h1",null,r(e.$l("legals.title")),1),o("div",{class:"legals__content",innerHTML:e.$l("legals.text")},null,8,ce),o("button",{class:"close","aria-label":e.$l("aria.close"),onClick:a},null,8,de)],2))}},me={class:"ui"},pe=x({__name:"App",setup(e){function a(e,a,l){t.$device.type.mobile||"Home"===e.name?l():t.$router.push({name:"Home"})}!function(){const e=t.$router;a(e.currentRoute.value,null,(()=>{})),e.beforeEach(a)}(),t.$analytics.init();const l=S(t.$audio.unlocked);let r=null,c=null;return w((()=>[t.$route.name,l.value,t.$store.isInGame,t.$store.isMenuOpen]),(([e,a,l,s])=>{const n=a&&"Game"===e&&l;n&&!c&&(c=t.$audio.playSound("sfx_amb_city",{volume:1,loop:!0})),n&&!r?r=t.$audio.playSound("music_Loop",{volume:1,loop:!0}):!n&&r?(r&&r.stop(),r=null):!n&&c&&(c&&c.stop(),c=null),c&&(c.volume=s||"Game"!==e?.2:1),r&&(r.volume=s?.1:1)})),(e,a)=>{const l=L("WebGL"),t=L("NiceRouterView");return s(),n(u,null,[e.$device.type.mobile?(s(),p(l,{key:0})):m("",!0),e.$device.type.mobile?(s(),p(le,{key:1})):m("",!0),o("main",me,[b(t),e.$device.type.mobile?(s(),p(ie,{key:0})):m("",!0)]),b(ve),(s(),p(g(i(null))))],64)}}});E((async()=>{await pe.usePreview();const e=await H((()=>import("./assets.08892a61a224c841.js")),["assets/assets.08892a61a224c841.js","assets/vendor.58cc7c02a224c841.js","assets/vendor.7e08153da224c841.css"]).then((e=>e.default));pe.pluginManager.setOptions("router",{historyMode:O});const a=await pe.pluginManager.install(),l=!!a.$i18n.locale.rtl;a.$assets=await e.list;for(const t in a.$assets)a.$assets[t].chosenURL=V.select(a.$assets[t]);a.$preloader.task(Promise.all([...Object.values(a.$assets).map((e=>N(e.chosenURL,{onLoad:a=>{e.node=a.node}})))])),a.$controls.listen();(Array.from(new URLSearchParams(window.location.search)).reduce(((e,[a,l])=>(e.set(a,"true"===l||"false"!==l&&l),e)),new Map).get("cta")||sessionStorage.getItem("showCTA"))&&(a.$store.shouldShowCTA=!0,sessionStorage.setItem("showCTA",!0)),a.$preloader.task(Promise.all([new R("Jost",{weight:700})].map((e=>e.load())))),document.documentElement.classList.toggle("rtl",l),pe.mount("#app")}));
