const w="none";function h(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function _(e,t){return t.filter(r=>e.pointerId!==r.pointerId)}function A(e,t,r,u,o){e.dispatchEvent(new CustomEvent(`${t}${o}`,{detail:{event:r,pointersCount:u.length}}))}function H(e,t,r,u,o,I=w){t.style.touchAction=I;let n=[];function D(c){n.push(c),A(t,e,c,n,"down"),u==null||u(n,c);const s=c.pointerId;function f(i){s===i.pointerId&&(n=_(i,n),n.length||E(),A(t,e,i,n,"up"),o==null||o(n,i))}function E(){m(),d(),p(),T()}const m=h(t,"pointermove",i=>{n=n.map(v=>i.pointerId===v.pointerId?i:v),A(t,e,i,n,"move"),r==null||r(n,i)}),d=h(t,"lostpointercapture",i=>{f(i)}),p=h(t,"pointerup",i=>{f(i)}),T=h(t,"pointerleave",i=>{n=[],E(),A(t,e,i,n,"up"),o==null||o(n,i)})}const L=h(t,"pointerdown",D);return{destroy:()=>{L()}}}function S(e,t={timeframe:300,minSwipeDistance:60,touchAction:w}){const r="swipe";let u,o,I,n;function D(c,s){o=s.clientX,I=s.clientY,u=Date.now(),c.length===1&&(n=s.target)}function L(c,s){if(s.type==="pointerup"&&c.length===0&&Date.now()-u<t.timeframe){const f=s.clientX-o,E=s.clientY-I,m=Math.abs(f),d=Math.abs(E);let p=null;m>=2*d&&m>t.minSwipeDistance?p=f>0?"right":"left":d>=2*m&&d>t.minSwipeDistance&&(p=E>0?"bottom":"top"),p&&e.dispatchEvent(new CustomEvent(r,{detail:{direction:p,target:n}}))}}return H(r,e,null,D,L,t.touchAction)}export{S as s};
