import{F as to,S as Pt,i as At,s as vt,l as $,a as ce,e as Bt,G as Zi,m as Z,h as H,c as he,p as k,H as z,b as pe,I as ze,f as ae,g as yt,t as ge,d as bt,J as Ze,K as Us,o as Gt,L as js,M as fs,n as Q,N as Ot,O as $e,q as wt,P as mt,Q as ks,E as gt,R as dt,T as Lt,r as St,u as Mt,v as Pi,U as ei,V as Ri,W as dr,w as ot,x as at,y as lt,B as ct,X as xt,Y as Ls,Z as os,_ as Vi,$ as Si,a0 as et,a1 as tt,a2 as fr,a3 as io,a4 as pr,a5 as so,a6 as mr,a7 as gr,a8 as vr}from"../chunks/index-bd1e39c1.js";import{g as C,m as Gi,c as Di,s as Gs,a as hi,f as pt,b as Ut,d as no,e as ti,h as bs,E as wr,i as Is,j as ln,k as Ui,l as cn,q as ui,n as Vt,o as xi,w as Wi,p as xr,r as Mi}from"../chunks/EdgeButton-afd044b3.js";import{c as ci,g as ro}from"../chunks/_commonjsHelpers-e864563f.js";import{E as yr,V as Ae,M as $t,T as Zt,Q as Yi,S as as,a as Me,L as br,b as yi,F as ls,C as Ke,c as _r,P as Tr,D as Sr,d as kt,s as it,e as di,f as It,g as oo,I as ao,N as lo,h as cs,i as co,j as ho,k as uo,l as Mr,m as fo,n as po,R as Ci,o as Pr,p as mo,q as Ws,r as go,t as vo,u as wo,B as Oi,v as xo,w as _s,x as yo,y as hs,z as bo,A as Qi,G as _o,H as Ue,J as To,K as Ar,O as So,U as Mo,W as Po,X as Er,Y as ye,Z as Ys,_ as Xi,$ as Xs,a0 as Ao,a1 as hn,a2 as Eo,a3 as Co,a4 as Oo,a5 as ko,a6 as Ks,a7 as Lo,a8 as Io,a9 as un,aa as Ro,ab as Do,ac as bi,ad as Nt,ae as us,af as Kt,ag as fi,ah as ps,ai as Ho,aj as Bo,ak as dn,al as Cr,am as zo,an as Or,ao as kr,ap as Fo,aq as Rs,ar as No,as as Lr,at as Vo,au as Uo,av as fn,aw as jo,ax as Go,ay as Wo,az as Yo,aA as Xo,aB as Ht,aC as Ko,aD as $o,aE as Zo,aF as Qo,aG as qo,aH as Ai,aI as Jo,aJ as ea,aK as ta,aL as ia,aM as sa}from"../chunks/three.module-049d6bf0.js";import{m as na,f as ra}from"../chunks/team.store-35ee4c07.js";import{g as oa}from"../chunks/navigation-75a744b1.js";import{C as aa}from"../chunks/CloseButton-e312479f.js";import"../chunks/index-1957567b.js";import"../chunks/singletons-eca981c1.js";const Ir=()=>{const g=to("__svelte__");return{page:{subscribe:g.page.subscribe},navigating:{subscribe:g.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:g.navigating.subscribe}},session:g.session,updated:g.updated}},ms={subscribe(g){return Ir().page.subscribe(g)}},Rr={subscribe(g){return Ir().navigating.subscribe(g)}};var Ds={exports:{}};(function(g,e){(function(t,i){i(e)})(ci,function(t){var i=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,n=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,s=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,o=/(^[#\.][a-z]|[a-y][a-z])/i,h=Math.PI/180,c=180/Math.PI,d=Math.sin,p=Math.cos,r=Math.abs,l=Math.sqrt,a=Math.atan2,f=1e8,u=function(T){return typeof T=="string"},m=function(T){return typeof T=="number"},v=function(T){return typeof T>"u"},_={},S={},w=1e5,x=function(T){return Math.round((T+f)%1*w)/w||(T<0?0:1)},y=function(T){return Math.round(T*w)/w||0},b=function(T){return Math.round(T*1e10)/1e10||0},M=function(T,P,L,R){var B=T[P],U=R===1?6:ue(B,L,R);if(U&&U+L+2<B.length)return T.splice(P,0,B.slice(0,L+U+2)),B.splice(0,L+U),1},E=function(T,P,L){var R=T.length,B=~~(L*R);if(T[B]>P){for(;--B&&T[B]>P;);B<0&&(B=0)}else for(;T[++B]<P&&B<R;);return B<R?B:R-1},I=function(T,P){var L=T.length;for(P||T.reverse();L--;)T[L].reversed||q(T[L])},O=function(T,P){return P.totalLength=T.totalLength,T.samples?(P.samples=T.samples.slice(0),P.lookup=T.lookup.slice(0),P.minLength=T.minLength,P.resolution=T.resolution):T.totalPoints&&(P.totalPoints=T.totalPoints),P},F=function(T,P){var L=T.length,R=T[L-1]||[],B=R.length;L&&P[0]===R[B-2]&&P[1]===R[B-1]&&(P=R.concat(P.slice(2)),L--),T[L]=P};function N(D){D=u(D)&&o.test(D)&&document.querySelector(D)||D;var T=D.getAttribute?D:0,P;return T&&(D=D.getAttribute("d"))?(T._gsPath||(T._gsPath={}),P=T._gsPath[D],P&&!P._dirty?P:T._gsPath[D]=rt(D)):D?u(D)?rt(D):m(D[0])?[D]:D:console.warn("Expecting a <path> element or an SVG path data string")}function W(D){for(var T=[],P=0;P<D.length;P++)T[P]=O(D[P],D[P].slice(0));return O(D,T)}function q(D){var T=0,P;for(D.reverse();T<D.length;T+=2)P=D[T],D[T]=D[T+1],D[T+1]=P;D.reversed=!D.reversed}var X=function(T,P){var L=document.createElementNS("http://www.w3.org/2000/svg","path"),R=[].slice.call(T.attributes),B=R.length,U;for(P=","+P+",";--B>-1;)U=R[B].nodeName.toLowerCase(),P.indexOf(","+U+",")<0&&L.setAttributeNS(null,U,R[B].nodeValue);return L},re={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"},K=function(T,P){for(var L=P?P.split(","):[],R={},B=L.length;--B>-1;)R[L[B]]=+T.getAttribute(L[B])||0;return R};function le(D,T){var P=D.tagName.toLowerCase(),L=.552284749831,R,B,U,Y,j,V,ee,G,te,oe,de,ne,be,Te,Re,ke,We,Xe,Be,qe,Je,Ve;return P==="path"||!D.getBBox?D:(V=X(D,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),Ve=K(D,re[P]),P==="rect"?(Y=Ve.rx,j=Ve.ry||Y,B=Ve.x,U=Ve.y,oe=Ve.width-Y*2,de=Ve.height-j*2,Y||j?(ne=B+Y*(1-L),be=B+Y,Te=be+oe,Re=Te+Y*L,ke=Te+Y,We=U+j*(1-L),Xe=U+j,Be=Xe+de,qe=Be+j*L,Je=Be+j,R="M"+ke+","+Xe+" V"+Be+" C"+[ke,qe,Re,Je,Te,Je,Te-(Te-be)/3,Je,be+(Te-be)/3,Je,be,Je,ne,Je,B,qe,B,Be,B,Be-(Be-Xe)/3,B,Xe+(Be-Xe)/3,B,Xe,B,We,ne,U,be,U,be+(Te-be)/3,U,Te-(Te-be)/3,U,Te,U,Re,U,ke,We,ke,Xe].join(",")+"z"):R="M"+(B+oe)+","+U+" v"+de+" h"+-oe+" v"+-de+" h"+oe+"z"):P==="circle"||P==="ellipse"?(P==="circle"?(Y=j=Ve.r,G=Y*L):(Y=Ve.rx,j=Ve.ry,G=j*L),B=Ve.cx,U=Ve.cy,ee=Y*L,R="M"+(B+Y)+","+U+" C"+[B+Y,U+G,B+ee,U+j,B,U+j,B-ee,U+j,B-Y,U+G,B-Y,U,B-Y,U-G,B-ee,U-j,B,U-j,B+ee,U-j,B+Y,U-G,B+Y,U].join(",")+"z"):P==="line"?R="M"+Ve.x1+","+Ve.y1+" L"+Ve.x2+","+Ve.y2:(P==="polyline"||P==="polygon")&&(te=(D.getAttribute("points")+"").match(n)||[],B=te.shift(),U=te.shift(),R="M"+B+","+U+" L"+te.join(","),P==="polygon"&&(R+=","+B+","+U+"z")),V.setAttribute("d",Ee(V._gsRawPath=rt(R))),T&&D.parentNode&&(D.parentNode.insertBefore(V,D),D.parentNode.removeChild(D)),V)}function we(D,T,P){var L=D[T],R=D[T+2],B=D[T+4],U;return L+=(R-L)*P,R+=(B-R)*P,L+=(R-L)*P,U=R+(B+(D[T+6]-B)*P-R)*P-L,L=D[T+1],R=D[T+3],B=D[T+5],L+=(R-L)*P,R+=(B-R)*P,L+=(R-L)*P,y(a(R+(B+(D[T+7]-B)*P-R)*P-L,U)*c)}function se(D,T,P){P=v(P)?1:b(P)||0,T=b(T)||0;var L=Math.max(0,~~(r(P-T)-1e-8)),R=W(D);if(T>P&&(T=1-T,P=1-P,I(R),R.totalLength=0),T<0||P<0){var B=Math.abs(~~Math.min(T,P))+1;T+=B,P+=B}R.totalLength||xe(R);var U=P>1,Y=_e(R,T,_,!0),j=_e(R,P,S),V=j.segment,ee=Y.segment,G=j.segIndex,te=Y.segIndex,oe=j.i,de=Y.i,ne=te===G,be=oe===de&&ne,Te,Re,ke,We,Xe,Be,qe,Je;if(U||L){for(Te=G<te||ne&&oe<de||be&&j.t<Y.t,M(R,te,de,Y.t)&&(te++,Te||(G++,be?(j.t=(j.t-Y.t)/(1-Y.t),oe=0):ne&&(oe-=de))),Math.abs(1-(P-T))<1e-5?G=te-1:!j.t&&G?G--:M(R,G,oe,j.t)&&Te&&te++,Y.t===1&&(te=(te+1)%R.length),Xe=[],Be=R.length,qe=1+Be*L,Je=te,qe+=(Be-te+G)%Be,We=0;We<qe;We++)F(Xe,R[Je++%Be]);R=Xe}else if(ke=j.t===1?6:ue(V,oe,j.t),T!==P)for(Re=ue(ee,de,be?Y.t/j.t:Y.t),ne&&(ke+=Re),V.splice(oe+ke+2),(Re||de)&&ee.splice(0,de+Re),We=R.length;We--;)(We<te||We>G)&&R.splice(We,1);else V.angle=we(V,oe+ke,0),oe+=ke,Y=V[oe],j=V[oe+1],V.length=V.totalLength=0,V.totalPoints=R.totalPoints=8,V.push(Y,j,Y,j,Y,j,Y,j);return R.totalLength=0,R}function ie(D,T,P){T=T||0,D.samples||(D.samples=[],D.lookup=[]);var L=~~D.resolution||12,R=1/L,B=P?T+P*6+1:D.length,U=D[T],Y=D[T+1],j=T?T/6*L:0,V=D.samples,ee=D.lookup,G=(T?D.minLength:f)||f,te=V[j+P*L-1],oe=T?V[j-1]:0,de,ne,be,Te,Re,ke,We,Xe,Be,qe,Je,Ve,Dt,Ft,Jt,Xt,zi;for(V.length=ee.length=0,ne=T+2;ne<B;ne+=6){if(be=D[ne+4]-U,Te=D[ne+2]-U,Re=D[ne]-U,Xe=D[ne+5]-Y,Be=D[ne+3]-Y,qe=D[ne+1]-Y,ke=We=Je=Ve=0,r(be)<.01&&r(Xe)<.01&&r(Re)+r(qe)<.01)D.length>8&&(D.splice(ne,6),ne-=6,B-=6);else for(de=1;de<=L;de++)Ft=R*de,Dt=1-Ft,ke=We-(We=(Ft*Ft*be+3*Dt*(Ft*Te+Dt*Re))*Ft),Je=Ve-(Ve=(Ft*Ft*Xe+3*Dt*(Ft*Be+Dt*qe))*Ft),Xt=l(Je*Je+ke*ke),Xt<G&&(G=Xt),oe+=Xt,V[j++]=oe;U+=be,Y+=Xe}if(te)for(te-=oe;j<V.length;j++)V[j]+=te;if(V.length&&G){if(D.totalLength=zi=V[V.length-1]||0,D.minLength=G,zi/G<9999)for(Xt=Jt=0,de=0;de<zi;de+=G)ee[Xt++]=V[Jt]<de?++Jt:Jt}else D.totalLength=V[0]=0;return T?oe-V[T/2-1]:oe}function xe(D,T){var P,L,R;for(R=P=L=0;R<D.length;R++)D[R].resolution=~~T||12,L+=D[R].length,P+=ie(D[R]);return D.totalPoints=L,D.totalLength=P,D}function ue(D,T,P){if(P<=0||P>=1)return 0;var L=D[T],R=D[T+1],B=D[T+2],U=D[T+3],Y=D[T+4],j=D[T+5],V=D[T+6],ee=D[T+7],G=L+(B-L)*P,te=B+(Y-B)*P,oe=R+(U-R)*P,de=U+(j-U)*P,ne=G+(te-G)*P,be=oe+(de-oe)*P,Te=Y+(V-Y)*P,Re=j+(ee-j)*P;return te+=(Te-te)*P,de+=(Re-de)*P,D.splice(T+2,4,y(G),y(oe),y(ne),y(be),y(ne+(te-ne)*P),y(be+(de-be)*P),y(te),y(de),y(Te),y(Re)),D.samples&&D.samples.splice(T/6*D.resolution|0,0,0,0,0,0,0,0),6}function _e(D,T,P,L){P=P||{},D.totalLength||xe(D),(T<0||T>1)&&(T=x(T));var R=0,B=D[0],U,Y,j,V,ee,G,te;if(!T)te=G=R=0,B=D[0];else if(T===1)te=1,R=D.length-1,B=D[R],G=B.length-8;else{if(D.length>1){for(j=D.totalLength*T,ee=G=0;(ee+=D[G++].totalLength)<j;)R=G;B=D[R],V=ee-B.totalLength,T=(j-V)/(ee-V)||0}U=B.samples,Y=B.resolution,j=B.totalLength*T,G=B.lookup.length?B.lookup[~~(j/B.minLength)]||0:E(U,j,T),V=G?U[G-1]:0,ee=U[G],ee<j&&(V=ee,ee=U[++G]),te=1/Y*((j-V)/(ee-V)+G%Y),G=~~(G/Y)*6,L&&te===1&&(G+6<B.length?(G+=6,te=0):R+1<D.length&&(G=te=0,B=D[++R]))}return P.t=te,P.i=G,P.path=D,P.segment=B,P.segIndex=R,P}function De(D,T,P,L){var R=D[0],B=L||{},U,Y,j,V,ee,G,te,oe,de;if((T<0||T>1)&&(T=x(T)),D.length>1){for(j=D.totalLength*T,ee=G=0;(ee+=D[G++].totalLength)<j;)R=D[G];V=ee-R.totalLength,T=(j-V)/(ee-V)||0}return U=R.samples,Y=R.resolution,j=R.totalLength*T,G=R.lookup.length?R.lookup[T<1?~~(j/R.minLength):R.lookup.length-1]||0:E(U,j,T),V=G?U[G-1]:0,ee=U[G],ee<j&&(V=ee,ee=U[++G]),te=1/Y*((j-V)/(ee-V)+G%Y)||0,de=1-te,G=~~(G/Y)*6,oe=R[G],B.x=y((te*te*(R[G+6]-oe)+3*de*(te*(R[G+4]-oe)+de*(R[G+2]-oe)))*te+oe),B.y=y((te*te*(R[G+7]-(oe=R[G+1]))+3*de*(te*(R[G+5]-oe)+de*(R[G+3]-oe)))*te+oe),P&&(B.angle=R.totalLength?we(R,G,te>=1?1-1e-9:te||1e-9):R.angle||0),B}function Le(D,T,P,L,R,B,U){for(var Y=D.length,j,V,ee,G,te;--Y>-1;)for(j=D[Y],V=j.length,ee=0;ee<V;ee+=2)G=j[ee],te=j[ee+1],j[ee]=G*T+te*L+B,j[ee+1]=G*P+te*R+U;return D._dirty=1,D}function _t(D,T,P,L,R,B,U,Y,j){if(!(D===Y&&T===j)){P=r(P),L=r(L);var V=R%360*h,ee=p(V),G=d(V),te=Math.PI,oe=te*2,de=(D-Y)/2,ne=(T-j)/2,be=ee*de+G*ne,Te=-G*de+ee*ne,Re=be*be,ke=Te*Te,We=Re/(P*P)+ke/(L*L);We>1&&(P=l(We)*P,L=l(We)*L);var Xe=P*P,Be=L*L,qe=(Xe*Be-Xe*ke-Be*Re)/(Xe*ke+Be*Re);qe<0&&(qe=0);var Je=(B===U?-1:1)*l(qe),Ve=Je*(P*Te/L),Dt=Je*-(L*be/P),Ft=(D+Y)/2,Jt=(T+j)/2,Xt=Ft+(ee*Ve-G*Dt),zi=Jt+(G*Ve+ee*Dt),ni=(be-Ve)/P,ri=(Te-Dt)/L,Ji=(-be-Ve)/P,es=(-Te-Dt)/L,rn=ni*ni+ri*ri,on=(ri<0?-1:1)*Math.acos(ni/l(rn)),oi=(ni*es-ri*Ji<0?-1:1)*Math.acos((ni*Ji+ri*es)/l(rn*(Ji*Ji+es*es)));isNaN(oi)&&(oi=te),!U&&oi>0?oi-=oe:U&&oi<0&&(oi+=oe),on%=oe,oi%=oe;var an=Math.ceil(r(oi)/(oe/4)),ai=[],ts=oi/an,is=4/3*d(ts/2)/(1+p(ts/2)),Qr=ee*P,qr=G*P,Jr=G*-L,eo=ee*L,Wt;for(Wt=0;Wt<an;Wt++)R=on+Wt*ts,be=p(R),Te=d(R),ni=p(R+=ts),ri=d(R),ai.push(be-is*Te,Te+is*be,ni+is*ri,ri-is*ni,ni,ri);for(Wt=0;Wt<ai.length;Wt+=2)be=ai[Wt],Te=ai[Wt+1],ai[Wt]=be*Qr+Te*Jr+Xt,ai[Wt+1]=be*qr+Te*eo+zi;return ai[Wt-2]=Y,ai[Wt-1]=j,ai}}function rt(D){var T=(D+"").replace(s,function(Ve){var Dt=+Ve;return Dt<1e-4&&Dt>-1e-4?0:Dt}).match(i)||[],P=[],L=0,R=0,B=2/3,U=T.length,Y=0,j="ERROR: malformed path: "+D,V,ee,G,te,oe,de,ne,be,Te,Re,ke,We,Xe,Be,qe,Je=function(Dt,Ft,Jt,Xt){Re=(Jt-Dt)/3,ke=(Xt-Ft)/3,ne.push(Dt+Re,Ft+ke,Jt-Re,Xt-ke,Jt,Xt)};if(!D||!isNaN(T[0])||isNaN(T[1]))return console.log(j),P;for(V=0;V<U;V++)if(Xe=oe,isNaN(T[V])?(oe=T[V].toUpperCase(),de=oe!==T[V]):V--,G=+T[V+1],te=+T[V+2],de&&(G+=L,te+=R),V||(be=G,Te=te),oe==="M")ne&&(ne.length<8?P.length-=1:Y+=ne.length),L=be=G,R=Te=te,ne=[G,te],P.push(ne),V+=2,oe="L";else if(oe==="C")ne||(ne=[0,0]),de||(L=R=0),ne.push(G,te,L+T[V+3]*1,R+T[V+4]*1,L+=T[V+5]*1,R+=T[V+6]*1),V+=6;else if(oe==="S")Re=L,ke=R,(Xe==="C"||Xe==="S")&&(Re+=L-ne[ne.length-4],ke+=R-ne[ne.length-3]),de||(L=R=0),ne.push(Re,ke,G,te,L+=T[V+3]*1,R+=T[V+4]*1),V+=4;else if(oe==="Q")Re=L+(G-L)*B,ke=R+(te-R)*B,de||(L=R=0),L+=T[V+3]*1,R+=T[V+4]*1,ne.push(Re,ke,L+(G-L)*B,R+(te-R)*B,L,R),V+=4;else if(oe==="T")Re=L-ne[ne.length-4],ke=R-ne[ne.length-3],ne.push(L+Re,R+ke,G+(L+Re*1.5-G)*B,te+(R+ke*1.5-te)*B,L=G,R=te),V+=2;else if(oe==="H")Je(L,R,L=G,R),V+=1;else if(oe==="V")Je(L,R,L,R=G+(de?R-L:0)),V+=1;else if(oe==="L"||oe==="Z")oe==="Z"&&(G=be,te=Te,ne.closed=!0),(oe==="L"||r(L-G)>.5||r(R-te)>.5)&&(Je(L,R,G,te),oe==="L"&&(V+=2)),L=G,R=te;else if(oe==="A"){if(Be=T[V+4],qe=T[V+5],Re=T[V+6],ke=T[V+7],ee=7,Be.length>1&&(Be.length<3?(ke=Re,Re=qe,ee--):(ke=qe,Re=Be.substr(2),ee-=2),qe=Be.charAt(1),Be=Be.charAt(0)),We=_t(L,R,+T[V+1],+T[V+2],+T[V+3],+Be,+qe,(de?L:0)+Re*1,(de?R:0)+ke*1),V+=ee,We)for(ee=0;ee<We.length;ee++)ne.push(We[ee]);L=ne[ne.length-2],R=ne[ne.length-1]}else console.log(j);return V=ne.length,V<6?(P.pop(),V=0):ne[0]===ne[V-2]&&ne[1]===ne[V-1]&&(ne.closed=!0),P.totalPoints=Y+V,P}function Rt(D,T){T===void 0&&(T=1);for(var P=D[0],L=0,R=[P,L],B=2;B<D.length;B+=2)R.push(P,L,D[B],L=(D[B]-P)*T/2,P=D[B],-L);return R}function Fe(D,T){r(D[0]-D[2])<1e-4&&r(D[1]-D[3])<1e-4&&(D=D.slice(2));var P=D.length-2,L=+D[0],R=+D[1],B=+D[2],U=+D[3],Y=[L,R,L,R],j=B-L,V=U-R,ee=Math.abs(D[P]-L)<.001&&Math.abs(D[P+1]-R)<.001,G,te,oe,de,ne,be,Te,Re,ke,We,Xe,Be,qe,Je,Ve;for(ee&&(D.push(B,U),B=L,U=R,L=D[P-2],R=D[P-1],D.unshift(L,R),P+=4),T=T||T===0?+T:1,oe=2;oe<P;oe+=2)G=L,te=R,L=B,R=U,B=+D[oe+2],U=+D[oe+3],!(L===B&&R===U)&&(de=j,ne=V,j=B-L,V=U-R,be=l(de*de+ne*ne),Te=l(j*j+V*V),Re=l(Math.pow(j/Te+de/be,2)+Math.pow(V/Te+ne/be,2)),ke=(be+Te)*T*.25/Re,We=L-(L-G)*(be?ke/be:0),Xe=L+(B-L)*(Te?ke/Te:0),Be=L-(We+((Xe-We)*(be*3/(be+Te)+.5)/4||0)),qe=R-(R-te)*(be?ke/be:0),Je=R+(U-R)*(Te?ke/Te:0),Ve=R-(qe+((Je-qe)*(be*3/(be+Te)+.5)/4||0)),(L!==G||R!==te)&&Y.push(y(We+Be),y(qe+Ve),y(L),y(R),y(Xe+Be),y(Je+Ve)));return L!==B||R!==U||Y.length<4?Y.push(y(B),y(U),y(B),y(U)):Y.length-=2,Y.length===2?Y.push(L,R,L,R,L,R):ee&&(Y.splice(0,6),Y.length=Y.length-6),Y}function Ee(D){m(D[0])&&(D=[D]);var T="",P=D.length,L,R,B,U;for(R=0;R<P;R++){for(U=D[R],T+="M"+y(U[0])+","+y(U[1])+" C",L=U.length,B=2;B<L;B++)T+=y(U[B++])+","+y(U[B++])+" "+y(U[B++])+","+y(U[B++])+" "+y(U[B++])+","+y(U[B])+" ";U.closed&&(T+="z")}return T}var Ge,Se,Tt,me,Pe,Ie,st,ft,je="transform",ht=je+"Origin",Et,fe=function(T){var P=T.ownerDocument||T;for(!(je in T.style)&&("msTransform"in T.style)&&(je="msTransform",ht=je+"Origin");P.parentNode&&(P=P.parentNode););if(Se=window,st=new nt,P){Ge=P,Tt=P.documentElement,me=P.body,ft=Ge.createElementNS("http://www.w3.org/2000/svg","g"),ft.style.transform="none";var L=P.createElement("div"),R=P.createElement("div");me.appendChild(L),L.appendChild(R),L.style.position="static",L.style[je]="translate3d(0,0,1px)",Et=R.offsetParent!==L,me.removeChild(L)}return P},ve=function(T){for(var P,L;T&&T!==me;)L=T._gsap,L&&L.uncache&&L.get(T,"x"),L&&!L.scaleX&&!L.scaleY&&L.renderTransform&&(L.scaleX=L.scaleY=1e-4,L.renderTransform(1,L),P?P.push(L):P=[L]),T=T.parentNode;return P},Ne=[],ut=[],Ct=function(){return Se.pageYOffset||Ge.scrollTop||Tt.scrollTop||me.scrollTop||0},A=function(){return Se.pageXOffset||Ge.scrollLeft||Tt.scrollLeft||me.scrollLeft||0},J=function(T){return T.ownerSVGElement||((T.tagName+"").toLowerCase()==="svg"?T:null)},Ce=function D(T){if(Se.getComputedStyle(T).position==="fixed")return!0;if(T=T.parentNode,T&&T.nodeType===1)return D(T)},Oe=function D(T,P){if(T.parentNode&&(Ge||fe(T))){var L=J(T),R=L?L.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",B=L?P?"rect":"g":"div",U=P!==2?0:100,Y=P===3?100:0,j="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",V=Ge.createElementNS?Ge.createElementNS(R.replace(/^https/,"http"),B):Ge.createElement(B);return P&&(L?(Ie||(Ie=D(T)),V.setAttribute("width",.01),V.setAttribute("height",.01),V.setAttribute("transform","translate("+U+","+Y+")"),Ie.appendChild(V)):(Pe||(Pe=D(T),Pe.style.cssText=j),V.style.cssText=j+"width:0.1px;height:0.1px;top:"+Y+"px;left:"+U+"px",Pe.appendChild(V))),V}throw"Need document and parent."},Ye=function(T){for(var P=new nt,L=0;L<T.numberOfItems;L++)P.multiply(T.getItem(L).matrix);return P},zt=function(T){var P=T.getCTM(),L;return P||(L=T.style[je],T.style[je]="none",T.appendChild(ft),P=ft.getCTM(),T.removeChild(ft),L?T.style[je]=L:T.style.removeProperty(je.replace(/([A-Z])/g,"-$1").toLowerCase())),P||st.clone()},qt=function(T,P){var L=J(T),R=T===L,B=L?Ne:ut,U=T.parentNode,Y,j,V,ee,G,te;if(T===Se)return T;if(B.length||B.push(Oe(T,1),Oe(T,2),Oe(T,3)),Y=L?Ie:Pe,L)R?(V=zt(T),ee=-V.e/V.a,G=-V.f/V.d,j=st):T.getBBox?(V=T.getBBox(),j=T.transform?T.transform.baseVal:{},j=j.numberOfItems?j.numberOfItems>1?Ye(j):j.getItem(0).matrix:st,ee=j.a*V.x+j.c*V.y,G=j.b*V.x+j.d*V.y):(j=new nt,ee=G=0),P&&T.tagName.toLowerCase()==="g"&&(ee=G=0),(R?L:U).appendChild(Y),Y.setAttribute("transform","matrix("+j.a+","+j.b+","+j.c+","+j.d+","+(j.e+ee)+","+(j.f+G)+")");else{if(ee=G=0,Et)for(j=T.offsetParent,V=T;V&&(V=V.parentNode)&&V!==j&&V.parentNode;)(Se.getComputedStyle(V)[je]+"").length>4&&(ee=V.offsetLeft,G=V.offsetTop,V=0);if(te=Se.getComputedStyle(T),te.position!=="absolute"&&te.position!=="fixed")for(j=T.offsetParent;U&&U!==j;)ee+=U.scrollLeft||0,G+=U.scrollTop||0,U=U.parentNode;V=Y.style,V.top=T.offsetTop-G+"px",V.left=T.offsetLeft-ee+"px",V[je]=te[je],V[ht]=te[ht],V.position=te.position==="fixed"?"fixed":"absolute",T.parentNode.appendChild(Y)}return Y},si=function(T,P,L,R,B,U,Y){return T.a=P,T.b=L,T.c=R,T.d=B,T.e=U,T.f=Y,T},nt=function(){function D(P,L,R,B,U,Y){P===void 0&&(P=1),L===void 0&&(L=0),R===void 0&&(R=0),B===void 0&&(B=1),U===void 0&&(U=0),Y===void 0&&(Y=0),si(this,P,L,R,B,U,Y)}var T=D.prototype;return T.inverse=function(){var L=this.a,R=this.b,B=this.c,U=this.d,Y=this.e,j=this.f,V=L*U-R*B||1e-10;return si(this,U/V,-R/V,-B/V,L/V,(B*j-U*Y)/V,-(L*j-R*Y)/V)},T.multiply=function(L){var R=this.a,B=this.b,U=this.c,Y=this.d,j=this.e,V=this.f,ee=L.a,G=L.c,te=L.b,oe=L.d,de=L.e,ne=L.f;return si(this,ee*R+te*U,ee*B+te*Y,G*R+oe*U,G*B+oe*Y,j+de*R+ne*U,V+de*B+ne*Y)},T.clone=function(){return new D(this.a,this.b,this.c,this.d,this.e,this.f)},T.equals=function(L){var R=this.a,B=this.b,U=this.c,Y=this.d,j=this.e,V=this.f;return R===L.a&&B===L.b&&U===L.c&&Y===L.d&&j===L.e&&V===L.f},T.apply=function(L,R){R===void 0&&(R={});var B=L.x,U=L.y,Y=this.a,j=this.b,V=this.c,ee=this.d,G=this.e,te=this.f;return R.x=B*Y+U*V+G||0,R.y=B*j+U*ee+te||0,R},D}();function Qe(D,T,P,L){if(!D||!D.parentNode||(Ge||fe(D)).documentElement===D)return new nt;var R=ve(D),B=J(D),U=B?Ne:ut,Y=qt(D,P),j=U[0].getBoundingClientRect(),V=U[1].getBoundingClientRect(),ee=U[2].getBoundingClientRect(),G=Y.parentNode,te=!L&&Ce(D),oe=new nt((V.left-j.left)/100,(V.top-j.top)/100,(ee.left-j.left)/100,(ee.top-j.top)/100,j.left+(te?0:A()),j.top+(te?0:Ct()));if(G.removeChild(Y),R)for(j=R.length;j--;)V=R[j],V.scaleX=V.scaleY=0,V.renderTransform(1,V);return T?oe.inverse():oe}/*!
 * MotionPathPlugin 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Gr="x,translateX,left,marginLeft,xPercent".split(","),Wr="y,translateY,top,marginTop,yPercent".split(","),Yr=Math.PI/180,Yt,qs,_i,vs,ws,Js,Xr=function(){return Yt||typeof window<"u"&&(Yt=window.gsap)&&Yt.registerPlugin&&Yt},Bi=function(T,P,L,R){for(var B=P.length,U=R===2?0:R,Y=0;Y<B;Y++)T[U]=parseFloat(P[Y][L]),R===2&&(T[U+1]=0),U+=2;return T},Ti=function(T,P,L){return parseFloat(T._gsap.get(T,P,L||"px"))||0},en=function(T){var P=T[0],L=T[1],R;for(R=2;R<T.length;R+=2)P=T[R]+=P,L=T[R+1]+=L},tn=function(T,P,L,R,B,U,Y,j,V){if(Y.type==="cubic")P=[P];else{Y.fromCurrent!==!1&&P.unshift(Ti(L,R,j),B?Ti(L,B,V):0),Y.relative&&en(P);var ee=B?Fe:Rt;P=[ee(P,Y.curviness)]}return P=U(nn(P,L,Y)),qi(T,L,R,P,"x",j),B&&qi(T,L,B,P,"y",V),xe(P,Y.resolution||(Y.curviness===0?20:12))},Kr=function(T){return T},$r=/[-+\.]*\d+\.?(?:e-|e\+)?\d*/g,sn=function(T,P,L){var R=Qe(T),B=0,U=0,Y;return(T.tagName+"").toLowerCase()==="svg"?(Y=T.viewBox.baseVal,Y.width||(Y={width:+T.getAttribute("width"),height:+T.getAttribute("height")})):Y=P&&T.getBBox&&T.getBBox(),P&&P!=="auto"&&(B=P.push?P[0]*(Y?Y.width:T.offsetWidth||0):P.x,U=P.push?P[1]*(Y?Y.height:T.offsetHeight||0):P.y),L.apply(B||U?R.apply({x:B,y:U}):{x:R.e,y:R.f})},xs=function(T,P,L,R){var B=Qe(T.parentNode,!0,!0),U=B.clone().multiply(Qe(P)),Y=sn(T,L,B),j=sn(P,R,B),V=j.x,ee=j.y,G;return U.e=U.f=0,R==="auto"&&P.getTotalLength&&P.tagName.toLowerCase()==="path"&&(G=P.getAttribute("d").match($r)||[],G=U.apply({x:+G[0],y:+G[1]}),V+=G.x,ee+=G.y),G&&(G=U.apply(P.getBBox()),V-=G.x,ee-=G.y),U.e=V-Y.x,U.f=ee-Y.y,U},nn=function(T,P,L){var R=L.align,B=L.matrix,U=L.offsetX,Y=L.offsetY,j=L.alignOrigin,V=T[0][0],ee=T[0][1],G=Ti(P,"x"),te=Ti(P,"y"),oe,de,ne;return!T||!T.length?N("M0,0L0,0"):(R&&(R==="self"||(oe=vs(R)[0]||P)===P?Le(T,1,0,0,1,G-V,te-ee):(j&&j[2]!==!1?Yt.set(P,{transformOrigin:j[0]*100+"% "+j[1]*100+"%"}):j=[Ti(P,"xPercent")/-100,Ti(P,"yPercent")/-100],de=xs(P,oe,j,"auto"),ne=de.apply({x:V,y:ee}),Le(T,de.a,de.b,de.c,de.d,G+de.e-(ne.x-de.e),te+de.f-(ne.y-de.f)))),B?Le(T,B.a,B.b,B.c,B.d,B.e,B.f):(U||Y)&&Le(T,1,0,0,1,U||0,Y||0),T)},qi=function(T,P,L,R,B,U){var Y=P._gsap,j=Y.harness,V=j&&j.aliases&&j.aliases[L],ee=V&&V.indexOf(",")<0?V:L,G=T._pt=new qs(T._pt,P,ee,0,0,Kr,0,Y.set(P,ee,T));G.u=_i(Y.get(P,ee,U))||0,G.path=R,G.pp=B,T._props.push(ee)},Zr=function(T,P){return function(L){return T||P!==1?se(L,T,P):L}},ys={version:"3.11.4",name:"motionPath",register:function(T,P,L){Yt=T,_i=Yt.utils.getUnit,vs=Yt.utils.toArray,ws=Yt.core.getStyleSaver,Js=Yt.core.reverting||function(){},qs=L},init:function(T,P,L){if(!Yt)return console.warn("Please gsap.registerPlugin(MotionPathPlugin)"),!1;(!(typeof P=="object"&&!P.style)||!P.path)&&(P={path:P});var R=[],B=P,U=B.path,Y=B.autoRotate,j=B.unitX,V=B.unitY,ee=B.x,G=B.y,te=U[0],oe=Zr(P.start,"end"in P?P.end:1),de,ne;if(this.rawPaths=R,this.target=T,this.tween=L,this.styles=ws&&ws(T,"transform"),(this.rotate=Y||Y===0)&&(this.rOffset=parseFloat(Y)||0,this.radians=!!P.useRadians,this.rProp=P.rotation||"rotation",this.rSet=T._gsap.set(T,this.rProp,this),this.ru=_i(T._gsap.get(T,this.rProp))||0),Array.isArray(U)&&!("closed"in U)&&typeof te!="number"){for(ne in te)!ee&&~Gr.indexOf(ne)?ee=ne:!G&&~Wr.indexOf(ne)&&(G=ne);ee&&G?R.push(tn(this,Bi(Bi([],U,ee,0),U,G,1),T,ee,G,oe,P,j||_i(U[0][ee]),V||_i(U[0][G]))):ee=G=0;for(ne in te)ne!==ee&&ne!==G&&R.push(tn(this,Bi([],U,ne,2),T,ne,0,oe,P,_i(U[0][ne])))}else de=oe(nn(N(P.path),T,P)),xe(de,P.resolution),R.push(de),qi(this,T,P.x||"x",de,"x",P.unitX||"px"),qi(this,T,P.y||"y",de,"y",P.unitY||"px")},render:function(T,P){var L=P.rawPaths,R=L.length,B=P._pt;if(P.tween._time||!Js()){for(T>1?T=1:T<0&&(T=0);R--;)De(L[R],T,!R&&P.rotate,L[R]);for(;B;)B.set(B.t,B.p,B.path[B.pp]+B.u,B.d,T),B=B._next;P.rotate&&P.rSet(P.target,P.rProp,L[0].angle*(P.radians?Yr:1)+P.rOffset+P.ru,P,T)}else P.styles.revert()},getLength:function(T){return xe(N(T)).totalLength},sliceRawPath:se,getRawPath:N,pointsToSegment:Fe,stringToRawPath:rt,rawPathToString:Ee,transformRawPath:Le,getGlobalMatrix:Qe,getPositionOnPath:De,cacheRawPathMeasurements:xe,convertToPath:function(T,P){return vs(T).map(function(L){return le(L,P!==!1)})},convertCoordinates:function(T,P,L){var R=Qe(P,!0,!0).multiply(Qe(T));return L?R.apply(L):R},getAlignMatrix:xs,getRelativePosition:function(T,P,L,R){var B=xs(T,P,L,R);return{x:B.e,y:B.f}},arrayToRawPath:function(T,P){P=P||{};var L=Bi(Bi([],T,P.x||"x",0),T,P.y||"y",1);return P.relative&&en(L),[P.type==="cubic"?L:Fe(L,P.curviness)]}};Xr()&&Yt.registerPlugin(ys),t.MotionPathPlugin=ys,t.default=ys,Object.defineProperty(t,"__esModule",{value:!0})})})(Ds,Ds.exports);var Dr={exports:{}};(function(g,e){(function(){function t(){var i=window,n=document;if("scrollBehavior"in n.documentElement.style&&i.__forceSmoothScrollPolyfill__!==!0)return;var s=i.HTMLElement||i.Element,o=468,h={scroll:i.scroll||i.scrollTo,scrollBy:i.scrollBy,elementScroll:s.prototype.scroll||r,scrollIntoView:s.prototype.scrollIntoView},c=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now;function d(w){var x=["MSIE ","Trident/","Edge/"];return new RegExp(x.join("|")).test(w)}var p=d(i.navigator.userAgent)?1:0;function r(w,x){this.scrollLeft=w,this.scrollTop=x}function l(w){return .5*(1-Math.cos(Math.PI*w))}function a(w){if(w===null||typeof w!="object"||w.behavior===void 0||w.behavior==="auto"||w.behavior==="instant")return!0;if(typeof w=="object"&&w.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+w.behavior+" is not a valid value for enumeration ScrollBehavior.")}function f(w,x){if(x==="Y")return w.clientHeight+p<w.scrollHeight;if(x==="X")return w.clientWidth+p<w.scrollWidth}function u(w,x){var y=i.getComputedStyle(w,null)["overflow"+x];return y==="auto"||y==="scroll"}function m(w){var x=f(w,"Y")&&u(w,"Y"),y=f(w,"X")&&u(w,"X");return x||y}function v(w){for(;w!==n.body&&m(w)===!1;)w=w.parentNode||w.host;return w}function _(w){var x=c(),y,b,M,E=(x-w.startTime)/o;E=E>1?1:E,y=l(E),b=w.startX+(w.x-w.startX)*y,M=w.startY+(w.y-w.startY)*y,w.method.call(w.scrollable,b,M),(b!==w.x||M!==w.y)&&i.requestAnimationFrame(_.bind(i,w))}function S(w,x,y){var b,M,E,I,O=c();w===n.body?(b=i,M=i.scrollX||i.pageXOffset,E=i.scrollY||i.pageYOffset,I=h.scroll):(b=w,M=w.scrollLeft,E=w.scrollTop,I=r),_({scrollable:b,method:I,startTime:O,startX:M,startY:E,x,y})}i.scroll=i.scrollTo=function(){if(arguments[0]!==void 0){if(a(arguments[0])===!0){h.scroll.call(i,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:i.scrollX||i.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:i.scrollY||i.pageYOffset);return}S.call(i,n.body,arguments[0].left!==void 0?~~arguments[0].left:i.scrollX||i.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:i.scrollY||i.pageYOffset)}},i.scrollBy=function(){if(arguments[0]!==void 0){if(a(arguments[0])){h.scrollBy.call(i,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}S.call(i,n.body,~~arguments[0].left+(i.scrollX||i.pageXOffset),~~arguments[0].top+(i.scrollY||i.pageYOffset))}},s.prototype.scroll=s.prototype.scrollTo=function(){if(arguments[0]!==void 0){if(a(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");h.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}var w=arguments[0].left,x=arguments[0].top;S.call(this,this,typeof w>"u"?this.scrollLeft:~~w,typeof x>"u"?this.scrollTop:~~x)}},s.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(a(arguments[0])===!0){h.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},s.prototype.scrollIntoView=function(){if(a(arguments[0])===!0){h.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}var w=v(this),x=w.getBoundingClientRect(),y=this.getBoundingClientRect();w!==n.body?(S.call(this,w,w.scrollLeft+y.left-x.left,w.scrollTop+y.top-x.top),i.getComputedStyle(w).position!=="fixed"&&i.scrollBy({left:x.left,top:x.top,behavior:"smooth"})):i.scrollBy({left:y.left,top:y.top,behavior:"smooth"})}}g.exports={polyfill:t}})()})(Dr);const la=Dr.exports;class ca{constructor(e=!1){this.allowTouch=e,this.x=this.slowX=this.xMax=0,this.y=this.slowY=this.yMax=0,this.pctX=this.slowPctX=0,this.pctY=this.slowPctY=0,this.isInited=this.isMobile=!1}init(){window.addEventListener("mousemove",this.handleMouseMove.bind(this)),window.addEventListener("touchstart",this.handleTouchStart.bind(this)),this.allowTouch&&(window.addEventListener("touchmove",this.handleTouchmove.bind(this)),window.addEventListener("touchend",this.handleTouchmove.bind(this))),window.addEventListener("resize",this.resizeHandler.bind(this)),this.resizeHandler(),this.loop()}resizeHandler(){this.xMax=Math.max(document.documentElement.clientWidth,window.innerWidth||0),this.yMax=Math.max(document.documentElement.clientHeight,window.innerHeight||0),this.x=Math.min(this.xMax,this.x),this.y=Math.min(this.yMax,this.y),this.isInited||(this.x=this.slowX=this.xMax*.5,this.y=this.slowY=this.yMax*.5,this.pctX=this.slowPctX=.5,this.pctY=this.slowPctY=.5)}handleTouchStart(e){this.isMobile=!0,this.allowTouch&&(this.isInited=!0,this.handleTouchmove(e))}handleTouchmove(e){var t=e.touches[0];t&&(this.x=t.clientX,this.y=t.clientY)}handleMouseMove(e){(!this.isMobile||this.isMobile&&this.allowTouch)&&(this.x=e.clientX,this.y=e.clientY,this.isInited=!0)}loop(){this.isInited&&(this.slowX+=(this.x-this.slowX)*.1,this.slowY+=(this.y-this.slowY)*.1,this.pctX=this.x/this.xMax,this.pctY=this.y/this.yMax,this.slowPctX=this.slowX/this.xMax,this.slowPctY=this.slowY/this.yMax),window.requestAnimationFrame(this.loop.bind(this))}getPosition(e){if(e){var t=e.getBoundingClientRect();return this.calculatePosition(t.left,t.top,t.width,t.height)}else{const i=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);return this.calculatePosition(0,0,i,n)}}calculatePosition(e,t,i,n){var s={};return s.x=this.x-e,s.y=this.y-t,s.slowX=this.slowX-e,s.slowY=this.slowY-t,s.pctX=s.x/i,s.pctY=s.y/n,s.slowPctX=s.slowX/i,s.slowPctY=s.slowY/n,s}}const pn={type:"change"},Ts={type:"start"},mn={type:"end"};class ha extends yr{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Ae,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:$t.ROTATE,MIDDLE:$t.DOLLY,RIGHT:$t.PAN},this.touches={ONE:Zt.ROTATE,TWO:Zt.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(A){A.addEventListener("keydown",je),this._domElementKeyEvents=A},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(pn),i.update(),s=n.NONE},this.update=function(){const A=new Ae,J=new Yi().setFromUnitVectors(e.up,new Ae(0,1,0)),Ce=J.clone().invert(),Oe=new Ae,Ye=new Yi,zt=2*Math.PI;return function(){const si=i.object.position;A.copy(si).sub(i.target),A.applyQuaternion(J),h.setFromVector3(A),i.autoRotate&&s===n.NONE&&E(b()),i.enableDamping?(h.theta+=c.theta*i.dampingFactor,h.phi+=c.phi*i.dampingFactor):(h.theta+=c.theta,h.phi+=c.phi);let nt=i.minAzimuthAngle,Qe=i.maxAzimuthAngle;return isFinite(nt)&&isFinite(Qe)&&(nt<-Math.PI?nt+=zt:nt>Math.PI&&(nt-=zt),Qe<-Math.PI?Qe+=zt:Qe>Math.PI&&(Qe-=zt),nt<=Qe?h.theta=Math.max(nt,Math.min(Qe,h.theta)):h.theta=h.theta>(nt+Qe)/2?Math.max(nt,h.theta):Math.min(Qe,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=d,h.radius=Math.max(i.minDistance,Math.min(i.maxDistance,h.radius)),i.enableDamping===!0?i.target.addScaledVector(p,i.dampingFactor):i.target.add(p),A.setFromSpherical(h),A.applyQuaternion(Ce),si.copy(i.target).add(A),i.object.lookAt(i.target),i.enableDamping===!0?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,p.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),p.set(0,0,0)),d=1,r||Oe.distanceToSquared(i.object.position)>o||8*(1-Ye.dot(i.object.quaternion))>o?(i.dispatchEvent(pn),Oe.copy(i.object.position),Ye.copy(i.object.quaternion),r=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",fe),i.domElement.removeEventListener("pointerdown",Se),i.domElement.removeEventListener("pointercancel",Pe),i.domElement.removeEventListener("wheel",ft),i.domElement.removeEventListener("pointermove",Tt),i.domElement.removeEventListener("pointerup",me),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",je)};const i=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=n.NONE;const o=1e-6,h=new as,c=new as;let d=1;const p=new Ae;let r=!1;const l=new Me,a=new Me,f=new Me,u=new Me,m=new Me,v=new Me,_=new Me,S=new Me,w=new Me,x=[],y={};function b(){return 2*Math.PI/60/60*i.autoRotateSpeed}function M(){return Math.pow(.95,i.zoomSpeed)}function E(A){c.theta-=A}function I(A){c.phi-=A}const O=function(){const A=new Ae;return function(Ce,Oe){A.setFromMatrixColumn(Oe,0),A.multiplyScalar(-Ce),p.add(A)}}(),F=function(){const A=new Ae;return function(Ce,Oe){i.screenSpacePanning===!0?A.setFromMatrixColumn(Oe,1):(A.setFromMatrixColumn(Oe,0),A.crossVectors(i.object.up,A)),A.multiplyScalar(Ce),p.add(A)}}(),N=function(){const A=new Ae;return function(Ce,Oe){const Ye=i.domElement;if(i.object.isPerspectiveCamera){const zt=i.object.position;A.copy(zt).sub(i.target);let qt=A.length();qt*=Math.tan(i.object.fov/2*Math.PI/180),O(2*Ce*qt/Ye.clientHeight,i.object.matrix),F(2*Oe*qt/Ye.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(O(Ce*(i.object.right-i.object.left)/i.object.zoom/Ye.clientWidth,i.object.matrix),F(Oe*(i.object.top-i.object.bottom)/i.object.zoom/Ye.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function W(A){i.object.isPerspectiveCamera?d/=A:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*A)),i.object.updateProjectionMatrix(),r=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function q(A){i.object.isPerspectiveCamera?d*=A:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/A)),i.object.updateProjectionMatrix(),r=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function X(A){l.set(A.clientX,A.clientY)}function re(A){_.set(A.clientX,A.clientY)}function K(A){u.set(A.clientX,A.clientY)}function le(A){a.set(A.clientX,A.clientY),f.subVectors(a,l).multiplyScalar(i.rotateSpeed);const J=i.domElement;E(2*Math.PI*f.x/J.clientHeight),I(2*Math.PI*f.y/J.clientHeight),l.copy(a),i.update()}function we(A){S.set(A.clientX,A.clientY),w.subVectors(S,_),w.y>0?W(M()):w.y<0&&q(M()),_.copy(S),i.update()}function se(A){m.set(A.clientX,A.clientY),v.subVectors(m,u).multiplyScalar(i.panSpeed),N(v.x,v.y),u.copy(m),i.update()}function ie(A){A.deltaY<0?q(M()):A.deltaY>0&&W(M()),i.update()}function xe(A){let J=!1;switch(A.code){case i.keys.UP:N(0,i.keyPanSpeed),J=!0;break;case i.keys.BOTTOM:N(0,-i.keyPanSpeed),J=!0;break;case i.keys.LEFT:N(i.keyPanSpeed,0),J=!0;break;case i.keys.RIGHT:N(-i.keyPanSpeed,0),J=!0;break}J&&(A.preventDefault(),i.update())}function ue(){if(x.length===1)l.set(x[0].pageX,x[0].pageY);else{const A=.5*(x[0].pageX+x[1].pageX),J=.5*(x[0].pageY+x[1].pageY);l.set(A,J)}}function _e(){if(x.length===1)u.set(x[0].pageX,x[0].pageY);else{const A=.5*(x[0].pageX+x[1].pageX),J=.5*(x[0].pageY+x[1].pageY);u.set(A,J)}}function De(){const A=x[0].pageX-x[1].pageX,J=x[0].pageY-x[1].pageY,Ce=Math.sqrt(A*A+J*J);_.set(0,Ce)}function Le(){i.enableZoom&&De(),i.enablePan&&_e()}function _t(){i.enableZoom&&De(),i.enableRotate&&ue()}function rt(A){if(x.length==1)a.set(A.pageX,A.pageY);else{const Ce=Ct(A),Oe=.5*(A.pageX+Ce.x),Ye=.5*(A.pageY+Ce.y);a.set(Oe,Ye)}f.subVectors(a,l).multiplyScalar(i.rotateSpeed);const J=i.domElement;E(2*Math.PI*f.x/J.clientHeight),I(2*Math.PI*f.y/J.clientHeight),l.copy(a)}function Rt(A){if(x.length===1)m.set(A.pageX,A.pageY);else{const J=Ct(A),Ce=.5*(A.pageX+J.x),Oe=.5*(A.pageY+J.y);m.set(Ce,Oe)}v.subVectors(m,u).multiplyScalar(i.panSpeed),N(v.x,v.y),u.copy(m)}function Fe(A){const J=Ct(A),Ce=A.pageX-J.x,Oe=A.pageY-J.y,Ye=Math.sqrt(Ce*Ce+Oe*Oe);S.set(0,Ye),w.set(0,Math.pow(S.y/_.y,i.zoomSpeed)),W(w.y),_.copy(S)}function Ee(A){i.enableZoom&&Fe(A),i.enablePan&&Rt(A)}function Ge(A){i.enableZoom&&Fe(A),i.enableRotate&&rt(A)}function Se(A){i.enabled!==!1&&(x.length===0&&(i.domElement.setPointerCapture(A.pointerId),i.domElement.addEventListener("pointermove",Tt),i.domElement.addEventListener("pointerup",me)),ve(A),A.pointerType==="touch"?ht(A):Ie(A))}function Tt(A){i.enabled!==!1&&(A.pointerType==="touch"?Et(A):st(A))}function me(A){Ne(A),x.length===0&&(i.domElement.releasePointerCapture(A.pointerId),i.domElement.removeEventListener("pointermove",Tt),i.domElement.removeEventListener("pointerup",me)),i.dispatchEvent(mn),s=n.NONE}function Pe(A){Ne(A)}function Ie(A){let J;switch(A.button){case 0:J=i.mouseButtons.LEFT;break;case 1:J=i.mouseButtons.MIDDLE;break;case 2:J=i.mouseButtons.RIGHT;break;default:J=-1}switch(J){case $t.DOLLY:if(i.enableZoom===!1)return;re(A),s=n.DOLLY;break;case $t.ROTATE:if(A.ctrlKey||A.metaKey||A.shiftKey){if(i.enablePan===!1)return;K(A),s=n.PAN}else{if(i.enableRotate===!1)return;X(A),s=n.ROTATE}break;case $t.PAN:if(A.ctrlKey||A.metaKey||A.shiftKey){if(i.enableRotate===!1)return;X(A),s=n.ROTATE}else{if(i.enablePan===!1)return;K(A),s=n.PAN}break;default:s=n.NONE}s!==n.NONE&&i.dispatchEvent(Ts)}function st(A){if(i.enabled!==!1)switch(s){case n.ROTATE:if(i.enableRotate===!1)return;le(A);break;case n.DOLLY:if(i.enableZoom===!1)return;we(A);break;case n.PAN:if(i.enablePan===!1)return;se(A);break}}function ft(A){i.enabled===!1||i.enableZoom===!1||s!==n.NONE||(A.preventDefault(),i.dispatchEvent(Ts),ie(A),i.dispatchEvent(mn))}function je(A){i.enabled===!1||i.enablePan===!1||xe(A)}function ht(A){switch(ut(A),x.length){case 1:switch(i.touches.ONE){case Zt.ROTATE:if(i.enableRotate===!1)return;ue(),s=n.TOUCH_ROTATE;break;case Zt.PAN:if(i.enablePan===!1)return;_e(),s=n.TOUCH_PAN;break;default:s=n.NONE}break;case 2:switch(i.touches.TWO){case Zt.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Le(),s=n.TOUCH_DOLLY_PAN;break;case Zt.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;_t(),s=n.TOUCH_DOLLY_ROTATE;break;default:s=n.NONE}break;default:s=n.NONE}s!==n.NONE&&i.dispatchEvent(Ts)}function Et(A){switch(ut(A),s){case n.TOUCH_ROTATE:if(i.enableRotate===!1)return;rt(A),i.update();break;case n.TOUCH_PAN:if(i.enablePan===!1)return;Rt(A),i.update();break;case n.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ee(A),i.update();break;case n.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ge(A),i.update();break;default:s=n.NONE}}function fe(A){i.enabled!==!1&&A.preventDefault()}function ve(A){x.push(A)}function Ne(A){delete y[A.pointerId];for(let J=0;J<x.length;J++)if(x[J].pointerId==A.pointerId){x.splice(J,1);return}}function ut(A){let J=y[A.pointerId];J===void 0&&(J=new Me,y[A.pointerId]=J),J.set(A.pageX,A.pageY)}function Ct(A){const J=A.pointerId===x[0].pointerId?x[1]:x[0];return y[J.pointerId]}i.domElement.addEventListener("contextmenu",fe),i.domElement.addEventListener("pointerdown",Se),i.domElement.addEventListener("pointercancel",Pe),i.domElement.addEventListener("wheel",ft,{passive:!1}),this.update()}}class ua extends br{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new ga(t)}),this.register(function(t){return new Ta(t)}),this.register(function(t){return new Sa(t)}),this.register(function(t){return new wa(t)}),this.register(function(t){return new xa(t)}),this.register(function(t){return new ya(t)}),this.register(function(t){return new ba(t)}),this.register(function(t){return new ma(t)}),this.register(function(t){return new _a(t)}),this.register(function(t){return new va(t)}),this.register(function(t){return new fa(t)}),this.register(function(t){return new Ma(t)})}load(e,t,i,n){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=yi.extractUrlBase(e),this.manager.itemStart(e);const h=function(d){n?n(d):console.error(d),s.manager.itemError(e),s.manager.itemEnd(e)},c=new ls(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(d){try{s.parse(d,o,function(p){t(p),s.manager.itemEnd(e)},h)}catch(p){h(p)}},i,h)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,n){let s;const o={},h={};if(typeof e=="string")s=e;else if(yi.decodeText(new Uint8Array(e,0,4))===Hr){try{o[He.KHR_BINARY_GLTF]=new Pa(e)}catch(r){n&&n(r);return}s=o[He.KHR_BINARY_GLTF].content}else s=yi.decodeText(new Uint8Array(e));const c=JSON.parse(s);if(c.asset===void 0||c.asset.version[0]<2){n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new Fa(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const r=this.pluginCallbacks[p](d);h[r.name]=r,o[r.name]=!0}if(c.extensionsUsed)for(let p=0;p<c.extensionsUsed.length;++p){const r=c.extensionsUsed[p],l=c.extensionsRequired||[];switch(r){case He.KHR_MATERIALS_UNLIT:o[r]=new pa;break;case He.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[r]=new Ca;break;case He.KHR_DRACO_MESH_COMPRESSION:o[r]=new Aa(c,this.dracoLoader);break;case He.KHR_TEXTURE_TRANSFORM:o[r]=new Ea;break;case He.KHR_MESH_QUANTIZATION:o[r]=new Oa;break;default:l.indexOf(r)>=0&&h[r]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+r+'".')}}d.setExtensions(o),d.setPlugins(h),d.parse(i,n)}parseAsync(e,t){const i=this;return new Promise(function(n,s){i.parse(e,t,n,s)})}}function da(){let g={};return{get:function(e){return g[e]},add:function(e,t){g[e]=t},remove:function(e){delete g[e]},removeAll:function(){g={}}}}const He={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class fa{constructor(e){this.parser=e,this.name=He.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,n=t.length;i<n;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let n=t.cache.get(i);if(n)return n;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let d;const p=new Ke(16777215);c.color!==void 0&&p.fromArray(c.color);const r=c.range!==void 0?c.range:0;switch(c.type){case"directional":d=new Sr(p),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new Tr(p),d.distance=r;break;case"spot":d=new _r(p),d.distance=r,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,d.angle=c.spot.outerConeAngle,d.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return d.position.set(0,0,0),d.decay=2,c.intensity!==void 0&&(d.intensity=c.intensity),d.name=t.createUniqueName(c.name||"light_"+e),n=Promise.resolve(d),t.cache.add(i,n),n}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],h=(s.extensions&&s.extensions[this.name]||{}).light;return h===void 0?null:this._loadLight(h).then(function(c){return i._getNodeRef(t.cache,h,c)})}}class pa{constructor(){this.name=He.KHR_MATERIALS_UNLIT}getMaterialType(){return kt}extendParams(e,t,i){const n=[];e.color=new Ke(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&n.push(i.assignTexture(e,"map",s.baseColorTexture,it))}return Promise.all(n)}}class ma{constructor(e){this.parser=e,this.name=He.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=n.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class ga{constructor(e){this.parser=e,this.name=He.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:di}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const h=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Me(h,h)}return Promise.all(s)}}class va{constructor(e){this.parser=e,this.name=He.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:di}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class wa{constructor(e){this.parser=e,this.name=He.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:di}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ke(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=n.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,it)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class xa{constructor(e){this.parser=e,this.name=He.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:di}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class ya{constructor(e){this.parser=e,this.name=He.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:di}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const h=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ke(h[0],h[1],h[2]),Promise.all(s)}}class ba{constructor(e){this.parser=e,this.name=He.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:di}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=n.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class _a{constructor(e){this.parser=e,this.name=He.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:di}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const h=o.specularColorFactor||[1,1,1];return t.specularColor=new Ke(h[0],h[1],h[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,it)),Promise.all(s)}}class Ta{constructor(e){this.parser=e,this.name=He.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,n=i.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const s=n.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Sa{constructor(e){this.parser=e,this.name=He.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,n=i.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],h=n.images[o.source];let c=i.textureLoader;if(h.uri){const d=i.options.manager.getHandler(h.uri);d!==null&&(c=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(e,o.source,c);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Ma{constructor(e){this.name=He.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const n=i.extensions[this.name],s=this.parser.getDependency("buffer",n.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(h){const c=n.byteOffset||0,d=n.byteLength||0,p=n.count,r=n.byteStride,l=new ArrayBuffer(p*r),a=new Uint8Array(h[0],c,d);return o.decodeGltfBuffer(new Uint8Array(l),p,r,a,n.mode,n.filter),l})}else return null}}const Hr="glTF",Fi=12,gn={JSON:1313821514,BIN:5130562};class Pa{constructor(e){this.name=He.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Fi);if(this.header={magic:yi.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Hr)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Fi,n=new DataView(e,Fi);let s=0;for(;s<i;){const o=n.getUint32(s,!0);s+=4;const h=n.getUint32(s,!0);if(s+=4,h===gn.JSON){const c=new Uint8Array(e,Fi+s,o);this.content=yi.decodeText(c)}else if(h===gn.BIN){const c=Fi+s;this.body=e.slice(c,c+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Aa{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=He.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,n=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,h={},c={},d={};for(const p in o){const r=Bs[p]||p.toLowerCase();h[r]=o[p]}for(const p in e.attributes){const r=Bs[p]||p.toLowerCase();if(o[p]!==void 0){const l=i.accessors[e.attributes[p]],a=Ki[l.componentType];d[r]=a,c[r]=l.normalized===!0}}return t.getDependency("bufferView",s).then(function(p){return new Promise(function(r){n.decodeDracoFile(p,function(l){for(const a in l.attributes){const f=l.attributes[a],u=c[a];u!==void 0&&(f.normalized=u)}r(l)},h,d)})})}}class Ea{constructor(){this.name=He.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Hs extends It{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),n=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),h={specular:{value:new Ke().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=h,this.onBeforeCompile=function(c){for(const d in h)c.uniforms[d]=h[d];c.fragmentShader=c.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",n).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return h.specular.value},set:function(c){h.specular.value=c}},specularMap:{get:function(){return h.specularMap.value},set:function(c){h.specularMap.value=c,c?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return h.glossiness.value},set:function(c){h.glossiness.value=c}},glossinessMap:{get:function(){return h.glossinessMap.value},set:function(c){h.glossinessMap.value=c,c?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Ca{constructor(){this.name=He.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return Hs}extendParams(e,t,i){const n=t.extensions[this.name];e.color=new Ke(1,1,1),e.opacity=1;const s=[];if(Array.isArray(n.diffuseFactor)){const o=n.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(n.diffuseTexture!==void 0&&s.push(i.assignTexture(e,"map",n.diffuseTexture,it)),e.emissive=new Ke(0,0,0),e.glossiness=n.glossinessFactor!==void 0?n.glossinessFactor:1,e.specular=new Ke(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),n.specularGlossinessTexture!==void 0){const o=n.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,it))}return Promise.all(s)}createMaterial(e){const t=new Hs(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=oo,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class Oa{constructor(){this.name=He.KHR_MESH_QUANTIZATION}}class Br extends ao{constructor(e,t,i,n){super(e,t,i,n)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,s=e*n*3+n;for(let o=0;o!==n;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,n){const s=this.resultBuffer,o=this.sampleValues,h=this.valueSize,c=h*2,d=h*3,p=n-t,r=(i-t)/p,l=r*r,a=l*r,f=e*d,u=f-d,m=-2*a+3*l,v=a-l,_=1-m,S=v-l+r;for(let w=0;w!==h;w++){const x=o[u+w+h],y=o[u+w+c]*p,b=o[f+w+h],M=o[f+w]*p;s[w]=_*x+S*y+m*b+v*M}return s}}const ka=new Yi;class La extends Br{interpolate_(e,t,i,n){const s=super.interpolate_(e,t,i,n);return ka.fromArray(s).normalize().toArray(s),s}}const li={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ki={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},vn={9728:lo,9729:cs,9984:co,9985:ho,9986:uo,9987:Mr},wn={33071:fo,33648:po,10497:Ci},xn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Bs={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},pi={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ia={CUBICSPLINE:void 0,LINEAR:Pr,STEP:mo},Ss={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ra(g){return g.DefaultMaterial===void 0&&(g.DefaultMaterial=new It({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Io})),g.DefaultMaterial}function Ni(g,e,t){for(const i in t.extensions)g[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function wi(g,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(g.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Da(g,e,t){let i=!1,n=!1,s=!1;for(let d=0,p=e.length;d<p;d++){const r=e[d];if(r.POSITION!==void 0&&(i=!0),r.NORMAL!==void 0&&(n=!0),r.COLOR_0!==void 0&&(s=!0),i&&n&&s)break}if(!i&&!n&&!s)return Promise.resolve(g);const o=[],h=[],c=[];for(let d=0,p=e.length;d<p;d++){const r=e[d];if(i){const l=r.POSITION!==void 0?t.getDependency("accessor",r.POSITION):g.attributes.position;o.push(l)}if(n){const l=r.NORMAL!==void 0?t.getDependency("accessor",r.NORMAL):g.attributes.normal;h.push(l)}if(s){const l=r.COLOR_0!==void 0?t.getDependency("accessor",r.COLOR_0):g.attributes.color;c.push(l)}}return Promise.all([Promise.all(o),Promise.all(h),Promise.all(c)]).then(function(d){const p=d[0],r=d[1],l=d[2];return i&&(g.morphAttributes.position=p),n&&(g.morphAttributes.normal=r),s&&(g.morphAttributes.color=l),g.morphTargetsRelative=!0,g})}function Ha(g,e){if(g.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)g.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(g.morphTargetInfluences.length===t.length){g.morphTargetDictionary={};for(let i=0,n=t.length;i<n;i++)g.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ba(g){const e=g.extensions&&g.extensions[He.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+yn(e.attributes):t=g.indices+":"+yn(g.attributes)+":"+g.mode,t}function yn(g){let e="";const t=Object.keys(g).sort();for(let i=0,n=t.length;i<n;i++)e+=t[i]+":"+g[t[i]]+";";return e}function zs(g){switch(g){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function za(g){return g.search(/\.jpe?g($|\?)/i)>0||g.search(/^data\:image\/jpeg/)===0?"image/jpeg":g.search(/\.webp($|\?)/i)>0||g.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class Fa{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new da,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,n=navigator.userAgent.indexOf("Firefox")>-1,s=n?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||i||n&&s<98?this.textureLoader=new Ws(this.options.manager):this.textureLoader=new go(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ls(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,n=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const h={scene:o[0][n.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:n.asset,parser:i,userData:{}};Ni(s,h,n),wi(h,n),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(h)})).then(function(){e(h)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let n=0,s=t.length;n<s;n++){const o=t[n].joints;for(let h=0,c=o.length;h<c;h++)e[o[h]].isBone=!0}for(let n=0,s=e.length;n<s;n++){const o=e[n];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const n=i.clone(),s=(o,h)=>{const c=this.associations.get(o);c!=null&&this.associations.set(h,c);for(const[d,p]of o.children.entries())s(p,h.children[d])};return s(i,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const n=e(t[i]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let n=0;n<t.length;n++){const s=e(t[n]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let n=this.cache.get(i);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":n=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,n=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(n.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[He.KHR_BINARY_GLTF].body);const n=this.options;return new Promise(function(s,o){i.load(yi.resolveURL(t.uri,n.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const n=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+n)})}loadAccessor(e){const t=this,i=this.json,n=this.json.accessors[e];if(n.bufferView===void 0&&n.sparse===void 0)return Promise.resolve(null);const s=[];return n.bufferView!==void 0?s.push(this.getDependency("bufferView",n.bufferView)):s.push(null),n.sparse!==void 0&&(s.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(s).then(function(o){const h=o[0],c=xn[n.type],d=Ki[n.componentType],p=d.BYTES_PER_ELEMENT,r=p*c,l=n.byteOffset||0,a=n.bufferView!==void 0?i.bufferViews[n.bufferView].byteStride:void 0,f=n.normalized===!0;let u,m;if(a&&a!==r){const v=Math.floor(l/a),_="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+v+":"+n.count;let S=t.cache.get(_);S||(u=new d(h,v*a,n.count*a/p),S=new vo(u,a/p),t.cache.add(_,S)),m=new wo(S,c,l%a/p,f)}else h===null?u=new d(n.count*c):u=new d(h,l,n.count*c),m=new Oi(u,c,f);if(n.sparse!==void 0){const v=xn.SCALAR,_=Ki[n.sparse.indices.componentType],S=n.sparse.indices.byteOffset||0,w=n.sparse.values.byteOffset||0,x=new _(o[1],S,n.sparse.count*v),y=new d(o[2],w,n.sparse.count*c);h!==null&&(m=new Oi(m.array.slice(),m.itemSize,m.normalized));for(let b=0,M=x.length;b<M;b++){const E=x[b];if(m.setX(E,y[b*c]),c>=2&&m.setY(E,y[b*c+1]),c>=3&&m.setZ(E,y[b*c+2]),c>=4&&m.setW(E,y[b*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let h=this.textureLoader;if(o.uri){const c=i.manager.getHandler(o.uri);c!==null&&(h=c)}return this.loadTextureImage(e,s,h)}loadTextureImage(e,t,i){const n=this,s=this.json,o=s.textures[e],h=s.images[t],c=(h.uri||h.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const d=this.loadImageSource(t,i).then(function(p){p.flipY=!1,o.name&&(p.name=o.name);const l=(s.samplers||{})[o.sampler]||{};return p.magFilter=vn[l.magFilter]||cs,p.minFilter=vn[l.minFilter]||Mr,p.wrapS=wn[l.wrapS]||Ci,p.wrapT=wn[l.wrapT]||Ci,n.associations.set(p,{textures:e}),p}).catch(function(){return null});return this.textureCache[c]=d,d}loadImageSource(e,t){const i=this,n=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(r=>r.clone());const o=n.images[e],h=self.URL||self.webkitURL;let c=o.uri||"",d=!1;if(o.bufferView!==void 0)c=i.getDependency("bufferView",o.bufferView).then(function(r){d=!0;const l=new Blob([r],{type:o.mimeType});return c=h.createObjectURL(l),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(c).then(function(r){return new Promise(function(l,a){let f=l;t.isImageBitmapLoader===!0&&(f=function(u){const m=new un(u);m.needsUpdate=!0,l(m)}),t.load(yi.resolveURL(r,s.path),f,void 0,a)})}).then(function(r){return d===!0&&h.revokeObjectURL(c),r.userData.mimeType=o.mimeType||za(o.uri),r}).catch(function(r){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),r});return this.sourceCache[e]=p,p}assignTexture(e,t,i,n){const s=this;return this.getDependency("texture",i.index).then(function(o){if(i.texCoord!==void 0&&i.texCoord!=0&&!(t==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[He.KHR_TEXTURE_TRANSFORM]){const h=i.extensions!==void 0?i.extensions[He.KHR_TEXTURE_TRANSFORM]:void 0;if(h){const c=s.associations.get(o);o=s.extensions[He.KHR_TEXTURE_TRANSFORM].extendTexture(o,h),s.associations.set(o,c)}}return n!==void 0&&(o.encoding=n),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const n=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const h="PointsMaterial:"+i.uuid;let c=this.cache.get(h);c||(c=new xo,_s.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(h,c)),i=c}else if(e.isLine){const h="LineBasicMaterial:"+i.uuid;let c=this.cache.get(h);c||(c=new yo,_s.prototype.copy.call(c,i),c.color.copy(i.color),this.cache.add(h,c)),i=c}if(n||s||o){let h="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),n&&(h+="derivative-tangents:"),s&&(h+="vertex-colors:"),o&&(h+="flat-shading:");let c=this.cache.get(h);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),n&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(h,c),this.associations.set(c,this.associations.get(i))),i=c}i.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return It}loadMaterial(e){const t=this,i=this.json,n=this.extensions,s=i.materials[e];let o;const h={},c=s.extensions||{},d=[];if(c[He.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const r=n[He.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=r.getMaterialType(),d.push(r.extendParams(h,s,t))}else if(c[He.KHR_MATERIALS_UNLIT]){const r=n[He.KHR_MATERIALS_UNLIT];o=r.getMaterialType(),d.push(r.extendParams(h,s,t))}else{const r=s.pbrMetallicRoughness||{};if(h.color=new Ke(1,1,1),h.opacity=1,Array.isArray(r.baseColorFactor)){const l=r.baseColorFactor;h.color.fromArray(l),h.opacity=l[3]}r.baseColorTexture!==void 0&&d.push(t.assignTexture(h,"map",r.baseColorTexture,it)),h.metalness=r.metallicFactor!==void 0?r.metallicFactor:1,h.roughness=r.roughnessFactor!==void 0?r.roughnessFactor:1,r.metallicRoughnessTexture!==void 0&&(d.push(t.assignTexture(h,"metalnessMap",r.metallicRoughnessTexture)),d.push(t.assignTexture(h,"roughnessMap",r.metallicRoughnessTexture))),o=this._invokeOne(function(l){return l.getMaterialType&&l.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(l){return l.extendMaterialParams&&l.extendMaterialParams(e,h)})))}s.doubleSided===!0&&(h.side=hs);const p=s.alphaMode||Ss.OPAQUE;if(p===Ss.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,p===Ss.MASK&&(h.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==kt&&(d.push(t.assignTexture(h,"normalMap",s.normalTexture)),h.normalScale=new Me(1,1),s.normalTexture.scale!==void 0)){const r=s.normalTexture.scale;h.normalScale.set(r,r)}return s.occlusionTexture!==void 0&&o!==kt&&(d.push(t.assignTexture(h,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==kt&&(h.emissive=new Ke().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==kt&&d.push(t.assignTexture(h,"emissiveMap",s.emissiveTexture,it)),Promise.all(d).then(function(){let r;return o===Hs?r=n[He.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(h):r=new o(h),s.name&&(r.name=s.name),wi(r,s),t.associations.set(r,{materials:e}),s.extensions&&Ni(n,r,s),r})}createUniqueName(e){const t=bo.sanitizeNodeName(e||"");let i=t;for(let n=1;this.nodeNamesUsed[i];++n)i=t+"_"+n;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,n=this.primitiveCache;function s(h){return i[He.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,t).then(function(c){return bn(c,h,t)})}const o=[];for(let h=0,c=e.length;h<c;h++){const d=e[h],p=Ba(d),r=n[p];if(r)o.push(r.promise);else{let l;d.extensions&&d.extensions[He.KHR_DRACO_MESH_COMPRESSION]?l=s(d):l=bn(new Qi,d,t),n[p]={primitive:d,promise:l},o.push(l)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,n=this.extensions,s=i.meshes[e],o=s.primitives,h=[];for(let c=0,d=o.length;c<d;c++){const p=o[c].material===void 0?Ra(this.cache):this.getDependency("material",o[c].material);h.push(p)}return h.push(t.loadGeometries(o)),Promise.all(h).then(function(c){const d=c.slice(0,c.length-1),p=c[c.length-1],r=[];for(let a=0,f=p.length;a<f;a++){const u=p[a],m=o[a];let v;const _=d[a];if(m.mode===li.TRIANGLES||m.mode===li.TRIANGLE_STRIP||m.mode===li.TRIANGLE_FAN||m.mode===void 0)v=s.isSkinnedMesh===!0?new _o(u,_):new Ue(u,_),v.isSkinnedMesh===!0&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),m.mode===li.TRIANGLE_STRIP?v.geometry=_n(v.geometry,To):m.mode===li.TRIANGLE_FAN&&(v.geometry=_n(v.geometry,Ar));else if(m.mode===li.LINES)v=new So(u,_);else if(m.mode===li.LINE_STRIP)v=new Mo(u,_);else if(m.mode===li.LINE_LOOP)v=new Po(u,_);else if(m.mode===li.POINTS)v=new Er(u,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(v.geometry.morphAttributes).length>0&&Ha(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),wi(v,s),m.extensions&&Ni(n,v,m),t.assignFinalMaterial(v),r.push(v)}for(let a=0,f=r.length;a<f;a++)t.associations.set(r[a],{meshes:e,primitives:a});if(r.length===1)return r[0];const l=new ye;t.associations.set(l,{meshes:e});for(let a=0,f=r.length;a<f;a++)l.add(r[a]);return l})}loadCamera(e){let t;const i=this.json.cameras[e],n=i[i.type];if(!n){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Ys(Xi.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):i.type==="orthographic"&&(t=new Xs(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),wi(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(n){return i.inverseBindMatrices=n,i})}loadAnimation(e){const i=this.json.animations[e],n=[],s=[],o=[],h=[],c=[];for(let d=0,p=i.channels.length;d<p;d++){const r=i.channels[d],l=i.samplers[r.sampler],a=r.target,f=a.node!==void 0?a.node:a.id,u=i.parameters!==void 0?i.parameters[l.input]:l.input,m=i.parameters!==void 0?i.parameters[l.output]:l.output;n.push(this.getDependency("node",f)),s.push(this.getDependency("accessor",u)),o.push(this.getDependency("accessor",m)),h.push(l),c.push(a)}return Promise.all([Promise.all(n),Promise.all(s),Promise.all(o),Promise.all(h),Promise.all(c)]).then(function(d){const p=d[0],r=d[1],l=d[2],a=d[3],f=d[4],u=[];for(let v=0,_=p.length;v<_;v++){const S=p[v],w=r[v],x=l[v],y=a[v],b=f[v];if(S===void 0)continue;S.updateMatrix(),S.matrixAutoUpdate=!0;let M;switch(pi[b.path]){case pi.weights:M=Eo;break;case pi.rotation:M=hn;break;case pi.position:case pi.scale:default:M=Ao;break}const E=S.name?S.name:S.uuid,I=y.interpolation!==void 0?Ia[y.interpolation]:Pr,O=[];pi[b.path]===pi.weights?S.traverse(function(N){N.morphTargetInfluences&&O.push(N.name?N.name:N.uuid)}):O.push(E);let F=x.array;if(x.normalized){const N=zs(F.constructor),W=new Float32Array(F.length);for(let q=0,X=F.length;q<X;q++)W[q]=F[q]*N;F=W}for(let N=0,W=O.length;N<W;N++){const q=new M(O[N]+"."+pi[b.path],w.array,F,I);y.interpolation==="CUBICSPLINE"&&(q.createInterpolant=function(re){const K=this instanceof hn?La:Br;return new K(this.times,this.values,this.getValueSize()/3,re)},q.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(q)}}const m=i.name?i.name:"animation_"+e;return new Co(m,void 0,u)})}createNodeMesh(e){const t=this.json,i=this,n=t.nodes[e];return n.mesh===void 0?null:i.getDependency("mesh",n.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,n.mesh,s);return n.weights!==void 0&&o.traverse(function(h){if(!!h.isMesh)for(let c=0,d=n.weights.length;c<d;c++)h.morphTargetInfluences[c]=n.weights[c]}),o})}loadNode(e){const t=this.json,i=this.extensions,n=this,s=t.nodes[e],o=s.name?n.createUniqueName(s.name):"";return function(){const h=[],c=n._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});return c&&h.push(c),s.camera!==void 0&&h.push(n.getDependency("camera",s.camera).then(function(d){return n._getNodeRef(n.cameraCache,s.camera,d)})),n._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){h.push(d)}),Promise.all(h)}().then(function(h){let c;if(s.isBone===!0?c=new Oo:h.length>1?c=new ye:h.length===1?c=h[0]:c=new ko,c!==h[0])for(let d=0,p=h.length;d<p;d++)c.add(h[d]);if(s.name&&(c.userData.name=s.name,c.name=o),wi(c,s),s.extensions&&Ni(i,c,s),s.matrix!==void 0){const d=new Ks;d.fromArray(s.matrix),c.applyMatrix4(d)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return n.associations.has(c)||n.associations.set(c,{}),n.associations.get(c).nodes=e,c})}loadScene(e){const t=this.json,i=this.extensions,n=this.json.scenes[e],s=this,o=new ye;n.name&&(o.name=s.createUniqueName(n.name)),wi(o,n),n.extensions&&Ni(i,o,n);const h=n.nodes||[],c=[];for(let d=0,p=h.length;d<p;d++)c.push(zr(h[d],o,t,s));return Promise.all(c).then(function(){const d=p=>{const r=new Map;for(const[l,a]of s.associations)(l instanceof _s||l instanceof un)&&r.set(l,a);return p.traverse(l=>{const a=s.associations.get(l);a!=null&&r.set(l,a)}),r};return s.associations=d(o),o})}}function zr(g,e,t,i){const n=t.nodes[g];return i.getDependency("node",g).then(function(s){if(n.skin===void 0)return s;let o;return i.getDependency("skin",n.skin).then(function(h){o=h;const c=[];for(let d=0,p=o.joints.length;d<p;d++)c.push(i.getDependency("node",o.joints[d]));return Promise.all(c)}).then(function(h){return s.traverse(function(c){if(!c.isMesh)return;const d=[],p=[];for(let r=0,l=h.length;r<l;r++){const a=h[r];if(a){d.push(a);const f=new Ks;o.inverseBindMatrices!==void 0&&f.fromArray(o.inverseBindMatrices.array,r*16),p.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[r])}c.bind(new Lo(d,p),c.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(n.children){const h=n.children;for(let c=0,d=h.length;c<d;c++){const p=h[c];o.push(zr(p,s,t,i))}}return Promise.all(o)})}function Na(g,e,t){const i=e.attributes,n=new Ro;if(i.POSITION!==void 0){const h=t.json.accessors[i.POSITION],c=h.min,d=h.max;if(c!==void 0&&d!==void 0){if(n.set(new Ae(c[0],c[1],c[2]),new Ae(d[0],d[1],d[2])),h.normalized){const p=zs(Ki[h.componentType]);n.min.multiplyScalar(p),n.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const h=new Ae,c=new Ae;for(let d=0,p=s.length;d<p;d++){const r=s[d];if(r.POSITION!==void 0){const l=t.json.accessors[r.POSITION],a=l.min,f=l.max;if(a!==void 0&&f!==void 0){if(c.setX(Math.max(Math.abs(a[0]),Math.abs(f[0]))),c.setY(Math.max(Math.abs(a[1]),Math.abs(f[1]))),c.setZ(Math.max(Math.abs(a[2]),Math.abs(f[2]))),l.normalized){const u=zs(Ki[l.componentType]);c.multiplyScalar(u)}h.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}n.expandByVector(h)}g.boundingBox=n;const o=new Do;n.getCenter(o.center),o.radius=n.min.distanceTo(n.max)/2,g.boundingSphere=o}function bn(g,e,t){const i=e.attributes,n=[];function s(o,h){return t.getDependency("accessor",o).then(function(c){g.setAttribute(h,c)})}for(const o in i){const h=Bs[o]||o.toLowerCase();h in g.attributes||n.push(s(i[o],h))}if(e.indices!==void 0&&!g.index){const o=t.getDependency("accessor",e.indices).then(function(h){g.setIndex(h)});n.push(o)}return wi(g,e),Na(g,e,t),Promise.all(n).then(function(){return e.targets!==void 0?Da(g,e.targets,t):g})}function _n(g,e){let t=g.getIndex();if(t===null){const o=[],h=g.getAttribute("position");if(h!==void 0){for(let c=0;c<h.count;c++)o.push(c);g.setIndex(o),t=g.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),g}const i=t.count-2,n=[];if(e===Ar)for(let o=1;o<=i;o++)n.push(t.getX(0)),n.push(t.getX(o)),n.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(n.push(t.getX(o)),n.push(t.getX(o+1)),n.push(t.getX(o+2))):(n.push(t.getX(o+2)),n.push(t.getX(o+1)),n.push(t.getX(o)));n.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=g.clone();return s.setIndex(n),s}const Ms=new WeakMap;class Va extends br{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,n){const s=new ls(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const h={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,h).then(t).catch(n)},i,n)}decodeDracoFile(e,t,i,n){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const d=t.attributeTypes[c];d.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=d.name)}const i=JSON.stringify(t);if(Ms.has(e)){const c=Ms.get(e);if(c.key===i)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n;const s=this.workerNextTaskID++,o=e.byteLength,h=this._getWorker(s,o).then(c=>(n=c,new Promise((d,p)=>{n._callbacks[s]={resolve:d,reject:p},n.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return h.catch(()=>!0).then(()=>{n&&s&&this._releaseTask(n,s)}),Ms.set(e,{key:i,promise:h}),h}_createGeometry(e){const t=new Qi;e.index&&t.setIndex(new Oi(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const n=e.attributes[i],s=n.name,o=n.array,h=n.itemSize;t.setAttribute(s,new Oi(o,h))}return t}_loadLibrary(e,t){const i=new ls(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((n,s)=>{i.load(e,n,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const n=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=Ua.toString(),o=["/* draco decoder */",n,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const n=new Worker(this.workerSourceURL);n._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(s){const o=s.data;switch(o.type){case"decode":n._callbacks[o.id].resolve(o);break;case"error":n._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(n)}else this.workerPool.sort(function(n,s){return n._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Ua(){let g,e;onmessage=function(o){const h=o.data;switch(h.type){case"init":g=h.decoderConfig,e=new Promise(function(p){g.onModuleLoaded=function(r){p({draco:r})},DracoDecoderModule(g)});break;case"decode":const c=h.buffer,d=h.taskConfig;e.then(p=>{const r=p.draco,l=new r.Decoder,a=new r.DecoderBuffer;a.Init(new Int8Array(c),c.byteLength);try{const f=t(r,l,a,d),u=f.attributes.map(m=>m.array.buffer);f.index&&u.push(f.index.array.buffer),self.postMessage({type:"decode",id:h.id,geometry:f},u)}catch(f){console.error(f),self.postMessage({type:"error",id:h.id,error:f.message})}finally{r.destroy(a),r.destroy(l)}});break}};function t(o,h,c,d){const p=d.attributeIDs,r=d.attributeTypes;let l,a;const f=h.GetEncodedGeometryType(c);if(f===o.TRIANGULAR_MESH)l=new o.Mesh,a=h.DecodeBufferToMesh(c,l);else if(f===o.POINT_CLOUD)l=new o.PointCloud,a=h.DecodeBufferToPointCloud(c,l);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!a.ok()||l.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());const u={index:null,attributes:[]};for(const m in p){const v=self[r[m]];let _,S;if(d.useUniqueIDs)S=p[m],_=h.GetAttributeByUniqueId(l,S);else{if(S=h.GetAttributeId(l,o[p[m]]),S===-1)continue;_=h.GetAttribute(l,S)}u.attributes.push(n(o,h,l,m,v,_))}return f===o.TRIANGULAR_MESH&&(u.index=i(o,h,l)),o.destroy(l),u}function i(o,h,c){const p=c.num_faces()*3,r=p*4,l=o._malloc(r);h.GetTrianglesUInt32Array(c,r,l);const a=new Uint32Array(o.HEAPF32.buffer,l,p).slice();return o._free(l),{array:a,itemSize:1}}function n(o,h,c,d,p,r){const l=r.num_components(),f=c.num_points()*l,u=f*p.BYTES_PER_ELEMENT,m=s(o,p),v=o._malloc(u);h.GetAttributeDataArrayForAllPoints(c,r,m,u,v);const _=new p(o.HEAPF32.buffer,v,f).slice();return o._free(v),{name:d,array:_,itemSize:l}}function s(o,h){switch(h){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var ji=function(){var g=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(p){p.preventDefault(),i(++g%e.children.length)},!1);function t(p){return e.appendChild(p.dom),p}function i(p){for(var r=0;r<e.children.length;r++)e.children[r].style.display=r===p?"block":"none";g=p}var n=(performance||Date).now(),s=n,o=0,h=t(new ji.Panel("FPS","#0ff","#002")),c=t(new ji.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=t(new ji.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){n=(performance||Date).now()},end:function(){o++;var p=(performance||Date).now();if(c.update(p-n,200),p>=s+1e3&&(h.update(o*1e3/(p-s),100),s=p,o=0,d)){var r=performance.memory;d.update(r.usedJSHeapSize/1048576,r.jsHeapSizeLimit/1048576)}return p},update:function(){n=this.end()},domElement:e,setMode:i}};ji.Panel=function(g,e,t){var i=1/0,n=0,s=Math.round,o=s(window.devicePixelRatio||1),h=80*o,c=48*o,d=3*o,p=2*o,r=3*o,l=15*o,a=74*o,f=30*o,u=document.createElement("canvas");u.width=h,u.height=c,u.style.cssText="width:80px;height:48px";var m=u.getContext("2d");return m.font="bold "+9*o+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=t,m.fillRect(0,0,h,c),m.fillStyle=e,m.fillText(g,d,p),m.fillRect(r,l,a,f),m.fillStyle=t,m.globalAlpha=.9,m.fillRect(r,l,a,f),{dom:u,update:function(v,_){i=Math.min(i,v),n=Math.max(n,v),m.fillStyle=t,m.globalAlpha=1,m.fillRect(0,0,h,l),m.fillStyle=e,m.fillText(s(v)+" "+g+" ("+s(i)+"-"+s(n)+")",d,p),m.drawImage(u,r+o,l,a-o,f,r,l,a-o,f),m.fillRect(r+a-o,l,o,f),m.fillStyle=t,m.globalAlpha=.9,m.fillRect(r+a-o,l,o,s((1-v/_)*f))}}};const ki={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};class Hi{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const ja=new Xs(-1,1,1,-1,0,1),$s=new Qi;$s.setAttribute("position",new bi([-1,3,0,-1,-1,0,3,-1,0],3));$s.setAttribute("uv",new bi([0,2,0,0,2,0],2));class Zs{constructor(e){this._mesh=new Ue($s,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,ja)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Fs extends Hi{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof Nt?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=us.clone(e.uniforms),this.material=new Nt({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Zs(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class Tn extends Hi{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const n=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,h;this.inverse?(o=0,h=1):(o=1,h=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),s.buffers.stencil.setFunc(n.ALWAYS,o,4294967295),s.buffers.stencil.setClear(h),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(n.EQUAL,1,4294967295),s.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),s.buffers.stencil.setLocked(!0)}}class Ga extends Hi{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Wa{constructor(e,t){if(this.renderer=e,t===void 0){const i=e.getSize(new Me);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,t=new Kt(this._width*this._pixelRatio,this._height*this._pixelRatio),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],ki===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),Fs===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Fs(ki),this.clock=new fi}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let n=0,s=this.passes.length;n<s;n++){const o=this.passes[n];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const h=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(h.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(h.EQUAL,1,4294967295)}this.swapBuffers()}Tn!==void 0&&(o instanceof Tn?i=!0:o instanceof Ga&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new Me);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(i,n),this.renderTarget2.setSize(i,n);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,n)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new Xs(-1,1,1,-1,0,1);const Fr=new Qi;Fr.setAttribute("position",new bi([-1,3,0,-1,-1,0,3,-1,0],3));Fr.setAttribute("uv",new bi([0,2,0,0,2,0],2));class Ya extends Hi{constructor(e,t,i,n,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=n,this.clearAlpha=s!==void 0?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ke}render(e,t,i){const n=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=n}}const Sn={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Ke(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Li extends Hi{constructor(e,t,i,n){super(),this.strength=t!==void 0?t:1,this.radius=i,this.threshold=n,this.resolution=e!==void 0?new Me(e.x,e.y):new Me(256,256),this.clearColor=new Ke(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new Kt(s,o),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let r=0;r<this.nMips;r++){const l=new Kt(s,o);l.texture.name="UnrealBloomPass.h"+r,l.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(l);const a=new Kt(s,o);a.texture.name="UnrealBloomPass.v"+r,a.texture.generateMipmaps=!1,this.renderTargetsVertical.push(a),s=Math.round(s/2),o=Math.round(o/2)}Sn===void 0&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");const h=Sn;this.highPassUniforms=us.clone(h.uniforms),this.highPassUniforms.luminosityThreshold.value=n,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Nt({uniforms:this.highPassUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const c=[3,5,7,9,11];s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);for(let r=0;r<this.nMips;r++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[r])),this.separableBlurMaterials[r].uniforms.texSize.value=new Me(s,o),s=Math.round(s/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const d=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=d,this.bloomTintColors=[new Ae(1,1,1),new Ae(1,1,1),new Ae(1,1,1),new Ae(1,1,1),new Ae(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,ki===void 0&&console.error("THREE.UnrealBloomPass relies on CopyShader");const p=ki;this.copyUniforms=us.clone(p.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Nt({uniforms:this.copyUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,blending:ps,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Ke,this.oldClearAlpha=1,this.basic=new kt,this.fsQuad=new Zs(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,t){let i=Math.round(e/2),n=Math.round(t/2);this.renderTargetBright.setSize(i,n);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(i,n),this.renderTargetsVertical[s].setSize(i,n),this.separableBlurMaterials[s].uniforms.texSize.value=new Me(i,n),i=Math.round(i/2),n=Math.round(n/2)}render(e,t,i,n,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let h=this.renderTargetBright;for(let c=0;c<this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=h.texture,this.separableBlurMaterials[c].uniforms.direction.value=Li.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=Li.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this.fsQuad.render(e),h=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}getSeperableBlurMaterial(e){return new Nt({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new Me(.5,.5)},direction:{value:new Me(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new Nt({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Li.BlurDirectionX=new Me(1,0);Li.BlurDirectionY=new Me(0,1);class mi extends Hi{constructor(e,t,i,n){super(),this.renderScene=t,this.renderCamera=i,this.selectedObjects=n!==void 0?n:[],this.visibleEdgeColor=new Ke(1,1,1),this.hiddenEdgeColor=new Ke(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=e!==void 0?new Me(e.x,e.y):new Me(256,256);const s=Math.round(this.resolution.x/this.downSampleRatio),o=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Kt(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new Ho,this.depthMaterial.side=hs,this.depthMaterial.depthPacking=Bo,this.depthMaterial.blending=dn,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=hs,this.prepareMaskMaterial.fragmentShader=p(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Kt(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Kt(s,o),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Kt(s,o),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Kt(Math.round(s/2),Math.round(o/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Kt(s,o),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Kt(Math.round(s/2),Math.round(o/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;const h=4,c=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(h),this.separableBlurMaterial1.uniforms.texSize.value.set(s,o),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(c),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(s/2),Math.round(o/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=c,this.overlayMaterial=this.getOverlayMaterial(),ki===void 0&&console.error("THREE.OutlinePass relies on CopyShader");const d=ki;this.copyUniforms=us.clone(d.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Nt({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:dn,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Ke,this.oldClearAlpha=1,this.fsQuad=new Zs(null),this.tempPulseColor1=new Ke,this.tempPulseColor2=new Ke,this.textureMatrix=new Ks;function p(r,l){const a=l.isPerspectiveCamera?"perspective":"orthographic";return r.replace(/DEPTH_TO_VIEW_Z/g,a+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let i=Math.round(e/this.downSampleRatio),n=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(i,n),this.renderTargetBlurBuffer1.setSize(i,n),this.renderTargetEdgeBuffer1.setSize(i,n),this.separableBlurMaterial1.uniforms.texSize.value.set(i,n),i=Math.round(i/2),n=Math.round(n/2),this.renderTargetBlurBuffer2.setSize(i,n),this.renderTargetEdgeBuffer2.setSize(i,n),this.separableBlurMaterial2.uniforms.texSize.value.set(i,n)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function i(n){n.isMesh&&(e===!0?n.visible=t.get(n):(t.set(n,n.visible),n.visible=e))}for(let n=0;n<this.selectedObjects.length;n++)this.selectedObjects[n].traverse(i)}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,i=[];function n(o){o.isMesh&&i.push(o)}for(let o=0;o<this.selectedObjects.length;o++)this.selectedObjects[o].traverse(n);function s(o){if(o.isMesh||o.isSprite){let h=!1;for(let c=0;c<i.length;c++)if(i[c].id===o.id){h=!0;break}if(h===!1){const c=o.visible;(e===!1||t.get(o)===!0)&&(o.visible=e),t.set(o,c)}}else(o.isPoints||o.isLine)&&(e===!0?o.visible=t.get(o):(t.set(o,o.visible),o.visible=e))}this.renderScene.traverse(s)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,i,n,s){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,s&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const h=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=h,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const c=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(c),this.tempPulseColor2.multiplyScalar(c)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=mi.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=mi.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=mi.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=mi.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,s&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(i),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=i.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new Nt({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new Me(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;
					vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new Nt({uniforms:{maskTexture:{value:null},texSize:{value:new Me(.5,.5)},visibleEdgeColor:{value:new Ae(1,1,1)},hiddenEdgeColor:{value:new Ae(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new Nt({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new Me(.5,.5)},direction:{value:new Me(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new Nt({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,depthTest:!1,depthWrite:!1,transparent:!0})}}mi.BlurDirectionX=new Me(1,0);mi.BlurDirectionY=new Me(0,1);const Xa={uniforms:{tDiffuse:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 tex = texture2D( tDiffuse, vUv );

			gl_FragColor = LinearTosRGB( tex );

		}`};/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.17.0
 * @author George Michael Brower
 * @license MIT
 */class ii{constructor(e,t,i,n,s="div"){this.parent=e,this.object=t,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(n),this.$name=document.createElement("div"),this.$name.classList.add("name"),ii.nextNameID=ii.nextNameID||0,this.$name.id=`lil-gui-name-${++ii.nextNameID}`,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class Ka extends ii{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function Ns(g){let e,t;return(e=g.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=g.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=g.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),t?"#"+t:!1}const $a={isPrimitive:!0,match:g=>typeof g=="string",fromHexString:Ns,toHexString:Ns},$i={isPrimitive:!0,match:g=>typeof g=="number",fromHexString:g=>parseInt(g.substring(1),16),toHexString:g=>"#"+g.toString(16).padStart(6,0)},Za={isPrimitive:!1,match:Array.isArray,fromHexString(g,e,t=1){const i=$i.fromHexString(g);e[0]=(i>>16&255)/255*t,e[1]=(i>>8&255)/255*t,e[2]=(i&255)/255*t},toHexString([g,e,t],i=1){i=255/i;const n=g*i<<16^e*i<<8^t*i<<0;return $i.toHexString(n)}},Qa={isPrimitive:!1,match:g=>Object(g)===g,fromHexString(g,e,t=1){const i=$i.fromHexString(g);e.r=(i>>16&255)/255*t,e.g=(i>>8&255)/255*t,e.b=(i&255)/255*t},toHexString({r:g,g:e,b:t},i=1){i=255/i;const n=g*i<<16^e*i<<8^t*i<<0;return $i.toHexString(n)}},qa=[$a,$i,Za,Qa];function Ja(g){return qa.find(e=>e.match(g))}class el extends ii{constructor(e,t,i,n){super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=Ja(this.initialValue),this._rgbScale=n,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const s=Ns(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class Ps extends ii{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",n=>{n.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class tl extends ii{constructor(e,t,i,n,s,o){super(e,t,i,"number"),this._initInput(),this.min(n),this.max(s);const h=o!==void 0;this.step(h?o:this._getImplicitStep(),h),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=t*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=()=>{let v=parseFloat(this.$input.value);isNaN(v)||(this._stepExplicit&&(v=this._snap(v)),this.setValue(this._clamp(v)))},t=v=>{const _=parseFloat(this.$input.value);isNaN(_)||(this._snapClampSetValue(_+v),this.$input.value=this.getValue())},i=v=>{v.code==="Enter"&&this.$input.blur(),v.code==="ArrowUp"&&(v.preventDefault(),t(this._step*this._arrowKeyMultiplier(v))),v.code==="ArrowDown"&&(v.preventDefault(),t(this._step*this._arrowKeyMultiplier(v)*-1))},n=v=>{this._inputFocused&&(v.preventDefault(),t(this._step*this._normalizeMouseWheel(v)))};let s=!1,o,h,c,d,p;const r=5,l=v=>{o=v.clientX,h=c=v.clientY,s=!0,d=this.getValue(),p=0,window.addEventListener("mousemove",a),window.addEventListener("mouseup",f)},a=v=>{if(s){const _=v.clientX-o,S=v.clientY-h;Math.abs(S)>r?(v.preventDefault(),this.$input.blur(),s=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(_)>r&&f()}s||(p-=(v.clientY-c)*this._step*this._arrowKeyMultiplier(v),d+p>this._max?p=this._max-d:d+p<this._min&&(p=this._min-d),this._snapClampSetValue(d+p)),c=v.clientY},f=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",f)},u=()=>{this._inputFocused=!0},m=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",e),this.$input.addEventListener("keydown",i),this.$input.addEventListener("wheel",n,{passive:!1}),this.$input.addEventListener("mousedown",l),this.$input.addEventListener("focus",u),this.$input.addEventListener("blur",m)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=(v,_,S,w,x)=>(v-_)/(S-_)*(x-w)+w,t=v=>{const _=this.$slider.getBoundingClientRect();let S=e(v,_.left,_.right,this._min,this._max);this._snapClampSetValue(S)},i=v=>{this._setDraggingStyle(!0),t(v.clientX),window.addEventListener("mousemove",n),window.addEventListener("mouseup",s)},n=v=>{t(v.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",s)};let o=!1,h,c;const d=v=>{v.preventDefault(),this._setDraggingStyle(!0),t(v.touches[0].clientX),o=!1},p=v=>{v.touches.length>1||(this._hasScrollBar?(h=v.touches[0].clientX,c=v.touches[0].clientY,o=!0):d(v),window.addEventListener("touchmove",r,{passive:!1}),window.addEventListener("touchend",l))},r=v=>{if(o){const _=v.touches[0].clientX-h,S=v.touches[0].clientY-c;Math.abs(_)>Math.abs(S)?d(v):(window.removeEventListener("touchmove",r),window.removeEventListener("touchend",l))}else v.preventDefault(),t(v.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",l)},a=this._callOnFinishChange.bind(this),f=400;let u;const m=v=>{if(Math.abs(v.deltaX)<Math.abs(v.deltaY)&&this._hasScrollBar)return;v.preventDefault();const S=this._normalizeMouseWheel(v)*this._step;this._snapClampSetValue(this.getValue()+S),this.$input.value=this.getValue(),clearTimeout(u),u=setTimeout(a,f)};this.$slider.addEventListener("mousedown",i),this.$slider.addEventListener("touchstart",p,{passive:!1}),this.$slider.addEventListener("wheel",m,{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${t}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),t+-i}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class il extends ii{constructor(e,t,i,n){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(n)?n:Object.values(n),this._names=Array.isArray(n)?n:Object.keys(n),this._names.forEach(s=>{const o=document.createElement("option");o.innerHTML=s,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=t===-1?e:this._names[t],this}}class sl extends ii{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",n=>{n.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const nl=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "\u2195";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "\u25BE";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "\u25B8";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "\u2713";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function rl(g){const e=document.createElement("style");e.innerHTML=g;const t=document.querySelector("head link[rel=stylesheet], head style");t?document.head.insertBefore(e,t):document.head.appendChild(e)}let Mn=!1;class gs{constructor({parent:e,autoPlace:t=e===void 0,container:i,width:n,title:s="Controls",injectStyles:o=!0,touchStyles:h=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",c=>{(c.code==="Enter"||c.code==="Space")&&(c.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),h&&this.domElement.classList.add("allow-touch-styles"),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),!Mn&&o&&(rl(nl),Mn=!0),i?i.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),n&&this.domElement.style.setProperty("--width",n+"px"),this.domElement.addEventListener("keydown",c=>c.stopPropagation()),this.domElement.addEventListener("keyup",c=>c.stopPropagation())}add(e,t,i,n,s){if(Object(i)===i)return new il(this,e,t,i);const o=e[t];switch(typeof o){case"number":return new tl(this,e,t,i,n,s);case"boolean":return new Ka(this,e,t);case"string":return new sl(this,e,t);case"function":return new Ps(this,e,t)}console.error(`gui.add failed
	property:`,t,`
	object:`,e,`
	value:`,o)}addColor(e,t,i=1){return new el(this,e,t,i)}addFolder(e){return new gs({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(i=>{i instanceof Ps||i._name in e.controllers&&i.load(e.controllers[i._name])}),t&&e.folders&&this.folders.forEach(i=>{i._title in e.folders&&i.load(e.folders[i._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof Ps)){if(i._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);t.controllers[i._name]=i.save()}}),e&&this.folders.forEach(i=>{if(i._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);t.folders[i._title]=i.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const i=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const n=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=n+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(i=>i.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}class ol{constructor(e,t,i,n){this.canvas=e,this.mousePosition=t,this.debug=i,this.debugClient=n,this.fpsInterval=1/60,this.width=this.height=0,this.performance=new al}init(e){this.clock=new fi,(this.debug||this.debugClient)&&(this.gui=new gs({width:350}),this.gui.close()),this.loadingManager=new Cr,this.textureLoader=new Ws(this.loadingManager),this.cubeTextureLoader=new zo(this.loadingManager);const t=new Va;t.setDecoderPath("/draco/"),this.gltfLoader=new ua(this.loadingManager),this.gltfLoader.setDRACOLoader(t),this.loadingManager.onLoad=()=>{this.loadHandler()},e&&(this.loadingManager.onProgress=e),this.scene=new Or;const i=this.textureLoader.load("/textures/main/background.jpg");if(i.encoding=it,this.scene.background=i,this.camera=new Ys,this.camera.near=.2,this.camera.far=1e3,this.camera.position.z=3,this.scene.add(this.camera),this.renderer=new kr({antialias:window.devicePixelRatio<2,canvas:this.canvas,powerPreference:"high-performance",alpha:!1}),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=Fo,this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=it,this.renderer.toneMapping=Rs,this.debug||this.debugClient){const n=this.gui.addFolder("Renderer");n.add(this.renderer,"toneMapping",{No,Linear:Lr,Reinhard:Vo,Cineon:Uo,ACESFilmic:Rs}),n.add(this.renderer,"toneMappingExposure").min(0).max(2).step(.001)}this.debug&&(this.orbitControls=new ha(this.camera,this.canvas),this.orbitControls.enableDamping=!0),this.initLights(),this.initPostProcessing(),window.addEventListener("resize",this.resizeHandler.bind(this))}loadHandler(){}initPostProcessing(){const e={minFilter:cs,magFilter:cs,format:Xo,samples:window.devicePixelRatio===1?2:0},t=new Kt(2e3,2e3,e);this.composer=new Wa(this.renderer,t);const i=new Ya(this.scene,this.camera);this.composer.addPass(i);const n=new Li(new Me(window.innerWidth,window.innerHeight),.8,.8,.85);if(this.composer.addPass(n),this.bloomPass=n,n.renderTargetsHorizontal.forEach(c=>{c.texture.type=fn}),n.renderTargetsVertical.forEach(c=>{c.texture.type=fn}),this.debug||this.debugClient){const c=this.gui.addFolder("UnrealBloomPass");c.add(n,"enabled"),c.add(n,"threshold").min(0).max(1).step(.001),c.add(n,"strength").min(0).max(3).step(.001),c.add(n,"radius").min(0).max(1).step(.001)}const s=new Ke(20991);s.convertSRGBToLinear();const o=new mi(new Me(window.innerWidth,window.innerHeight),this.scene,this.camera);o.edgeStrength=10,o.edgeGlow=0,o.edgeThickness=6,o.pulsePeriod=0,o.visibleEdgeColor=s,o.hiddenEdgeColor=s,this.composer.addPass(o),this.outlinePass=o;const h=new Fs(Xa);this.composer.addPass(h)}initLights(){let e;(this.debug||this.debugClient)&&(e=this.gui.addFolder("Lights"));const t=new jo(16777215,1);this.scene.add(t),this.ambientLight=t,(this.debug||this.debugClient)&&(e.add(t,"intensity").min(0).max(5).step(.001).name("ambient light intensity"),e.addColor(t,"color").name("ambient light color"));const i=new Sr(16777215,3);if(i.position.z=2,i.position.x=1.2,i.position.y=1,i.castShadow=!0,i.shadow.camera.top=3.5,i.shadow.camera.right=3.5,i.shadow.camera.bottom=-3,i.shadow.camera.left=-3.5,i.shadow.camera.near=.1,i.shadow.camera.far=6,i.shadow.radius=8,i.shadow.mapSize.set(2048,2048),i.shadow.normalBias=.05,this.scene.add(i),this.directionalLight=i,this.debug){const o=new Go(i.shadow.camera);this.scene.add(o)}(this.debug||this.debugClient)&&(e.add(i,"intensity").min(0).max(5).step(.001).name("directional light intensity"),e.addColor(i,"color").name("directional light color"));const n=new Tr(16775106,2);if(n.decay=1,n.distance=2.5,this.pointLight=n,this.debug){const o=new Wo(n,1);this.scene.add(o)}(this.debug||this.debugClient)&&(e.add(n,"intensity").min(0).max(5).step(.001).name("pointlight intensity"),e.addColor(n,"color").name("pointlight color"));const s=new _r(16775106,0);if(s.angle=.12,s.penumbra=.5,s.distance=4,s.decay=0,this.spotLight=s,this.debug){const o=new Yo(s,65280);this.scene.add(o)}}resizeHandler(){if(this.isEnabled){if(this.width=window.innerWidth,this.height=window.innerHeight,this.camera.aspect=this.width/this.height,this.camera.aspect>1)this.camera.fov=50;else{const h=Math.tan(Xi.degToRad(25)),c=this.camera.aspect/1,d=h/c;this.camera.fov=Xi.radToDeg(Math.atan(d))*2}this.camera.updateProjectionMatrix();const i=this.lowSettings?1:Math.min(2,window.devicePixelRatio);this.composer&&(this.composer.setSize(window.innerWidth,window.innerHeight),this.composer.setPixelRatio(i)),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(i);const n=this.width/this.height,o=1024/1024/n;this.scene.background.offset.x=o>1?(1-1/o)/2:0,this.scene.background.repeat.x=o>1?1/o:1,this.scene.background.offset.y=o>1?0:(1-o)/2,this.scene.background.repeat.y=o>1?1:o}}convertTo3D(e,t,i=0){const n=new Ae,s=new Ae;n.set(e/this.width*2-1,-(t/this.height)*2+1,.5),n.unproject(this.camera),n.sub(this.camera.position).normalize();var o=(i-this.camera.position.z)/n.z;return s.copy(this.camera.position).add(n.multiplyScalar(o)),s}setOutlineObjects(e){this.outlinePass.selectedObjects=e}enable(){this.isEnabled=!0,this.then=this.clock.getElapsedTime(),this.loop(),this.resizeHandler()}disable(){this.isEnabled=!1}isEnabled(){return this.isEnabled}loop(){this.isEnabled&&!document.hidden&&requestAnimationFrame(this.loop.bind(this));const e=this.clock.getElapsedTime(),t=e-this.then;t>this.fpsInterval&&(this.render(),this.then=e-t%this.fpsInterval)}render(){this.orbitControls&&this.orbitControls.update(),this.stats&&this.stats.update(),this.performance.update(),this.lowSettings?this.renderer.render(this.scene,this.camera):this.composer.render()}}class al{constructor(){this.avgFPS=60,this.times=[],this.ready=!1}start(){this.started||(this.prevTime=(performance||Date).now(),this.started=!0,this.counter=0)}update(){if(this.started){var e=(performance||Date).now();const t=Math.min(60,1e3/(e-this.prevTime));this.times.push(t),this.times.length>200&&this.times.splice(0,this.times.length-200),this.ready||this.counter++,!this.ready&&this.counter>220&&(this.ready=!0);const i=this.times.reduce((n,s)=>n+s,0);this.avgFPS=i/this.times.length||0,this.prevTime=e}}}class ll{constructor(){this.canvas=document.querySelector("#textureSrc"),this.ctx=this.canvas.getContext("2d"),this.srcEdgeSize=100,this.srcPatternSize=300,this.preload()}preload(){this.images={};const e=[{name:"background-about",url:"background-about.jpg"},{name:"background-contact",url:"background-contact.jpg"},{name:"background-home",url:"background-home.jpg"},{name:"background-portfolio",url:"background-portfolio.jpg"},{name:"background-services",url:"background-services.jpg"},{name:"background-team",url:"background-team.jpg"},{name:"title-home",url:"title-home.png"},{name:"title-about",url:"title-about.png"},{name:"title-services",url:"title-services.png"},{name:"title-contact",url:"title-contact.png"},{name:"title-team",url:"title-team.png"},{name:"title-portfolio",url:"title-portfolio.png"},{name:"mobile-title-home",url:"mobile-title-home.png"},{name:"mobile-title-about",url:"mobile-title-about.png"},{name:"mobile-title-services",url:"mobile-title-services.png"},{name:"mobile-title-contact",url:"mobile-title-contact.png"},{name:"mobile-title-team",url:"mobile-title-team.png"},{name:"mobile-title-portfolio",url:"mobile-title-portfolio.png"},{name:"corner-about-top",url:"corner-about-top.png"},{name:"corner-about-bottom",url:"corner-about-bottom.png"},{name:"corner-portfolio",url:"corner-portfolio.png"},{name:"corner-contact-topLeft",url:"corners-contact-topLeft.png"},{name:"corner-contact-topRight",url:"corners-contact-topRight.png"},{name:"corner-contact-bottomLeft",url:"corners-contact-bottomLeft.png"},{name:"corner-contact-bottomRight",url:"corners-contact-bottomRight.png"},{name:"corner-team-topLeft",url:"corners-team-topLeft.png"},{name:"corner-team-topRight",url:"corners-team-topRight.png"},{name:"corner-team-bottomLeft",url:"corners-team-bottomLeft.png"},{name:"corner-team-bottomRight",url:"corners-team-bottomRight.png"},{name:"border-full",url:"border-full.png"},{name:"border-simple",url:"border-simple.png"},{name:"border-contact",url:"border-contact.png"},{name:"disclaimer",url:"disclaimer.png"},{name:"overlay",url:"overlay.png"}];let t=0;e.forEach(i=>{const n=new Image;n.src="/textures/backgrounds/"+i.url,n.onload=()=>{t+=1,t===e.length&&this.loadHandler()},this.images[i.name]=n})}loadHandler(){this.loaded=!0,this.setBackground("home")}setSize(){this.width=window.innerWidth,this.height=window.innerHeight,this.pixelratio=window.devicePixelRatio,this.isMobile=window.innerWidth<700,this.canvas.width=this.width*this.pixelratio,this.canvas.height=this.height*this.pixelratio,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.edgeSize=Math.min(this.width/20,this.height/20),this.patternSize=this.srcPatternSize*(this.edgeSize/this.srcEdgeSize),this.edgeSize=Math.round(this.edgeSize),this.patternSize=Math.round(this.patternSize),this.ctx.scale(this.pixelratio,this.pixelratio),this.loaded&&this.render()}setBackground(e){this.loaded&&(this.section=e,this.backgroundImg=this.images["background-"+e],this.mobileTitleImg=this.images["mobile-title-"+e],this.titleImg=this.images["title-"+e],this.cornerImage=null,this.cornerImages=null,this.cornerImageBottom=null,e=="about"?(this.cornerImage=this.images["corner-about-top"],this.cornerImageBottom=this.images["corner-about-bottom"]):e=="portfolio"?this.cornerImage=this.images["corner-portfolio"]:e=="contact"?this.cornerImages={topLeft:this.images["corner-contact-topLeft"],topRight:this.images["corner-contact-topRight"],bottomLeft:this.images["corner-contact-bottomLeft"],bottomRight:this.images["corner-contact-bottomRight"]}:e=="team"&&(this.cornerImages={topLeft:this.images["corner-team-topLeft"],topRight:this.images["corner-team-topRight"],bottomLeft:this.images["corner-team-bottomLeft"],bottomRight:this.images["corner-team-bottomRight"]}),e=="home"?this.borderImg=this.images["border-full"]:e=="contact"?this.borderImg=this.images["border-contact"]:this.borderImg=this.images["border-simple"],e=="home"||e=="team"?this.rotation=0:e=="portfolio"||e=="contact"?this.rotation=Math.PI*.5:e=="services"?this.rotation=Math.PI*1:this.rotation=Math.PI*1.5)}render(){if(this.backgroundImg){this.scaleToFill(this.backgroundImg);let e=this.borderImg;this.drawHorizontalPattern(e,this.edgeSize,0,this.srcEdgeSize,0),this.drawHorizontalPattern(this.borderImg,this.edgeSize,this.height-this.edgeSize,this.srcEdgeSize,e.height-this.srcEdgeSize),this.drawVerticalPattern(e,0,this.edgeSize,0,this.srcEdgeSize),this.drawVerticalPattern(e,this.width-this.edgeSize,this.edgeSize,e.width-this.srcEdgeSize,this.srcEdgeSize),this.drawBorderCorner(e,0,0,0,0),this.drawBorderCorner(e,this.width-this.edgeSize,0,e.width-this.srcEdgeSize,0),this.drawBorderCorner(e,0,this.height-this.edgeSize,0,e.height-this.srcEdgeSize),this.drawBorderCorner(e,this.width-this.edgeSize,this.height-this.edgeSize,e.width-this.srcEdgeSize,e.height-this.srcEdgeSize),this.ctx.save();const t=this.rotation;this.ctx.translate(this.width*(t==Math.PI*.5||t==Math.PI),this.height*(t>=Math.PI)),this.ctx.rotate(t),t==Math.PI*.5||t==Math.PI*1.5?this.ctx.drawImage(this.images.overlay,0,0,this.height,this.width):this.ctx.drawImage(this.images.overlay,0,0,this.width,this.height),this.ctx.restore(),this.cornerImage?this.drawCorners(this.cornerImage,this.cornerImageBottom):this.cornerImages&&this.drawContactCorners(this.cornerImages),this.titleImg&&(this.isMobile?this.drawTitle(this.mobileTitleImg):this.drawTitle(this.titleImg)),e=this.images.disclaimer;const i=this.edgeSize*.2,n=e.width/e.height*i;this.ctx.drawImage(e,this.width-n-this.edgeSize,this.height-i-this.edgeSize*.1,n,i)}}drawBorderCorner(e,t,i,n,s){this.ctx.drawImage(e,n,s,this.srcEdgeSize,this.srcEdgeSize,t,i,this.edgeSize,this.edgeSize)}drawHorizontalPattern(e,t,i,n,s){let o=0;const h=this.width-this.edgeSize*2;for(;o<h;){const c=Math.min(this.patternSize,this.width-this.edgeSize*2-o);this.ctx.drawImage(e,n,s,this.srcPatternSize,this.srcEdgeSize,t+o,i,c,this.edgeSize),o+=this.patternSize}}drawVerticalPattern(e,t,i,n,s){let o=0;const h=this.height-this.edgeSize*2;for(;o<h;){const c=Math.min(this.patternSize,this.height-this.edgeSize*2-o);this.ctx.drawImage(e,n,s,this.srcEdgeSize,this.srcPatternSize,t,i+o,this.edgeSize,c),o+=this.patternSize}}drawTitle(e){let t;this.section==="home"?this.isMobile?t=this.width*.85:t=Math.min(1500,this.width*.6):this.isMobile?t=this.width*.6:t=Math.min(1200,this.width*.56);const i=t/e.width*e.height,n=this.width*.5-t*.5;let s;this.isMobile?s=this.height*.05:this.section==="home"?s=this.height*.06:s=this.height*.04,this.ctx.drawImage(e,n,s,t,i)}scaleToFill(e){var t=Math.max(this.width/e.width,this.height/e.height),i=this.width/2-e.width/2*t,n=this.height/2-e.height/2*t;this.ctx.drawImage(e,i,n,e.width*t,e.height*t)}stretchToFill(e){this.ctx.drawImage(e,0,0,this.width,this.height)}drawCorners(e,t){let i,n,s=0;t||(t=e),this.isMobile?(this.section==="portfolio"?(i=Math.min(this.width*.42,this.height*.42),n=i*.08):(i=Math.min(200,this.width*.3,this.height*.3),n=i*.14),s=30):this.section==="about"?(i=Math.min(230,this.width*.15,this.height*.3),n=Math.min(45,i*.25)):(i=Math.min(440,this.width*.3,this.height*.56),n=Math.min(25,i*.15));const o=i/e.width*e.height;this.drawCorner(e,1,1,n,n,i,o),this.drawCorner(e,-1,1,-this.width+n,n,i,o),this.drawCorner(t,1,-1,n,-this.height+n+s,i,o),this.drawCorner(t,-1,-1,-this.width+n,-this.height+n+s,i,o)}drawCorner(e,t,i,n,s,o,h){this.ctx.save(),this.ctx.scale(t,i),this.ctx.drawImage(e,n,s,o,h),this.ctx.restore()}drawContactCorners(e){let t,i,n=0;this.isMobile?(t=this.edgeSize*.1,this.section=="team"?(n=60,i=Math.min(this.width*.35,this.height*.35)):i=Math.min(this.width*.28,this.height*.28)):(t=this.edgeSize*.45,this.section=="team"?i=Math.max(140,Math.min(this.width*.13,this.height*.3)):i=Math.max(140,Math.min(this.width*.16,this.height*.3))),this.ctx.drawImage(e.topLeft,t,t,i,i),this.ctx.drawImage(e.topRight,this.width-i-t,t,i,i),this.ctx.drawImage(e.bottomLeft,t,this.height-i-t-n,i,i),this.ctx.drawImage(e.bottomRight,this.width-i-t,this.height-i-t-n,i,i)}}const cl=`uniform float time;
uniform float progress;
uniform float light;
uniform sampler2D texture1;
uniform sampler2D texture2;
uniform vec4 resolution;

varying vec2 vUv;
varying float vFrontShadow;
varying float test;
// varying float vBackShadow;
// varying float vProgress;

void main()	{
	vec2 newUV = (vUv - vec2(0.5))*resolution.zw + vec2(0.5);

    if (test <= 0.2 + progress * 0.6) {
        gl_FragColor = texture2D(texture1,newUV);
    }else{
        gl_FragColor = texture2D(texture2,newUV);
    }
    gl_FragColor.rgb *= vFrontShadow;
    gl_FragColor.rgb *= light;
    //gl_FragColor.a = clamp(progress*5.,0.,1.);

}`,hl=`uniform float time;
uniform float angle;
uniform float progress;
uniform float light;
uniform vec4 resolution;
varying vec2 vUv;
varying float vFrontShadow;
varying float test;
// varying float vBackShadow;
// varying float vProgress;

uniform sampler2D texture1;
uniform sampler2D texture2;
uniform vec2 pixels;

const float pi = 3.1415925;

mat4 rotationMatrix(vec3 axis, float angle) {
    axis = normalize(axis);
    float s = sin(angle);
    float c = cos(angle);
    float oc = 1.0 - c;
    
    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,
                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,
                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,
                0.0,                                0.0,                                0.0,                                1.0);
}
vec3 rotate(vec3 v, vec3 axis, float angle) {
  mat4 m = rotationMatrix(axis, angle);
  return (m * vec4(v, 1.0)).xyz;
}

void main() {
  vUv = uv;
  float pi = 3.14159265359;

  float finalAngle = angle - 0.*0.3*sin(progress*6.);

  // @todo account for aspect ratio!!!
  vec3 newposition = position;

  // float angle = pi/10.;
  float rad = 0.1;
  float rolls = 3.7;
  // rot
  newposition = rotate(newposition - vec3(-.5,.5,0.), vec3(0.,0.,1.),-finalAngle) + vec3(-.5,.5,0.);

  float offs = (newposition.x + 0.5)/(sin(finalAngle) + cos(finalAngle)) ; // -0.5..0.5 -> 0..1
  float tProgress = clamp( (progress - offs*0.99)/0.01 , 0.,1.);

  test = tProgress;

  // shadows
  vFrontShadow = clamp((progress - offs*0.95)/0.05,0.7,1.);
  // vBackShadow = 1. - clamp(abs((progress - offs*0.9)/0.1),0.,1.);
  // vProgress = clamp((progress - offs*0.95)/0.05,0.,1.);

  newposition.z =  rad + rad*(1. - offs/2.)*sin(-offs*rolls*pi - 0.5*pi);
  newposition.x =  - 0.5 + rad*(1. - offs/2.)*cos(-offs*rolls*pi + 0.5*pi);
  // // rot back
  newposition = rotate(newposition - vec3(-.5,.5,0.), vec3(0.,0.,1.),finalAngle) + vec3(-.5,.5,0.);
  // unroll
  newposition = rotate(newposition - vec3(-.5,0.5,rad), vec3(sin(finalAngle),cos(finalAngle),0.), -pi*progress*rolls);
  newposition +=  vec3(
    -.5 + progress*cos(finalAngle)*(sin(finalAngle) + cos(finalAngle)), 
    0.5 - progress*sin(finalAngle)*(sin(finalAngle) + cos(finalAngle)),
    rad*(1.-progress/2.)
  );

  // animation
  vec3 finalposition = mix(newposition,position,tProgress);
  gl_Position = projectionMatrix * modelViewMatrix * vec4(finalposition, 1.0 );

  test = finalposition.z / rad;
}


`;class ul extends ye{constructor(){super(),this.rollPct=1,this.isTransitioning=!1}setSize(e,t){this.scaleX=e,this.scaleY=t,this.scale.x=e*2,this.scale.y=t*2,this.material.uniforms.resolution.value.x=window.innerWidth,this.material.uniforms.resolution.value.y=window.innerHeight}init(e,t){this.position.z=-2,this.geometry=new Ht(1,1,80,80),this.material=new Nt({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},side:hs,uniforms:{time:{type:"f",value:0},progress:{type:"f",value:0},angle:{type:"f",value:Math.PI*.5},texture1:{type:"t",value:null},texture2:{type:"t",value:null},resolution:{type:"v4",value:new Ko},light:{type:"f",value:1}},wireframe:!1,transparent:!1,vertexShader:hl,fragmentShader:cl}),this.material.uniforms.progress.value=1,this.material.uniforms.texture1.value=e,this.material.uniforms.texture1.value.needsUpdate=!0,this.material.uniforms.texture2.value=t,this.material.uniforms.texture2.value.needsUpdate=!0,this.material.uniforms.resolution.value.z=1,this.material.uniforms.resolution.value.w=1;let i=new Ue(this.geometry,this.material);this.add(i)}setMaterial(e){this.material.uniforms.texture1.value=e,this.material.uniforms.texture1.value.needsUpdate=!0}rollOut(e,t=0){this.isTransitioning=!0,this.isRollingUp=!1,this.material.uniforms.angle.value=Math.random()*Math.PI*.5,this.rollPct=-.2,C.killTweensOf(this),C.to(this,{delay:t,duration:1.3,rollPct:1,ease:"power1.inOut",onComplete:()=>{this.isTransitioning=!1,e&&e()}}),this.render()}rollUp(e,t=0){this.isTransitioning=!0,this.isRollingUp=!0,this.material.uniforms.angle.value=Math.random()*Math.PI*.5,this.rollPct=1,C.killTweensOf(this),C.to(this,{delay:t,duration:1.3,rollPct:-.2,ease:"power1.inOut",onComplete:()=>{this.isTransitioning=!1,e&&e()}}),this.render()}stopRolling(){this.rollPct=1,C.killTweensOf(this)}lightsOn(){C.to(this.material.uniforms.light,{duration:.75,value:.9,ease:"sine.inOut"})}lightsOff(){C.to(this.material.uniforms.light,{duration:.75,value:.005,ease:"sine.inOut"})}render(){this.isTransitioning&&(this.material.uniforms.progress.value=this.rollPct)}}class dl{constructor(e,t,i){this.sharedObjects=e,this.scene=t,this.callback=i,this.backgroundSrc=new ll,this.init()}init(){const{textureLoader:e}=this.sharedObjects,t=e.load("/textures/backgrounds/paperBackground.png");this.shadowMaterial=new $o,this.shadowMaterial.transparent=!0,this.shadowOpacity=.35,this.shadowMaterial.opacity=this.shadowOpacity,this.shadowPlane=new Ue(new Ht(1,1),this.shadowMaterial),this.shadowPlane.position.z=-1.9,this.shadowPlane.receiveShadow=!0,this.foldingPaper=new ul,this.foldingPaper.init(t,t),this.createNewCanvasTexture(),this.base=new ye,this.scene.add(this.base),this.base.add(this.shadowPlane),this.base.add(this.foldingPaper)}setPerformance(e=!1){this.lowSettings=e,this.createNewCanvasTexture()}setScene(e){e==="team"||e==="portfolio"||e==="contact"?this.shadowPlane.position.z=-1.9:this.shadowPlane.position.z=-.5}createNewCanvasTexture(){this.canvasTexture&&this.canvasTexture.dispose(),this.canvasTexture=new Zo(this.backgroundSrc.canvas),this.lowSettings?this.canvasTexture.encoding=Qo:this.canvasTexture.encoding=it,this.foldingPaper.setMaterial(this.canvasTexture)}updateCanvasTexture(){this.canvasTexture.needsUpdate=!0,this.foldingPaper.setMaterial(this.canvasTexture)}setSize(e,t){this.backgroundSrc.setSize(),this.createNewCanvasTexture(),this.shadowPlane.scale.x=e*2,this.shadowPlane.scale.y=t*2,this.foldingPaper.setSize(e,t)}switchScenes(e,t){this.backgroundSrc.setBackground(e),this.killAnimations(),t?this.switchWithAnimation():setTimeout(this.switchWithoutAnimation.bind(this),100),this.isFirst=!1}switchWithoutAnimation(){this.updateCanvasTexture(),C.set(this.sharedObjects.scene.position,{x:0,y:0,z:0}),C.set(this.base.position,{x:0,y:0,z:0}),C.set(this.base.rotation,{x:0,y:0,z:0}),this.switchHandler()}switchWithAnimation(){this.rollUp()}switchHandler(){this.callback();const e=this.sharedObjects.scene;C.set(e.position,{x:0,y:0,z:0}),C.to(this.shadowMaterial,{delay:1,duration:1,opacity:this.shadowOpacity,ease:"power2.out"})}rollUp(){const t=C.timeline();t.to(this.base.position,{delay:.5,duration:1.1,x:0,y:-.05,z:-.9,ease:"power1.inOut"}),t.to(this.base.position,{duration:.8,x:0,y:0,z:0,ease:"power1.inOut"});const i=C.timeline();i.to(this.base.rotation,{delay:.5,duration:1.1,x:-.05,y:.1,ease:"power1.inOut"}),i.to(this.base.rotation,{duration:.8,x:0,y:0,ease:"power1.inOut"}),this.foldingPaper.rollUp(this.rollOut.bind(this),0),C.to(this.shadowMaterial,{duration:.3,opacity:0,ease:"sine.out"})}rollOut(){this.backgroundSrc.render(),this.updateCanvasTexture(),this.foldingPaper.rollOut(this.rollOutHandler.bind(this),0)}rollOutHandler(){this.switchHandler()}killAnimations(){const e=this.sharedObjects.scene;this.foldingPaper.stopRolling(),C.killTweensOf(e.position),C.killTweensOf(this.base.rotation),C.killTweensOf(this.base.position)}lightsOn(){this.foldingPaper.lightsOn()}lightsOff(){this.foldingPaper.lightsOff()}render(){this.foldingPaper.render()}}class fl{constructor(e,t,i,n,s,o,h,c,d,p,r,l,a,f){this.world=e,this.scene=t,this.camera=i,this.renderer=n,this.textureLoader=s,this.gltfLoader=o,this.environmentMapTexture=h,this.mousePosition=c,this.convertTo3D=d,this.bloomPass=p,this.setOutlineObjects=r,this.isEnabled=l,this.caster=a,this.gui=f}setLights(e,t,i,n,s){this.pointLight=e,this.lightWrapper=t,this.spotLight=i,this.ambientLight=n,this.directionalLight=s}setBackground(e){this.background=e}}const pl=`attribute float size;
varying vec3 vColor;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    //gl_PointSize = size * ( 300.0 / -mvPosition.z );
    gl_PointSize = size * (150.0 + ( 150.0 / -mvPosition.z ));
    gl_Position = projectionMatrix * mvPosition;
}`,ml=`uniform sampler2D pointTexture;
varying vec3 vColor;

void main() {
    gl_FragColor = vec4( vColor, 1.0 );
    gl_FragColor = gl_FragColor * texture2D( pointTexture, gl_PointCoord );

}`;class gl{constructor(){this.particleShowSize=1,this.resizeHandler(),window.addEventListener("resize",this.resizeHandler.bind(this))}resizeHandler(){const e=window.innerWidth,t=window.innerHeight;this.particleBaseSize=e*t*1e-7,this.particleBaseSize=Math.max(.06,Math.min(this.particleBaseSize,.1))}init(e){this.amount=200;const{scene:t,textureLoader:i}=e;this.scene=t;let n,s;n={pointTexture:{value:i.load("/textures/particles/particle-vertex.png")}};const h=new Nt({uniforms:n,vertexShader:pl,fragmentShader:ml,transparent:!0,vertexColors:!0,depthWrite:!1});s=new Qi;const c=[],d=[],p=[];this.particles=[];let r;for(let l=0;l<this.amount;l++){const a=l*3,f=new vl(l);f.render(0),c[a+0]=f.x,c[a+1]=f.y,c[a+2]=f.z,this.particles.push(f),r=l%3===0?.7:0,d.push(r,r,r),p.push(f.size)}s.setAttribute("position",new bi(c,3)),s.setAttribute("color",new bi(d,3)),s.setAttribute("size",new bi(p,1).setUsage(qo)),this.particleSystem=new Er(s,h),this.geometry=s,this.enable()}enable(){this.enabled=!0,this.scene.add(this.particleSystem)}disable(){this.enabled=!1,this.scene.remove(this.particleSystem)}show(){C.killTweensOf(this),C.to(this,{duration:2,particleShowSize:1,ease:"sine.out"})}hide(){C.killTweensOf(this),C.to(this,{duration:.05,particleShowSize:0,ease:"sine.in"})}render(e,t){if(this.enabled){const i=-1+t.slowPctX*2,n=-1+t.slowPctY*2;this.particleSystem.rotation.y=e*.2-i*.4,this.particleSystem.rotation.x=-n*.4;const s=this.geometry.attributes.size.array,o=this.geometry.attributes.position.array,h=this.particles.length;for(let c=0;c<h;c++){const d=this.particles[c];d.render(e),o[c*3]=d.x,o[c*3+1]=d.y,o[c*3+2]=d.z,s[c]=d.size*this.particleBaseSize*this.particleShowSize}this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.size.needsUpdate=!0}}}class vl{constructor(e){const i=Math.random()*Math.PI*3;this.animation={index:e,x:Math.sin(i)*2,y:-2+Math.random()*4,z:Math.cos(i)*2,xSpeed:-.5+Math.random()*1,ySpeed:-.5+Math.random()*1,zSpeed:-.5+Math.random()*1}}render(e){this.x=this.animation.x+Math.sin(e*this.animation.xSpeed)*.8,this.y=this.animation.y+Math.sin(e*this.animation.ySpeed)*.8,this.z=this.animation.z+Math.sin(e*this.animation.zSpeed)*.8,this.size=Math.sin(.075*this.animation.index+e),this.size=Math.max(0,this.size)}}class wl{constructor(e,t){this.pointLight=t,this.sharedObjects=e,this.wrapperPos=new Ae(0,0,6),this.wrapperScale=0,this.mousePos=new Ae(0,0,6),this.mouseScale=0,this.mousePct=0,this.mainScale=0,this.isUserIdle=!0,this.isFollowingMouse=!1,this.isFollowingMouseAllowed=!1,this.lastMove={x:0,y:0,time:0},this.init()}init(){const{scene:e}=this.sharedObjects,t=new It({color:16777215});t.emissive=new Ke(16777215),t.emissiveIntensity=1,t.blending=ps,t.color.convertSRGBToLinear(),this.cursor=new ye,e.add(this.cursor),this.cursor.add(this.pointLight);const i=new Ue(new Ai(.04,32,32),t);this.cursor.add(i)}show(){C.killTweensOf(this,"mainScale"),C.to(this,{mainScale:1,duration:1,ease:"power1.inOut"})}hide(){C.killTweensOf(this,"mainScale"),C.to(this,{mainScale:0,duration:1,ease:"power1.inOut"})}reset(){const{lightWrapper:e}=this.sharedObjects;e.position.set(0,0,0),e.scale.set(1,1,1),e.rotation.set(0,0,0)}allowMouseFollow(){this.isFollowingMouseAllowed=!0,this.isUserIdle||this.startMouseFollow()}denyMouseFollow(){this.isFollowingMouseAllowed=!1,this.endMouseFollow()}startMouseFollow(){this.isMouseFollowing||(this.isMouseFollowing=!0,C.killTweensOf(this,"mousePct"),C.to(this,{mousePct:1,duration:.5,ease:"power1.inOut"}))}endMouseFollow(){this.isMouseFollowing&&(this.isMouseFollowing=!1,C.killTweensOf(this,"mousePct"),C.to(this,{mousePct:0,duration:1,ease:"power1.inOut"}))}render(e){this.checkUser(e),this.setPosition(e)}checkUser(e){const{mousePosition:t}=this.sharedObjects;t.isInited&&!t.isMobile&&((t.x!=this.lastMove.x||t.y!=this.lastMove.y)&&(this.lastMove.time=e,this.isUserIdle&&(this.isUserIdle=!1,this.isFollowingMouseAllowed&&this.startMouseFollow())),e-this.lastMove.time>5&&(this.isUserIdle||(this.isUserIdle=!0,this.endMouseFollow())),this.lastMove.x=t.x,this.lastMove.y=t.y)}setPosition(e){const{lightWrapper:t,mousePosition:i,convertTo3D:n}=this.sharedObjects,s=1-this.mousePct,o=i.x*.2+i.slowX*.8,h=i.y*.2+i.slowY*.8;this.wrapperMouse=n(o,h,2);const c=.3+Math.abs(Math.sin(e*2))*.1;t.getWorldPosition(this.wrapperPos);const d=t.scale.x;this.cursor.position.x=this.wrapperMouse.x*this.mousePct+this.wrapperPos.x*s,this.cursor.position.y=this.wrapperMouse.y*this.mousePct+this.wrapperPos.y*s,this.cursor.position.z=this.wrapperMouse.z*this.mousePct+this.wrapperPos.z*s;const p=c*this.mousePct+d*s*this.mainScale;this.cursor.scale.set(p,p,p)}}class xl{constructor(e,t){this.camera=e,this.cursor=t,this.pointer=new Me,this.raycaster=new Jo,window.addEventListener("mousemove",this.mousemoveHandler.bind(this)),window.addEventListener("click",this.clickHandler.bind(this)),window.addEventListener("touchstart",this.touchmoveHandler.bind(this)),window.addEventListener("touchend",this.touchEndHandler.bind(this)),setInterval(this.render.bind(this),100)}resume(){this.isEnabled=!0}pause(){this.rollOut(),this.isEnabled=!1}enable(e,t){this.items=e,this.isEnabled=!0,this.pointer.x=this.pointer.y=-100,this.callback=t}disable(){this.isEnabled=!1,this.callback=null}touchEndHandler(e){this.clickHandler()}clickHandler(){this.isEnabled&&this.activeItem&&this.callback&&this.callback(this.activeItem.userData.name)}mousemoveHandler(e){this.isEnabled&&(this.pointer.x=e.clientX/window.innerWidth*2-1,this.pointer.y=-(e.clientY/window.innerHeight*2-1),this.render())}touchmoveHandler(e){if(this.isEnabled){var t=e.touches[0];t&&(this.pointer.x=t.clientX/window.innerWidth*2-1,this.pointer.y=-(t.clientY/window.innerHeight*2-1),this.render())}}render(){if(this.isEnabled&&this.pointer.x&&this.pointer.y&&this.items){this.raycaster.setFromCamera(this.pointer,this.camera);const e=this.raycaster.intersectObjects(this.items);if(e.length>0){const t=e[0].object;t!=this.activeItem&&(this.rollOut(),this.rollOver(t)),this.activeItem=t}else this.activeItem&&(this.rollOut(),this.activeItem=null)}}rollOver(e){this.cursor.setForcedState("hover"),e.userData.hint&&this.cursor.setHint(e.userData.hint),e.userData.rollOver&&e.userData.rollOver()}rollOut(){this.cursor.setForcedState(""),this.cursor.setHint(""),this.activeItem&&this.activeItem.userData.rollOut&&this.activeItem.userData.rollOut()}}class yl{constructor(e){this.sharedObjects=e,this.init(),this.deactivate()}activate(){this.enabled=!0,this.base.visible=!0}show(){this.resetAnimation();const{lightWrapper:e}=this.sharedObjects;this.lightContainer.add(e),this.blinkPct=1}startBlink(){C.killTweensOf(this),this.blinkPct=-.5,this.blinktween=C.timeline({repeat:-1,repeatDelay:4.8}),this.blinktween.to(this,{duration:.3,blinkPct:1,ease:"power1.in"}),this.blinktween.to(this,{duration:1,blinkPct:-.5,ease:"power1.out"})}deactivate(){this.enabled=!1,this.base.visible=!1,this.blinktween&&(this.blinktween.kill(),this.blinktween=null),C.killTweensOf(this.animation),C.killTweensOf(this.pyramid.position),C.killTweensOf(this.center.scale),C.killTweensOf(this.ring.scale),C.killTweensOf(this.burst.scale),C.killTweensOf(this.burstMaterial)}init(){this.clock=new fi,this.initObjects(),this.resetAnimation(),this.resizeHandler(),window.addEventListener("resize",this.resizeHandler.bind(this))}resizeHandler(){this.width=window.innerWidth;let e=1-(window.innerWidth-400)/400;e=Math.max(0,Math.min(1,e));let t=1+e*.4;this.base.scale.set(t,t,t);const i=window.innerWidth/window.innerHeight;window.innerWidth<700?t=Math.max(.1,1-Math.max(0,i-.6363)*3):t=1-Math.max(0,i-1.775)*.3,t*=1-e*.1,this.burstWrapper.scale.set(t,t,t),this.burst.position.z=-1.1}initGltf(e){const{environmentMapTexture:t}=this.sharedObjects;e.scene.traverse(h=>{h instanceof Ue&&h.material instanceof It&&(h.material.envMap=t,h.material.envMapIntensity=1,h.castShadow=!0,h.receiveShadow=!0,h.frustumCulled=!1)});const i=new ye;this.center.add(i),i.scale.set(20,20,20),i.position.set(0,.7,.3);let n=e.scene.children.find(h=>h.name==="pyramid");i.add(n),this.top=n.children.find(h=>h.name==="top"),this.bottom=n.children.find(h=>h.name==="bottom");let s=e.scene.children.find(h=>h.name==="eye");this.eye=s.children.find(h=>h.name==="eyeball"),this.shutter_top=s.children.find(h=>h.name==="shutter_top"),this.lid_top=s.children.find(h=>h.name==="lid_top"),this.shutter_bottom=s.children.find(h=>h.name==="shutter_bottom"),this.lid_bottom=s.children.find(h=>h.name==="lid_bottom"),i.add(s);let o=e.scene.children.find(h=>h.name==="ring");this.ring.add(o),o.scale.set(20,20,20),o.rotation.set(0,.26,0)}test(e){this.base.add(e.scene),e.scene.scale.set(10,10,10)}initObjects(){const{textureLoader:e,gltfLoader:t,scene:i}=this.sharedObjects;t.load("/gltf/home/pyramid_draco.gltf",this.initGltf.bind(this));const n=e.load("/textures/home/burst.png");n.encoding=it;const s=new It;s.map=n,s.transparent=!0,this.burstMaterial=s,this.base=new ye,i.add(this.base),this.base.rotation.x=.2,this.base.position.y=-.1,this.pyramid=new ye,this.base.add(this.pyramid),this.center=new ye,this.pyramid.add(this.center),this.ring=new ye,this.pyramid.add(this.ring),this.lightContainer=new ye,this.ring.add(this.lightContainer),this.burstWrapper=new ye,this.base.add(this.burstWrapper),this.burst=new Ue(new Ht(3,3),s),this.burst.position.z=-1.1,this.burst.position.y=-.45,this.burstWrapper.add(this.burst)}resetAnimation(){this.animation={isOver:!1,globalPct:1,introBlinkPct:0,basePositionPct:0,ringAmplitudePct:1,ringRotationSpeedPct:1,ringRotationY:0,ringRotationXBase:0,ringPosition:0,lightRotationX:0,lightRotationY:0,lightRotationZ:0,lightRotationSpeedPct:1,lightXpct:.8,lightYpct:0,centerRotation:0,centerRotationExtra:0,centerPosition:0,topPosition:0,eyeRotationY:0,eyeRotationX:0}}render(){if(this.enabled){const{lightWrapper:e,mousePosition:t}=this.sharedObjects,i=this.clock.getElapsedTime();let n=-.5+t.slowPctX*1,s=-.5+t.slowPctY*1;this.base.position.z=this.animation.basePositionPct*10,this.ring.position.y=this.animation.ringPosition,this.animation.ringRotationY+=.01*this.animation.ringRotationSpeedPct,this.ring.rotation.x=this.animation.ringRotationXBase+Math.sin(i*1.75)*(this.animation.ringAmplitudePct*.15),this.ring.rotation.z=Math.cos(i*.75)*(this.animation.ringAmplitudePct*.15),this.ring.rotation.y=this.animation.ringRotationY,this.animation.ringRotationY>Math.PI*2&&(this.animation.ringRotationY-=Math.PI*2),this.animation.isOver||(this.animation.lightRotationX+=this.animation.lightRotationSpeedPct*.0019,this.animation.lightRotationZ+=this.animation.lightRotationSpeedPct*.0023),this.animation.lightRotationX>Math.PI*2&&(this.animation.lightRotationX-=Math.PI*2),this.animation.lightRotationZ>Math.PI*2&&(this.animation.lightRotationZ-=Math.PI*2),this.lightContainer.rotation.x=this.animation.lightRotationX,this.lightContainer.rotation.z=this.animation.lightRotationZ,this.lightContainer.rotation.y=this.animation.lightRotationY,e.position.x=this.animation.lightXpct*1.15,e.position.y=this.animation.lightYpct*.3,this.animation.centerRotationExtra=Math.sin(i*.85)*.085,this.animation.centerPosition=Math.cos(i*1.95)*.055,this.animation.topPosition=Math.cos(i*2.7)*.055,this.center.rotation.x=this.animation.eyeRotationX*.2*this.animation.globalPct,this.center.rotation.y=(this.animation.centerRotation+this.animation.centerRotationExtra+this.animation.eyeRotationY*.2)*this.animation.globalPct,this.center.position.y=this.animation.centerPosition*this.animation.globalPct,this.bottom.rotation.x=s*.16,this.bottom.rotation.y=this.animation.centerRotationExtra*.6+n*.12,this.bottom.position.y=-.032-this.animation.topPosition*.012,this.top.rotation.y+=.02,this.top.position.y=.025+this.animation.topPosition*.015,this.animation.eyeRotationY=n-this.animation.centerRotationExtra*1.2,this.animation.eyeRotationX=s+this.animation.centerPosition-.1,this.animation.globalPct>0&&(this.eye.rotation.z=-this.animation.eyeRotationY*this.animation.globalPct),this.eye.rotation.x=this.animation.eyeRotationX+Math.PI*.5;const o=this.blinkPct;this.lid_top.rotation.x=Math.max(o*Math.PI*.25,this.animation.eyeRotationX*.3),this.shutter_top.rotation.x=Math.max(o*Math.PI*.15,this.animation.eyeRotationX*.55),this.shutter_bottom.rotation.x=Math.min(o*-Math.PI*.15,.2+this.animation.eyeRotationX*.55),this.lid_bottom.rotation.x=Math.min(o*-Math.PI*.25,.2+this.animation.eyeRotationX*.3)}}}class bl{constructor(e){let t;ea.subscribe(n=>{t=n})(),this.sharedObjects=e,this.init(t),this.deactivate()}activate(){this.enabled=!0,this.base.visible=!0}show(){this.resetAnimation(),this.shadowMaterial.opacity=0;const{lightWrapper:e}=this.sharedObjects;this.lightContainer.add(e),this.setBgSize()}deactivate(){C.killTweensOf(this.innerWrapper.scale),C.killTweensOf(this.all.position),C.killTweensOf(this.animation),this.enabled=!1,this.base.visible=!1}setCallback(e){const{caster:t}=this.sharedObjects;this.shadowSphere.userData.name="glass",this.leftHand.userData.name="leftHand",this.rightHand.userData.name="rightHand",this.enableHints(),t.enable([this.glass,this.leftHand,this.rightHand],e)}unsetCallback(){const{caster:e}=this.sharedObjects;e.disable()}enableHints(){this.shadowSphere.userData.hint="SHOW PROJECT",this.leftHand.userData.hint="PREVIOUS PROJECT",this.rightHand.userData.hint="NEXT PROJECT"}disableHints(){this.shadowSphere.userData.hint="",this.leftHand.userData.hint="",this.rightHand.userData.hint=""}init(e){this.clock=new fi,this.initObjects(e),this.resetAnimation(),this.resizeHandler(),window.addEventListener("resize",this.resizeHandler.bind(this))}setBackground(){const{world:e}=this.sharedObjects;this.back.material.map=e.background.canvasTexture}resizeHandler(){this.isMobile=window.innerWidth<700,!this.isMobile&&this.zoomIn&&this.zoomOut(),this.width=window.innerWidth;let e=1-(window.innerWidth-400)/400;e=Math.max(0,Math.min(1,e));let t=1+e*.3;this.all.scale.set(t,t,t),this.setBgSize()}setBgSize(){const{convertTo3D:e}=this.sharedObjects,t=e(0,0,-3);t.x&&this.back.scale.set(Math.abs(t.x),Math.abs(t.y))}initGltf(e){const{environmentMapTexture:t}=this.sharedObjects;e.scene.traverse(n=>{n instanceof Ue&&n.material instanceof It&&(n.material.envMap=t,n.material.envMapIntensity=1,n.castShadow=!0,n.receiveShadow=!0,n.frustumCulled=!1)}),this.leftHand=e.scene.children.find(n=>n.name==="left-hand"),this.leftHandWrapper.add(this.leftHand),this.rightHand=e.scene.children.find(n=>n.name==="right-hand"),this.rightHandWrapper.add(this.rightHand);const i=5.5;this.leftHand.scale.set(i,i,i),this.rightHand.scale.set(i,i,i)}initObjects(e){const{gltfLoader:t,textureLoader:i,environmentMapTexture:n,scene:s}=this.sharedObjects;t.load("/gltf/portfolio/crystal_ball.gltf",this.initGltf.bind(this));const o=i.load("/textures/work/smoke.png");for(let c=0;c<e.length;c++){const d=e[c],p=i.load("/textures/work/sphere/"+d.texture);p.encoding=it,this["pictureTexture"+c]=p,p.wrapS=Ci,p.wrapT=Ci,p.offset.set(-.5,0),p.repeat.set(2,1)}const h=new di({reflectivity:0,transmission:.9,roughness:.1,metalness:.1,clearcoat:.2,clearcoatRoughness:1,color:new Ke(11055042),ior:1.07});h.thickness=2,h.envMap=n,h.envMapIntensity=1.1,h.color.convertSRGBToLinear(),this.materials={};for(let c=0;c<e.length;c++){const d=new kt({color:16777215});d.map=this["pictureTexture"+c],d.color.convertSRGBToLinear(),this.materials[c]=d}this.shadowMaterial=new kt({color:460551}),this.shadowMaterial.transparent=!0,this.shadowMaterial.opacity=0,this.backMaterial=new kt({color:3355443}),this.base=new ye,s.add(this.base),this.base.position.y=-.1,this.all=new ye,this.base.add(this.all),this.back=new Ue(new Ht(2,2),this.backMaterial),this.back.position.z=-3,this.base.add(this.back),this.lightContainer=new ye,this.all.add(this.lightContainer),this.innerWrapper=new ye,this.all.add(this.innerWrapper),this.inner=new Ue(new Ai(.6,30,30),this.materials[0]),this.innerWrapper.add(this.inner),this.inner.castShadow=!0,this.glass=new ye,this.all.add(this.glass),this.glassInner=new Ue(new Ai(.75,50,50),h),this.glass.add(this.glassInner),this.glassInner.frustumCulled=!1,this.shadowSphere=new Ue(new Ai(.76,30,30),this.shadowMaterial),this.glass.add(this.shadowSphere),this.leftHandWrapper=new ye,this.all.add(this.leftHandWrapper),this.rightHandWrapper=new ye,this.all.add(this.rightHandWrapper),this.smoke=new _l(o),this.glass.add(this.smoke)}resetAnimation(){this.zoomedIn=!1,this.animation={allRotationX:0,allRotationXplus:0,allRotationYplus:0,rotationPct:1,leftHandExtra:0,rightHandExtra:0,innerRotation:0,innerScale:1,lightRotationX:0,lightRotationY:0,lightRotationZ:0,lightRotationSpeedPct:1,lightXpct:1,lightScalePct:1,lightYpct:0}}showShadow(){C.killTweensOf(this.shadowMaterial),C.to(this.shadowMaterial,{opacity:.7,duration:1,ease:"sine.inOut"})}hideShadow(){C.killTweensOf(this.shadowMaterial),C.to(this.shadowMaterial,{opacity:0,duration:1,ease:"sine.inOut"})}zoomIn(){this.isMobile&&(this.zoomedIn=!0,C.killTweensOf(this.sharedObjects.camera.position),C.to(this.sharedObjects.camera.position,{delay:.2,duration:.4,y:-.1,z:.9,ease:"sine.inOut"}))}zoomOut(){this.zoomedIn&&(this.zoomedIn=!1,C.killTweensOf(this.sharedObjects.camera.position),C.to(this.sharedObjects.camera.position,{delay:.2,duration:.4,y:0,z:3,ease:"sine.inOut"}))}setMaterial(e){this.inner.material=this.materials[e]}showOutline(e){let t;e==="open"?t=this.glass:e==="left"?t=this.leftHand:e==="right"&&(t=this.rightHand),t&&this.sharedObjects.setOutlineObjects([t])}hideOutline(e){this.sharedObjects.setOutlineObjects([])}render(e=!1){if(this.enabled||e){const{lightWrapper:t,mousePosition:i}=this.sharedObjects,n=this.clock.getElapsedTime();this.animation.allRotationX=(-1+i.slowPctY*2)*.3;const s=this.animation.allRotationX+this.animation.allRotationXplus,o=(-1+i.slowPctX*2)*.3+this.animation.allRotationYplus;this.all.rotation.x=s*this.animation.rotationPct,this.all.rotation.y=o*this.animation.rotationPct,this.animation.innerScale=1+Math.sin(n*3.5)*.03,this.inner.scale.set(this.animation.innerScale,this.animation.innerScale,this.animation.innerScale),this.animation.innerRotation=-Math.PI*.5+Math.sin(n*1.84)*.06,this.inner.rotation.x=-s*.2,this.inner.rotation.y=this.animation.innerRotation-o*.2,this.glass.position.y=Math.sin(n*2)*.045,this.leftHand.rotation.y=.2+Math.sin(n*1.8)*.1-this.animation.leftHandExtra*.25,this.rightHand.rotation.y=-.2-Math.sin(n*1.8+.8)*.15+this.animation.rightHandExtra*.25,this.leftHand.position.x=-.8+Math.sin(n*1.8-1)*.05-this.animation.leftHandExtra*.25,this.leftHand.position.y=.1,this.leftHand.position.z=-.2,this.rightHand.position.x=.8-Math.sin(n*1.8-.2)*.05+this.animation.rightHandExtra*.25,this.rightHand.position.y=.1,this.rightHand.position.z=-.2,this.animation.lightRotationX+=this.animation.lightRotationSpeedPct*.01,this.animation.lightRotationY+=this.animation.lightRotationSpeedPct*.016,this.animation.lightRotationZ+=this.animation.lightRotationSpeedPct*.023,this.animation.lightRotationX>Math.PI*2&&(this.animation.lightRotationX-=Math.PI*2),this.animation.lightRotationZ>Math.PI*2&&(this.animation.lightRotationZ-=Math.PI*2),this.lightContainer.rotation.x=this.animation.lightRotationX,this.lightContainer.rotation.z=this.animation.lightRotationZ,this.lightContainer.rotation.y=this.animation.lightRotationY,t.position.x=this.animation.lightXpct*.9,t.scale.set(this.animation.lightScalePct,this.animation.lightScalePct,this.animation.lightScalePct),this.smoke.render(n)}}}class _l extends Ue{constructor(e){e.repeat.x=2,e.wrapS=Ci;const t=new kt({map:e});t.blending=ps;const i=new Ai(.65,50,50);super(i,t),this.smokeTexture=e}destroy(){C.killTweensOf(this.material),this.smokeTexture.dispose(),this.material.dispose()}render(e){this.rotation.x=-Math.sin(e*1.34)*.1,this.rotation.y=-Math.cos(e*1.03)*.1}}class Tl{constructor(e){this.sharedObjects=e,this.init(),this.deactivate()}activate(){this.enabled=!0,this.base.visible=!0}show(){this.resetAnimation();const{lightWrapper:e,spotLight:t}=this.sharedObjects;this.lightContainer.add(e),e.position.x=.9,e.position.y=.75,this.headWrapper.add(t),this.headWrapper.add(t.target),t.position.z=.3,t.position.y=.16,t.target.position.z=0,t.target.position.y=.16,this.isShowingSide=!1,this.all.position.x=0,this.all.position.y=0,this.all.rotation.x=0,this.all.scale.set(1,1,1),this.resizeHandler()}deactivate(){const{world:e}=this.sharedObjects;this.head&&C.killTweensOf(this.head.rotation),this.bust&&C.killTweensOf(this.bust.rotation),C.killTweensOf(this.all.position),C.killTweensOf(this.all.rotation),this.enabled=!1,this.base.visible=!1,e.lightsOn()}init(){this.clock=new fi,this.initObjects(),this.resetAnimation(),this.isMobile=!1,this.resizeHandler(),window.addEventListener("resize",this.resizeHandler.bind(this))}resizeHandler(){if(this.enabled){const e=window.innerWidth;this.isMobile=e<700,this.setPosition(!0);let t=1-(window.innerWidth-400)/400;t=Math.max(0,Math.min(1,t));let i=1+t*.5;this.statueWrapper.scale.set(i,i,i)}}initGltf(e){const{environmentMapTexture:t}=this.sharedObjects;e.scene.traverse(n=>{n instanceof Ue&&n.material instanceof It&&(n.castShadow=!0,n.receiveShadow=!0,n.material.envMap=t,n.material.envMapIntensity=1,n.frustumCulled=!1)}),this.headWrapper=new ye,this.statue.add(this.headWrapper),this.head=e.scene.children.find(n=>n.name==="head"),this.headWrapper.add(this.head),this.headWrapper.position.z=-.01,this.head.position.z=-.01,this.headWrapper.position.y=-.1,this.head.position.y=.09,this.bustWrapper=new ye,this.statue.add(this.bustWrapper),this.bust=e.scene.children.find(n=>n.name==="bust"),this.bustWrapper.add(this.bust);let i=7.5;this.statue.scale.set(i,i,i)}initObjects(){const{scene:e,gltfLoader:t}=this.sharedObjects;t.load("/gltf/head/head_draco.gltf",this.initGltf.bind(this)),this.base=new ye,e.add(this.base),this.base.position.y=-.15,this.all=new ye,this.base.add(this.all),this.statueWrapper=new ye,this.all.add(this.statueWrapper),this.statue=new ye,this.statueWrapper.add(this.statue),this.lightContainer=new ye,this.all.add(this.lightContainer),this.spotContainer=new ye,e.add(this.spotContainer),this.border=new Sl(this.sharedObjects),this.border.init(),e.add(this.border)}showSide(e){this.isShowingSide=!0,this.isLeft=e,this.lookAtSide(this.isLeft),this.setPosition(!1),C.to(this.animation,{movePct:.1,duration:.55,ease:"power1.inOut"}),this.border.show()}showCenter(){const{world:e}=this.sharedObjects;this.isShowingSide=!1,this.lookAtCenter(),this.setPosition(!1),e.lightsOn(),C.to(this.animation,{movePct:1,duration:.55,ease:"power1.inOut"}),this.border.hide()}lookAtSide(e){let t,i;this.isMobile?(t=e?Math.PI*.5:-Math.PI*.5,i=t*.5,i=t):(t=e?1.25:-1.25,i=t*.5),C.killTweensOf(this.head.rotation),C.killTweensOf(this.bust.rotation),C.to(this.head.rotation,{y:t,duration:.55,ease:"power1.inOut"}),C.to(this.bust.rotation,{y:i,duration:.55,ease:"power1.inOut"}),this.border.setTitle(e)}lookAtCenter(){C.killTweensOf(this.head.rotation),C.killTweensOf(this.bust.rotation),C.to(this.head.rotation,{y:0,duration:.55,ease:"power1.inOut"}),C.to(this.bust.rotation,{y:0,duration:.55,ease:"power1.inOut"})}setPosition(e){if(this.head){this.all.position.z=0,this.all.rotation.y=0;let t,i,n,s;const{convertTo3D:o}=this.sharedObjects,h=o(0,window.innerHeight,this.all.position.z);this.isShowingSide?this.isMobile?(s=1.2,t=0,this.isLeft?t=-.25:t=.25,i=-1.5,n=0):(this.isLeft?t=h.x*-.4:t=h.x*.4,i=.25,n=0,s=1.25):(s=1,t=i=n=0),e?(C.killTweensOf(this.all.position),C.killTweensOf(this.all.rotation),C.killTweensOf(this.all.scale),this.all.position.x=t,this.all.position.y=i,this.all.rotation.x=n,this.all.scale.x=s,this.all.scale.y=s,this.all.scale.z=s):(C.to(this.all.position,{x:t,y:i,duration:.7,ease:"power2.inOut"}),C.to(this.all.rotation,{x:n,duration:1.5,ease:"power1.inOut"}),C.to(this.all.scale,{x:s,y:s,y:s,duration:.7,ease:"power1.inOut"}))}}resetAnimation(){this.animation={movePct:1}}render(){if(this.enabled){const{mousePosition:e,spotLight:t}=this.sharedObjects,i=this.clock.getElapsedTime(),n=(-1+e.slowPctX*2)*this.animation.movePct,s=(-1+e.slowPctY*2)*this.animation.movePct,o=.4+this.animation.movePct*.6,h=Math.sin(i*.65);this.headWrapper.rotation.x=(.1+s*.075+h*.05-.1)*o,this.headWrapper.rotation.y=n*.4*o,this.statue.rotation.y=Math.sin(i*.5)*.1*o,this.statue.position.y=(0+Math.sin(i*1.65)*.01)*o,this.lightContainer.rotation.y+=.03}}setContent(e){const{world:t}=this.sharedObjects;this.isLeft?e==0?this.setSpotLight(-.05,.16):e==1?this.setSpotLight(-.036,.2):e==2?this.setSpotLight(-.016,.158):e==3?this.setSpotLight(.02,.198):e==4?this.setSpotLight(.055,.185):e==5?this.setSpotLight(.03,.146):e==6?this.setSpotLight(.033,.123):e==7&&this.setSpotLight(.062,.163):e==0?this.setSpotLight(-.037,.199):e==1?this.setSpotLight(-.042,.153):e==2?this.setSpotLight(-.013,.178):e==3?this.setSpotLight(.009,.146):e==4?this.setSpotLight(.025,.172):e==5?this.setSpotLight(.025,.199):e==6?this.setSpotLight(.012,.115):e==7&&this.setSpotLight(.048,.151),t.lightsOff()}setSpotLight(e,t){const{spotLight:i}=this.sharedObjects;C.to(i.target.position,{duration:.2,x:e,y:t,ease:"power1.inOut"})}}class Sl extends ye{constructor(e){super(),this.sharedObjects=e}deactivate(){this.visible=!1}init(){this.initObjects(),this.resizeHandler(),window.addEventListener("resize",this.resizeHandler.bind(this)),this.visible=!1}show(){this.resizeHandler(),this.visible=!0,this.resizeHandler(),this.scale.set(2,2,1),this.rotation.x=.25,C.killTweensOf(this.scale),C.killTweensOf(this.rotation),C.to(this.scale,{duration:.5,x:1,y:1,ease:"power1.out"}),C.to(this.rotation,{duration:.9,x:0,ease:"back.out"})}hide(){C.killTweensOf(this.scale),C.to(this.scale,{duration:.45,onComplete:this.hideHandler,x:2,y:2,ease:"power1.in"})}hideHandler(){this.visible=!1}initObjects(){const{textureLoader:e}=this.sharedObjects,t=e.load("/textures/services/gold_horizontal.png");t.encoding=it;const i=e.load("/textures/services/gold_vertical.png");i.encoding=it,this.titleCreativeTexture=e.load("/textures/services/title_creative.png"),this.titleCreativeTexture.encoding=it,this.titleServiceTexture=e.load("/textures/services/title_service.png"),this.titleServiceTexture.encoding=it;const n=new kt;n.map=t,n.transparent=!0,n.color.convertSRGBToLinear();const s=new kt;s.map=i,s.transparent=!0,s.color.convertSRGBToLinear();const o=new kt;o.map=this.titleCreativeTexture,o.transparent=!0,o.color.convertSRGBToLinear(),this.titleMaterial=o,this.title=new Ue(new Ht(.95,.259),o),this.add(this.title),this.left=this.addPlane(s,.5,-.5),this.right=this.addPlane(s,-.5,-.5),this.bottom=this.addPlane(n,.5,.5),this.topLeft=this.addPlane(n,.5,-.5),this.topRight=this.addPlane(n,-.5,-.5)}addPlane(e,t,i){const n=new ye;this.add(n);const s=new Ue(new Ht(1,1),e);return s.position.x=t,s.position.y=i,n.add(s),n}resizeHandler(){if(this.visible){const{convertTo3D:e}=this.sharedObjects;this.isMobile=window.innerWidth<700;const t=Math.min(window.innerWidth*.055,window.innerHeight*.055),i=window.innerWidth-t,n=window.innerHeight-t,s=e(i,n,0),o=Math.abs(s.x)*2,h=Math.abs(s.y)*2;this.edgePosition=.1,this.edgeSize=.03;const c=.5,d=.0075;this.setPlane(this.left,-s.x,-s.y-d,this.edgeSize,h-d*2),this.setPlane(this.right,s.x,-s.y-d,this.edgeSize,h-d*2),this.setPlane(this.bottom,-s.x+d,s.y,o-d*2,this.edgeSize),this.isMobile?(this.setPlane(this.topLeft,-s.x+d,-s.y,o-d*2,this.edgeSize),this.setPlane(this.topRight,-10,-10,.1,.1),this.title.position.y=-s.y-.025-.3,this.title.scale.set(1.5,1.5,1.5)):(this.setPlane(this.topLeft,-s.x+d,-s.y,o*.5-c-d,this.edgeSize),this.setPlane(this.topRight,s.x-d,-s.y,o*.5-c-d,this.edgeSize),this.title.position.y=-s.y-.05,this.title.scale.set(1,1,1))}}setPlane(e,t,i,n,s){e.position.x=t,e.position.y=i,e.scale.x=n,e.scale.y=s}setTitle(e){e?this.titleMaterial.map=this.titleServiceTexture:this.titleMaterial.map=this.titleCreativeTexture}}const As={people:{angle:-.9,x:-.38,y:.036,z:-.02},strategy:{angle:-1.415,x:-.21,y:.12,z:-.05},vision:{angle:-1.9,x:-0,y:-.07,z:-1},content:{angle:.9,x:-.01,y:.2,z:-.05},creative:{angle:1.415,x:.2,y:.18,z:-.05},process:{angle:1.9,x:.2,y:-.26,z:.23}};class Ml{constructor(e){this.sharedObjects=e,this.init(),this.deactivate()}activate(){this.enabled=!0,this.base.visible=!0,this.tunnel.start()}show(){this.resetAnimation();const{lightWrapper:e}=this.sharedObjects;this.lightContainer.add(e),this.state="up",this.flame=new Al,this.icons.people.child.add(this.flame)}deactivate(){this.enabled=!1,this.base.visible=!1,this.tunnel&&this.tunnel.end();const{lightWrapper:e}=this.sharedObjects;C.killTweensOf(this.lightContainer.scale),C.killTweensOf(this.lightContainer.position),C.killTweensOf(this.hand.rotation),C.killTweensOf(this.mainWrapper.position),C.killTweensOf(this.mainWrapper.rotation),C.killTweensOf(this.centerWrapper.scale),C.killTweensOf(this.centerWrapper.position),C.killTweensOf(this.centerWrapper.rotation),C.killTweensOf(this.hand.position),C.killTweensOf(this.burst.scale),C.killTweensOf(e.position),this.flame&&(this.flame.destroy(),this.icons.people.child.remove(this.flame),this.flame=null)}init(){this.clock=new fi,this.initObjects(),this.resetAnimation(),this.resizeHandler(),window.addEventListener("resize",this.resizeHandler.bind(this))}resizeHandler(){this.isMobile=window.innerWidth<700,this.state==="down"&&(C.killTweensOf(this.mainWrapper.position),this.mainWrapper.position.y=this.getBottomPosition()),this.width=window.innerWidth,this.centerScale=1;let e=1-(window.innerWidth-400)/400;e=Math.max(0,Math.min(1,e));let t=1+e*.4;this.base.scale.set(t,t,t),this.iconPositions=[];const i=.9;for(let n in As){const s=As[n].angle,o=Math.sin(s)*i,h=Math.cos(s)*i;let c=new Ae(o,h-.11,.3);c.project(this.sharedObjects.camera),c.x=(c.x+1)*window.innerWidth/2,c.y=-(c.y-1)*window.innerHeight/2,this.iconPositions[n]={key:n,x:c.x,y:c.y}}}initGltfHand(e){const t=["people","strategy","triangle_border","content","creative","process"];this.addDetails(e),e.scene.traverse(i=>{if(t.indexOf(i.name)!=-1){if(i.name==="triangle_border"){i.name="vision";const o=new El(i);this.base.add(o),this.tunnel=o}const n=As[i.name],s=new Pl(i);s.init(n.angle,n.x,n.y,n.z,this.isMobile),this.icons[i.name]=s}}),this.ring.material=this.icons.people.child.material;for(let i=0;i<this.iconLabels.length;i++){const n=this.iconLabels[i],s=this.icons[n];this.iconsWrapper.add(s.child)}this.gltfScale=5.3,e.scene.scale.set(this.gltfScale,this.gltfScale,this.gltfScale),this.hand.add(e.scene)}addDetails(e){const{environmentMapTexture:t}=this.sharedObjects;e.scene.traverse(i=>{i instanceof Ue&&i.material instanceof It&&(i.material.envMap=t,i.material.envMapIntensity=1,i.castShadow=!0,i.frustumCulled=!1)})}initObjects(){const{textureLoader:e,gltfLoader:t,scene:i}=this.sharedObjects;this.iconLabels=["people","strategy","vision","content","creative","process"],this.icons={},t.load("/gltf/about/new_hand_draco.gltf",this.initGltfHand.bind(this));const n=e.load("/textures/about/center.png");n.encoding=it;const s=e.load("/textures/about/burst.png");s.encoding=it;const o=new It;o.map=n,o.transparent=!0,o.color.convertSRGBToLinear();const h=new It;h.map=s,h.transparent=!0,this.base=new ye,i.add(this.base),this.base.position.y=-.15,this.mainWrapper=new ye,this.base.add(this.mainWrapper),this.burst=new Ue(new Ht(2.5,2.5),h),this.burst.position.z=-1,this.base.add(this.burst),this.handWrapper=new ye,this.mainWrapper.add(this.handWrapper),this.handWrapper.position.x=.15,this.hand=new ye,this.handWrapper.add(this.hand),this.lightContainer=new ye,this.hand.add(this.lightContainer),this.centerWrapper=new ye,this.base.add(this.centerWrapper);const c=.45;this.centerWrapper.scale.set(c,c,c),this.centerWrapper.position.set(0,-.65,-.1),this.centerWrapper.rotation.set(Math.PI*.5,0,0),this.center=new Ue(new Ht(1.9,1.9),o),this.centerWrapper.add(this.center),this.iconsContainer=new ye,this.base.add(this.iconsContainer),this.iconsWrapper=new ye,this.iconsContainer.add(this.iconsWrapper);const d=new ta(.89,.014,10,80),p=new Ue(d,new kt);p.rotation.x=Math.PI*1,this.centerWrapper.add(p),this.ring=p}resetAnimation(){this.animation={lightScalePct:1,ringMovePct:1,iconsMovePct:1,idlePct:1},this.mainWrapper.scale.set(1,1,1),this.mainWrapper.rotation.set(0,0,0),this.mainWrapper.position.set(0,0,0)}render(){if(this.enabled){const{lightWrapper:e,mousePosition:t}=this.sharedObjects,i=this.clock.getElapsedTime(),n=-1+t.slowPctX*2,s=-1+t.slowPctY*2,o=n*.14+Math.sin(i*1.3)*.1,h=s*.14+Math.cos(i*1.3)*.1;this.handWrapper.rotation.y=o*this.animation.idlePct,this.handWrapper.rotation.x=h*this.animation.idlePct,this.iconsWrapper.rotation.y=o*this.animation.iconsMovePct*this.animation.idlePct,this.iconsWrapper.rotation.x=h*this.animation.iconsMovePct*this.animation.idlePct;let c=0;for(const d of this.iconLabels)this.icons[d].render(i,c);this.ring.rotation.x=Math.cos(i*2.3)*.1*this.animation.ringMovePct,this.ring.rotation.z=Math.sin(i*2.3)*.1*this.animation.ringMovePct,this.lightContainer.rotation.z+=.02,e.scale.set(this.animation.lightScalePct,this.animation.lightScalePct,this.animation.lightScalePct),this.burst.rotation.z=i*.08}}selectIcon(e){this.selectedIcon&&this.selectedIcon.unselect(),e!=""?(this.selectedIcon=this.icons[e],this.selectedIcon.select()):this.selectedIcon=null,e==="people"?this.flame.show():this.flame.hide()}setHoveredIcon(e){this.hoverLabel!=e&&(this.hoverLabel=e,this.state==="up"&&(this.moveHand(e),this.tunnel.hide(),this.hoveredIcon&&this.hoveredIcon.unHover(),e!=""?(e==="vision"&&this.tunnel.show(),this.hoveredIcon=this.icons[e],this.hoveredIcon.hover(this.gltfScale,this.handWrapper.position.x)):this.hoveredIcon=null,this.hoveredIcon?this.startHoveringLight():this.stopHoveringLight()))}moveHand(e){let t={};e==="people"?t={z:-1,x:-1}:e==="strategy"?t={z:-.5,x:-1}:e==="content"?t={z:0,x:-1}:e==="creative"?t={z:1,x:-1}:e==="process"?t={z:1,x:0}:e==="vision"?t={z:0,x:1}:t={z:0,x:0},C.killTweensOf([this.hand.rotation,this.iconsContainer.rotation]),C.to([this.hand.rotation,this.iconsContainer.rotation],{duration:.3,x:t.x*-.2,y:t.z*-.3,ease:"sine.inOut"})}startHoveringLight(){const{lightWrapper:e}=this.sharedObjects;C.killTweensOf(this.lightContainer.scale),C.killTweensOf(this.lightContainer.position),C.killTweensOf(e.position);const t=this.hoveredIcon.userData;C.to(e.position,{duration:1,x:0,ease:"power1.out"}),C.to(this.lightContainer.scale,{duration:.3,x:1,y:1,z:1,ease:"power1.inOut"});let i;this.lightContainer.scale.x===0?i=.2:i=.4,this.hoverLabel==="vision"?C.to(this.lightContainer.position,{duration:i,x:-.21,y:.15,z:.3,ease:"power4.inOut"}):C.to(this.lightContainer.position,{duration:i,x:t.fingerX*this.gltfScale,y:t.fingerY*this.gltfScale-.1,z:t.fingerZ*this.gltfScale+.3,ease:"power4.inOut"})}stopHoveringLight(){const{lightWrapper:e}=this.sharedObjects;C.killTweensOf(this.lightContainer.scale),C.killTweensOf(this.lightContainer.position),C.killTweensOf(e.position),C.to(this.lightContainer.position,{duration:1,x:-.2,y:-.1,z:.2,ease:"power1.out"}),C.to(e.position,{duration:1,x:.2,ease:"power1.out"})}moveDown(e=!0){if(this.state!=="down"){this.state="down";for(const n of this.iconLabels){const s=this.icons[n];s!=this.selectedIcon&&s.unselect()}this.animation.iconsMovePct=.25,C.to(this.animation,{duration:.3,ringMovePct:0,iconsMovePct:.25,ease:"sine.out"});let t=1.1,i="power4.inOut";C.to(this.centerWrapper.scale,{duration:t,x:this.centerScale,y:this.centerScale,z:this.centerScale,ease:i}),C.to(this.centerWrapper.position,{duration:t,y:0,ease:i}),C.to(this.centerWrapper.rotation,{duration:t,x:0,ease:i}),t=1.5,i="power2.inOut",e||(this.mainWrapper.rotation.z+=Math.PI*2),C.to(this.mainWrapper.scale,{duration:t,x:.6,y:.6,z:.6,ease:i}),C.to(this.mainWrapper.rotation,{duration:t,x:-Math.PI*.65,y:-.25,z:Math.PI,ease:i}),C.to(this.mainWrapper.position,{duration:t,y:this.getBottomPosition(),z:.5,ease:i}),C.to(this.animation,{duration:t,idlePct:.1,ease:i})}}moveUp(){if(this.state!=="up"){this.state="up";for(const n of this.iconLabels){const s=this.icons[n];s!=this.hoveredIcon&&s.unHover()}C.to(this.animation,{delay:.3,duration:.3,ringMovePct:1,iconsMovePct:1,ease:"sine.out"});let e=1.1,t="power4.inOut";const i=.4;C.to(this.centerWrapper.scale,{duration:e,x:i,y:i,z:i,ease:t}),C.to(this.centerWrapper.position,{duration:e,y:-.7,ease:t}),C.to(this.centerWrapper.rotation,{duration:e,x:Math.PI*.5,ease:t}),e=.8,t="power1.inOut",C.to(this.mainWrapper.scale,{duration:e,x:1,y:1,z:1,ease:t}),C.to(this.mainWrapper.rotation,{duration:e,x:0,y:0,z:0,ease:t}),C.to(this.mainWrapper.position,{duration:e,y:0,z:0,ease:t}),C.to(this.animation,{duration:e,idlePct:1,ease:t})}}getBottomPosition(){return-this.centerScale*.65}}class Pl{constructor(e){this.iconOutScale=2,this.iconOverScale=5,this.iconSelectedScale=8,this.iconUnselectedScale=3,this.child=e,this.userData={},this.userData.fingerX=e.position.x,this.userData.fingerY=e.position.y,this.userData.fingerZ=e.position.z,this.userData.fingerIconZ=0}init(e,t,i,n,s){let o;s?o=.78:o=.86,this.userData.edgeX=Math.sin(e)*o,this.userData.edgeY=Math.cos(e)*o,this.userData.edgeZ=.3,this.userData.outX=t,this.userData.outY=i,this.userData.outZ=n,this.child.name==="vision"&&(this.userData.fingerX=-.038,this.userData.fingerY=-.018,this.userData.fingerZ=.2,this.userData.fingerIconZ=.2,this.iconOverScale=6),this.child.scale.set(this.iconOutScale,this.iconOutScale,this.iconOutScale),this.child.position.set(this.userData.outX,this.userData.outY,this.userData.outZ)}deactivate(){C.killTweensOf(this.graphic.position),C.killTweensOf(this.position),C.killTweensOf(this.scale)}select(){const e=this.child;C.killTweensOf(e.position),C.killTweensOf(e.scale),C.to(e.position,{delay:.1,duration:.6,x:0,y:.6,z:.6,ease:"power3.out"}),C.to(e.scale,{delay:.1,duration:.6,x:this.iconSelectedScale,y:this.iconSelectedScale,z:this.iconSelectedScale,ease:"power3.out"})}unselect(){const e=this.child,t=this.userData;C.killTweensOf(e.position),C.killTweensOf(e.scale),C.killTweensOf(e.rotation),C.to(e.position,{duration:.9,x:t.edgeX,y:t.edgeY,z:t.edgeZ,ease:"power3.inOut"}),C.to(e.scale,{duration:.9,x:this.iconUnselectedScale,y:this.iconUnselectedScale,z:this.iconUnselectedScale,ease:"power3.inOut"}),e.rotation.y=e.rotation.y%(Math.PI*2),C.to(e.rotation,{duration:.9,y:0,ease:"power3.inOut"})}hover(e,t){const i=this.child,n=this.userData;this.isHovering=!0,C.killTweensOf(i.position),C.killTweensOf(i.scale);let s=n.fingerX*e+t,o=n.fingerY*e,h=n.fingerIconZ;C.to(i.position,{duration:.5,x:s,y:o,z:h,ease:"power3.inOut"}),C.to(i.scale,{duration:.6,x:this.iconOverScale,y:this.iconOverScale,z:this.iconOverScale,ease:"power3.inOut"})}unHover(){const e=this.child,t=this.userData;this.isHovering=!1,C.killTweensOf(e.position),C.killTweensOf(e.scale),C.killTweensOf(e.rotation),C.to(e.position,{duration:.9,x:t.outX,y:t.outY,z:t.outZ,ease:"power3.inOut"}),C.to(e.scale,{duration:.9,x:this.iconOutScale,y:this.iconOutScale,z:this.iconOutScale,ease:"power3.inOut"}),e.rotation.y=e.rotation.y%(Math.PI*2),C.to(e.rotation,{duration:.9,y:0,ease:"power3.inOut"})}render(e,t){const i=this.child;let n=Math.sin(e*2.3+t*1.4)*.05;const s=Math.cos(e*2.3+t*1.4)*.05;(i.name==="process"||i.name==="vision")&&(n+=Math.PI*.5),i.rotation.x=n,i.rotation.z=s,this.isHovering&&i.name!=="vision"&&(i.rotation.y+=.1)}}class Al extends Ue{constructor(){const e=new ia(document.querySelector(".flame")),t=new kt({map:e});t.blending=ps,t.transparent=!0;const i=new Ht(.01,.02);super(i,t),this.position.y=.004,this.flameTexture=e,this.visible=!1}show(){this.visible=!0,this.material.opacity=1}hide(){C.killTweensOf(this.material),C.to(this.material,{duration:.2,opacity:0,onComplete:this.hideHandler,ease:"sine.in"})}hideHandler(){this.visible=!1}destroy(){C.killTweensOf(this.material),this.flameTexture.dispose(),this.material.dispose()}}class El extends ye{constructor(e){super(),this.isShown=!1,this.amount=6,this.tweens=[];const t="power1.in",i=2;for(let n=0;n<this.amount;n++){let o=n/5*i;const h=e.clone();h.visible=!1;const c=new ye;h.castShadow=!1,this.add(c),c.add(h),h.rotation.set(Math.PI*.5,0,0),h.position.set(-.072,-.08,0);let d=5.9;h.scale.set(d,d,d);let p=C.to(c.position,{delay:o,onRepeat:()=>{this.onRepeat(h)},duration:i,z:3.5,x:-.4,y:-.35,ease:t,repeat:-1,paused:!0}),r=C.to(c.rotation,{delay:o,duration:i,z:4.5,ease:t,repeat:-1,paused:!0});d=6.4;let l=C.to(c.scale,{delay:o,duration:i,x:d,y:d,z:d,ease:t,repeat:-1,paused:!0});this.tweens.push(p,r,l)}}start(){for(let e of this.tweens)e.resume()}end(){for(let e of this.tweens)e.pause()}show(){this.isShown=!0}hide(){this.isShown=!1}onRepeat(e){e.visible=this.isShown}}class Cl{constructor(e,t){this.sharedObjects=e,this.members=t,this.init(),this.deactivate()}activate(){this.enabled=!0,this.base.visible=!0}show(){this.resetAnimation(),this.isOverView=!1;const{lightWrapper:e}=this.sharedObjects;this.lightContainer.add(e),C.to(this.animation,{delay:.3,duration:4,extraLightRotation:20,ease:"power1.out"}),this.animation.extraLightPosition=-10;const t=new C.timeline;t.to(this.animation,{delay:.3,duration:1,extraLightPosition:0,ease:"sine.out"}),t.to(this.animation,{duration:4,extraLightPosition:-1.5,ease:"sine.inOut"}),t.to(this.animation,{duration:3,extraLightPosition:0,ease:"sine.inOut"}),this.animation.extraCardRotationPct=0}deactivate(){this.enabled=!1,this.base.visible=!1,this.cardLoadManager&&(this.cardLoadManager=null),this.cardLoadManager&&(this.cardLoadManager.onLoad=null,this.cardLoadManager.onProgress=null),C.killTweensOf(this.lightContainer.scale),C.killTweensOf(this.lightContainer.position),C.killTweensOf(this.animation),C.killTweensOf(this.deck.rotation),this.box&&(C.killTweensOf(this.box.position),C.killTweensOf(this.flap_left.rotation),C.killTweensOf(this.flap_right.rotation),C.killTweensOf(this.flap_top.rotation),C.killTweensOf(this.flap_front.rotation));for(const e of this.cards)e.deactivate()}setCallback(e,t,i){const{caster:n}=this.sharedObjects;this.deck_cards.userData.hint="OPEN BOX",this.deck_cards.userData.rollOver=t.bind(this),this.deck_cards.userData.rollOut=i.bind(this);const s=this.cards.concat([this.deck_cards]);n.enable(s,e)}unsetCallback(){const{caster:e}=this.sharedObjects;e.disable()}init(){this.clock=new fi,this.amount=this.members.length,this.initObjects(),this.resetAnimation(),this.resizeHandler(),window.addEventListener("resize",this.resizeHandler.bind(this))}resizeHandler(){this.isMobile=window.innerWidth<700,!this.isMobile&&this.zoomIn&&this.zoomOut(),this.scalePct=1-(window.innerWidth-400)/400,this.scalePct=Math.max(0,Math.min(1,this.scalePct)),this.lightContainer.position.z=this.scalePct*1;for(const e of this.cards)e.scalePct=this.scalePct}initGltf(e){const{environmentMapTexture:t}=this.sharedObjects;e.scene.traverse(i=>{i instanceof Ue&&i.material instanceof It&&(i.material.envMap=t,i.material.envMapIntensity=1,i.castShadow=!0,i.receiveShadow=!0,i.frustumCulled=!1)}),this.flap_left=e.scene.children.find(i=>i.name==="flap_left"),this.flap_right=e.scene.children.find(i=>i.name==="flap_right"),this.flap_top=e.scene.children.find(i=>i.name==="flap_top"),this.deck_cards_bottom=e.scene.children.find(i=>i.name==="deck_cards_bottom"),this.deck_cards=e.scene.children.find(i=>i.name==="deck_cards"),this.flap_front=this.flap_top.children.find(i=>i.name==="flap_front"),this.box=e.scene,this.box.scale.set(6,6,6),this.box.position.z=.1,this.boxWrapper=new ye,this.boxWrapper.add(this.box),this.deck.add(this.boxWrapper)}initObjects(){const{gltfLoader:e,textureLoader:t,scene:i}=this.sharedObjects;e.load("/gltf/team/deck_cards.gltf",this.initGltf.bind(this));const n=t.load("/textures/cards/card-info.png");n.encoding=it;const s=t.load("/textures/cards/card_back_Opacity.jpg"),o=t.load("/textures/cards/card_back_Normal.jpg"),h=t.load("/textures/cards/card_back_Roughness.jpg"),c=t.load("/textures/cards/card_back_Color.jpg");c.encoding=it;const d=[],p=[];for(let{texture:l}of this.members){const a=t.load(`/textures/cards/front/${l}`);a.encoding=it,d.push(a);const f=t.load(`/textures/cards/info/${l}`);f.encoding=it,p.push(f)}const r=new It;r.transparent=!0,r.map=c,r.alphaMap=s,r.normalMap=o,r.normalScale=new Me(5,5),r.roughnessMap=h,r.color.convertSRGBToLinear(),r.depthTest=!0,r.alphaTest=.1,this.cardBackMaterial=r,this.base=new ye,i.add(this.base),this.base.position.y=-.1,this.lightContainer=new ye,this.base.add(this.lightContainer),this.deck=new ye,this.base.add(this.deck),this.cardsWrapper=new ye,this.deck.add(this.cardsWrapper),this.cards=[];for(let l=0;l<15;l++){const a=new Ol(l,d[l],p[l],s,r,this.amount);a.frustumCulled=!1,this.cardsWrapper.add(a),this.cards.push(a)}}resetAnimation(){this.animation={boxExtraPct:1,extraCardRotationPct:0,lightRotation:0,extraLightRotation:0,extraLightPosition:0,introScale:0,deckRotationPct:0}}zoomIn(){this.isMobile&&(this.zoomedIn=!0,C.killTweensOf(this.sharedObjects.camera.position),C.to(this.sharedObjects.camera.position,{delay:.2,duration:.4,z:1.4,ease:"sine.inOut"}))}zoomOut(){this.zoomedIn&&(this.zoomedIn=!1,C.killTweensOf(this.sharedObjects.camera.position),C.to(this.sharedObjects.camera.position,{delay:.2,duration:.4,z:3,ease:"sine.inOut"}))}showOutline(e,t){let i;e==="continue"?i=this.box:e==="card"&&(i=this.cards[t]),i&&this.sharedObjects.setOutlineObjects([i])}hideOutline(e){this.sharedObjects.setOutlineObjects([])}startOverviewState(){this.isOverView=!0,C.to(this.animation,{duration:2,deckRotationPct:1,ease:"power2.out"})}startBrowseState(){this.isOverView=!1,C.to(this.animation,{duration:2,deckRotationPct:0,ease:"power2.inOut"})}render(){if(this.enabled){const{camera:e,scene:t,lightWrapper:i,mousePosition:n}=this.sharedObjects,s=this.clock.getElapsedTime(),o=-1+n.slowPctX*2,h=-1+n.slowPctY*2;this.boxWrapper.position.z=this.scalePct*.85*this.animation.introScale;for(const d of this.cards)d.render(-o*1,h*1,this.animation.extraCardRotationPct,s);this.deck.rotation.z=s*.09%(Math.PI*2)*this.animation.deckRotationPct,this.deck.position.y=-.14*this.scalePct,this.animation.lightRotation=s*1.75;const c=this.animation.lightRotation+this.animation.extraLightRotation;i.position.x=Math.cos(c)*.75,i.position.z=Math.sin(c)*.75,this.lightContainer.position.y=Math.sin(s*.5)*.7+this.animation.extraLightPosition,this.boxWrapper.position.y=Math.sin(s*2.5)*.01*this.animation.boxExtraPct,this.boxWrapper.rotation.x=Math.sin(s*.72)*.05*this.animation.boxExtraPct,this.boxWrapper.rotation.y=Math.sin(s*1.1)*.05*this.animation.boxExtraPct}}}class Ol extends ye{constructor(e,t,i,n,s,o){if(super(),this.rotation.order="ZYX",e==0?this.pos="center":this.pos="right",this.zGap=Math.min(.21,2.1/o),this.centerZ=.15,this.amount=o,this.index=e,this.inner=new ye,this.add(this.inner),this.isDud=e>=o,!this.isDud){const h=new It;h.transparent=!0,h.map=t,h.alphaMap=n,h.color.convertSRGBToLinear(),this.frontMaterial=h;const c=new It;c.transparent=!0,c.map=i,c.alphaMap=n,c.color.convertSRGBToLinear(),this.cardInfoMaterial=c,this.front=new Ue(new Ht(.9,1.66),h),this.inner.add(this.front),this.front.position.z=.01,this.front.castShadow=!0,this.front.userData.name=e,this.front.receiveShadow=!0}this.back=new Ue(new Ht(.9,1.66),s),this.back.rotation.y=Math.PI,this.back.position.z=-.01,this.inner.add(this.back),this.back.castShadow=!0,this.reset(),this.userData.name=e,this.back.userData.name=e,this.back.receiveShadow=!0,this.initPositions()}initPositions(){this.leftPosition=new Ae,this.leftPosition.x=-1.3,this.leftPosition.z=.3+(-this.amount+this.index)*this.zGap,this.leftRotation=new Ae,this.leftRotation.y=-Math.PI,this.rightPosition=new Ae,this.rightPosition.x=1.3,this.rightPosition.z=.3-Math.min(this.index,this.amount-1)*this.zGap,this.rightRotation=new Ae,this.rightRotation.y=Math.PI,this.centerPosition=new Ae,this.centerPosition.z=this.centerZ,this.centerRotation=new Ae}setActiveIndex(e){this.activeIndex=e,this.setHints()}setHints(){setTimeout(this.setHintsTimed.bind(this),100)}setHintsTimed(){const e=this.activeIndex;this.state==="browse"?(this.index===e+1?this.back.userData.hint="NEXT CARD":this.index===e-1?this.back.userData.hint="PREVIOUS CARD":this.back.userData.hint="",this.index==e?this.front.userData.hint="SHOW DETAILS":this.front.userData.hint=""):this.state==="info"?(this.index==e?this.front.userData.hint="CLOSE":this.front.userData.hint="",this.back.userData.hint=""):(this.front.userData.hint="",this.back.userData.hint="")}reset(){this.visible=!1,this.x=0,this.y=0,this.z=0,this.zPct=0,this.centerPct=0,this.browsePct=0,this.rotation.x=0,this.rotation.y=0,this.rotation.z=0,this.isDud||this.setActiveIndex(0)}deactivate(){C.killTweensOf(this),C.killTweensOf(this.rotation)}show(){this.visible=!0,this.showPct=0,this.setShowPosition(),this.render(0,0,0,0),15-this.index,this.x=0,this.y=0,this.z=-this.index*.075,this.browsePct=1;const e=.65+this.index*.055;C.to(this,{delay:e,duration:2,showPct:1,ease:"sine.inOut",onUpdate:this.setShowPosition.bind(this),onComplete:()=>{this.index===0&&this.goCenter(0),this.isDud?this.visible=!1:this.setHints(),this.state="browse"}})}setShowPosition(){const e=this.showPct;let t=Math.sin(Math.PI*e);this.rotation.y=Math.PI+t*1,this.rotation.z=-Math.PI+e*Math.PI*1,t=Math.sin(Math.PI*e*.5),t=Math.min(1,t*1.5);const i=Math.PI+e*Math.PI*2,n=t*this.rightPosition.x;this.x=-Math.cos(i)*n,this.y=-Math.sin(i)*n;const s=-this.index*.075,o=this.rightPosition.z;this.z=s*(1-e)+o*e}startOverviewState(){this.state="overview",this.setHints(),this.isShowingInfo=!1,this.switchInfoTexture(),this.prevPos=this.pos;let e=Math.PI*2*((this.index+1)/this.amount)+Math.PI*.5;this.amount===9?e+=.2:this.amount===11?e-=.1:this.amount===12?e+=.2:this.amount===13&&(e+=.6);const t=1.8;let i=Math.cos(e)*t,n=Math.sin(e)*t,s=0,o=e-Math.PI*.5;this.overviewRotZ=o;let h=.2;this.overviewRotY=h;let c=Math.PI,d=this.index*.05;C.to(this,{duration:1,browsePct:0,zPct:0,ease:"power2.easeInOut"}),C.to(this,{duration:1,delay:d,x:i,y:n,z:s,ease:"power2.easeInOut"}),C.to(this.rotation,{duration:1.15,delay:d,motionPath:[{x:this.rightRotation.x,y:this.rightRotation.y,z:this.rightRotation.z},{x:c,y:h,z:o}],ease:"power2.easeInOut"})}rollOver(){C.killTweensOf(this.rotation);const e=C.timeline();e.to(this.rotation,{duration:.25,z:this.overviewRotZ-.5,ease:"sine.inOut"}),e.to(this.rotation,{duration:.25,z:this.overviewRotZ,ease:"sine.inOut"}),C.to(this.rotation,{duration:.5,x:Math.PI-.2,y:-this.overviewRotY,ease:"power1.inOut"})}rollOut(){C.killTweensOf(this.rotation);const e=C.timeline();e.to(this.rotation,{duration:.15,z:this.overviewRotZ-.5,ease:"sine.inOut"}),e.to(this.rotation,{duration:.15,z:this.overviewRotZ,ease:"sine.inOut"}),C.to(this.rotation,{duration:.3,x:Math.PI,y:this.overviewRotY,ease:"power1.out"})}startInfoState(){this.state="info",this.setHints();const e=this.index*.06;this.pos==="center"?this.switchInfo(!0):(this.pos==="left"||this.pos==="right")&&C.to(this,{delay:e,duration:.4,centerPct:1,ease:"power1.inOut"})}endInfoState(){const e=this.index*.06;this.state="browse",this.setHints(),this.pos==="center"?this.switchInfo(!1):(this.pos==="left"||this.pos==="right")&&C.to(this,{delay:e,duration:.4,centerPct:0,ease:"power1.inOut"})}switchInfo(e){this.rotation.y=-Math.PI*2;const t=C.timeline();t.to(this.rotation,{duration:.55,y:-Math.PI,ease:"sine.in",onComplete:this.switchInfoTexture.bind(this,e)}),t.to(this.rotation,{duration:.55,y:0,ease:"sine.out"}),e?C.to(this,{duration:1,z:.35,ease:"power4.inOut"}):C.to(this,{duration:1,z:this.centerZ,ease:"power4.inOut"})}switchInfoTexture(e){e?this.front.material=this.cardInfoMaterial:this.front.material=this.frontMaterial}startBrowseState(){this.state="browse",this.setHints();const e=this.index*.07;C.to(this,{delay:e,duration:1.1,x:this.x*.85,y:this.y*.85,z:-.5,ease:"power2.inOut",onComplete:this.startBrowseStateHandler.bind(this)})}startBrowseStateHandler(){this.prevPos==="left"?this.goLeft():this.prevPos==="right"?this.goRight():this.goCenter()}goLeft(){new Ae,this.tween(this.leftPosition,this.leftRotation,0,0,"left")}goRight(e=0){this.tween(this.rightPosition,this.rightRotation,e,0,"right")}goCenter(e=.15){this.tween(this.centerPosition,this.centerRotation,e,1,"center")}tween(e,t,i,n,s){if(Math.abs(e.x-this.x)>.1){let c=(e.x+this.x)*.5,d=e.z+.5;var o=C.timeline();o.to(this,{duration:.75*.5,delay:i,x:c,z:d,zPct:n,browsePct:1,ease:"sine.in",onComplete:()=>{this.pos=s}}),o.to(this,{duration:.75*.5,x:e.x,y:e.y,z:e.z,zPct:n,ease:"sine.out"}),C.to(this.rotation,{duration:.75,delay:i,x:t.x,y:t.y,z:t.z,ease:"sine.out"})}}render(e,t,i,n){const s=Math.sin(n*2.5+this.index*1)*i;this.position.x=this.x-this.x*Math.max(this.centerPct,this.scalePct*this.browsePct)*.65,this.position.y=this.y+s*.01;const o=this.zPct*this.scalePct*.2+this.scalePct*1;this.position.z=this.z+o*this.browsePct;const h=n+this.index*1;let c=Math.sin(h*.8)*.05*i,d=this.pos==="center"?1:-1,p=this.pos==="center"?1:.6;const r=d*t*.04*p,l=e*-.13*p;this.inner.rotation.x=r+c,this.inner.rotation.y=l,d=this.pos==="left"?-1:1,this.inner.rotation.z=this.centerPct*.05*d}}class kl{constructor(e){this.sharedObjects=e,this.speedFactor=0,this.pos={x:0,y:0},this.init(),this.deactivate(),this.axisX=new Ae(1,0,0).normalize(),this.axisY=new Ae(0,1,0).normalize()}activate(){this.enabled=!0,this.base.visible=!0}show(){this.resizeHandler(),this.resetAnimation();const{lightWrapper:e}=this.sharedObjects;this.planchetteInner.scale.set(1,1,1),e.position.set(0,.2,0),this.lightContainer.add(e)}deactivate(){this.enabled=!1,this.base.visible=!1;const{lightWrapper:e}=this.sharedObjects;C.killTweensOf(this.planchette.position),C.killTweensOf(this.planchette.rotation),C.killTweensOf(this.planchette.scale),C.killTweensOf(e.scale),C.killTweensOf(this.lightContainer.position)}setCallback(e){const{caster:t}=this.sharedObjects;t.enable([this.adviceButton,this.mailButton],e)}unsetCallback(){const{caster:e}=this.sharedObjects;e.disable()}init(){this.clock=new fi,this.initObjects(),this.resetAnimation(),this.resizeHandler(),window.addEventListener("resize",this.resizeHandler.bind(this))}resizeHandler(){this.isMobile=window.innerWidth<700,this.useMobileText=this.isMobile&&window.innerWidth/window.innerHeight<.7,this.isMobile?(this.head.scale.set(1.3,1.3,1.3),this.adviceButton.position.x=100,this.mailButton.position.x=100):(this.head.scale.set(1,1,1),this.adviceButton.position.x=this.adviceButton.userData.x,this.mailButton.position.x=this.mailButton.userData.x),this.useMobileText?(this.text.visible=!1,this.textMobile.visible=!0):(this.text.visible=!0,this.textMobile.visible=!1);let e=1-(window.innerWidth-400)/400;e=Math.max(0,Math.min(1,e)),this.planchetteExtraScale=e*.55;let t=.84+this.planchetteExtraScale;this.planchette.scale.set(t,t,t)}showItems(){this.adviceButton.show(.5),this.mailButton.show(.5);const e=this.head.material;C.to(e,{duration:.4,opacity:1,ease:"power4.inOut"})}hideItems(e){e?(this.adviceButton.hideForced(),this.mailButton.hideForced()):(this.adviceButton.hide(e),this.mailButton.hide(e));const t=this.head.material;C.to(t,{duration:.2,opacity:0,ease:"power4.inOut"})}initGltf(e){const{environmentMapTexture:t}=this.sharedObjects;e.scene.traverse(s=>{s instanceof Ue&&s.material instanceof It&&(s.material.envMap=t,s.material.envMapIntensity=1,s.castShadow=!0,s.receiveShadow=!0,s.frustumCulled=!1)});const i=12;e.scene.scale.set(i,i,i),this.planchetteInner.add(e.scene);const n=e.scene.children.find(s=>s.name==="eye");n.material=this.glassMaterial;for(let s=0;s<5;s++){const o=e.scene.children.find(h=>h.name==="Moon0"+(s+1));o.visible=!1}}initObjects(){const{gltfLoader:e,textureLoader:t,environmentMapTexture:i,camera:n,scene:s}=this.sharedObjects;e.load("/gltf/contact/ouija_draco_5moons.gltf",this.initGltf.bind(this));const o=t.load("/textures/contact/moon_BaseColor.jpg");o.encoding=it;const h=t.load("/textures/contact/moon_Normal.jpg"),c=t.load("/textures/contact/moon_Metallic.jpg"),d=["adviceOut","mailOut","adviceOver","mailOver","text","textMobile","head"],p={};for(const u of d)p[u]=t.load("/textures/contact/"+u+".png"),p[u].encoding=it;const r=new di({reflectivity:.7,roughness:.11,metalness:.1,clearcoat:1,clearcoatRoughness:10,color:new Ke(5592405)});r.envMap=i,r.envMapIntensity=2,r.color.convertSRGBToLinear(),r.transparent=!0,r.opacity=.6,this.glassMaterial=r;const l=new It;l.map=o,l.normalMap=h,l.metalnessMap=c,r.envMap=i,r.envMapIntensity=1,l.roughness=1,l.color.convertSRGBToLinear(),this.base=new ye,s.add(this.base),this.base.position.y=-.25,this.planchette=new ye,this.base.add(this.planchette),this.planchetteInner=new ye,this.planchette.add(this.planchetteInner),this.planchette.position.z=-1.1;const a=[{x:-4.9,y:4.5,z:0},{x:-2.55,y:6.45,z:0},{x:0,y:7.15,z:0},{x:4.9,y:4.5,z:0},{x:2.55,y:6.45,z:0}];this.spheres=[];for(let u=0;u<a.length;u++){const m=new ye,v=new Ue(new Ai(.17,50,50),l);v.castShadow=!0,v.receiveShadow=!0;const _=a[u];m.position.x=_.x*.15,m.position.y=-.1-_.y*.1,m.rotation.x=Math.random()*4,m.rotation.y=Math.random()*4,this.planchetteInner.add(m),m.add(v),this.spheres.push(m)}this.text=this.addObject(0,-1.1,p.text,4.4,.96),this.textMobile=this.addObject(0,-1.5,p.textMobile,3.4,2.1),this.head=this.addObject(.02,.26,p.head,1.36,1.3),this.adviceButton=new Pn(-1.75,.45,p.adviceOut,p.adviceOver,.85,1.21,"advice"),this.base.add(this.adviceButton),this.mailButton=new Pn(1.75,.45,p.mailOut,p.mailOver,.85,1.21,"mail"),this.base.add(this.mailButton);const f=.84;this.planchette.scale.set(f,f,f),this.lightContainer=new ye,this.base.add(this.lightContainer),this.lightContainer.position.z=.5}addObject(e,t,i,n,s){const o=new kt({map:i,transparent:!0}),h=new Ue(new Ht(n,s),o);return h.userData.x=h.position.x=e,h.userData.y=h.position.y=t,h.userData.z=h.position.z=-1.98,this.base.add(h),h}resetAnimation(){this.animation={followPct:0,planchetteSizePct:1}}showOutline(e){const t=this[e];this.sharedObjects.setOutlineObjects([t])}hideOutline(e){this.sharedObjects.setOutlineObjects([])}render(){if(this.enabled){const{mousePosition:e}=this.sharedObjects,t=this.clock.getElapsedTime(),i=-1+e.slowPctX*2,n=-1+e.slowPctY*2;if(this.animation.followPct>0){const c=Math.sin(t*1.3),d=Math.sin(t*2.42);this.planchette.position.x=.014+i*.2*this.animation.followPct,this.planchette.position.y=.1-n*.1*this.animation.followPct,this.planchette.rotation.z=(-i*.06-n*.06)*this.animation.followPct,this.planchette.rotation.y=d*.03*this.animation.followPct,this.planchette.rotation.x=c*.03*this.animation.followPct}const s=this.planchette.position.x-this.pos.x;this.pos.x=this.planchette.position.x;const o=this.planchette.position.y-this.pos.y;this.pos.y=this.planchette.position.y;const h=Math.min(1,(Math.abs(s)+Math.abs(o))*50);this.speedFactor*=.91,this.speedFactor=Math.max(h,this.speedFactor);for(let c=0;c<this.spheres.length;c++){const d=this.spheres[c],p=Math.sin((t+c*.3)*10),r=Math.cos((t+c*.3)*10);d.rotateOnWorldAxis(this.axisX,-o*15+p*.35*this.speedFactor),d.rotateOnWorldAxis(this.axisY,s*15+r*.35*this.speedFactor)}this.lightContainer.rotation.z+=.05}}goto(e){this.stopPlanchetteFollow(!1);let t,i,n,s=e.charCodeAt()-97;s>=0&&s<26?this.useMobileText?(s>20&&(s+=1),t=-1.23+s%7*.41,i=-1.23+s%7*.41,n=-.65-Math.floor(s/7)*.4,n-=Math.sin(Math.PI*(s%7)/7)*.18):(t=-1.2+s%13*.2,i=-1.7+s%13*.283,n=-.7-Math.floor(s/13)*.3,n-=Math.sin(Math.PI*(s%13)/13)*.3):(t=0,i=0,n=-1);const o=.55;C.to(this.planchette.position,{x:i,y:n,duration:o,ease:"power1.inOut"}),C.to(this.planchette.rotation,{z:i*.2,duration:o,ease:"power1.inOut"}),C.to(this.lightContainer.position,{delay:.2,x:t,y:n+.65,duration:.5,ease:"power1.inOut"})}blink(){const{lightWrapper:e}=this.sharedObjects,t=5;C.fromTo(e.scale,{x:t,y:t,z:t},{x:1,y:1,z:1,duration:.22,ease:"power1.inOut"})}stopPlanchetteFollow(e=!0){C.killTweensOf(this.animation),this.animation.followPct=0;let t=.3;C.to(this.planchette.rotation,{duration:t,z:0,ease:"sine.inOut"}),C.to(this.planchette.position,{duration:t,x:.014,y:.1,ease:"sine.inOut"}),e&&(C.killTweensOf(this.sharedObjects.camera.position),C.to(this.sharedObjects.camera.position,{delay:.2,duration:.6,z:-1,ease:"power2.inOut"}))}centerPlanchette(){let e=1.1;C.killTweensOf(this.planchette.rotation),C.killTweensOf(this.planchette.position),C.to(this.planchette.rotation,{duration:e,z:0,ease:"sine.inOut"}),C.to(this.planchette.position,{duration:e,x:.014,y:.1,ease:"sine.inOut",onComplete:this.resetPlanchette.bind(this)})}stashPlanchette(){let e=1.1;C.killTweensOf(this.planchette.position),C.to(this.planchette.position,{duration:e,y:-2.5,ease:"sine.inOut"})}resetPlanchette(){C.killTweensOf(this.animation),C.to(this.animation,{duration:1.4,followPct:1,ease:"power4.inOut"}),C.killTweensOf(this.sharedObjects.camera.position),C.to(this.sharedObjects.camera.position,{duration:.9,z:3,ease:"power2.inOut"})}shrinkPlanchette(){C.to(this.planchetteInner.scale,{duration:.6,x:.85,y:.85,z:.85,ease:"sine.inOut"})}unshrinkPlanchette(){C.to(this.planchetteInner.scale,{duration:.6,x:1,y:1,z:1,ease:"sine.out"})}}class Pn extends ye{constructor(e,t,i,n,s,o,h){super(),this.name=h,this.shown=!1,this.materialOut=new kt({map:i,transparent:!0}),this.materialOver=new kt({map:n,transparent:!0}),this.planeOut=new Ue(new Ht(s,o),this.materialOut),this.planeOver=new Ue(new Ht(s,o),this.materialOver),this.add(this.planeOut),this.add(this.planeOver),this.materialOut.transparent=!0,this.materialOut.opacity=0,this.materialOver.transparent=!0,this.materialOver.opacity=0,this.userData.x=this.position.x=e,this.userData.y=this.position.y=t,this.userData.z=this.position.z=this.baseZ=-1.98,this.width=s,this.height=o,this.userData.name=this.name,this.userData.rollOver=this.rollOver.bind(this),this.userData.rollOut=this.rollOut.bind(this),this.planeOut.userData=this.userData,this.planeOver.userData=this.userData}show(e){this.shown||(this.shown=!0,this.position.z=this.baseZ,C.killTweensOf(this.materialOut),C.killTweensOf(this.materialOver),this.materialOut.opacity=0,this.materialOver.opacity=0,C.to(this.materialOut,{duration:.5,delay:e,opacity:1,ease:"sine.easeOut"}))}hide(e){this.shown&&(this.shown=!1,C.killTweensOf(this.materialOut),C.killTweensOf(this.materialOver),C.to(this.materialOut,{duration:.2,delay:e,opacity:0,ease:"sine.easeOut"}),C.to(this.materialOver,{duration:.2,delay:e,opacity:0,ease:"sine.easeOut"}))}hideForced(){this.shown&&(this.shown=!1,this.position.z=20,C.killTweensOf(this.materialOut),C.killTweensOf(this.materialOver),this.materialOut.opacity=0,this.materialOver.opacity=0)}rollOver(){this.shown&&(C.to(this.materialOut,{duration:.2,opacity:0,ease:"sine.easeInOut"}),C.to(this.materialOver,{duration:.2,opacity:1,ease:"sine.easeInOut"}))}rollOut(){this.shown&&(C.to(this.materialOut,{duration:.2,opacity:1,ease:"sine.easeInOut"}),C.to(this.materialOver,{duration:.2,opacity:0,ease:"sine.easeInOut"}))}}const Ll={home:{toneMappingExposure:1.457,ambientLightIntensity:.829,ambientLightColor:14931622,directionalLightIntensity:2.667,directionalLightColor:10603993,pointLightIntensity:2,pointLightColor:16754785,bloomThreshold:.803,bloomStrength:1.105,bloomRadius:.638},portfolio:{toneMappingExposure:1.8,ambientLightIntensity:2,ambientLightColor:9599978,directionalLightIntensity:0,directionalLightColor:9422335,pointLightIntensity:1.9,pointLightColor:13299966,bloomThreshold:.725,bloomStrength:.5,bloomRadius:.5},team:{toneMappingExposure:1.487,ambientLightIntensity:1.1,ambientLightColor:11107984,directionalLightIntensity:2.329,directionalLightColor:14800347,pointLightIntensity:3.379,pointLightColor:7222138,bloomThreshold:.848,bloomStrength:.385,bloomRadius:.278},services:{toneMappingExposure:1.2,ambientLightIntensity:.45,ambientLightColor:15461355,directionalLightIntensity:2.45,directionalLightColor:11393740,pointLightIntensity:2.065,pointLightColor:16770216,bloomThreshold:.86,bloomStrength:1.15,bloomRadius:.78},about:{toneMappingExposure:1.277,ambientLightIntensity:2.217,ambientLightColor:16772827,directionalLightIntensity:1.842,directionalLightColor:16770272,pointLightIntensity:.415,pointLightColor:16769750,bloomThreshold:.818,bloomStrength:1.128,bloomRadius:.781},contact:{toneMappingExposure:1.682,ambientLightIntensity:.345,ambientLightColor:12822939,directionalLightIntensity:3,directionalLightColor:16774885,pointLightIntensity:1.95,pointLightColor:14339503,bloomThreshold:.751,bloomStrength:.317,bloomRadius:.495}};class Il extends ol{constructor(e,t,i,n,s){super(e,t,n,s),this.sounds=i,this.isFirst=!0,this.lowSettings=!1}init(e,t,i,n){super.init(e),this.loadScenesCallback=t,this.caster=new xl(this.camera,i),this.initSharedObjects(),this.initScenes(n)}initSharedObjects(){this.sceneContainer=new ye,this.scene.add(this.sceneContainer),this.environmentMapTexture=this.cubeTextureLoader.load(["/textures/environment/px-min.png","/textures/environment/nx-min.png","/textures/environment/py-min.png","/textures/environment/ny-min.png","/textures/environment/pz-min.png","/textures/environment/nz-min.png"]),this.environmentMapTexture.encoding=it,this.sharedObjects=new fl(this,this.sceneContainer,this.camera,this.renderer,this.textureLoader,this.gltfLoader,this.environmentMapTexture,this.mousePosition,this.convertTo3D.bind(this),this.bloomPass,this.setOutlineObjects.bind(this),this.isEnabled,this.caster,this.gui);const e=new ye;if(this.sharedObjects.setLights(this.pointLight,e,this.spotLight,this.ambientLight,this.directionalLight),this.cursor=new wl(this.sharedObjects,this.pointLight),this.debug){const t=new It({color:16711680});t.wireframe=!0;const i=new Ue(new Ht(2.7,2.7),t);this.scene.add(i)}}setPerformance(e=!1){this.background.setPerformance(e),this.lowSettings=e,this.renderer.shadowMap.enabled=!this.lowSettings,this.lowSettings?(this.renderer.toneMapping=Lr,this.setToneMappingExposure(),this.composer.setPixelRatio(1),this.renderer.setPixelRatio(1),this.pointLight.visible=!1,this.particles.disable()):(this.renderer.toneMapping=Rs,this.setToneMappingExposure(),this.composer.setPixelRatio(Math.min(2,window.devicePixelRatio)),this.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),this.pointLight.visible=!0,this.particles.enable())}initScenes(e){this.homeScene=new yl(this.sharedObjects),this.portfolioScene=new bl(this.sharedObjects),this.teamScene=new Cl(this.sharedObjects,e),this.servicesScene=new Tl(this.sharedObjects),this.aboutScene=new Ml(this.sharedObjects),this.contactScene=new kl(this.sharedObjects),this.particles=new gl,this.particles.init(this.sharedObjects),this.background=new dl(this.sharedObjects,this.scene,this.showBackgroundHandler.bind(this)),this.sharedObjects.setBackground(this.background)}loadHandler(){super.loadHandler(),this.scene.add(this.sharedObjects.lightWrapper),this.scene.add(this.sharedObjects.spotLight),this.scene.add(this.sharedObjects.spotLight.target),this.isEnabled=!0,this.resizeHandler(),this.sceneIndex=0,setTimeout(this.addNextScene.bind(this),50)}addNextScene(){this.loadScenesCallback&&(this.sceneIndex===6&&(this.scene.remove(this.sharedObjects.lightWrapper),this.scene.remove(this.sharedObjects.spotLight),this.scene.remove(this.sharedObjects.spotLight.target),this.isEnabled=!1),this.loadScenesCallback(this.sceneIndex,6)),this.activeScene&&(this.activeScene.deactivate(),this.render()),this.sceneIndex>5||(this.sceneIndex===0?this.activeScene=this.homeScene:this.sceneIndex===1?this.activeScene=this.portfolioScene:this.sceneIndex===2?this.activeScene=this.teamScene:this.sceneIndex===3?this.activeScene=this.servicesScene:this.sceneIndex===4?this.activeScene=this.aboutScene:this.sceneIndex===5&&(this.activeScene=this.contactScene),this.sceneIndex++,this.activeScene.activate(),this.render(),this.activeScene.render(),setTimeout(this.addNextScene.bind(this),500))}resizeHandler(){this.isEnabled&&(this.width!=window.innerWidth||this.height!=window.innerHeight)&&(super.resizeHandler(),this.setBackgroundSize())}enable(){super.enable(),this.caster.resume(),this.performance.start(),setTimeout(this.setBackgroundSize.bind(this),100)}disable(){super.disable(),this.caster.pause()}setBackgroundSize(){const e=this.camera.position.z;this.camera.position.z=3,this.render();const t=this.convertTo3D(0,0,-2);this.background.setSize(Math.abs(t.x),Math.abs(t.y)),this.camera.position.z=e}show(e,t){clearTimeout(this.timeout),this.cursor.hide(),this.hidePointlight(),this.nextPage=e,this.callback=t,this.sounds.setScene(e),!this.isTransitioning&&!this.isFirst?(this.isTransitioning=!0,this.particles.hide(),this.timeout=setTimeout(this.changeBackground.bind(this),1e3,e)):(this.deactivatePrevious(),this.background.switchScenes(e,!1)),this.isFirst=!1}changeBackground(e){this.background.switchScenes(e,!0),this.timeout=setTimeout(this.deactivatePrevious.bind(this),500)}deactivatePrevious(){this.activeScene&&(this.activeScene.deactivate(),this.activeScene=null)}showBackgroundHandler(){this.activateNextScene(),this.showScene()}activateNextScene(){this.denyMouseFollow(),this.sceneContainer.visible=!1,this.cursor.reset();const e=this.nextPage;e==="home"?this.activeScene=this.homeScene:e==="portfolio"?this.activeScene=this.portfolioScene:e==="team"?this.activeScene=this.teamScene:e==="services"?this.activeScene=this.servicesScene:e==="about"?this.activeScene=this.aboutScene:e==="contact"&&(this.activeScene=this.contactScene),this.background.setScene(e),this.setEnvironment(e),this.activeScene&&(this.activeScene.activate(),this.render())}setEnvironment(e){const t=Ll[e];this.sceneConfig=t;const i=.2,n="sine.out";this.setToneMappingExposure(),C.to(this.ambientLight,{intensity:t.ambientLightIntensity,duration:i,ease:n}),this.ambientLight.color.set(t.ambientLightColor),C.to(this.directionalLight,{intensity:t.directionalLightIntensity,duration:i,ease:n}),this.directionalLight.color.set(t.directionalLightColor),this.pointLight.intensity=t.pointLightIntensity,this.pointLight.color.set(t.pointLightColor),C.to(this.bloomPass,{threshold:t.bloomThreshold,strength:t.bloomStrength,radius:t.bloomRadius,duration:i,ease:n}),this.updateGUI(),this.render()}setToneMappingExposure(){this.lowSettings?C.to(this.renderer,{toneMappingExposure:1.5,duration:.2,ease:"sine.out"}):this.sceneConfig&&C.to(this.renderer,{toneMappingExposure:this.sceneConfig.toneMappingExposure,duration:.2,ease:"sine.out"})}showPointlight(){C.to(this.pointLight,{duration:.5,intensity:this.sceneConfig.pointLightIntensity,ease:"sine.out"}),this.updateGUI()}hidePointlight(){C.to(this.pointLight,{duration:.5,intensity:0,ease:"sine.out"}),this.updateGUI()}lightsOn(){const e=this.sceneConfig;if(e){const t="sine.out";this.pointLight.color.set(e.pointLightColor),C.killTweensOf(this.ambientLight,this.directionalLight,this.pointLight,this.spotLight),C.to(this.ambientLight,{duration:1,intensity:e.ambientLightIntensity,ease:t}),C.to(this.directionalLight,{duration:2,intensity:e.directionalLightIntensity,ease:t}),C.to(this.spotLight,{duration:2,intensity:0,ease:t}),this.bloomPass.threshold=e.bloomThreshold,this.bloomPass.strength=e.bloomStrength}this.background&&this.background.lightsOn(),this.updateGUI()}lightsOff(){this.pointLight.color.set(3355443);const e="sine.out";C.killTweensOf(this.ambientLight,this.directionalLight,this.pointLight,this.spotLight),C.to(this.ambientLight,{duration:.25,intensity:0,ease:e}),C.to(this.directionalLight,{duration:1,intensity:0,ease:e}),C.to(this.spotLight,{delay:1,duration:.2,intensity:1.5,ease:"sine.in"}),this.bloomPass.strength=.2,this.bloomPass.threshold=1,this.background&&this.background.lightsOff(),this.updateGUI()}glow(){const e=this.sceneConfig;C.killTweensOf(this.directionalLight);const t=C.timeline();t.to(this.directionalLight,{duration:1,intensity:50,ease:"sine.in"}),t.to(this.directionalLight,{duration:1,intensity:e.directionalLightIntensity,ease:"sine.out"})}updateGUI(){if(this.gui)for(const e of this.gui.controllersRecursive())e.updateDisplay()}showScene(){this.sceneContainer.visible=!0,this.cursor.show(),this.showPointlight(),this.particles.show(),this.isTransitioning=!1,this.activeScene&&this.activeScene.show(),this.callback()}allowMouseFollow(){this.cursor.allowMouseFollow()}denyMouseFollow(){this.cursor.denyMouseFollow()}show2dContent(){this.background.show2dContent()}show3dContent(){this.background.show3dContent()}render(){if(this.isEnabled){super.render(this.mousePosition),this.isTransitioning||(this.homeScene.render(),this.portfolioScene.render(),this.teamScene.render(),this.servicesScene.render(),this.aboutScene.render(),this.contactScene.render());const e=this.clock.getElapsedTime();this.particles.render(e,this.mousePosition);const t=-1+this.mousePosition.slowPctX*2,i=-1+this.mousePosition.slowPctY*2;this.directionalLight.position.x=.9+t*.25,this.directionalLight.position.y=1+i*.15,this.cursor.render(e),this.background.render()}}}const{window:Rl}=fs;function An(g,e,t){const i=g.slice();return i[59]=e[t],i[61]=t,i}function En(g,e,t){const i=g.slice();return i[59]=e[t],i[61]=t,i}function Cn(g,e,t){const i=g.slice();return i[59]=e[t],i[61]=t,i}function On(g){let e,t,i,n,s,o,h,c,d,p,r=g[10]&&kn(g),l=g[11]&&Dn(g),a=g[12]&&g[10]&&zn(g);return{c(){e=$("div"),t=$("img"),n=ce(),s=$("div"),o=ce(),r&&r.c(),h=ce(),l&&l.c(),c=ce(),a&&a.c(),this.h()},l(f){e=Z(f,"DIV",{class:!0});var u=Q(e);t=Z(u,"IMG",{class:!0,src:!0,alt:!0}),n=he(u),s=Z(u,"DIV",{class:!0,style:!0}),Q(s).forEach(H),o=he(u),r&&r.l(u),h=he(u),l&&l.l(u),c=he(u),a&&a.l(u),u.forEach(H),this.h()},h(){k(t,"class","bg svelte-el56gl"),Ot(t.src,i="/images/intro/bg.jpg")||k(t,"src",i),k(t,"alt","cabinet"),$e(t,"hidden",g[14]),k(s,"class","mask svelte-el56gl"),wt(s,"-mask","radial-gradient(circle at "+g[2].x+"% "+g[2].y+"%, transparent "+g[2].size*g[2].sizePct*.5+"px, black "+g[2].size*g[2].sizePct+"px)"),wt(s,"-webkit-mask","radial-gradient(circle at "+g[2].x+"% "+g[2].y+"%, transparent "+g[2].size*g[2].sizePct*.5+"px, black "+g[2].size*g[2].sizePct+"px)"),$e(s,"dark",!g[10]),k(e,"class","container svelte-el56gl")},m(f,u){pe(f,e,u),z(e,t),g[27](t),z(e,n),z(e,s),z(e,o),r&&r.m(e,null),z(e,h),l&&l.m(e,null),z(e,c),a&&a.m(e,null),p=!0},p(f,u){g=f,u[0]&16384&&$e(t,"hidden",g[14]),(!p||u[0]&4)&&wt(s,"-mask","radial-gradient(circle at "+g[2].x+"% "+g[2].y+"%, transparent "+g[2].size*g[2].sizePct*.5+"px, black "+g[2].size*g[2].sizePct+"px)"),(!p||u[0]&4)&&wt(s,"-webkit-mask","radial-gradient(circle at "+g[2].x+"% "+g[2].y+"%, transparent "+g[2].size*g[2].sizePct*.5+"px, black "+g[2].size*g[2].sizePct+"px)"),u[0]&1024&&$e(s,"dark",!g[10]),g[10]?r?(r.p(g,u),u[0]&1024&&ae(r,1)):(r=kn(g),r.c(),ae(r,1),r.m(e,h)):r&&(yt(),ge(r,1,1,()=>{r=null}),bt()),g[11]?l?(l.p(g,u),u[0]&2048&&ae(l,1)):(l=Dn(g),l.c(),ae(l,1),l.m(e,c)):l&&(yt(),ge(l,1,1,()=>{l=null}),bt()),g[12]&&g[10]?a?(a.p(g,u),u[0]&5120&&ae(a,1)):(a=zn(g),a.c(),ae(a,1),a.m(e,null)):a&&(yt(),ge(a,1,1,()=>{a=null}),bt())},i(f){p||(ae(r),ae(l),ae(a),d&&d.end(1),p=!0)},o(f){ge(r),ge(l),ge(a),d=mt(e,pt,{duration:450,easing:hi}),p=!1},d(f){f&&H(e),g[27](null),r&&r.d(),l&&l.d(),a&&a.d(),f&&d&&d.end()}}}function kn(g){let e,t,i,n,s,o=[],h=new Map,c,d=[],p=new Map,r,l,a,f=g[7],u,m,v=Array(6);const _=y=>y[61];for(let y=0;y<v.length;y+=1){let b=Cn(g,v,y),M=_(b);h.set(M,o[y]=Ln(M,b))}let S=Array(Ei);const w=y=>y[61];for(let y=0;y<S.length;y+=1){let b=En(g,S,y),M=w(b);p.set(M,d[y]=In(M,b))}let x=Rn(g);return{c(){e=$("div"),t=$("div"),n=ce(),s=$("div");for(let y=0;y<o.length;y+=1)o[y].c();c=ce();for(let y=0;y<d.length;y+=1)d[y].c();l=ce(),a=$("div"),x.c(),this.h()},l(y){e=Z(y,"DIV",{class:!0,style:!0});var b=Q(e);t=Z(b,"DIV",{class:!0}),Q(t).forEach(H),n=he(b),s=Z(b,"DIV",{class:!0});var M=Q(s);for(let I=0;I<o.length;I+=1)o[I].l(M);M.forEach(H),c=he(b);for(let I=0;I<d.length;I+=1)d[I].l(b);b.forEach(H),l=he(y),a=Z(y,"DIV",{class:!0,style:!0});var E=Q(a);x.l(E),E.forEach(H),this.h()},h(){k(t,"class","moonCircle svelte-el56gl"),k(s,"class","middleImages svelte-el56gl"),k(e,"class","moons svelte-el56gl"),k(e,"style",r=`transform: scale(${g[17]})`),k(a,"class","center svelte-el56gl"),k(a,"style",u=`transform: scale(${g[18]})`)},m(y,b){pe(y,e,b),z(e,t),z(e,n),z(e,s);for(let M=0;M<o.length;M+=1)o[M].m(s,null);g[28](s),z(e,c);for(let M=0;M<d.length;M+=1)d[M].m(e,null);g[29](e),pe(y,l,b),pe(y,a,b),x.m(a,null),m=!0},p(y,b){g=y,b[0]&524289&&(v=Array(6),yt(),o=ks(o,b,_,1,g,v,h,s,Ls,Ln,null,Cn),bt()),b&0&&(S=Array(Ei),yt(),d=ks(d,b,w,1,g,S,p,e,Ls,In,null,En),bt()),(!m||b[0]&131072&&r!==(r=`transform: scale(${g[17]})`))&&k(e,"style",r),b[0]&128&&vt(f,f=g[7])?(yt(),ge(x,1,1,gt),bt(),x=Rn(g),x.c(),ae(x,1),x.m(a,null)):x.p(g,b),(!m||b[0]&262144&&u!==(u=`transform: scale(${g[18]})`))&&k(a,"style",u)},i(y){if(!m){i&&i.end(1);for(let b=0;b<v.length;b+=1)ae(o[b]);for(let b=0;b<S.length;b+=1)ae(d[b]);ae(x),m=!0}},o(y){i=mt(t,pt,{duration:200,easing:hi});for(let b=0;b<o.length;b+=1)ge(o[b]);for(let b=0;b<d.length;b+=1)ge(d[b]);ge(x),m=!1},d(y){y&&H(e),y&&i&&i.end();for(let b=0;b<o.length;b+=1)o[b].d();g[28](null);for(let b=0;b<d.length;b+=1)d[b].d();g[29](null),y&&H(l),y&&H(a),x.d(y)}}}function Ln(g,e){let t,i,n,s;return{key:g,first:null,c(){t=$("img"),this.h()},l(o){t=Z(o,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){k(t,"class","middleImage svelte-el56gl"),Ot(t.src,i="/images/intro/icon_"+(e[61]%6+1)+".png")||k(t,"src",i),k(t,"alt","icon"),$e(t,"active",e[61]===e[19]&&e[0]===1),this.first=t},m(o,h){pe(o,t,h),s=!0},p(o,h){e=o,h[0]&524289&&$e(t,"active",e[61]===e[19]&&e[0]===1)},i(o){s||(n&&n.end(1),s=!0)},o(o){n=mt(t,pt,{duration:200,easing:hi}),s=!1},d(o){o&&H(t),o&&n&&n.end()}}}function In(g,e){let t,i,n,s,o,h,c;return{key:g,first:null,c(){t=$("div"),i=$("img"),h=ce(),this.h()},l(d){t=Z(d,"DIV",{style:!0,class:!0});var p=Q(t);i=Z(p,"IMG",{class:!0,src:!0,alt:!0}),h=he(p),p.forEach(H),this.h()},h(){k(i,"class","moon svelte-el56gl"),Ot(i.src,n="/images/intro/moon"+(e[61]%6+1)+".png")||k(i,"src",n),k(i,"alt","moon"),k(t,"style",`transform: translate(${Math.cos(e[61]/Ei*Math.PI*2-Math.PI*.5)*220-15}px, ${Math.sin(e[61]/Ei*Math.PI*2-Math.PI*.5)*220+-15}px) rotate(${e[61]*(360/Ei)}deg)`),k(t,"class","moonWrapper svelte-el56gl"),this.first=t},m(d,p){pe(d,t,p),z(t,i),z(t,h),c=!0},p(d,p){e=d},i(d){c||(dt(()=>{o&&o.end(1),s=Lt(i,Ut,{delay:0+e[61]*20,start:0,duration:400,easing:hi}),s.start()}),c=!0)},o(d){s&&s.invalidate(),o=mt(i,Ut,{delay:50+e[61]*15,start:0,duration:200,easing:no}),c=!1},d(d){d&&H(t),d&&o&&o.end()}}}function Rn(g){let e,t,i,n,s,o,h,c,d,p,r,l,a,f,u,m;return{c(){e=$("div"),t=$("p"),i=St(g[7]),o=ce(),h=$("p"),c=St(g[8]),r=ce(),l=$("p"),a=St(g[9]),this.h()},l(v){e=Z(v,"DIV",{class:!0});var _=Q(e);t=Z(_,"P",{class:!0});var S=Q(t);i=Mt(S,g[7]),S.forEach(H),o=he(_),h=Z(_,"P",{class:!0});var w=Q(h);c=Mt(w,g[8]),w.forEach(H),r=he(_),l=Z(_,"P",{class:!0});var x=Q(l);a=Mt(x,g[9]),x.forEach(H),_.forEach(H),this.h()},h(){k(t,"class","small svelte-el56gl"),k(h,"class","big svelte-el56gl"),k(l,"class","small svelte-el56gl"),k(e,"class","centerCopy svelte-el56gl")},m(v,_){pe(v,e,_),z(e,t),z(t,i),z(e,o),z(e,h),z(h,c),z(e,r),z(e,l),z(l,a),m=!0},p(v,_){g=v,(!m||_[0]&128)&&Pi(i,g[7]),(!m||_[0]&256)&&Pi(c,g[8]),(!m||_[0]&512)&&Pi(a,g[9])},i(v){m||(dt(()=>{s&&s.end(1),n=Lt(t,pt,{delay:g[1]===1?0:600,duration:1500,easing:ti}),n.start()}),dt(()=>{p&&p.end(1),d=Lt(h,pt,{delay:g[1]===1?400:1e3,duration:1500,easing:ti}),d.start()}),dt(()=>{u&&u.end(1),f=Lt(l,pt,{delay:g[1]===1?800:1400,duration:1500,easing:ti}),f.start()}),m=!0)},o(v){n&&n.invalidate(),s=mt(t,pt,{delay:0,duration:500,easing:bs}),d&&d.invalidate(),p=mt(h,pt,{delay:0,duration:500,easing:bs}),f&&f.invalidate(),u=mt(l,pt,{delay:0,duration:500,easing:bs}),m=!1},d(v){v&&H(e),v&&s&&s.end(),v&&p&&p.end(),v&&u&&u.end()}}}function Dn(g){let e,t,i,n=[],s=new Map,o,h,c,d,p,r,l,a,f,u,m,v,_,S,w,x,y,b,M,E,I,O,F,N,W,q,X,re,K=g[12]&&g[10]&&Hn(g),le=Array(6);const we=se=>se[61];for(let se=0;se<le.length;se+=1){let ie=An(g,le,se),xe=we(ie);s.set(xe,n[se]=Bn(xe,ie))}return{c(){e=$("div"),K&&K.c(),t=ce(),i=$("div");for(let se=0;se<n.length;se+=1)n[se].c();o=ce(),h=$("img"),p=ce(),r=$("div"),l=$("div"),a=ce(),f=$("div"),u=$("img"),v=ce(),_=$("img"),w=ce(),x=$("img"),b=ce(),M=$("img"),I=ce(),O=$("img"),N=ce(),W=$("img"),this.h()},l(se){e=Z(se,"DIV",{class:!0});var ie=Q(e);K&&K.l(ie),t=he(ie),i=Z(ie,"DIV",{class:!0});var xe=Q(i);for(let De=0;De<n.length;De+=1)n[De].l(xe);xe.forEach(H),ie.forEach(H),o=he(se),h=Z(se,"IMG",{class:!0,src:!0,alt:!0}),p=he(se),r=Z(se,"DIV",{});var ue=Q(r);l=Z(ue,"DIV",{class:!0}),Q(l).forEach(H),a=he(ue),f=Z(ue,"DIV",{class:!0});var _e=Q(f);u=Z(_e,"IMG",{class:!0,src:!0,alt:!0}),v=he(_e),_=Z(_e,"IMG",{class:!0,src:!0,alt:!0}),w=he(_e),x=Z(_e,"IMG",{class:!0,src:!0,alt:!0}),b=he(_e),M=Z(_e,"IMG",{class:!0,src:!0,alt:!0}),_e.forEach(H),I=he(ue),O=Z(ue,"IMG",{class:!0,src:!0,alt:!0}),N=he(ue),W=Z(ue,"IMG",{class:!0,src:!0,alt:!0}),ue.forEach(H),this.h()},h(){k(i,"class","scenes svelte-el56gl"),k(e,"class","scenesWrapper svelte-el56gl"),k(h,"class","logo svelte-el56gl"),Ot(h.src,c="/images/intro/logo.png")||k(h,"src",c),k(h,"alt","logo"),k(l,"class","border svelte-el56gl"),k(u,"class","cornerTop cornerLeft svelte-el56gl"),Ot(u.src,m="/images/intro/corner_top.png")||k(u,"src",m),k(u,"alt","corner"),k(_,"class","cornerTop cornerRight svelte-el56gl"),Ot(_.src,S="/images/intro/corner_top.png")||k(_,"src",S),k(_,"alt","corner"),k(x,"class","cornerBottom cornerLeft svelte-el56gl"),Ot(x.src,y="/images/intro/border_bottom.png")||k(x,"src",y),k(x,"alt","corner"),k(M,"class","cornerBottom cornerRight svelte-el56gl"),Ot(M.src,E="/images/intro/border_bottom.png")||k(M,"src",E),k(M,"alt","corner"),k(f,"class","corners svelte-el56gl"),k(O,"class","copy copyLeft svelte-el56gl"),Ot(O.src,F="/images/intro/curious.png")||k(O,"src",F),k(O,"alt","copy"),k(W,"class","copy copyRight svelte-el56gl"),Ot(W.src,q="/images/intro/and_co.png")||k(W,"src",q),k(W,"alt","copy")},m(se,ie){pe(se,e,ie),K&&K.m(e,null),z(e,t),z(e,i);for(let xe=0;xe<n.length;xe+=1)n[xe].m(i,null);g[31](i),pe(se,o,ie),pe(se,h,ie),pe(se,p,ie),pe(se,r,ie),z(r,l),z(r,a),z(r,f),z(f,u),z(f,v),z(f,_),z(f,w),z(f,x),z(f,b),z(f,M),z(r,I),z(r,O),z(r,N),z(r,W),re=!0},p(se,ie){g=se,g[12]&&g[10]?K?(K.p(g,ie),ie[0]&5120&&ae(K,1)):(K=Hn(g),K.c(),ae(K,1),K.m(e,t)):K&&(yt(),ge(K,1,1,()=>{K=null}),bt()),ie&0&&(le=Array(6),yt(),n=ks(n,ie,we,1,g,le,s,i,Ls,Bn,null,An),bt())},i(se){if(!re){ae(K);for(let ie=0;ie<le.length;ie+=1)ae(n[ie]);dt(()=>{d||(d=ei(h,pt,{duration:200,easing:hi},!0)),d.run(1)}),X&&X.end(1),re=!0}},o(se){ge(K);for(let ie=0;ie<n.length;ie+=1)ge(n[ie]);d||(d=ei(h,pt,{duration:200,easing:hi},!1)),d.run(0),X=mt(r,pt,{duration:1e3,easing:hi}),re=!1},d(se){se&&H(e),K&&K.d();for(let ie=0;ie<n.length;ie+=1)n[ie].d();g[31](null),se&&H(o),se&&H(h),se&&d&&d.end(),se&&H(p),se&&H(r),se&&X&&X.end()}}}function Hn(g){let e,t,i,n,s,o,h,c;return{c(){e=$("div"),t=$("button"),i=St("\u2022 experience without sound \u2022"),this.h()},l(d){e=Z(d,"DIV",{class:!0});var p=Q(e);t=Z(p,"BUTTON",{class:!0});var r=Q(t);i=Mt(r,"\u2022 experience without sound \u2022"),r.forEach(H),p.forEach(H),this.h()},h(){k(t,"class","noSoundButton svelte-el56gl"),k(e,"class","noSoundWrapper svelte-el56gl")},m(d,p){pe(d,e,p),z(e,t),z(t,i),o=!0,h||(c=[ze(t,"click",g[30],{once:!0}),ze(t,"mouseenter",g[24]),ze(t,"mouseleave",g[25])],h=!0)},p(d,p){g=d},i(d){o||(dt(()=>{s&&s.end(1),n=Lt(e,pt,{delay:2500,duration:1e3,easing:ti}),n.start()}),o=!0)},o(d){n&&n.invalidate(),s=mt(e,pt,{duration:500,easing:ti}),o=!1},d(d){d&&H(e),d&&s&&s.end(),h=!1,Ri(c)}}}function Bn(g,e){let t,i,n,s,o;return{key:g,first:null,c(){t=$("img"),this.h()},l(h){t=Z(h,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){k(t,"class","scene svelte-el56gl"),Ot(t.src,i="/images/intro/icon_"+(e[61]%6+1)+".png")||k(t,"src",i),k(t,"alt","scene"),this.first=t},m(h,c){pe(h,t,c),o=!0},p(h,c){e=h},i(h){o||(dt(()=>{s&&s.end(1),n=Lt(t,Ut,{delay:500+e[61]*50,start:0,duration:500,easing:hi}),n.start()}),o=!0)},o(h){n&&n.invalidate(),s=mt(t,Ut,{delay:200+e[61]*40,start:0,duration:500,easing:hi}),o=!1},d(h){h&&H(t),h&&s&&s.end()}}}function zn(g){let e,t,i,n,s,o,h,c,d,p,r;return h=new wr({props:{intro:!0,label:g[6]?"CLICK HERE TO DISCOVER MORE":"LET US FORETELL YOUR FUTURE",inactiveOutlineColor:"#6f5d46",inactiveInlineColor:"#171617",inactiveTextColor:"#dcb887",activeOutlineColor:"#000000",activeInlineColor:"#e1c18b",activeTextColor:"#000000"}}),h.$on("click",dr(g[32])),h.$on("mouseenter",g[22]),h.$on("mouseleave",g[23]),{c(){e=$("div"),t=$("p"),i=St("Don't Get Stuck in The Past"),s=ce(),o=$("div"),ot(h.$$.fragment),this.h()},l(l){e=Z(l,"DIV",{class:!0,style:!0});var a=Q(e);t=Z(a,"P",{class:!0});var f=Q(t);i=Mt(f,"Don't Get Stuck in The Past"),f.forEach(H),s=he(a),o=Z(a,"DIV",{});var u=Q(o);at(h.$$.fragment,u),u.forEach(H),a.forEach(H),this.h()},h(){k(t,"class","slogan svelte-el56gl"),k(e,"class","buttonWrapper svelte-el56gl"),k(e,"style",d=`transform: scale(${g[17]*1.6})`)},m(l,a){pe(l,e,a),z(e,t),z(t,i),z(e,s),z(e,o),lt(h,o,null),r=!0},p(l,a){g=l;const f={};a[0]&64&&(f.label=g[6]?"CLICK HERE TO DISCOVER MORE":"LET US FORETELL YOUR FUTURE"),h.$set(f),(!r||a[0]&131072&&d!==(d=`transform: scale(${g[17]*1.6})`))&&k(e,"style",d)},i(l){r||(n||dt(()=>{n=Lt(t,pt,{delay:800,duration:1e3,easing:ti}),n.start()}),ae(h.$$.fragment,l),c||dt(()=>{c=Lt(o,pt,{delay:2e3,duration:1e3,easing:ti}),c.start()}),p&&p.end(1),r=!0)},o(l){ge(h.$$.fragment,l),p=mt(e,pt,{delay:0,duration:300,easing:ti}),r=!1},d(l){l&&H(e),ct(h),l&&p&&p.end()}}}function Fn(g){let e,t,i;return{c(){e=$("div"),this.h()},l(n){e=Z(n,"DIV",{class:!0}),Q(e).forEach(H),this.h()},h(){k(e,"class","veil svelte-el56gl")},m(n,s){pe(n,e,s),i=!0},p(n,s){},i(n){i||(t&&t.end(1),i=!0)},o(n){t=mt(e,pt,{duration:100,easing:ti}),i=!1},d(n){n&&H(e),n&&t&&t.end()}}}function Dl(g){let e,t,i,n,s,o,h,c,d,p,r,l,a=g[13]&&On(g),f=g[15]&&Fn();return{c(){e=$("link"),t=$("link"),i=$("link"),n=$("link"),s=$("link"),o=$("link"),h=ce(),a&&a.c(),c=ce(),f&&f.c(),d=Bt(),this.h()},l(u){const m=Zi('[data-svelte="svelte-10z8rmb"]',document.head);e=Z(m,"LINK",{rel:!0,as:!0,href:!0}),t=Z(m,"LINK",{rel:!0,as:!0,href:!0}),i=Z(m,"LINK",{rel:!0,as:!0,href:!0}),n=Z(m,"LINK",{rel:!0,as:!0,href:!0}),s=Z(m,"LINK",{rel:!0,as:!0,href:!0}),o=Z(m,"LINK",{rel:!0,as:!0,href:!0}),m.forEach(H),h=he(u),a&&a.l(u),c=he(u),f&&f.l(u),d=Bt(),this.h()},h(){k(e,"rel","preload"),k(e,"as","image"),k(e,"href","/images/intro/moon1.png"),k(t,"rel","preload"),k(t,"as","image"),k(t,"href","/images/intro/moon2.png"),k(i,"rel","preload"),k(i,"as","image"),k(i,"href","/images/intro/moon3.png"),k(n,"rel","preload"),k(n,"as","image"),k(n,"href","/images/intro/moon4.png"),k(s,"rel","preload"),k(s,"as","image"),k(s,"href","/images/intro/moon5.png"),k(o,"rel","preload"),k(o,"as","image"),k(o,"href","/images/intro/moon6.png")},m(u,m){z(document.head,e),z(document.head,t),z(document.head,i),z(document.head,n),z(document.head,s),z(document.head,o),pe(u,h,m),a&&a.m(u,m),pe(u,c,m),f&&f.m(u,m),pe(u,d,m),p=!0,r||(l=ze(Rl,"resize",g[20]),r=!0)},p(u,m){u[13]?a?(a.p(u,m),m[0]&8192&&ae(a,1)):(a=On(u),a.c(),ae(a,1),a.m(c.parentNode,c)):a&&(yt(),ge(a,1,1,()=>{a=null}),bt()),u[15]?f?(f.p(u,m),m[0]&32768&&ae(f,1)):(f=Fn(),f.c(),ae(f,1),f.m(d.parentNode,d)):f&&(yt(),ge(f,1,1,()=>{f=null}),bt())},i(u){p||(ae(a),ae(f),p=!0)},o(u){ge(a),ge(f),p=!1},d(u){H(e),H(t),H(i),H(n),H(s),H(o),u&&H(h),a&&a.d(u),u&&H(c),f&&f.d(u),u&&H(d),r=!1,l()}}}const Ei=24;function Hl(g,e,t){let i,n,s,o;Ze(g,Gi,ve=>t(38,i=ve)),Ze(g,Di,ve=>t(39,n=ve)),Ze(g,ms,ve=>t(40,s=ve)),Ze(g,Gs,ve=>t(41,o=ve));const h=Us();let{loadProgress:c}=e,{sceneProgress:d}=e,p={centerPct:0,size:0,sizePct:0,x:50,y:50},r,l,a,f,u,m,v=!1,_,S=0,w="",x="",y="",b=!1,M=!1,E=!1,I=!0,O=!1,F=!0,N,W=1,q=1,X=0;Gt(()=>{t(15,F=!1),t(10,b=!0),t(11,M=!0),re(),r=setInterval(Ie,16)}),js(()=>{clearInterval(r)});function re(){let ve=window.innerWidth/1100,Ne=window.innerHeight/700;t(18,q=Math.min(1.2,ve,Ne)),ve=window.innerWidth/650,Ne=window.innerHeight/1e3,t(17,W=Math.min(2,ve,Ne));let ut=1-(window.innerWidth-400)/400;ut=Math.max(0,Math.min(1,ut));let Ct=1+ut*.7;t(2,p.size=Math.min(window.innerWidth*.18,window.innerHeight*.18)*Ct,p)}function K(ve){o.start(ve),me(),Tt(),t(10,b=!1),setTimeout(xe,600)}function le(){t(6,v=!0),me()}function we(){t(6,v=!1),Pe()}function se(){me()}function ie(){Pe()}function xe(){h("continue"),t(14,O=!0);let ve=s.url.pathname.replaceAll("/","");if(t(2,p.x=50,p),t(2,p.y=50,p),ve===""||ve.includes("index")){const Ne=C.timeline();Ne.to(p,{duration:1.2,sizePct:1,ease:"power4.inOut"}),Ne.to(p,{duration:2,sizePct:10,ease:"power4.in",onComplete:_e},"+5"),setTimeout(ue,6500)}else C.to(p,{delay:0,duration:1.1,sizePct:10,ease:"power4.in",onComplete:_e}),setTimeout(ue,500)}function ue(){t(11,M=!1)}function _e(){n.setBlockRotation("auto"),t(13,I=!1)}function De(){_=setInterval(Le,3800),Le()}function Le(){rt(S+1),S>=4&&clearInterval(_)}function _t(){clearInterval(_),t(7,w=t(8,x=t(9,y=" ")))}function rt(ve){ve!=S&&(t(1,S=ve),ve===1?(t(7,w="HAS"),t(8,x="DIVINE TRUTH"),t(9,y="ELUDED YOU?")):ve===2?(t(7,w="HAVE YOU FELT"),t(8,x="DESTINY"),t(9,y="PASS YOU BY?")):ve===3?(t(7,w="DO"),t(8,x="THE STARS"),t(9,y="WRITE SOMEONE ELSE'S STORY?")):ve===4&&(t(7,w=""),t(8,x="ENOUGH!"),t(9,y="")))}function Rt(ve){Ee(ve*.75)}function Fe(ve){if(ve>=0){const ut=(d+1)/6;if(Ee(.75+ut*.25),t(19,X=ve),!a&&u&&(a=Array.from(u.querySelectorAll(".scene"))),a)for(var Ne=0;Ne<a.length;Ne++){const Ct=a[Ne];ve>=Ne&&(Ct.style.opacity=1)}}}function Ee(ve){if(!l&&f&&(l=Array.from(f.querySelectorAll(".moonWrapper"))),l)for(var Ne=0;Ne<l.length;Ne++){const ut=l[Ne],Ct=Ne/(Ei-1);ve>=Ct&&(ut.style.opacity=.6)}}function Ge(){for(var ve=0;ve<l.length;ve++){const Ne=l[ve];Ne.style.opacity=.15}}function Se(){C.to(p,{duration:.5,sizePct:1,ease:"power1.out"})}function Tt(){C.to(p,{duration:.3,sizePct:0,ease:"power1.out"})}function me(){C.to(p,{duration:.3,centerPct:1,ease:"power1.out"})}function Pe(){O||C.to(p,{duration:.3,centerPct:0,ease:"power1.out"})}function Ie(){!O&&b&&(t(2,p.x=i.slowPctX*100*(1-p.centerPct)+50*p.centerPct,p),t(2,p.y=i.slowPctY*100*(1-p.centerPct)+50*p.centerPct,p)),t(2,p),t(2,p)}function st(ve){xt[ve?"unshift":"push"](()=>{N=ve,t(16,N)})}function ft(ve){xt[ve?"unshift":"push"](()=>{m=ve,t(5,m)})}function je(ve){xt[ve?"unshift":"push"](()=>{f=ve,t(3,f)})}const ht=()=>K(!1);function Et(ve){xt[ve?"unshift":"push"](()=>{u=ve,t(4,u)})}const fe=()=>K(!0);return g.$$set=ve=>{"loadProgress"in ve&&t(0,c=ve.loadProgress),"sceneProgress"in ve&&t(26,d=ve.sceneProgress)},g.$$.update=()=>{g.$$.dirty[0]&67108865&&c===1&&d===6&&(setTimeout(Ge,100),t(12,E=!0),_t(),Se()),g.$$.dirty[0]&67108867&&(S===0&&c>0&&d<=0&&De(),Rt(c)),g.$$.dirty[0]&67108864&&Fe(d)},[c,S,p,f,u,m,v,w,x,y,b,M,E,I,O,F,N,W,q,X,re,K,le,we,se,ie,d,st,ft,je,ht,Et,fe]}class Bl extends Pt{constructor(e){super(),At(this,e,Hl,Dl,vt,{loadProgress:0,sceneProgress:26},null,[-1,-1,-1])}}var Qt=typeof window<"u"?window:{screen:{},navigator:{}},Ii=(Qt.matchMedia||function(){return{matches:!1}}).bind(Qt),zl={get passive(){return!0}},Nr=function(){};Qt.addEventListener&&Qt.addEventListener("p",Nr,zl);Qt.removeEventListener&&Qt.removeEventListener("p",Nr,!1);var Qs="ontouchstart"in Qt,Fl="TouchEvent"in Qt,Nl=Qs||Fl&&Ii("(any-pointer: coarse)").matches,Nn=(Qt.navigator.maxTouchPoints||0)>0||Nl,Vr=Qt.navigator.userAgent||"",Vl=Ii("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Vr)&&Math.min(Qt.screen.width||0,Qt.screen.height||0)>=768,Ur=(Ii("(pointer: coarse)").matches||!Ii("(pointer: fine)").matches&&Qs)&&!/Windows.*Firefox/.test(Vr),Ul=Ii("(any-pointer: fine)").matches||Ii("(any-hover: hover)").matches||Vl||!Qs,Vn=Nn&&(Ul||!Ur)?"hybrid":Nn?"touchOnly":"mouseOnly",ds=Vn==="mouseOnly"?"mouse":Vn==="touchOnly"||Ur?"touch":"mouse";function jl(g){let e,t;return{c(){e=$("img"),this.h()},l(i){e=Z(i,"IMG",{src:!0,alt:!0,"aria-hidden":!0,class:!0}),this.h()},h(){Ot(e.src,t="/images/cursor/"+g[0]+".png")||k(e,"src",t),k(e,"alt","pointer"),k(e,"aria-hidden","true"),k(e,"class","svelte-e9ckxi")},m(i,n){pe(i,e,n)},p(i,[n]){n&1&&!Ot(e.src,t="/images/cursor/"+i[0]+".png")&&k(e,"src",t)},i:gt,o:gt,d(i){i&&H(e)}}}function Gl(g,e,t){let i,{cursor:n}=e,{betweenCursor:s}=e;return g.$$set=o=>{"cursor"in o&&t(1,n=o.cursor),"betweenCursor"in o&&t(2,s=o.betweenCursor)},g.$$.update=()=>{g.$$.dirty&6&&t(0,i=s||n)},[i,n,s]}class Un extends Pt{constructor(e){super(),At(this,e,Gl,jl,vt,{cursor:1,betweenCursor:2})}}const{document:gi,window:Es}=fs;function jn(g){let e,t,i,n,s,o,h,c,d;return n=new Un({props:{betweenCursor:g[16],cursor:g[15]}}),c=new Un({props:{betweenCursor:g[16],cursor:g[15]}}),{c(){e=$("div"),t=$("div"),i=$("div"),ot(n.$$.fragment),s=ce(),o=$("div"),h=$("div"),ot(c.$$.fragment),this.h()},l(p){e=Z(p,"DIV",{class:!0,style:!0});var r=Q(e);t=Z(r,"DIV",{});var l=Q(t);i=Z(l,"DIV",{class:!0});var a=Q(i);at(n.$$.fragment,a),a.forEach(H),l.forEach(H),s=he(r),o=Z(r,"DIV",{});var f=Q(o);h=Z(f,"DIV",{class:!0});var u=Q(h);at(c.$$.fragment,u),u.forEach(H),f.forEach(H),r.forEach(H),this.h()},h(){k(i,"class","pointerShadow svelte-1s9ro3e"),k(h,"class","pointer svelte-1s9ro3e"),k(e,"class","cursor svelte-1s9ro3e"),wt(e,"transform","translate("+g[13]+"px, "+g[14]+"px)"),$e(e,"cursorEnabled",g[6])},m(p,r){pe(p,e,r),z(e,t),z(t,i),lt(n,i,null),g[37](t),z(e,s),z(e,o),z(o,h),lt(c,h,null),g[38](o),d=!0},p(p,r){const l={};r[0]&65536&&(l.betweenCursor=p[16]),r[0]&32768&&(l.cursor=p[15]),n.$set(l);const a={};r[0]&65536&&(a.betweenCursor=p[16]),r[0]&32768&&(a.cursor=p[15]),c.$set(a),(!d||r[0]&24576)&&wt(e,"transform","translate("+p[13]+"px, "+p[14]+"px)"),r[0]&64&&$e(e,"cursorEnabled",p[6])},i(p){d||(ae(n.$$.fragment,p),ae(c.$$.fragment,p),d=!0)},o(p){ge(n.$$.fragment,p),ge(c.$$.fragment,p),d=!1},d(p){p&&H(e),ct(n),g[37](null),ct(c),g[38](null)}}}function Gn(g){let e,t,i=ds==="mouse"&&g[3]&&g[4]&&Wn(g);return{c(){i&&i.c(),e=Bt()},l(n){i&&i.l(n),e=Bt()},m(n,s){i&&i.m(n,s),pe(n,e,s),t=!0},p(n,s){ds==="mouse"&&n[3]&&n[4]?i?(i.p(n,s),s[0]&24&&ae(i,1)):(i=Wn(n),i.c(),ae(i,1),i.m(e.parentNode,e)):i&&(yt(),ge(i,1,1,()=>{i=null}),bt())},i(n){t||(ae(i),t=!0)},o(n){ge(i),t=!1},d(n){i&&i.d(n),n&&H(e)}}}function Wn(g){let e,t,i,n,s,o,h,c,d,p=g[3],r,l,a=Yn(g);return{c(){e=$("div"),t=$("div"),s=ce(),o=$("div"),d=ce(),a.c(),r=Bt(),this.h()},l(f){e=Z(f,"DIV",{class:!0,style:!0});var u=Q(e);t=Z(u,"DIV",{class:!0,style:!0}),Q(t).forEach(H),s=he(u),o=Z(u,"DIV",{class:!0}),Q(o).forEach(H),u.forEach(H),d=he(f),a.l(f),r=Bt(),this.h()},h(){k(t,"class",i="progress "+g[5]+" svelte-1s9ro3e"),wt(t,"--progress",g[0]+"%"),$e(t,"inverted",g[17]),k(o,"class",h="hint "+g[5]+" svelte-1s9ro3e"),$e(o,"inverted",g[17]),k(e,"class","hintWrapper svelte-1s9ro3e"),wt(e,"transform","translate("+g[9]+"px, "+g[10]+"px)")},m(f,u){pe(f,e,u),z(e,t),z(e,s),z(e,o),pe(f,d,u),a.m(f,u),pe(f,r,u),l=!0},p(f,u){g=f,(!l||u[0]&32&&i!==(i="progress "+g[5]+" svelte-1s9ro3e"))&&k(t,"class",i),(!l||u[0]&1)&&wt(t,"--progress",g[0]+"%"),u[0]&131104&&$e(t,"inverted",g[17]),(!l||u[0]&32&&h!==(h="hint "+g[5]+" svelte-1s9ro3e"))&&k(o,"class",h),u[0]&131104&&$e(o,"inverted",g[17]),(!l||u[0]&1536)&&wt(e,"transform","translate("+g[9]+"px, "+g[10]+"px)"),u[0]&8&&vt(p,p=g[3])?(yt(),ge(a,1,1,gt),bt(),a=Yn(g),a.c(),ae(a,1),a.m(r.parentNode,r)):a.p(g,u)},i(f){l||(dt(()=>{n||(n=ei(t,Ut,{duration:200,easing:ln},!0)),n.run(1)}),dt(()=>{c||(c=ei(o,Ut,{duration:500,easing:Is},!0)),c.run(1)}),ae(a),l=!0)},o(f){n||(n=ei(t,Ut,{duration:200,easing:ln},!1)),n.run(0),c||(c=ei(o,Ut,{duration:500,easing:Is},!1)),c.run(0),ge(a),l=!1},d(f){f&&H(e),f&&n&&n.end(),f&&c&&c.end(),f&&H(d),f&&H(r),a.d(f)}}}function Yn(g){let e,t,i,n,s,o,h;return{c(){e=$("div"),t=$("div"),i=St(g[3]),this.h()},l(c){e=Z(c,"DIV",{class:!0,style:!0});var d=Q(e);t=Z(d,"DIV",{class:!0});var p=Q(t);i=Mt(p,g[3]),p.forEach(H),d.forEach(H),this.h()},h(){k(t,"class",n="text "+g[5]+" svelte-1s9ro3e"),$e(t,"inverted",g[17]),k(e,"class","textWrapper svelte-1s9ro3e"),wt(e,"transform","translate("+g[11]+"px, "+g[12]+"px)")},m(c,d){pe(c,e,d),z(e,t),z(t,i),h=!0},p(c,d){g=c,(!h||d[0]&8)&&Pi(i,g[3]),(!h||d[0]&32&&n!==(n="text "+g[5]+" svelte-1s9ro3e"))&&k(t,"class",n),d[0]&131104&&$e(t,"inverted",g[17]),(!h||d[0]&6144)&&wt(e,"transform","translate("+g[11]+"px, "+g[12]+"px)")},i(c){h||(dt(()=>{o&&o.end(1),s=Lt(t,Ut,{duration:300,easing:Is}),s.start()}),h=!0)},o(c){s&&s.invalidate(),o=mt(t,Ut,{duration:100,easing:ti}),h=!1},d(c){c&&H(e),c&&o&&o.end()}}}function Wl(g){let e,t,i,n,s,o,h,c,d,p,r,l,a=ds==="mouse"&&g[4]&&jn(g),f=g[7]&&!g[8]&&Gn(g);return{c(){e=$("link"),t=$("link"),i=$("link"),n=$("link"),s=$("link"),o=$("link"),h=ce(),a&&a.c(),c=ce(),f&&f.c(),d=Bt(),this.h()},l(u){const m=Zi('[data-svelte="svelte-1fts7wc"]',gi.head);e=Z(m,"LINK",{rel:!0,as:!0,href:!0}),t=Z(m,"LINK",{rel:!0,as:!0,href:!0}),i=Z(m,"LINK",{rel:!0,as:!0,href:!0}),n=Z(m,"LINK",{rel:!0,as:!0,href:!0}),s=Z(m,"LINK",{rel:!0,as:!0,href:!0}),o=Z(m,"LINK",{rel:!0,as:!0,href:!0}),m.forEach(H),h=he(u),a&&a.l(u),c=he(u),f&&f.l(u),d=Bt(),this.h()},h(){k(e,"rel","preload"),k(e,"as","image"),k(e,"href","/images/cursor/click.png"),k(t,"rel","preload"),k(t,"as","image"),k(t,"href","/images/cursor/grab.png"),k(i,"rel","preload"),k(i,"as","image"),k(i,"href","/images/cursor/grabbing.png"),k(n,"rel","preload"),k(n,"as","image"),k(n,"href","/images/cursor/hover.png"),k(s,"rel","preload"),k(s,"as","image"),k(s,"href","/images/cursor/normal.png"),k(o,"rel","preload"),k(o,"as","image"),k(o,"href","/images/work/h1Bg.png")},m(u,m){z(gi.head,e),z(gi.head,t),z(gi.head,i),z(gi.head,n),z(gi.head,s),z(gi.head,o),pe(u,h,m),a&&a.m(u,m),pe(u,c,m),f&&f.m(u,m),pe(u,d,m),p=!0,r||(l=[ze(Es,"mousemove",g[18]),ze(Es,"mousedown",g[19]),ze(Es,"mouseup",g[20])],r=!0)},p(u,m){ds==="mouse"&&u[4]?a?(a.p(u,m),m[0]&16&&ae(a,1)):(a=jn(u),a.c(),ae(a,1),a.m(c.parentNode,c)):a&&(yt(),ge(a,1,1,()=>{a=null}),bt()),u[7]&&!u[8]?f?(f.p(u,m),m[0]&384&&ae(f,1)):(f=Gn(u),f.c(),ae(f,1),f.m(d.parentNode,d)):f&&(yt(),ge(f,1,1,()=>{f=null}),bt())},i(u){p||(ae(a),ae(f),p=!0)},o(u){ge(a),ge(f),p=!1},d(u){H(e),H(t),H(i),H(n),H(s),H(o),u&&H(h),a&&a.d(u),u&&H(c),f&&f.d(u),u&&H(d),r=!1,Ri(l)}}}function Yl(g){for(;g.parentNode;){if(["BUTTON","A"].includes(g.tagName)||g.classList.contains("CURSOR"))return!0;g=g.parentNode}return!1}function Xl(g,e,t){let i,n,s;Ze(g,Gi,fe=>t(48,i=fe)),Ze(g,ms,fe=>t(49,n=fe)),Ze(g,Rr,fe=>t(36,s=fe));let{progress:o=0}=e,h,c,d=!1,p=!1,r=!1,l,a=!0,f=!0,u=!1,m,v,_,S,w,x=-100,y=-100,b="normal",M="normal",E="",I="",O="",F="",N="normal",W="",q=!1,X=!1,re;function K(){t(6,a=!0)}function le(){t(6,a=!1),t(4,r=!1)}function we(){t(5,l=n.url.pathname.replaceAll("/","")),t(7,f=!1),t(8,u=!1),t(3,I=O=t(34,F="")),Le()}function se(){t(7,f=!0)}function ie(){t(7,f=!1)}function xe(){t(8,u=!0)}function ue(){t(8,u=!1)}Gt(()=>{we(),_e(),document.onmouseenter=ft,document.onmouseleave=je});function _e(){-1+i.pctX*2,t(9,v=i.slowX+8),t(10,_=i.slowY-58);let fe=i.slowX*.75+i.x*.25,ve=i.slowY*.75+i.y*.25;t(11,S=fe+8),t(12,w=ve-58),requestAnimationFrame(_e)}function De(fe){p=fe,Le()}function Le(){const fe=l.includes("index")||l===""||l==="work"||d;p===!0||p==="auto"&&fe?y>window.innerHeight-90&&!X?t(35,X=!0):y<window.innerHeight-140&&X&&t(35,X=!1):t(35,X=!1)}function _t(fe){d=fe,Le()}function rt(fe){r||t(4,r=!0),t(13,x=fe.clientX),t(14,y=fe.clientY),Yl(fe.target)?M="hover":fe.target.style.cursor==="grab"?M="grab":M="normal",Le(),Rt()}function Rt(){E?b=E:b=M,Ge()}function Fe(){q=!0,Ge()}function Ee(){q=!1,Ge()}function Ge(){let fe;q?b==="grab"?fe="grabbing":b==="hover"?fe="click":fe=b:fe=b,N!=fe&&((N==="hover"||fe==="hover")&&!(N==="click"||fe==="click")?t(16,W="hover_between"):(N==="grab"||fe==="grab")&&!(N==="grabbing"||fe==="grabbing")?t(16,W="grab_between"):t(16,W=""),W?(clearTimeout(m),m=setTimeout(Se,9,fe)):t(15,N=fe))}function Se(fe){t(16,W=""),t(15,N=fe)}function Tt(fe){E=fe}function me(fe){O=fe,Ie()}function Pe(fe){t(34,F=fe),Ie()}function Ie(){O?t(3,I=O):F?t(3,I=F):t(3,I="")}function st(fe){t(0,o=fe*100)}function ft(){t(4,r=!0)}function je(){t(4,r=!1)}function ht(fe){xt[fe?"unshift":"push"](()=>{h=fe,t(1,h)})}function Et(fe){xt[fe?"unshift":"push"](()=>{c=fe,t(2,c)})}return g.$$set=fe=>{"progress"in fe&&t(0,o=fe.progress)},g.$$.update=()=>{if(g.$$.dirty[0]&9|g.$$.dirty[1]&8&&t(17,re=o>0||I===F),g.$$.dirty[1]&32&&s&&setTimeout(we,1e3),g.$$.dirty[0]&6|g.$$.dirty[1]&16){const fe=X?180:0;C.to(c,{duration:.25,rotation:fe,ease:"sine.out"}),X?C.to(h,{duration:.25,x:-40,y:40,rotation:fe,ease:"sine.out"}):C.to(h,{duration:.25,x:0,y:0,rotation:fe,ease:"sine.out"})}},[o,h,c,I,r,l,a,f,u,v,_,S,w,x,y,N,W,re,rt,Fe,Ee,K,le,we,se,ie,xe,ue,De,_t,Tt,me,Pe,st,F,X,s,ht,Et]}class Kl extends Pt{constructor(e){super(),At(this,e,Xl,Wl,vt,{progress:0,enableCursor:21,disableCursor:22,reset:23,enableHints:24,disableHints:25,pauseHints:26,unpauseHints:27,setBlockRotation:28,forceRotation:29,setForcedState:30,setHint:31,setDefaultHint:32,setProgress:33},null,[-1,-1])}get enableCursor(){return this.$$.ctx[21]}get disableCursor(){return this.$$.ctx[22]}get reset(){return this.$$.ctx[23]}get enableHints(){return this.$$.ctx[24]}get disableHints(){return this.$$.ctx[25]}get pauseHints(){return this.$$.ctx[26]}get unpauseHints(){return this.$$.ctx[27]}get setBlockRotation(){return this.$$.ctx[28]}get forceRotation(){return this.$$.ctx[29]}get setForcedState(){return this.$$.ctx[30]}get setHint(){return this.$$.ctx[31]}get setDefaultHint(){return this.$$.ctx[32]}get setProgress(){return this.$$.ctx[33]}}var jr={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(g,e){(function(i,n){g.exports=n()})(ci,function(){return function(t){var i={};function n(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=i,n.d=function(s,o,h){n.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:h})},n.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},n.t=function(s,o){if(o&1&&(s=n(s)),o&8||o&4&&typeof s=="object"&&s&&s.__esModule)return s;var h=Object.create(null);if(n.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:s}),o&2&&typeof s!="string")for(var c in s)n.d(h,c,function(d){return s[d]}.bind(null,c));return h},n.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(o,"a",o),o},n.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},n.p="",n(n.s=21)}([function(t,i){var n={};t.exports=n,function(){n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n._warnedOnce={},n._decomp=null,n.extend=function(o,h){var c,d;typeof h=="boolean"?(c=2,d=h):(c=1,d=!0);for(var p=c;p<arguments.length;p++){var r=arguments[p];if(r)for(var l in r)d&&r[l]&&r[l].constructor===Object&&(!o[l]||o[l].constructor===Object)?(o[l]=o[l]||{},n.extend(o[l],d,r[l])):o[l]=r[l]}return o},n.clone=function(o,h){return n.extend({},h,o)},n.keys=function(o){if(Object.keys)return Object.keys(o);var h=[];for(var c in o)h.push(c);return h},n.values=function(o){var h=[];if(Object.keys){for(var c=Object.keys(o),d=0;d<c.length;d++)h.push(o[c[d]]);return h}for(var p in o)h.push(o[p]);return h},n.get=function(o,h,c,d){h=h.split(".").slice(c,d);for(var p=0;p<h.length;p+=1)o=o[h[p]];return o},n.set=function(o,h,c,d,p){var r=h.split(".").slice(d,p);return n.get(o,h,0,-1)[r[r.length-1]]=c,c},n.shuffle=function(o){for(var h=o.length-1;h>0;h--){var c=Math.floor(n.random()*(h+1)),d=o[h];o[h]=o[c],o[c]=d}return o},n.choose=function(o){return o[Math.floor(n.random()*o.length)]},n.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},n.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},n.isFunction=function(o){return typeof o=="function"},n.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},n.isString=function(o){return toString.call(o)==="[object String]"},n.clamp=function(o,h,c){return o<h?h:o>c?c:o},n.sign=function(o){return o<0?-1:1},n.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-n._nowStartTime},n.random=function(o,h){return o=typeof o<"u"?o:0,h=typeof h<"u"?h:1,o+s()*(h-o)};var s=function(){return n._seed=(n._seed*9301+49297)%233280,n._seed/233280};n.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");n._warnedOnce[o]||(n.warn(o),n._warnedOnce[o]=!0)},n.deprecated=function(o,h,c){o[h]=n.chain(function(){n.warnOnce("\u{1F505} deprecated \u{1F505}",c)},o[h])},n.nextId=function(){return n._nextId++},n.indexOf=function(o,h){if(o.indexOf)return o.indexOf(h);for(var c=0;c<o.length;c++)if(o[c]===h)return c;return-1},n.map=function(o,h){if(o.map)return o.map(h);for(var c=[],d=0;d<o.length;d+=1)c.push(h(o[d]));return c},n.topologicalSort=function(o){var h=[],c=[],d=[];for(var p in o)!c[p]&&!d[p]&&n._topologicalSort(p,c,d,o,h);return h},n._topologicalSort=function(o,h,c,d,p){var r=d[o]||[];c[o]=!0;for(var l=0;l<r.length;l+=1){var a=r[l];c[a]||h[a]||n._topologicalSort(a,h,c,d,p)}c[o]=!1,h[o]=!0,p.push(o)},n.chain=function(){for(var o=[],h=0;h<arguments.length;h+=1){var c=arguments[h];c._chained?o.push.apply(o,c._chained):o.push(c)}var d=function(){for(var p,r=new Array(arguments.length),l=0,a=arguments.length;l<a;l++)r[l]=arguments[l];for(l=0;l<o.length;l+=1){var f=o[l].apply(p,r);typeof f<"u"&&(p=f)}return p};return d._chained=o,d},n.chainPathBefore=function(o,h,c){return n.set(o,h,n.chain(c,n.get(o,h)))},n.chainPathAfter=function(o,h,c){return n.set(o,h,n.chain(n.get(o,h),c))},n.setDecomp=function(o){n._decomp=o},n.getDecomp=function(){var o=n._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof ci<"u"&&(o=ci.decomp)}catch{o=null}return o}}()},function(t,i){var n={};t.exports=n,function(){n.create=function(s){var o={min:{x:0,y:0},max:{x:0,y:0}};return s&&n.update(o,s),o},n.update=function(s,o,h){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var c=0;c<o.length;c++){var d=o[c];d.x>s.max.x&&(s.max.x=d.x),d.x<s.min.x&&(s.min.x=d.x),d.y>s.max.y&&(s.max.y=d.y),d.y<s.min.y&&(s.min.y=d.y)}h&&(h.x>0?s.max.x+=h.x:s.min.x+=h.x,h.y>0?s.max.y+=h.y:s.min.y+=h.y)},n.contains=function(s,o){return o.x>=s.min.x&&o.x<=s.max.x&&o.y>=s.min.y&&o.y<=s.max.y},n.overlaps=function(s,o){return s.min.x<=o.max.x&&s.max.x>=o.min.x&&s.max.y>=o.min.y&&s.min.y<=o.max.y},n.translate=function(s,o){s.min.x+=o.x,s.max.x+=o.x,s.min.y+=o.y,s.max.y+=o.y},n.shift=function(s,o){var h=s.max.x-s.min.x,c=s.max.y-s.min.y;s.min.x=o.x,s.max.x=o.x+h,s.min.y=o.y,s.max.y=o.y+c}}()},function(t,i){var n={};t.exports=n,function(){n.create=function(s,o){return{x:s||0,y:o||0}},n.clone=function(s){return{x:s.x,y:s.y}},n.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},n.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},n.rotate=function(s,o,h){var c=Math.cos(o),d=Math.sin(o);h||(h={});var p=s.x*c-s.y*d;return h.y=s.x*d+s.y*c,h.x=p,h},n.rotateAbout=function(s,o,h,c){var d=Math.cos(o),p=Math.sin(o);c||(c={});var r=h.x+((s.x-h.x)*d-(s.y-h.y)*p);return c.y=h.y+((s.x-h.x)*p+(s.y-h.y)*d),c.x=r,c},n.normalise=function(s){var o=n.magnitude(s);return o===0?{x:0,y:0}:{x:s.x/o,y:s.y/o}},n.dot=function(s,o){return s.x*o.x+s.y*o.y},n.cross=function(s,o){return s.x*o.y-s.y*o.x},n.cross3=function(s,o,h){return(o.x-s.x)*(h.y-s.y)-(o.y-s.y)*(h.x-s.x)},n.add=function(s,o,h){return h||(h={}),h.x=s.x+o.x,h.y=s.y+o.y,h},n.sub=function(s,o,h){return h||(h={}),h.x=s.x-o.x,h.y=s.y-o.y,h},n.mult=function(s,o){return{x:s.x*o,y:s.y*o}},n.div=function(s,o){return{x:s.x/o,y:s.y/o}},n.perp=function(s,o){return o=o===!0?-1:1,{x:o*-s.y,y:o*s.x}},n.neg=function(s){return{x:-s.x,y:-s.y}},n.angle=function(s,o){return Math.atan2(o.y-s.y,o.x-s.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]}()},function(t,i,n){var s={};t.exports=s;var o=n(2),h=n(0);(function(){s.create=function(c,d){for(var p=[],r=0;r<c.length;r++){var l=c[r],a={x:l.x,y:l.y,index:r,body:d,isInternal:!1};p.push(a)}return p},s.fromPath=function(c,d){var p=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,r=[];return c.replace(p,function(l,a,f){r.push({x:parseFloat(a),y:parseFloat(f)})}),s.create(r,d)},s.centre=function(c){for(var d=s.area(c,!0),p={x:0,y:0},r,l,a,f=0;f<c.length;f++)a=(f+1)%c.length,r=o.cross(c[f],c[a]),l=o.mult(o.add(c[f],c[a]),r),p=o.add(p,l);return o.div(p,6*d)},s.mean=function(c){for(var d={x:0,y:0},p=0;p<c.length;p++)d.x+=c[p].x,d.y+=c[p].y;return o.div(d,c.length)},s.area=function(c,d){for(var p=0,r=c.length-1,l=0;l<c.length;l++)p+=(c[r].x-c[l].x)*(c[r].y+c[l].y),r=l;return d?p/2:Math.abs(p)/2},s.inertia=function(c,d){for(var p=0,r=0,l=c,a,f,u=0;u<l.length;u++)f=(u+1)%l.length,a=Math.abs(o.cross(l[f],l[u])),p+=a*(o.dot(l[f],l[f])+o.dot(l[f],l[u])+o.dot(l[u],l[u])),r+=a;return d/6*(p/r)},s.translate=function(c,d,p){p=typeof p<"u"?p:1;var r=c.length,l=d.x*p,a=d.y*p,f;for(f=0;f<r;f++)c[f].x+=l,c[f].y+=a;return c},s.rotate=function(c,d,p){if(d!==0){var r=Math.cos(d),l=Math.sin(d),a=p.x,f=p.y,u=c.length,m,v,_,S;for(S=0;S<u;S++)m=c[S],v=m.x-a,_=m.y-f,m.x=a+(v*r-_*l),m.y=f+(v*l+_*r);return c}},s.contains=function(c,d){for(var p=d.x,r=d.y,l=c.length,a=c[l-1],f,u=0;u<l;u++){if(f=c[u],(p-a.x)*(f.y-a.y)+(r-a.y)*(a.x-f.x)>0)return!1;a=f}return!0},s.scale=function(c,d,p,r){if(d===1&&p===1)return c;r=r||s.centre(c);for(var l,a,f=0;f<c.length;f++)l=c[f],a=o.sub(l,r),c[f].x=r.x+a.x*d,c[f].y=r.y+a.y*p;return c},s.chamfer=function(c,d,p,r,l){typeof d=="number"?d=[d]:d=d||[8],p=typeof p<"u"?p:-1,r=r||2,l=l||14;for(var a=[],f=0;f<c.length;f++){var u=c[f-1>=0?f-1:c.length-1],m=c[f],v=c[(f+1)%c.length],_=d[f<d.length?f:d.length-1];if(_===0){a.push(m);continue}var S=o.normalise({x:m.y-u.y,y:u.x-m.x}),w=o.normalise({x:v.y-m.y,y:m.x-v.x}),x=Math.sqrt(2*Math.pow(_,2)),y=o.mult(h.clone(S),_),b=o.normalise(o.mult(o.add(S,w),.5)),M=o.sub(m,o.mult(b,x)),E=p;p===-1&&(E=Math.pow(_,.32)*1.75),E=h.clamp(E,r,l),E%2===1&&(E+=1);for(var I=Math.acos(o.dot(S,w)),O=I/E,F=0;F<E;F++)a.push(o.add(o.rotate(y,O*F),M))}return a},s.clockwiseSort=function(c){var d=s.mean(c);return c.sort(function(p,r){return o.angle(d,p)-o.angle(d,r)}),c},s.isConvex=function(c){var d=0,p=c.length,r,l,a,f;if(p<3)return null;for(r=0;r<p;r++)if(l=(r+1)%p,a=(r+2)%p,f=(c[l].x-c[r].x)*(c[a].y-c[l].y),f-=(c[l].y-c[r].y)*(c[a].x-c[l].x),f<0?d|=1:f>0&&(d|=2),d===3)return!1;return d!==0?!0:null},s.hull=function(c){var d=[],p=[],r,l;for(c=c.slice(0),c.sort(function(a,f){var u=a.x-f.x;return u!==0?u:a.y-f.y}),l=0;l<c.length;l+=1){for(r=c[l];p.length>=2&&o.cross3(p[p.length-2],p[p.length-1],r)<=0;)p.pop();p.push(r)}for(l=c.length-1;l>=0;l-=1){for(r=c[l];d.length>=2&&o.cross3(d[d.length-2],d[d.length-1],r)<=0;)d.pop();d.push(r)}return d.pop(),p.pop(),d.concat(p)}})()},function(t,i,n){var s={};t.exports=s;var o=n(0);(function(){s.on=function(h,c,d){for(var p=c.split(" "),r,l=0;l<p.length;l++)r=p[l],h.events=h.events||{},h.events[r]=h.events[r]||[],h.events[r].push(d);return d},s.off=function(h,c,d){if(!c){h.events={};return}typeof c=="function"&&(d=c,c=o.keys(h.events).join(" "));for(var p=c.split(" "),r=0;r<p.length;r++){var l=h.events[p[r]],a=[];if(d&&l)for(var f=0;f<l.length;f++)l[f]!==d&&a.push(l[f]);h.events[p[r]]=a}},s.trigger=function(h,c,d){var p,r,l,a,f=h.events;if(f&&o.keys(f).length>0){d||(d={}),p=c.split(" ");for(var u=0;u<p.length;u++)if(r=p[u],l=f[r],l){a=o.clone(d,!1),a.name=r,a.source=h;for(var m=0;m<l.length;m++)l[m].apply(h,[a])}}}})()},function(t,i,n){var s={};t.exports=s;var o=n(4),h=n(0),c=n(1),d=n(6);(function(){s.create=function(p){return h.extend({id:h.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},p)},s.setModified=function(p,r,l,a){if(p.isModified=r,r&&p.cache&&(p.cache.allBodies=null,p.cache.allConstraints=null,p.cache.allComposites=null),l&&p.parent&&s.setModified(p.parent,r,l,a),a)for(var f=0;f<p.composites.length;f++){var u=p.composites[f];s.setModified(u,r,l,a)}},s.add=function(p,r){var l=[].concat(r);o.trigger(p,"beforeAdd",{object:r});for(var a=0;a<l.length;a++){var f=l[a];switch(f.type){case"body":if(f.parent!==f){h.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(p,f);break;case"constraint":s.addConstraint(p,f);break;case"composite":s.addComposite(p,f);break;case"mouseConstraint":s.addConstraint(p,f.constraint);break}}return o.trigger(p,"afterAdd",{object:r}),p},s.remove=function(p,r,l){var a=[].concat(r);o.trigger(p,"beforeRemove",{object:r});for(var f=0;f<a.length;f++){var u=a[f];switch(u.type){case"body":s.removeBody(p,u,l);break;case"constraint":s.removeConstraint(p,u,l);break;case"composite":s.removeComposite(p,u,l);break;case"mouseConstraint":s.removeConstraint(p,u.constraint);break}}return o.trigger(p,"afterRemove",{object:r}),p},s.addComposite=function(p,r){return p.composites.push(r),r.parent=p,s.setModified(p,!0,!0,!1),p},s.removeComposite=function(p,r,l){var a=h.indexOf(p.composites,r);if(a!==-1&&s.removeCompositeAt(p,a),l)for(var f=0;f<p.composites.length;f++)s.removeComposite(p.composites[f],r,!0);return p},s.removeCompositeAt=function(p,r){return p.composites.splice(r,1),s.setModified(p,!0,!0,!1),p},s.addBody=function(p,r){return p.bodies.push(r),s.setModified(p,!0,!0,!1),p},s.removeBody=function(p,r,l){var a=h.indexOf(p.bodies,r);if(a!==-1&&s.removeBodyAt(p,a),l)for(var f=0;f<p.composites.length;f++)s.removeBody(p.composites[f],r,!0);return p},s.removeBodyAt=function(p,r){return p.bodies.splice(r,1),s.setModified(p,!0,!0,!1),p},s.addConstraint=function(p,r){return p.constraints.push(r),s.setModified(p,!0,!0,!1),p},s.removeConstraint=function(p,r,l){var a=h.indexOf(p.constraints,r);if(a!==-1&&s.removeConstraintAt(p,a),l)for(var f=0;f<p.composites.length;f++)s.removeConstraint(p.composites[f],r,!0);return p},s.removeConstraintAt=function(p,r){return p.constraints.splice(r,1),s.setModified(p,!0,!0,!1),p},s.clear=function(p,r,l){if(l)for(var a=0;a<p.composites.length;a++)s.clear(p.composites[a],r,!0);return r?p.bodies=p.bodies.filter(function(f){return f.isStatic}):p.bodies.length=0,p.constraints.length=0,p.composites.length=0,s.setModified(p,!0,!0,!1),p},s.allBodies=function(p){if(p.cache&&p.cache.allBodies)return p.cache.allBodies;for(var r=[].concat(p.bodies),l=0;l<p.composites.length;l++)r=r.concat(s.allBodies(p.composites[l]));return p.cache&&(p.cache.allBodies=r),r},s.allConstraints=function(p){if(p.cache&&p.cache.allConstraints)return p.cache.allConstraints;for(var r=[].concat(p.constraints),l=0;l<p.composites.length;l++)r=r.concat(s.allConstraints(p.composites[l]));return p.cache&&(p.cache.allConstraints=r),r},s.allComposites=function(p){if(p.cache&&p.cache.allComposites)return p.cache.allComposites;for(var r=[].concat(p.composites),l=0;l<p.composites.length;l++)r=r.concat(s.allComposites(p.composites[l]));return p.cache&&(p.cache.allComposites=r),r},s.get=function(p,r,l){var a,f;switch(l){case"body":a=s.allBodies(p);break;case"constraint":a=s.allConstraints(p);break;case"composite":a=s.allComposites(p).concat(p);break}return a?(f=a.filter(function(u){return u.id.toString()===r.toString()}),f.length===0?null:f[0]):null},s.move=function(p,r,l){return s.remove(p,r),s.add(l,r),p},s.rebase=function(p){for(var r=s.allBodies(p).concat(s.allConstraints(p)).concat(s.allComposites(p)),l=0;l<r.length;l++)r[l].id=h.nextId();return p},s.translate=function(p,r,l){for(var a=l?s.allBodies(p):p.bodies,f=0;f<a.length;f++)d.translate(a[f],r);return p},s.rotate=function(p,r,l,a){for(var f=Math.cos(r),u=Math.sin(r),m=a?s.allBodies(p):p.bodies,v=0;v<m.length;v++){var _=m[v],S=_.position.x-l.x,w=_.position.y-l.y;d.setPosition(_,{x:l.x+(S*f-w*u),y:l.y+(S*u+w*f)}),d.rotate(_,r)}return p},s.scale=function(p,r,l,a,f){for(var u=f?s.allBodies(p):p.bodies,m=0;m<u.length;m++){var v=u[m],_=v.position.x-a.x,S=v.position.y-a.y;d.setPosition(v,{x:a.x+_*r,y:a.y+S*l}),d.scale(v,r,l)}return p},s.bounds=function(p){for(var r=s.allBodies(p),l=[],a=0;a<r.length;a+=1){var f=r[a];l.push(f.bounds.min,f.bounds.max)}return c.create(l)}})()},function(t,i,n){var s={};t.exports=s;var o=n(3),h=n(2),c=n(7);n(16);var d=n(0),p=n(1),r=n(11);(function(){s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s.create=function(a){var f={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},u=d.extend(f,a);return l(u,a),u},s.nextGroup=function(a){return a?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var l=function(a,f){f=f||{},s.set(a,{bounds:a.bounds||p.create(a.vertices),positionPrev:a.positionPrev||h.clone(a.position),anglePrev:a.anglePrev||a.angle,vertices:a.vertices,parts:a.parts||[a],isStatic:a.isStatic,isSleeping:a.isSleeping,parent:a.parent||a}),o.rotate(a.vertices,a.angle,a.position),r.rotate(a.axes,a.angle),p.update(a.bounds,a.vertices,a.velocity),s.set(a,{axes:f.axes||a.axes,area:f.area||a.area,mass:f.mass||a.mass,inertia:f.inertia||a.inertia});var u=a.isStatic?"#14151f":d.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),m=a.isStatic?"#555":"#ccc",v=a.isStatic&&a.render.fillStyle===null?1:0;a.render.fillStyle=a.render.fillStyle||u,a.render.strokeStyle=a.render.strokeStyle||m,a.render.lineWidth=a.render.lineWidth||v,a.render.sprite.xOffset+=-(a.bounds.min.x-a.position.x)/(a.bounds.max.x-a.bounds.min.x),a.render.sprite.yOffset+=-(a.bounds.min.y-a.position.y)/(a.bounds.max.y-a.bounds.min.y)};s.set=function(a,f,u){var m;typeof f=="string"&&(m=f,f={},f[m]=u);for(m in f)if(!!Object.prototype.hasOwnProperty.call(f,m))switch(u=f[m],m){case"isStatic":s.setStatic(a,u);break;case"isSleeping":c.set(a,u);break;case"mass":s.setMass(a,u);break;case"density":s.setDensity(a,u);break;case"inertia":s.setInertia(a,u);break;case"vertices":s.setVertices(a,u);break;case"position":s.setPosition(a,u);break;case"angle":s.setAngle(a,u);break;case"velocity":s.setVelocity(a,u);break;case"angularVelocity":s.setAngularVelocity(a,u);break;case"parts":s.setParts(a,u);break;case"centre":s.setCentre(a,u);break;default:a[m]=u}},s.setStatic=function(a,f){for(var u=0;u<a.parts.length;u++){var m=a.parts[u];m.isStatic=f,f?(m._original={restitution:m.restitution,friction:m.friction,mass:m.mass,inertia:m.inertia,density:m.density,inverseMass:m.inverseMass,inverseInertia:m.inverseInertia},m.restitution=0,m.friction=1,m.mass=m.inertia=m.density=1/0,m.inverseMass=m.inverseInertia=0,m.positionPrev.x=m.position.x,m.positionPrev.y=m.position.y,m.anglePrev=m.angle,m.angularVelocity=0,m.speed=0,m.angularSpeed=0,m.motion=0):m._original&&(m.restitution=m._original.restitution,m.friction=m._original.friction,m.mass=m._original.mass,m.inertia=m._original.inertia,m.density=m._original.density,m.inverseMass=m._original.inverseMass,m.inverseInertia=m._original.inverseInertia,m._original=null)}},s.setMass=function(a,f){var u=a.inertia/(a.mass/6);a.inertia=u*(f/6),a.inverseInertia=1/a.inertia,a.mass=f,a.inverseMass=1/a.mass,a.density=a.mass/a.area},s.setDensity=function(a,f){s.setMass(a,f*a.area),a.density=f},s.setInertia=function(a,f){a.inertia=f,a.inverseInertia=1/a.inertia},s.setVertices=function(a,f){f[0].body===a?a.vertices=f:a.vertices=o.create(f,a),a.axes=r.fromVertices(a.vertices),a.area=o.area(a.vertices),s.setMass(a,a.density*a.area);var u=o.centre(a.vertices);o.translate(a.vertices,u,-1),s.setInertia(a,s._inertiaScale*o.inertia(a.vertices,a.mass)),o.translate(a.vertices,a.position),p.update(a.bounds,a.vertices,a.velocity)},s.setParts=function(a,f,u){var m;for(f=f.slice(0),a.parts.length=0,a.parts.push(a),a.parent=a,m=0;m<f.length;m++){var v=f[m];v!==a&&(v.parent=a,a.parts.push(v))}if(a.parts.length!==1){if(u=typeof u<"u"?u:!0,u){var _=[];for(m=0;m<f.length;m++)_=_.concat(f[m].vertices);o.clockwiseSort(_);var S=o.hull(_),w=o.centre(S);s.setVertices(a,S),o.translate(a.vertices,w)}var x=s._totalProperties(a);a.area=x.area,a.parent=a,a.position.x=x.centre.x,a.position.y=x.centre.y,a.positionPrev.x=x.centre.x,a.positionPrev.y=x.centre.y,s.setMass(a,x.mass),s.setInertia(a,x.inertia),s.setPosition(a,x.centre)}},s.setCentre=function(a,f,u){u?(a.positionPrev.x+=f.x,a.positionPrev.y+=f.y,a.position.x+=f.x,a.position.y+=f.y):(a.positionPrev.x=f.x-(a.position.x-a.positionPrev.x),a.positionPrev.y=f.y-(a.position.y-a.positionPrev.y),a.position.x=f.x,a.position.y=f.y)},s.setPosition=function(a,f){var u=h.sub(f,a.position);a.positionPrev.x+=u.x,a.positionPrev.y+=u.y;for(var m=0;m<a.parts.length;m++){var v=a.parts[m];v.position.x+=u.x,v.position.y+=u.y,o.translate(v.vertices,u),p.update(v.bounds,v.vertices,a.velocity)}},s.setAngle=function(a,f){var u=f-a.angle;a.anglePrev+=u;for(var m=0;m<a.parts.length;m++){var v=a.parts[m];v.angle+=u,o.rotate(v.vertices,u,a.position),r.rotate(v.axes,u),p.update(v.bounds,v.vertices,a.velocity),m>0&&h.rotateAbout(v.position,u,a.position,v.position)}},s.setVelocity=function(a,f){a.positionPrev.x=a.position.x-f.x,a.positionPrev.y=a.position.y-f.y,a.velocity.x=f.x,a.velocity.y=f.y,a.speed=h.magnitude(a.velocity)},s.setAngularVelocity=function(a,f){a.anglePrev=a.angle-f,a.angularVelocity=f,a.angularSpeed=Math.abs(a.angularVelocity)},s.translate=function(a,f){s.setPosition(a,h.add(a.position,f))},s.rotate=function(a,f,u){if(!u)s.setAngle(a,a.angle+f);else{var m=Math.cos(f),v=Math.sin(f),_=a.position.x-u.x,S=a.position.y-u.y;s.setPosition(a,{x:u.x+(_*m-S*v),y:u.y+(_*v+S*m)}),s.setAngle(a,a.angle+f)}},s.scale=function(a,f,u,m){var v=0,_=0;m=m||a.position;for(var S=0;S<a.parts.length;S++){var w=a.parts[S];o.scale(w.vertices,f,u,m),w.axes=r.fromVertices(w.vertices),w.area=o.area(w.vertices),s.setMass(w,a.density*w.area),o.translate(w.vertices,{x:-w.position.x,y:-w.position.y}),s.setInertia(w,s._inertiaScale*o.inertia(w.vertices,w.mass)),o.translate(w.vertices,{x:w.position.x,y:w.position.y}),S>0&&(v+=w.area,_+=w.inertia),w.position.x=m.x+(w.position.x-m.x)*f,w.position.y=m.y+(w.position.y-m.y)*u,p.update(w.bounds,w.vertices,a.velocity)}a.parts.length>1&&(a.area=v,a.isStatic||(s.setMass(a,a.density*v),s.setInertia(a,_))),a.circleRadius&&(f===u?a.circleRadius*=f:a.circleRadius=null)},s.update=function(a,f,u,m){var v=Math.pow(f*u*a.timeScale,2),_=1-a.frictionAir*u*a.timeScale,S=a.position.x-a.positionPrev.x,w=a.position.y-a.positionPrev.y;a.velocity.x=S*_*m+a.force.x/a.mass*v,a.velocity.y=w*_*m+a.force.y/a.mass*v,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.position.x+=a.velocity.x,a.position.y+=a.velocity.y,a.angularVelocity=(a.angle-a.anglePrev)*_*m+a.torque/a.inertia*v,a.anglePrev=a.angle,a.angle+=a.angularVelocity,a.speed=h.magnitude(a.velocity),a.angularSpeed=Math.abs(a.angularVelocity);for(var x=0;x<a.parts.length;x++){var y=a.parts[x];o.translate(y.vertices,a.velocity),x>0&&(y.position.x+=a.velocity.x,y.position.y+=a.velocity.y),a.angularVelocity!==0&&(o.rotate(y.vertices,a.angularVelocity,a.position),r.rotate(y.axes,a.angularVelocity),x>0&&h.rotateAbout(y.position,a.angularVelocity,a.position,y.position)),p.update(y.bounds,y.vertices,a.velocity)}},s.applyForce=function(a,f,u){a.force.x+=u.x,a.force.y+=u.y;var m={x:f.x-a.position.x,y:f.y-a.position.y};a.torque+=m.x*u.y-m.y*u.x},s._totalProperties=function(a){for(var f={mass:0,area:0,inertia:0,centre:{x:0,y:0}},u=a.parts.length===1?0:1;u<a.parts.length;u++){var m=a.parts[u],v=m.mass!==1/0?m.mass:1;f.mass+=v,f.area+=m.area,f.inertia+=m.inertia,f.centre=h.add(f.centre,h.mult(m.position,v))}return f.centre=h.div(f.centre,f.mass),f}})()},function(t,i,n){var s={};t.exports=s;var o=n(4);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(h,c){for(var d=c*c*c,p=0;p<h.length;p++){var r=h[p],l=r.speed*r.speed+r.angularSpeed*r.angularSpeed;if(r.force.x!==0||r.force.y!==0){s.set(r,!1);continue}var a=Math.min(r.motion,l),f=Math.max(r.motion,l);r.motion=s._minBias*a+(1-s._minBias)*f,r.sleepThreshold>0&&r.motion<s._motionSleepThreshold*d?(r.sleepCounter+=1,r.sleepCounter>=r.sleepThreshold&&s.set(r,!0)):r.sleepCounter>0&&(r.sleepCounter-=1)}},s.afterCollisions=function(h,c){for(var d=c*c*c,p=0;p<h.length;p++){var r=h[p];if(!!r.isActive){var l=r.collision,a=l.bodyA.parent,f=l.bodyB.parent;if(!(a.isSleeping&&f.isSleeping||a.isStatic||f.isStatic)&&(a.isSleeping||f.isSleeping)){var u=a.isSleeping&&!a.isStatic?a:f,m=u===a?f:a;!u.isStatic&&m.motion>s._motionWakeThreshold*d&&s.set(u,!1)}}}},s.set=function(h,c){var d=h.isSleeping;c?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,d||o.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,d&&o.trigger(h,"sleepEnd"))}})()},function(t,i,n){var s={};t.exports=s;var o=n(3),h=n(9);(function(){var c=[],d={overlap:0,axis:null},p={overlap:0,axis:null};s.create=function(r,l){return{pair:null,collided:!1,bodyA:r,bodyB:l,parentA:r.parent,parentB:l.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},s.collides=function(r,l,a){if(s._overlapAxes(d,r.vertices,l.vertices,r.axes),d.overlap<=0||(s._overlapAxes(p,l.vertices,r.vertices,l.axes),p.overlap<=0))return null;var f=a&&a.table[h.id(r,l)],u;f?u=f.collision:(u=s.create(r,l),u.collided=!0,u.bodyA=r.id<l.id?r:l,u.bodyB=r.id<l.id?l:r,u.parentA=u.bodyA.parent,u.parentB=u.bodyB.parent),r=u.bodyA,l=u.bodyB;var m;d.overlap<p.overlap?m=d:m=p;var v=u.normal,_=u.supports,S=m.axis,w=S.x,x=S.y;w*(l.position.x-r.position.x)+x*(l.position.y-r.position.y)<0?(v.x=w,v.y=x):(v.x=-w,v.y=-x),u.tangent.x=-v.y,u.tangent.y=v.x,u.depth=m.overlap,u.penetration.x=v.x*u.depth,u.penetration.y=v.y*u.depth;var y=s._findSupports(r,l,v,1),b=0;if(o.contains(r.vertices,y[0])&&(_[b++]=y[0]),o.contains(r.vertices,y[1])&&(_[b++]=y[1]),b<2){var M=s._findSupports(l,r,v,-1);o.contains(l.vertices,M[0])&&(_[b++]=M[0]),b<2&&o.contains(l.vertices,M[1])&&(_[b++]=M[1])}return b===0&&(_[b++]=y[0]),_.length=b,u},s._overlapAxes=function(r,l,a,f){var u=l.length,m=a.length,v=l[0].x,_=l[0].y,S=a[0].x,w=a[0].y,x=f.length,y=Number.MAX_VALUE,b=0,M,E,I,O,F,N;for(F=0;F<x;F++){var W=f[F],q=W.x,X=W.y,re=v*q+_*X,K=S*q+w*X,le=re,we=K;for(N=1;N<u;N+=1)O=l[N].x*q+l[N].y*X,O>le?le=O:O<re&&(re=O);for(N=1;N<m;N+=1)O=a[N].x*q+a[N].y*X,O>we?we=O:O<K&&(K=O);if(E=le-K,I=we-re,M=E<I?E:I,M<y&&(y=M,b=F,M<=0))break}r.axis=f[b],r.overlap=y},s._projectToAxis=function(r,l,a){for(var f=l[0].x*a.x+l[0].y*a.y,u=f,m=1;m<l.length;m+=1){var v=l[m].x*a.x+l[m].y*a.y;v>u?u=v:v<f&&(f=v)}r.min=f,r.max=u},s._findSupports=function(r,l,a,f){var u=l.vertices,m=u.length,v=r.position.x,_=r.position.y,S=a.x*f,w=a.y*f,x=Number.MAX_VALUE,y,b,M,E,I;for(I=0;I<m;I+=1)b=u[I],E=S*(v-b.x)+w*(_-b.y),E<x&&(x=E,y=b);return M=u[(m+y.index-1)%m],x=S*(v-M.x)+w*(_-M.y),b=u[(y.index+1)%m],S*(v-b.x)+w*(_-b.y)<x?(c[0]=y,c[1]=b,c):(c[0]=y,c[1]=M,c)}})()},function(t,i,n){var s={};t.exports=s;var o=n(17);(function(){s.create=function(h,c){var d=h.bodyA,p=h.bodyB,r={id:s.id(d,p),bodyA:d,bodyB:p,collision:h,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:d.isSensor||p.isSensor,timeCreated:c,timeUpdated:c,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return s.update(r,h,c),r},s.update=function(h,c,d){var p=h.contacts,r=c.supports,l=h.activeContacts,a=c.parentA,f=c.parentB,u=a.vertices.length;h.isActive=!0,h.timeUpdated=d,h.collision=c,h.separation=c.depth,h.inverseMass=a.inverseMass+f.inverseMass,h.friction=a.friction<f.friction?a.friction:f.friction,h.frictionStatic=a.frictionStatic>f.frictionStatic?a.frictionStatic:f.frictionStatic,h.restitution=a.restitution>f.restitution?a.restitution:f.restitution,h.slop=a.slop>f.slop?a.slop:f.slop,c.pair=h,l.length=0;for(var m=0;m<r.length;m++){var v=r[m],_=v.body===a?v.index:u+v.index,S=p[_];S?l.push(S):l.push(p[_]=o.create(v))}},s.setActive=function(h,c,d){c?(h.isActive=!0,h.timeUpdated=d):(h.isActive=!1,h.activeContacts.length=0)},s.id=function(h,c){return h.id<c.id?"A"+h.id+"B"+c.id:"A"+c.id+"B"+h.id}})()},function(t,i,n){var s={};t.exports=s;var o=n(3),h=n(2),c=n(7),d=n(1),p=n(11),r=n(0);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(l){var a=l;a.bodyA&&!a.pointA&&(a.pointA={x:0,y:0}),a.bodyB&&!a.pointB&&(a.pointB={x:0,y:0});var f=a.bodyA?h.add(a.bodyA.position,a.pointA):a.pointA,u=a.bodyB?h.add(a.bodyB.position,a.pointB):a.pointB,m=h.magnitude(h.sub(f,u));a.length=typeof a.length<"u"?a.length:m,a.id=a.id||r.nextId(),a.label=a.label||"Constraint",a.type="constraint",a.stiffness=a.stiffness||(a.length>0?1:.7),a.damping=a.damping||0,a.angularStiffness=a.angularStiffness||0,a.angleA=a.bodyA?a.bodyA.angle:a.angleA,a.angleB=a.bodyB?a.bodyB.angle:a.angleB,a.plugin={};var v={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return a.length===0&&a.stiffness>.1?(v.type="pin",v.anchors=!1):a.stiffness<.9&&(v.type="spring"),a.render=r.extend(v,a.render),a},s.preSolveAll=function(l){for(var a=0;a<l.length;a+=1){var f=l[a],u=f.constraintImpulse;f.isStatic||u.x===0&&u.y===0&&u.angle===0||(f.position.x+=u.x,f.position.y+=u.y,f.angle+=u.angle)}},s.solveAll=function(l,a){for(var f=0;f<l.length;f+=1){var u=l[f],m=!u.bodyA||u.bodyA&&u.bodyA.isStatic,v=!u.bodyB||u.bodyB&&u.bodyB.isStatic;(m||v)&&s.solve(l[f],a)}for(f=0;f<l.length;f+=1)u=l[f],m=!u.bodyA||u.bodyA&&u.bodyA.isStatic,v=!u.bodyB||u.bodyB&&u.bodyB.isStatic,!m&&!v&&s.solve(l[f],a)},s.solve=function(l,a){var f=l.bodyA,u=l.bodyB,m=l.pointA,v=l.pointB;if(!(!f&&!u)){f&&!f.isStatic&&(h.rotate(m,f.angle-l.angleA,m),l.angleA=f.angle),u&&!u.isStatic&&(h.rotate(v,u.angle-l.angleB,v),l.angleB=u.angle);var _=m,S=v;if(f&&(_=h.add(f.position,m)),u&&(S=h.add(u.position,v)),!(!_||!S)){var w=h.sub(_,S),x=h.magnitude(w);x<s._minLength&&(x=s._minLength);var y=(x-l.length)/x,b=l.stiffness<1?l.stiffness*a:l.stiffness,M=h.mult(w,y*b),E=(f?f.inverseMass:0)+(u?u.inverseMass:0),I=(f?f.inverseInertia:0)+(u?u.inverseInertia:0),O=E+I,F,N,W,q,X;if(l.damping){var re=h.create();W=h.div(w,x),X=h.sub(u&&h.sub(u.position,u.positionPrev)||re,f&&h.sub(f.position,f.positionPrev)||re),q=h.dot(W,X)}f&&!f.isStatic&&(N=f.inverseMass/E,f.constraintImpulse.x-=M.x*N,f.constraintImpulse.y-=M.y*N,f.position.x-=M.x*N,f.position.y-=M.y*N,l.damping&&(f.positionPrev.x-=l.damping*W.x*q*N,f.positionPrev.y-=l.damping*W.y*q*N),F=h.cross(m,M)/O*s._torqueDampen*f.inverseInertia*(1-l.angularStiffness),f.constraintImpulse.angle-=F,f.angle-=F),u&&!u.isStatic&&(N=u.inverseMass/E,u.constraintImpulse.x+=M.x*N,u.constraintImpulse.y+=M.y*N,u.position.x+=M.x*N,u.position.y+=M.y*N,l.damping&&(u.positionPrev.x+=l.damping*W.x*q*N,u.positionPrev.y+=l.damping*W.y*q*N),F=h.cross(v,M)/O*s._torqueDampen*u.inverseInertia*(1-l.angularStiffness),u.constraintImpulse.angle+=F,u.angle+=F)}}},s.postSolveAll=function(l){for(var a=0;a<l.length;a++){var f=l[a],u=f.constraintImpulse;if(!(f.isStatic||u.x===0&&u.y===0&&u.angle===0)){c.set(f,!1);for(var m=0;m<f.parts.length;m++){var v=f.parts[m];o.translate(v.vertices,u),m>0&&(v.position.x+=u.x,v.position.y+=u.y),u.angle!==0&&(o.rotate(v.vertices,u.angle,f.position),p.rotate(v.axes,u.angle),m>0&&h.rotateAbout(v.position,u.angle,f.position,v.position)),d.update(v.bounds,v.vertices,f.velocity)}u.angle*=s._warming,u.x*=s._warming,u.y*=s._warming}}},s.pointAWorld=function(l){return{x:(l.bodyA?l.bodyA.position.x:0)+l.pointA.x,y:(l.bodyA?l.bodyA.position.y:0)+l.pointA.y}},s.pointBWorld=function(l){return{x:(l.bodyB?l.bodyB.position.x:0)+l.pointB.x,y:(l.bodyB?l.bodyB.position.y:0)+l.pointB.y}}})()},function(t,i,n){var s={};t.exports=s;var o=n(2),h=n(0);(function(){s.fromVertices=function(c){for(var d={},p=0;p<c.length;p++){var r=(p+1)%c.length,l=o.normalise({x:c[r].y-c[p].y,y:c[p].x-c[r].x}),a=l.y===0?1/0:l.x/l.y;a=a.toFixed(3).toString(),d[a]=l}return h.values(d)},s.rotate=function(c,d){if(d!==0)for(var p=Math.cos(d),r=Math.sin(d),l=0;l<c.length;l++){var a=c[l],f;f=a.x*p-a.y*r,a.y=a.x*r+a.y*p,a.x=f}}})()},function(t,i,n){var s={};t.exports=s;var o=n(3),h=n(0),c=n(6),d=n(1),p=n(2);(function(){s.rectangle=function(r,l,a,f,u){u=u||{};var m={label:"Rectangle Body",position:{x:r,y:l},vertices:o.fromPath("L 0 0 L "+a+" 0 L "+a+" "+f+" L 0 "+f)};if(u.chamfer){var v=u.chamfer;m.vertices=o.chamfer(m.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete u.chamfer}return c.create(h.extend({},m,u))},s.trapezoid=function(r,l,a,f,u,m){m=m||{},u*=.5;var v=(1-u*2)*a,_=a*u,S=_+v,w=S+_,x;u<.5?x="L 0 0 L "+_+" "+-f+" L "+S+" "+-f+" L "+w+" 0":x="L 0 0 L "+S+" "+-f+" L "+w+" 0";var y={label:"Trapezoid Body",position:{x:r,y:l},vertices:o.fromPath(x)};if(m.chamfer){var b=m.chamfer;y.vertices=o.chamfer(y.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete m.chamfer}return c.create(h.extend({},y,m))},s.circle=function(r,l,a,f,u){f=f||{};var m={label:"Circle Body",circleRadius:a};u=u||25;var v=Math.ceil(Math.max(10,Math.min(u,a)));return v%2===1&&(v+=1),s.polygon(r,l,v,a,h.extend({},m,f))},s.polygon=function(r,l,a,f,u){if(u=u||{},a<3)return s.circle(r,l,f,u);for(var m=2*Math.PI/a,v="",_=m*.5,S=0;S<a;S+=1){var w=_+S*m,x=Math.cos(w)*f,y=Math.sin(w)*f;v+="L "+x.toFixed(3)+" "+y.toFixed(3)+" "}var b={label:"Polygon Body",position:{x:r,y:l},vertices:o.fromPath(v)};if(u.chamfer){var M=u.chamfer;b.vertices=o.chamfer(b.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete u.chamfer}return c.create(h.extend({},b,u))},s.fromVertices=function(r,l,a,f,u,m,v,_){var S=h.getDecomp(),w,x,y,b,M,E,I,O,F,N,W;for(w=Boolean(S&&S.quickDecomp),f=f||{},y=[],u=typeof u<"u"?u:!1,m=typeof m<"u"?m:.01,v=typeof v<"u"?v:10,_=typeof _<"u"?_:.01,h.isArray(a[0])||(a=[a]),N=0;N<a.length;N+=1)if(E=a[N],b=o.isConvex(E),M=!b,M&&!w&&h.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),b||!w)b?E=o.clockwiseSort(E):E=o.hull(E),y.push({position:{x:r,y:l},vertices:E});else{var q=E.map(function(De){return[De.x,De.y]});S.makeCCW(q),m!==!1&&S.removeCollinearPoints(q,m),_!==!1&&S.removeDuplicatePoints&&S.removeDuplicatePoints(q,_);var X=S.quickDecomp(q);for(I=0;I<X.length;I++){var re=X[I],K=re.map(function(De){return{x:De[0],y:De[1]}});v>0&&o.area(K)<v||y.push({position:o.centre(K),vertices:K})}}for(I=0;I<y.length;I++)y[I]=c.create(h.extend(y[I],f));if(u){var le=5;for(I=0;I<y.length;I++){var we=y[I];for(O=I+1;O<y.length;O++){var se=y[O];if(d.overlaps(we.bounds,se.bounds)){var ie=we.vertices,xe=se.vertices;for(F=0;F<we.vertices.length;F++)for(W=0;W<se.vertices.length;W++){var ue=p.magnitudeSquared(p.sub(ie[(F+1)%ie.length],xe[W])),_e=p.magnitudeSquared(p.sub(ie[F],xe[(W+1)%xe.length]));ue<le&&_e<le&&(ie[F].isInternal=!0,xe[W].isInternal=!0)}}}}}return y.length>1?(x=c.create(h.extend({parts:y.slice(0)},f)),c.setPosition(x,{x:r,y:l}),x):y[0]}})()},function(t,i,n){var s={};t.exports=s;var o=n(0);(function(){s.create=function(h){var c={};return h||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),c.element=h||document.body,c.absolute={x:0,y:0},c.position={x:0,y:0},c.mousedownPosition={x:0,y:0},c.mouseupPosition={x:0,y:0},c.offset={x:0,y:0},c.scale={x:1,y:1},c.wheelDelta=0,c.button=-1,c.pixelRatio=parseInt(c.element.getAttribute("data-pixel-ratio"),10)||1,c.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},c.mousemove=function(d){var p=s._getRelativeMousePosition(d,c.element,c.pixelRatio),r=d.changedTouches;r&&(c.button=0,d.preventDefault()),c.absolute.x=p.x,c.absolute.y=p.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.sourceEvents.mousemove=d},c.mousedown=function(d){var p=s._getRelativeMousePosition(d,c.element,c.pixelRatio),r=d.changedTouches;r?(c.button=0,d.preventDefault()):c.button=d.button,c.absolute.x=p.x,c.absolute.y=p.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.mousedownPosition.x=c.position.x,c.mousedownPosition.y=c.position.y,c.sourceEvents.mousedown=d},c.mouseup=function(d){var p=s._getRelativeMousePosition(d,c.element,c.pixelRatio),r=d.changedTouches;r&&d.preventDefault(),c.button=-1,c.absolute.x=p.x,c.absolute.y=p.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.mouseupPosition.x=c.position.x,c.mouseupPosition.y=c.position.y,c.sourceEvents.mouseup=d},c.mousewheel=function(d){c.wheelDelta=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),d.preventDefault()},s.setElement(c,c.element),c},s.setElement=function(h,c){h.element=c,c.addEventListener("mousemove",h.mousemove),c.addEventListener("mousedown",h.mousedown),c.addEventListener("mouseup",h.mouseup),c.addEventListener("mousewheel",h.mousewheel),c.addEventListener("DOMMouseScroll",h.mousewheel),c.addEventListener("touchmove",h.mousemove),c.addEventListener("touchstart",h.mousedown),c.addEventListener("touchend",h.mouseup)},s.clearSourceEvents=function(h){h.sourceEvents.mousemove=null,h.sourceEvents.mousedown=null,h.sourceEvents.mouseup=null,h.sourceEvents.mousewheel=null,h.wheelDelta=0},s.setOffset=function(h,c){h.offset.x=c.x,h.offset.y=c.y,h.position.x=h.absolute.x*h.scale.x+h.offset.x,h.position.y=h.absolute.y*h.scale.y+h.offset.y},s.setScale=function(h,c){h.scale.x=c.x,h.scale.y=c.y,h.position.x=h.absolute.x*h.scale.x+h.offset.x,h.position.y=h.absolute.y*h.scale.y+h.offset.y},s._getRelativeMousePosition=function(h,c,d){var p=c.getBoundingClientRect(),r=document.documentElement||document.body.parentNode||document.body,l=window.pageXOffset!==void 0?window.pageXOffset:r.scrollLeft,a=window.pageYOffset!==void 0?window.pageYOffset:r.scrollTop,f=h.changedTouches,u,m;return f?(u=f[0].pageX-p.left-l,m=f[0].pageY-p.top-a):(u=h.pageX-p.left-l,m=h.pageY-p.top-a),{x:u/(c.clientWidth/(c.width||c.clientWidth)*d),y:m/(c.clientHeight/(c.height||c.clientHeight)*d)}}})()},function(t,i,n){var s={};t.exports=s;var o=n(0),h=n(8);(function(){s.create=function(c){var d={bodies:[],pairs:null};return o.extend(d,c)},s.setBodies=function(c,d){c.bodies=d.slice(0)},s.clear=function(c){c.bodies=[]},s.collisions=function(c){var d=[],p=c.pairs,r=c.bodies,l=r.length,a=s.canCollide,f=h.collides,u,m;for(r.sort(s._compareBoundsX),u=0;u<l;u++){var v=r[u],_=v.bounds,S=v.bounds.max.x,w=v.bounds.max.y,x=v.bounds.min.y,y=v.isStatic||v.isSleeping,b=v.parts.length,M=b===1;for(m=u+1;m<l;m++){var E=r[m],I=E.bounds;if(I.min.x>S)break;if(!(w<I.min.y||x>I.max.y)&&!(y&&(E.isStatic||E.isSleeping))&&!!a(v.collisionFilter,E.collisionFilter)){var O=E.parts.length;if(M&&O===1){var F=f(v,E,p);F&&d.push(F)}else for(var N=b>1?1:0,W=O>1?1:0,q=N;q<b;q++)for(var X=v.parts[q],_=X.bounds,re=W;re<O;re++){var K=E.parts[re],I=K.bounds;if(!(_.min.x>I.max.x||_.max.x<I.min.x||_.max.y<I.min.y||_.min.y>I.max.y)){var F=f(X,K,p);F&&d.push(F)}}}}}return d},s.canCollide=function(c,d){return c.group===d.group&&c.group!==0?c.group>0:(c.mask&d.category)!==0&&(d.mask&c.category)!==0},s._compareBoundsX=function(c,d){return c.bounds.min.x-d.bounds.min.x}})()},function(t,i,n){var s={};t.exports=s;var o=n(0);(function(){s._registry={},s.register=function(h){if(s.isPlugin(h)||o.warn("Plugin.register:",s.toString(h),"does not implement all required fields."),h.name in s._registry){var c=s._registry[h.name],d=s.versionParse(h.version).number,p=s.versionParse(c.version).number;d>p?(o.warn("Plugin.register:",s.toString(c),"was upgraded to",s.toString(h)),s._registry[h.name]=h):d<p?o.warn("Plugin.register:",s.toString(c),"can not be downgraded to",s.toString(h)):h!==c&&o.warn("Plugin.register:",s.toString(h),"is already registered to different plugin object")}else s._registry[h.name]=h;return h},s.resolve=function(h){return s._registry[s.dependencyParse(h).name]},s.toString=function(h){return typeof h=="string"?h:(h.name||"anonymous")+"@"+(h.version||h.range||"0.0.0")},s.isPlugin=function(h){return h&&h.name&&h.version&&h.install},s.isUsed=function(h,c){return h.used.indexOf(c)>-1},s.isFor=function(h,c){var d=h.for&&s.dependencyParse(h.for);return!h.for||c.name===d.name&&s.versionSatisfies(c.version,d.range)},s.use=function(h,c){if(h.uses=(h.uses||[]).concat(c||[]),h.uses.length===0){o.warn("Plugin.use:",s.toString(h),"does not specify any dependencies to install.");return}for(var d=s.dependencies(h),p=o.topologicalSort(d),r=[],l=0;l<p.length;l+=1)if(p[l]!==h.name){var a=s.resolve(p[l]);if(!a){r.push("\u274C "+p[l]);continue}s.isUsed(h,a.name)||(s.isFor(a,h)||(o.warn("Plugin.use:",s.toString(a),"is for",a.for,"but installed on",s.toString(h)+"."),a._warned=!0),a.install?a.install(h):(o.warn("Plugin.use:",s.toString(a),"does not specify an install function."),a._warned=!0),a._warned?(r.push("\u{1F536} "+s.toString(a)),delete a._warned):r.push("\u2705 "+s.toString(a)),h.used.push(a.name))}r.length>0&&o.info(r.join("  "))},s.dependencies=function(h,c){var d=s.dependencyParse(h),p=d.name;if(c=c||{},!(p in c)){h=s.resolve(h)||h,c[p]=o.map(h.uses||[],function(l){s.isPlugin(l)&&s.register(l);var a=s.dependencyParse(l),f=s.resolve(l);return f&&!s.versionSatisfies(f.version,a.range)?(o.warn("Plugin.dependencies:",s.toString(f),"does not satisfy",s.toString(a),"used by",s.toString(d)+"."),f._warned=!0,h._warned=!0):f||(o.warn("Plugin.dependencies:",s.toString(l),"used by",s.toString(d),"could not be resolved."),h._warned=!0),a.name});for(var r=0;r<c[p].length;r+=1)s.dependencies(c[p][r],c);return c}},s.dependencyParse=function(h){if(o.isString(h)){var c=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return c.test(h)||o.warn("Plugin.dependencyParse:",h,"is not a valid dependency string."),{name:h.split("@")[0],range:h.split("@")[1]||"*"}}return{name:h.name,range:h.range||h.version}},s.versionParse=function(h){var c=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;c.test(h)||o.warn("Plugin.versionParse:",h,"is not a valid version or range.");var d=c.exec(h),p=Number(d[4]),r=Number(d[5]),l=Number(d[6]);return{isRange:Boolean(d[1]||d[2]),version:d[3],range:h,operator:d[1]||d[2]||"",major:p,minor:r,patch:l,parts:[p,r,l],prerelease:d[7],number:p*1e8+r*1e4+l}},s.versionSatisfies=function(h,c){c=c||"*";var d=s.versionParse(c),p=s.versionParse(h);if(d.isRange){if(d.operator==="*"||h==="*")return!0;if(d.operator===">")return p.number>d.number;if(d.operator===">=")return p.number>=d.number;if(d.operator==="~")return p.major===d.major&&p.minor===d.minor&&p.patch>=d.patch;if(d.operator==="^")return d.major>0?p.major===d.major&&p.number>=d.number:d.minor>0?p.minor===d.minor&&p.patch>=d.patch:p.patch===d.patch}return h===c||h==="*"}})()},function(t,i,n){var s={};t.exports=s;var o=n(0),h=n(5),c=n(1),d=n(4),p=n(2),r=n(13);(function(){var l,a;typeof window<"u"&&(l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(w){window.setTimeout(function(){w(o.now())},1e3/60)},a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),s._goodFps=30,s._goodDelta=1e3/60,s.create=function(w){var x={controller:s,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!w.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},y=o.extend(x,w);return y.canvas&&(y.canvas.width=y.options.width||y.canvas.width,y.canvas.height=y.options.height||y.canvas.height),y.mouse=w.mouse,y.engine=w.engine,y.canvas=y.canvas||m(y.options.width,y.options.height),y.context=y.canvas.getContext("2d"),y.textures={},y.bounds=y.bounds||{min:{x:0,y:0},max:{x:y.canvas.width,y:y.canvas.height}},y.options.showBroadphase=!1,y.options.pixelRatio!==1&&s.setPixelRatio(y,y.options.pixelRatio),o.isElement(y.element)?y.element.appendChild(y.canvas):y.canvas.parentNode||o.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),y},s.run=function(w){(function x(y){w.frameRequestId=l(x),f(w,y),s.world(w,y),(w.options.showStats||w.options.showDebug)&&s.stats(w,w.context,y),(w.options.showPerformance||w.options.showDebug)&&s.performance(w,w.context,y)})()},s.stop=function(w){a(w.frameRequestId)},s.setPixelRatio=function(w,x){var y=w.options,b=w.canvas;x==="auto"&&(x=v(b)),y.pixelRatio=x,b.setAttribute("data-pixel-ratio",x),b.width=y.width*x,b.height=y.height*x,b.style.width=y.width+"px",b.style.height=y.height+"px"},s.lookAt=function(w,x,y,b){b=typeof b<"u"?b:!0,x=o.isArray(x)?x:[x],y=y||{x:0,y:0};for(var M={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},E=0;E<x.length;E+=1){var I=x[E],O=I.bounds?I.bounds.min:I.min||I.position||I,F=I.bounds?I.bounds.max:I.max||I.position||I;O&&F&&(O.x<M.min.x&&(M.min.x=O.x),F.x>M.max.x&&(M.max.x=F.x),O.y<M.min.y&&(M.min.y=O.y),F.y>M.max.y&&(M.max.y=F.y))}var N=M.max.x-M.min.x+2*y.x,W=M.max.y-M.min.y+2*y.y,q=w.canvas.height,X=w.canvas.width,re=X/q,K=N/W,le=1,we=1;K>re?we=K/re:le=re/K,w.options.hasBounds=!0,w.bounds.min.x=M.min.x,w.bounds.max.x=M.min.x+N*le,w.bounds.min.y=M.min.y,w.bounds.max.y=M.min.y+W*we,b&&(w.bounds.min.x+=N*.5-N*le*.5,w.bounds.max.x+=N*.5-N*le*.5,w.bounds.min.y+=W*.5-W*we*.5,w.bounds.max.y+=W*.5-W*we*.5),w.bounds.min.x-=y.x,w.bounds.max.x-=y.x,w.bounds.min.y-=y.y,w.bounds.max.y-=y.y,w.mouse&&(r.setScale(w.mouse,{x:(w.bounds.max.x-w.bounds.min.x)/w.canvas.width,y:(w.bounds.max.y-w.bounds.min.y)/w.canvas.height}),r.setOffset(w.mouse,w.bounds.min))},s.startViewTransform=function(w){var x=w.bounds.max.x-w.bounds.min.x,y=w.bounds.max.y-w.bounds.min.y,b=x/w.options.width,M=y/w.options.height;w.context.setTransform(w.options.pixelRatio/b,0,0,w.options.pixelRatio/M,0,0),w.context.translate(-w.bounds.min.x,-w.bounds.min.y)},s.endViewTransform=function(w){w.context.setTransform(w.options.pixelRatio,0,0,w.options.pixelRatio,0,0)},s.world=function(w,x){var y=o.now(),b=w.engine,M=b.world,E=w.canvas,I=w.context,O=w.options,F=w.timing,N=h.allBodies(M),W=h.allConstraints(M),q=O.wireframes?O.wireframeBackground:O.background,X=[],re=[],K,le={timestamp:b.timing.timestamp};if(d.trigger(w,"beforeRender",le),w.currentBackground!==q&&S(w,q),I.globalCompositeOperation="source-in",I.fillStyle="transparent",I.fillRect(0,0,E.width,E.height),I.globalCompositeOperation="source-over",O.hasBounds){for(K=0;K<N.length;K++){var we=N[K];c.overlaps(we.bounds,w.bounds)&&X.push(we)}for(K=0;K<W.length;K++){var se=W[K],ie=se.bodyA,xe=se.bodyB,ue=se.pointA,_e=se.pointB;ie&&(ue=p.add(ie.position,se.pointA)),xe&&(_e=p.add(xe.position,se.pointB)),!(!ue||!_e)&&(c.contains(w.bounds,ue)||c.contains(w.bounds,_e))&&re.push(se)}s.startViewTransform(w),w.mouse&&(r.setScale(w.mouse,{x:(w.bounds.max.x-w.bounds.min.x)/w.options.width,y:(w.bounds.max.y-w.bounds.min.y)/w.options.height}),r.setOffset(w.mouse,w.bounds.min))}else re=W,X=N,w.options.pixelRatio!==1&&w.context.setTransform(w.options.pixelRatio,0,0,w.options.pixelRatio,0,0);!O.wireframes||b.enableSleeping&&O.showSleeping?s.bodies(w,X,I):(O.showConvexHulls&&s.bodyConvexHulls(w,X,I),s.bodyWireframes(w,X,I)),O.showBounds&&s.bodyBounds(w,X,I),(O.showAxes||O.showAngleIndicator)&&s.bodyAxes(w,X,I),O.showPositions&&s.bodyPositions(w,X,I),O.showVelocity&&s.bodyVelocity(w,X,I),O.showIds&&s.bodyIds(w,X,I),O.showSeparations&&s.separations(w,b.pairs.list,I),O.showCollisions&&s.collisions(w,b.pairs.list,I),O.showVertexNumbers&&s.vertexNumbers(w,X,I),O.showMousePosition&&s.mousePosition(w,w.mouse,I),s.constraints(re,I),O.hasBounds&&s.endViewTransform(w),d.trigger(w,"afterRender",le),F.lastElapsed=o.now()-y},s.stats=function(w,x,y){for(var b=w.engine,M=b.world,E=h.allBodies(M),I=0,O=55,F=44,N=0,W=0,q=0;q<E.length;q+=1)I+=E[q].parts.length;var X={Part:I,Body:E.length,Cons:h.allConstraints(M).length,Comp:h.allComposites(M).length,Pair:b.pairs.list.length};x.fillStyle="#0e0f19",x.fillRect(N,W,O*5.5,F),x.font="12px Arial",x.textBaseline="top",x.textAlign="right";for(var re in X){var K=X[re];x.fillStyle="#aaa",x.fillText(re,N+O,W+8),x.fillStyle="#eee",x.fillText(K,N+O,W+26),N+=O}},s.performance=function(w,x){var y=w.engine,b=w.timing,M=b.deltaHistory,E=b.elapsedHistory,I=b.timestampElapsedHistory,O=b.engineDeltaHistory,F=b.engineElapsedHistory,N=y.timing.lastDelta,W=u(M),q=u(E),X=u(O),re=u(F),K=u(I),le=K/W||0,we=1e3/W||0,se=4,ie=12,xe=60,ue=34,_e=10,De=69;x.fillStyle="#0e0f19",x.fillRect(0,50,ie*4+xe*5+22,ue),s.status(x,_e,De,xe,se,M.length,Math.round(we)+" fps",we/s._goodFps,function(Le){return M[Le]/W-1}),s.status(x,_e+ie+xe,De,xe,se,O.length,N.toFixed(2)+" dt",s._goodDelta/N,function(Le){return O[Le]/X-1}),s.status(x,_e+(ie+xe)*2,De,xe,se,F.length,re.toFixed(2)+" ut",1-re/s._goodFps,function(Le){return F[Le]/re-1}),s.status(x,_e+(ie+xe)*3,De,xe,se,E.length,q.toFixed(2)+" rt",1-q/s._goodFps,function(Le){return E[Le]/q-1}),s.status(x,_e+(ie+xe)*4,De,xe,se,I.length,le.toFixed(2)+" x",le*le*le,function(Le){return(I[Le]/M[Le]/le||0)-1})},s.status=function(w,x,y,b,M,E,I,O,F){w.strokeStyle="#888",w.fillStyle="#444",w.lineWidth=1,w.fillRect(x,y+7,b,1),w.beginPath(),w.moveTo(x,y+7-M*o.clamp(.4*F(0),-2,2));for(var N=0;N<b;N+=1)w.lineTo(x+N,y+7-(N<E?M*o.clamp(.4*F(N),-2,2):0));w.stroke(),w.fillStyle="hsl("+o.clamp(25+95*O,0,120)+",100%,60%)",w.fillRect(x,y-7,4,4),w.font="12px Arial",w.textBaseline="middle",w.textAlign="right",w.fillStyle="#eee",w.fillText(I,x+b,y-5)},s.constraints=function(w,x){for(var y=x,b=0;b<w.length;b++){var M=w[b];if(!(!M.render.visible||!M.pointA||!M.pointB)){var E=M.bodyA,I=M.bodyB,O,F;if(E?O=p.add(E.position,M.pointA):O=M.pointA,M.render.type==="pin")y.beginPath(),y.arc(O.x,O.y,3,0,2*Math.PI),y.closePath();else{if(I?F=p.add(I.position,M.pointB):F=M.pointB,y.beginPath(),y.moveTo(O.x,O.y),M.render.type==="spring")for(var N=p.sub(F,O),W=p.perp(p.normalise(N)),q=Math.ceil(o.clamp(M.length/5,12,20)),X,re=1;re<q;re+=1)X=re%2===0?1:-1,y.lineTo(O.x+N.x*(re/q)+W.x*X*4,O.y+N.y*(re/q)+W.y*X*4);y.lineTo(F.x,F.y)}M.render.lineWidth&&(y.lineWidth=M.render.lineWidth,y.strokeStyle=M.render.strokeStyle,y.stroke()),M.render.anchors&&(y.fillStyle=M.render.strokeStyle,y.beginPath(),y.arc(O.x,O.y,3,0,2*Math.PI),y.arc(F.x,F.y,3,0,2*Math.PI),y.closePath(),y.fill())}}},s.bodies=function(w,x,y){var b=y;w.engine;var M=w.options,E=M.showInternalEdges||!M.wireframes,I,O,F,N;for(F=0;F<x.length;F++)if(I=x[F],!!I.render.visible){for(N=I.parts.length>1?1:0;N<I.parts.length;N++)if(O=I.parts[N],!!O.render.visible){if(M.showSleeping&&I.isSleeping?b.globalAlpha=.5*O.render.opacity:O.render.opacity!==1&&(b.globalAlpha=O.render.opacity),O.render.sprite&&O.render.sprite.texture&&!M.wireframes){var W=O.render.sprite,q=_(w,W.texture);b.translate(O.position.x,O.position.y),b.rotate(O.angle),b.drawImage(q,q.width*-W.xOffset*W.xScale,q.height*-W.yOffset*W.yScale,q.width*W.xScale,q.height*W.yScale),b.rotate(-O.angle),b.translate(-O.position.x,-O.position.y)}else{if(O.circleRadius)b.beginPath(),b.arc(O.position.x,O.position.y,O.circleRadius,0,2*Math.PI);else{b.beginPath(),b.moveTo(O.vertices[0].x,O.vertices[0].y);for(var X=1;X<O.vertices.length;X++)!O.vertices[X-1].isInternal||E?b.lineTo(O.vertices[X].x,O.vertices[X].y):b.moveTo(O.vertices[X].x,O.vertices[X].y),O.vertices[X].isInternal&&!E&&b.moveTo(O.vertices[(X+1)%O.vertices.length].x,O.vertices[(X+1)%O.vertices.length].y);b.lineTo(O.vertices[0].x,O.vertices[0].y),b.closePath()}M.wireframes?(b.lineWidth=1,b.strokeStyle="#bbb",b.stroke()):(b.fillStyle=O.render.fillStyle,O.render.lineWidth&&(b.lineWidth=O.render.lineWidth,b.strokeStyle=O.render.strokeStyle,b.stroke()),b.fill())}b.globalAlpha=1}}},s.bodyWireframes=function(w,x,y){var b=y,M=w.options.showInternalEdges,E,I,O,F,N;for(b.beginPath(),O=0;O<x.length;O++)if(E=x[O],!!E.render.visible)for(N=E.parts.length>1?1:0;N<E.parts.length;N++){for(I=E.parts[N],b.moveTo(I.vertices[0].x,I.vertices[0].y),F=1;F<I.vertices.length;F++)!I.vertices[F-1].isInternal||M?b.lineTo(I.vertices[F].x,I.vertices[F].y):b.moveTo(I.vertices[F].x,I.vertices[F].y),I.vertices[F].isInternal&&!M&&b.moveTo(I.vertices[(F+1)%I.vertices.length].x,I.vertices[(F+1)%I.vertices.length].y);b.lineTo(I.vertices[0].x,I.vertices[0].y)}b.lineWidth=1,b.strokeStyle="#bbb",b.stroke()},s.bodyConvexHulls=function(w,x,y){var b=y,M,E,I;for(b.beginPath(),E=0;E<x.length;E++)if(M=x[E],!(!M.render.visible||M.parts.length===1)){for(b.moveTo(M.vertices[0].x,M.vertices[0].y),I=1;I<M.vertices.length;I++)b.lineTo(M.vertices[I].x,M.vertices[I].y);b.lineTo(M.vertices[0].x,M.vertices[0].y)}b.lineWidth=1,b.strokeStyle="rgba(255,255,255,0.2)",b.stroke()},s.vertexNumbers=function(w,x,y){var b=y,M,E,I;for(M=0;M<x.length;M++){var O=x[M].parts;for(I=O.length>1?1:0;I<O.length;I++){var F=O[I];for(E=0;E<F.vertices.length;E++)b.fillStyle="rgba(255,255,255,0.2)",b.fillText(M+"_"+E,F.position.x+(F.vertices[E].x-F.position.x)*.8,F.position.y+(F.vertices[E].y-F.position.y)*.8)}}},s.mousePosition=function(w,x,y){var b=y;b.fillStyle="rgba(255,255,255,0.8)",b.fillText(x.position.x+"  "+x.position.y,x.position.x+5,x.position.y-5)},s.bodyBounds=function(w,x,y){var b=y;w.engine;var M=w.options;b.beginPath();for(var E=0;E<x.length;E++){var I=x[E];if(I.render.visible)for(var O=x[E].parts,F=O.length>1?1:0;F<O.length;F++){var N=O[F];b.rect(N.bounds.min.x,N.bounds.min.y,N.bounds.max.x-N.bounds.min.x,N.bounds.max.y-N.bounds.min.y)}}M.wireframes?b.strokeStyle="rgba(255,255,255,0.08)":b.strokeStyle="rgba(0,0,0,0.1)",b.lineWidth=1,b.stroke()},s.bodyAxes=function(w,x,y){var b=y;w.engine;var M=w.options,E,I,O,F;for(b.beginPath(),I=0;I<x.length;I++){var N=x[I],W=N.parts;if(!!N.render.visible)if(M.showAxes)for(O=W.length>1?1:0;O<W.length;O++)for(E=W[O],F=0;F<E.axes.length;F++){var q=E.axes[F];b.moveTo(E.position.x,E.position.y),b.lineTo(E.position.x+q.x*20,E.position.y+q.y*20)}else for(O=W.length>1?1:0;O<W.length;O++)for(E=W[O],F=0;F<E.axes.length;F++)b.moveTo(E.position.x,E.position.y),b.lineTo((E.vertices[0].x+E.vertices[E.vertices.length-1].x)/2,(E.vertices[0].y+E.vertices[E.vertices.length-1].y)/2)}M.wireframes?(b.strokeStyle="indianred",b.lineWidth=1):(b.strokeStyle="rgba(255, 255, 255, 0.4)",b.globalCompositeOperation="overlay",b.lineWidth=2),b.stroke(),b.globalCompositeOperation="source-over"},s.bodyPositions=function(w,x,y){var b=y;w.engine;var M=w.options,E,I,O,F;for(b.beginPath(),O=0;O<x.length;O++)if(E=x[O],!!E.render.visible)for(F=0;F<E.parts.length;F++)I=E.parts[F],b.arc(I.position.x,I.position.y,3,0,2*Math.PI,!1),b.closePath();for(M.wireframes?b.fillStyle="indianred":b.fillStyle="rgba(0,0,0,0.5)",b.fill(),b.beginPath(),O=0;O<x.length;O++)E=x[O],E.render.visible&&(b.arc(E.positionPrev.x,E.positionPrev.y,2,0,2*Math.PI,!1),b.closePath());b.fillStyle="rgba(255,165,0,0.8)",b.fill()},s.bodyVelocity=function(w,x,y){var b=y;b.beginPath();for(var M=0;M<x.length;M++){var E=x[M];!E.render.visible||(b.moveTo(E.position.x,E.position.y),b.lineTo(E.position.x+(E.position.x-E.positionPrev.x)*2,E.position.y+(E.position.y-E.positionPrev.y)*2))}b.lineWidth=3,b.strokeStyle="cornflowerblue",b.stroke()},s.bodyIds=function(w,x,y){var b=y,M,E;for(M=0;M<x.length;M++)if(!!x[M].render.visible){var I=x[M].parts;for(E=I.length>1?1:0;E<I.length;E++){var O=I[E];b.font="12px Arial",b.fillStyle="rgba(255,255,255,0.5)",b.fillText(O.id,O.position.x+10,O.position.y-10)}}},s.collisions=function(w,x,y){var b=y,M=w.options,E,I,O,F;for(b.beginPath(),O=0;O<x.length;O++)if(E=x[O],!!E.isActive)for(I=E.collision,F=0;F<E.activeContacts.length;F++){var N=E.activeContacts[F],W=N.vertex;b.rect(W.x-1.5,W.y-1.5,3.5,3.5)}for(M.wireframes?b.fillStyle="rgba(255,255,255,0.7)":b.fillStyle="orange",b.fill(),b.beginPath(),O=0;O<x.length;O++)if(E=x[O],!!E.isActive&&(I=E.collision,E.activeContacts.length>0)){var q=E.activeContacts[0].vertex.x,X=E.activeContacts[0].vertex.y;E.activeContacts.length===2&&(q=(E.activeContacts[0].vertex.x+E.activeContacts[1].vertex.x)/2,X=(E.activeContacts[0].vertex.y+E.activeContacts[1].vertex.y)/2),I.bodyB===I.supports[0].body||I.bodyA.isStatic===!0?b.moveTo(q-I.normal.x*8,X-I.normal.y*8):b.moveTo(q+I.normal.x*8,X+I.normal.y*8),b.lineTo(q,X)}M.wireframes?b.strokeStyle="rgba(255,165,0,0.7)":b.strokeStyle="orange",b.lineWidth=1,b.stroke()},s.separations=function(w,x,y){var b=y,M=w.options,E,I,O,F,N;for(b.beginPath(),N=0;N<x.length;N++)if(E=x[N],!!E.isActive){I=E.collision,O=I.bodyA,F=I.bodyB;var W=1;!F.isStatic&&!O.isStatic&&(W=.5),F.isStatic&&(W=0),b.moveTo(F.position.x,F.position.y),b.lineTo(F.position.x-I.penetration.x*W,F.position.y-I.penetration.y*W),W=1,!F.isStatic&&!O.isStatic&&(W=.5),O.isStatic&&(W=0),b.moveTo(O.position.x,O.position.y),b.lineTo(O.position.x+I.penetration.x*W,O.position.y+I.penetration.y*W)}M.wireframes?b.strokeStyle="rgba(255,165,0,0.5)":b.strokeStyle="orange",b.stroke()},s.inspector=function(w,x){w.engine;var y=w.selected,b=w.render,M=b.options,E;if(M.hasBounds){var I=b.bounds.max.x-b.bounds.min.x,O=b.bounds.max.y-b.bounds.min.y,F=I/b.options.width,N=O/b.options.height;x.scale(1/F,1/N),x.translate(-b.bounds.min.x,-b.bounds.min.y)}for(var W=0;W<y.length;W++){var q=y[W].data;switch(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.9)",x.setLineDash([1,2]),q.type){case"body":E=q.bounds,x.beginPath(),x.rect(Math.floor(E.min.x-3),Math.floor(E.min.y-3),Math.floor(E.max.x-E.min.x+6),Math.floor(E.max.y-E.min.y+6)),x.closePath(),x.stroke();break;case"constraint":var X=q.pointA;q.bodyA&&(X=q.pointB),x.beginPath(),x.arc(X.x,X.y,10,0,2*Math.PI),x.closePath(),x.stroke();break}x.setLineDash([]),x.translate(-.5,-.5)}w.selectStart!==null&&(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.6)",x.fillStyle="rgba(255,165,0,0.1)",E=w.selectBounds,x.beginPath(),x.rect(Math.floor(E.min.x),Math.floor(E.min.y),Math.floor(E.max.x-E.min.x),Math.floor(E.max.y-E.min.y)),x.closePath(),x.stroke(),x.fill(),x.translate(-.5,-.5)),M.hasBounds&&x.setTransform(1,0,0,1,0,0)};var f=function(w,x){var y=w.engine,b=w.timing,M=b.historySize,E=y.timing.timestamp;b.delta=x-b.lastTime||s._goodDelta,b.lastTime=x,b.timestampElapsed=E-b.lastTimestamp||0,b.lastTimestamp=E,b.deltaHistory.unshift(b.delta),b.deltaHistory.length=Math.min(b.deltaHistory.length,M),b.engineDeltaHistory.unshift(y.timing.lastDelta),b.engineDeltaHistory.length=Math.min(b.engineDeltaHistory.length,M),b.timestampElapsedHistory.unshift(b.timestampElapsed),b.timestampElapsedHistory.length=Math.min(b.timestampElapsedHistory.length,M),b.engineElapsedHistory.unshift(y.timing.lastElapsed),b.engineElapsedHistory.length=Math.min(b.engineElapsedHistory.length,M),b.elapsedHistory.unshift(b.lastElapsed),b.elapsedHistory.length=Math.min(b.elapsedHistory.length,M)},u=function(w){for(var x=0,y=0;y<w.length;y+=1)x+=w[y];return x/w.length||0},m=function(w,x){var y=document.createElement("canvas");return y.width=w,y.height=x,y.oncontextmenu=function(){return!1},y.onselectstart=function(){return!1},y},v=function(w){var x=w.getContext("2d"),y=window.devicePixelRatio||1,b=x.webkitBackingStorePixelRatio||x.mozBackingStorePixelRatio||x.msBackingStorePixelRatio||x.oBackingStorePixelRatio||x.backingStorePixelRatio||1;return y/b},_=function(w,x){var y=w.textures[x];return y||(y=w.textures[x]=new Image,y.src=x,y)},S=function(w,x){var y=x;/(jpg|gif|png)$/.test(x)&&(y="url("+x+")"),w.canvas.style.background=y,w.canvas.style.backgroundSize="contain",w.currentBackground=x}})()},function(t,i){var n={};t.exports=n,function(){n.create=function(s){return{vertex:s,normalImpulse:0,tangentImpulse:0}}}()},function(t,i,n){var s={};t.exports=s;var o=n(7),h=n(19),c=n(14),d=n(20),p=n(4),r=n(5),l=n(10),a=n(0),f=n(6);(function(){s.create=function(u){u=u||{};var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},v=a.extend(m,u);return v.world=u.world||r.create({label:"World"}),v.pairs=u.pairs||d.create(),v.detector=u.detector||c.create(),v.grid={buckets:[]},v.world.gravity=v.gravity,v.broadphase=v.grid,v.metrics={},v},s.update=function(u,m,v){var _=a.now();m=m||1e3/60,v=v||1;var S=u.world,w=u.detector,x=u.pairs,y=u.timing,b=y.timestamp,M;y.timestamp+=m*y.timeScale,y.lastDelta=m*y.timeScale;var E={timestamp:y.timestamp};p.trigger(u,"beforeUpdate",E);var I=r.allBodies(S),O=r.allConstraints(S);for(S.isModified&&c.setBodies(w,I),S.isModified&&r.setModified(S,!1,!1,!0),u.enableSleeping&&o.update(I,y.timeScale),s._bodiesApplyGravity(I,u.gravity),s._bodiesUpdate(I,m,y.timeScale,v,S.bounds),l.preSolveAll(I),M=0;M<u.constraintIterations;M++)l.solveAll(O,y.timeScale);l.postSolveAll(I),w.pairs=u.pairs;var F=c.collisions(w);for(d.update(x,F,b),u.enableSleeping&&o.afterCollisions(x.list,y.timeScale),x.collisionStart.length>0&&p.trigger(u,"collisionStart",{pairs:x.collisionStart}),h.preSolvePosition(x.list),M=0;M<u.positionIterations;M++)h.solvePosition(x.list,y.timeScale);for(h.postSolvePosition(I),l.preSolveAll(I),M=0;M<u.constraintIterations;M++)l.solveAll(O,y.timeScale);for(l.postSolveAll(I),h.preSolveVelocity(x.list),M=0;M<u.velocityIterations;M++)h.solveVelocity(x.list,y.timeScale);return x.collisionActive.length>0&&p.trigger(u,"collisionActive",{pairs:x.collisionActive}),x.collisionEnd.length>0&&p.trigger(u,"collisionEnd",{pairs:x.collisionEnd}),s._bodiesClearForces(I),p.trigger(u,"afterUpdate",E),u.timing.lastElapsed=a.now()-_,u},s.merge=function(u,m){if(a.extend(u,m),m.world){u.world=m.world,s.clear(u);for(var v=r.allBodies(u.world),_=0;_<v.length;_++){var S=v[_];o.set(S,!1),S.id=a.nextId()}}},s.clear=function(u){d.clear(u.pairs),c.clear(u.detector)},s._bodiesClearForces=function(u){for(var m=0;m<u.length;m++){var v=u[m];v.force.x=0,v.force.y=0,v.torque=0}},s._bodiesApplyGravity=function(u,m){var v=typeof m.scale<"u"?m.scale:.001;if(!(m.x===0&&m.y===0||v===0))for(var _=0;_<u.length;_++){var S=u[_];S.isStatic||S.isSleeping||(S.force.y+=S.mass*m.y*v,S.force.x+=S.mass*m.x*v)}},s._bodiesUpdate=function(u,m,v,_,S){for(var w=0;w<u.length;w++){var x=u[w];x.isStatic||x.isSleeping||f.update(x,m,v,_)}}})()},function(t,i,n){var s={};t.exports=s;var o=n(3),h=n(1);(function(){s._restingThresh=4,s._restingThreshTangent=6,s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s.preSolvePosition=function(c){var d,p,r,l=c.length;for(d=0;d<l;d++)p=c[d],p.isActive&&(r=p.activeContacts.length,p.collision.parentA.totalContacts+=r,p.collision.parentB.totalContacts+=r)},s.solvePosition=function(c,d){var p,r,l,a,f,u,m,v,_=s._positionDampen,S=c.length;for(p=0;p<S;p++)r=c[p],!(!r.isActive||r.isSensor)&&(l=r.collision,a=l.parentA,f=l.parentB,u=l.normal,r.separation=u.x*(f.positionImpulse.x+l.penetration.x-a.positionImpulse.x)+u.y*(f.positionImpulse.y+l.penetration.y-a.positionImpulse.y));for(p=0;p<S;p++)r=c[p],!(!r.isActive||r.isSensor)&&(l=r.collision,a=l.parentA,f=l.parentB,u=l.normal,v=(r.separation-r.slop)*d,(a.isStatic||f.isStatic)&&(v*=2),a.isStatic||a.isSleeping||(m=_/a.totalContacts,a.positionImpulse.x+=u.x*v*m,a.positionImpulse.y+=u.y*v*m),f.isStatic||f.isSleeping||(m=_/f.totalContacts,f.positionImpulse.x-=u.x*v*m,f.positionImpulse.y-=u.y*v*m))},s.postSolvePosition=function(c){for(var d=s._positionWarming,p=c.length,r=o.translate,l=h.update,a=0;a<p;a++){var f=c[a],u=f.positionImpulse,m=u.x,v=u.y,_=f.velocity;if(f.totalContacts=0,m!==0||v!==0){for(var S=0;S<f.parts.length;S++){var w=f.parts[S];r(w.vertices,u),l(w.bounds,w.vertices,_),w.position.x+=m,w.position.y+=v}f.positionPrev.x+=m,f.positionPrev.y+=v,m*_.x+v*_.y<0?(u.x=0,u.y=0):(u.x*=d,u.y*=d)}}},s.preSolveVelocity=function(c){var d=c.length,p,r;for(p=0;p<d;p++){var l=c[p];if(!(!l.isActive||l.isSensor)){var a=l.activeContacts,f=a.length,u=l.collision,m=u.parentA,v=u.parentB,_=u.normal,S=u.tangent;for(r=0;r<f;r++){var w=a[r],x=w.vertex,y=w.normalImpulse,b=w.tangentImpulse;if(y!==0||b!==0){var M=_.x*y+S.x*b,E=_.y*y+S.y*b;m.isStatic||m.isSleeping||(m.positionPrev.x+=M*m.inverseMass,m.positionPrev.y+=E*m.inverseMass,m.anglePrev+=m.inverseInertia*((x.x-m.position.x)*E-(x.y-m.position.y)*M)),v.isStatic||v.isSleeping||(v.positionPrev.x-=M*v.inverseMass,v.positionPrev.y-=E*v.inverseMass,v.anglePrev-=v.inverseInertia*((x.x-v.position.x)*E-(x.y-v.position.y)*M))}}}}},s.solveVelocity=function(c,d){var p=d*d,r=s._restingThresh*p,l=s._frictionNormalMultiplier,a=s._restingThreshTangent*p,f=Number.MAX_VALUE,u=c.length,m,v,_,S;for(_=0;_<u;_++){var w=c[_];if(!(!w.isActive||w.isSensor)){var x=w.collision,y=x.parentA,b=x.parentB,M=y.velocity,E=b.velocity,I=x.normal.x,O=x.normal.y,F=x.tangent.x,N=x.tangent.y,W=w.activeContacts,q=W.length,X=1/q,re=y.inverseMass+b.inverseMass,K=w.friction*w.frictionStatic*l*p;for(M.x=y.position.x-y.positionPrev.x,M.y=y.position.y-y.positionPrev.y,E.x=b.position.x-b.positionPrev.x,E.y=b.position.y-b.positionPrev.y,y.angularVelocity=y.angle-y.anglePrev,b.angularVelocity=b.angle-b.anglePrev,S=0;S<q;S++){var le=W[S],we=le.vertex,se=we.x-y.position.x,ie=we.y-y.position.y,xe=we.x-b.position.x,ue=we.y-b.position.y,_e=M.x-ie*y.angularVelocity,De=M.y+se*y.angularVelocity,Le=E.x-ue*b.angularVelocity,_t=E.y+xe*b.angularVelocity,rt=_e-Le,Rt=De-_t,Fe=I*rt+O*Rt,Ee=F*rt+N*Rt,Ge=w.separation+Fe,Se=Math.min(Ge,1);Se=Ge<0?0:Se;var Tt=Se*K;Ee>Tt||-Ee>Tt?(v=Ee>0?Ee:-Ee,m=w.friction*(Ee>0?1:-1)*p,m<-v?m=-v:m>v&&(m=v)):(m=Ee,v=f);var me=se*O-ie*I,Pe=xe*O-ue*I,Ie=X/(re+y.inverseInertia*me*me+b.inverseInertia*Pe*Pe),st=(1+w.restitution)*Fe*Ie;if(m*=Ie,Fe*Fe>r&&Fe<0)le.normalImpulse=0;else{var ft=le.normalImpulse;le.normalImpulse+=st,le.normalImpulse=Math.min(le.normalImpulse,0),st=le.normalImpulse-ft}if(Ee*Ee>a)le.tangentImpulse=0;else{var je=le.tangentImpulse;le.tangentImpulse+=m,le.tangentImpulse<-v&&(le.tangentImpulse=-v),le.tangentImpulse>v&&(le.tangentImpulse=v),m=le.tangentImpulse-je}var ht=I*st+F*m,Et=O*st+N*m;y.isStatic||y.isSleeping||(y.positionPrev.x+=ht*y.inverseMass,y.positionPrev.y+=Et*y.inverseMass,y.anglePrev+=(se*Et-ie*ht)*y.inverseInertia),b.isStatic||b.isSleeping||(b.positionPrev.x-=ht*b.inverseMass,b.positionPrev.y-=Et*b.inverseMass,b.anglePrev-=(xe*Et-ue*ht)*b.inverseInertia)}}}}})()},function(t,i,n){var s={};t.exports=s;var o=n(9),h=n(0);(function(){s.create=function(c){return h.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},c)},s.update=function(c,d,p){var r=c.list,l=r.length,a=c.table,f=d.length,u=c.collisionStart,m=c.collisionEnd,v=c.collisionActive,_,S,w,x;for(u.length=0,m.length=0,v.length=0,x=0;x<l;x++)r[x].confirmedActive=!1;for(x=0;x<f;x++)_=d[x],w=_.pair,w?(w.isActive?v.push(w):u.push(w),o.update(w,_,p),w.confirmedActive=!0):(w=o.create(_,p),a[w.id]=w,u.push(w),r.push(w));var y=[];for(l=r.length,x=0;x<l;x++)w=r[x],w.confirmedActive||(o.setActive(w,!1,p),m.push(w),!w.collision.bodyA.isSleeping&&!w.collision.bodyB.isSleeping&&y.push(x));for(x=0;x<y.length;x++)S=y[x]-x,w=r[S],r.splice(S,1),delete a[w.id]},s.clear=function(c){return c.table={},c.list.length=0,c.collisionStart.length=0,c.collisionActive.length=0,c.collisionEnd.length=0,c}})()},function(t,i,n){var s=t.exports=n(22);s.Axes=n(11),s.Bodies=n(12),s.Body=n(6),s.Bounds=n(1),s.Collision=n(8),s.Common=n(0),s.Composite=n(5),s.Composites=n(23),s.Constraint=n(10),s.Contact=n(17),s.Detector=n(14),s.Engine=n(18),s.Events=n(4),s.Grid=n(24),s.Mouse=n(13),s.MouseConstraint=n(25),s.Pair=n(9),s.Pairs=n(20),s.Plugin=n(15),s.Query=n(26),s.Render=n(16),s.Resolver=n(19),s.Runner=n(27),s.SAT=n(28),s.Sleeping=n(7),s.Svg=n(29),s.Vector=n(2),s.Vertices=n(3),s.World=n(30),s.Engine.run=s.Runner.run,s.Common.deprecated(s.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(t,i,n){var s={};t.exports=s;var o=n(15),h=n(0);(function(){s.name="matter-js",s.version="0.18.0",s.uses=[],s.used=[],s.use=function(){o.use(s,Array.prototype.slice.call(arguments))},s.before=function(c,d){return c=c.replace(/^Matter./,""),h.chainPathBefore(s,c,d)},s.after=function(c,d){return c=c.replace(/^Matter./,""),h.chainPathAfter(s,c,d)}})()},function(t,i,n){var s={};t.exports=s;var o=n(5),h=n(10),c=n(0),d=n(6),p=n(12),r=c.deprecated;(function(){s.stack=function(l,a,f,u,m,v,_){for(var S=o.create({label:"Stack"}),w=l,x=a,y,b=0,M=0;M<u;M++){for(var E=0,I=0;I<f;I++){var O=_(w,x,I,M,y,b);if(O){var F=O.bounds.max.y-O.bounds.min.y,N=O.bounds.max.x-O.bounds.min.x;F>E&&(E=F),d.translate(O,{x:N*.5,y:F*.5}),w=O.bounds.max.x+m,o.addBody(S,O),y=O,b+=1}else w+=m}x+=E+v,w=l}return S},s.chain=function(l,a,f,u,m,v){for(var _=l.bodies,S=1;S<_.length;S++){var w=_[S-1],x=_[S],y=w.bounds.max.y-w.bounds.min.y,b=w.bounds.max.x-w.bounds.min.x,M=x.bounds.max.y-x.bounds.min.y,E=x.bounds.max.x-x.bounds.min.x,I={bodyA:w,pointA:{x:b*a,y:y*f},bodyB:x,pointB:{x:E*u,y:M*m}},O=c.extend(I,v);o.addConstraint(l,h.create(O))}return l.label+=" Chain",l},s.mesh=function(l,a,f,u,m){var v=l.bodies,_,S,w,x,y;for(_=0;_<f;_++){for(S=1;S<a;S++)w=v[S-1+_*a],x=v[S+_*a],o.addConstraint(l,h.create(c.extend({bodyA:w,bodyB:x},m)));if(_>0)for(S=0;S<a;S++)w=v[S+(_-1)*a],x=v[S+_*a],o.addConstraint(l,h.create(c.extend({bodyA:w,bodyB:x},m))),u&&S>0&&(y=v[S-1+(_-1)*a],o.addConstraint(l,h.create(c.extend({bodyA:y,bodyB:x},m)))),u&&S<a-1&&(y=v[S+1+(_-1)*a],o.addConstraint(l,h.create(c.extend({bodyA:y,bodyB:x},m))))}return l.label+=" Mesh",l},s.pyramid=function(l,a,f,u,m,v,_){return s.stack(l,a,f,u,m,v,function(S,w,x,y,b,M){var E=Math.min(u,Math.ceil(f/2)),I=b?b.bounds.max.x-b.bounds.min.x:0;if(!(y>E)){y=E-y;var O=y,F=f-1-y;if(!(x<O||x>F)){M===1&&d.translate(b,{x:(x+(f%2===1?1:-1))*I,y:0});var N=b?x*I:0;return _(l+N+x*m,w,x,y,b,M)}}})},s.newtonsCradle=function(l,a,f,u,m){for(var v=o.create({label:"Newtons Cradle"}),_=0;_<f;_++){var S=1.9,w=p.circle(l+_*(u*S),a+m,u,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),x=h.create({pointA:{x:l+_*(u*S),y:a},bodyB:w});o.addBody(v,w),o.addConstraint(v,x)}return v},r(s,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),s.car=function(l,a,f,u,m){var v=d.nextGroup(!0),_=20,S=-f*.5+_,w=f*.5-_,x=0,y=o.create({label:"Car"}),b=p.rectangle(l,a,f,u,{collisionFilter:{group:v},chamfer:{radius:u*.5},density:2e-4}),M=p.circle(l+S,a+x,m,{collisionFilter:{group:v},friction:.8}),E=p.circle(l+w,a+x,m,{collisionFilter:{group:v},friction:.8}),I=h.create({bodyB:b,pointB:{x:S,y:x},bodyA:M,stiffness:1,length:0}),O=h.create({bodyB:b,pointB:{x:w,y:x},bodyA:E,stiffness:1,length:0});return o.addBody(y,b),o.addBody(y,M),o.addBody(y,E),o.addConstraint(y,I),o.addConstraint(y,O),y},r(s,"car","Composites.car \u27A4 moved to car example"),s.softBody=function(l,a,f,u,m,v,_,S,w,x){w=c.extend({inertia:1/0},w),x=c.extend({stiffness:.2,render:{type:"line",anchors:!1}},x);var y=s.stack(l,a,f,u,m,v,function(b,M){return p.circle(b,M,S,w)});return s.mesh(y,f,u,_,x),y.label="Soft Body",y},r(s,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(t,i,n){var s={};t.exports=s;var o=n(9),h=n(0),c=h.deprecated;(function(){s.create=function(d){var p={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return h.extend(p,d)},s.update=function(d,p,r,l){var a,f,u,m=r.world,v=d.buckets,_,S,w=!1;for(a=0;a<p.length;a++){var x=p[a];if(!(x.isSleeping&&!l)&&!(m.bounds&&(x.bounds.max.x<m.bounds.min.x||x.bounds.min.x>m.bounds.max.x||x.bounds.max.y<m.bounds.min.y||x.bounds.min.y>m.bounds.max.y))){var y=s._getRegion(d,x);if(!x.region||y.id!==x.region.id||l){(!x.region||l)&&(x.region=y);var b=s._regionUnion(y,x.region);for(f=b.startCol;f<=b.endCol;f++)for(u=b.startRow;u<=b.endRow;u++){S=s._getBucketId(f,u),_=v[S];var M=f>=y.startCol&&f<=y.endCol&&u>=y.startRow&&u<=y.endRow,E=f>=x.region.startCol&&f<=x.region.endCol&&u>=x.region.startRow&&u<=x.region.endRow;!M&&E&&E&&_&&s._bucketRemoveBody(d,_,x),(x.region===y||M&&!E||l)&&(_||(_=s._createBucket(v,S)),s._bucketAddBody(d,_,x))}x.region=y,w=!0}}}w&&(d.pairsList=s._createActivePairsList(d))},c(s,"update","Grid.update \u27A4 replaced by Matter.Detector"),s.clear=function(d){d.buckets={},d.pairs={},d.pairsList=[]},c(s,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),s._regionUnion=function(d,p){var r=Math.min(d.startCol,p.startCol),l=Math.max(d.endCol,p.endCol),a=Math.min(d.startRow,p.startRow),f=Math.max(d.endRow,p.endRow);return s._createRegion(r,l,a,f)},s._getRegion=function(d,p){var r=p.bounds,l=Math.floor(r.min.x/d.bucketWidth),a=Math.floor(r.max.x/d.bucketWidth),f=Math.floor(r.min.y/d.bucketHeight),u=Math.floor(r.max.y/d.bucketHeight);return s._createRegion(l,a,f,u)},s._createRegion=function(d,p,r,l){return{id:d+","+p+","+r+","+l,startCol:d,endCol:p,startRow:r,endRow:l}},s._getBucketId=function(d,p){return"C"+d+"R"+p},s._createBucket=function(d,p){var r=d[p]=[];return r},s._bucketAddBody=function(d,p,r){var l=d.pairs,a=o.id,f=p.length,u;for(u=0;u<f;u++){var m=p[u];if(!(r.id===m.id||r.isStatic&&m.isStatic)){var v=a(r,m),_=l[v];_?_[2]+=1:l[v]=[r,m,1]}}p.push(r)},s._bucketRemoveBody=function(d,p,r){var l=d.pairs,a=o.id,f;p.splice(h.indexOf(p,r),1);var u=p.length;for(f=0;f<u;f++){var m=l[a(r,p[f])];m&&(m[2]-=1)}},s._createActivePairsList=function(d){var p,r=d.pairs,l=h.keys(r),a=l.length,f=[],u;for(u=0;u<a;u++)p=r[l[u]],p[2]>0?f.push(p):delete r[l[u]];return f}})()},function(t,i,n){var s={};t.exports=s;var o=n(3),h=n(7),c=n(13),d=n(4),p=n(14),r=n(10),l=n(5),a=n(0),f=n(1);(function(){s.create=function(u,m){var v=(u?u.mouse:null)||(m?m.mouse:null);v||(u&&u.render&&u.render.canvas?v=c.create(u.render.canvas):m&&m.element?v=c.create(m.element):(v=c.create(),a.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var _=r.create({label:"Mouse Constraint",pointA:v.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),S={type:"mouseConstraint",mouse:v,element:null,body:null,constraint:_,collisionFilter:{category:1,mask:4294967295,group:0}},w=a.extend(S,m);return d.on(u,"beforeUpdate",function(){var x=l.allBodies(u.world);s.update(w,x),s._triggerEvents(w)}),w},s.update=function(u,m){var v=u.mouse,_=u.constraint,S=u.body;if(v.button===0){if(_.bodyB)h.set(_.bodyB,!1),_.pointA=v.position;else for(var w=0;w<m.length;w++)if(S=m[w],f.contains(S.bounds,v.position)&&p.canCollide(S.collisionFilter,u.collisionFilter))for(var x=S.parts.length>1?1:0;x<S.parts.length;x++){var y=S.parts[x];if(o.contains(y.vertices,v.position)){_.pointA=v.position,_.bodyB=u.body=S,_.pointB={x:v.position.x-S.position.x,y:v.position.y-S.position.y},_.angleB=S.angle,h.set(S,!1),d.trigger(u,"startdrag",{mouse:v,body:S});break}}}else _.bodyB=u.body=null,_.pointB=null,S&&d.trigger(u,"enddrag",{mouse:v,body:S})},s._triggerEvents=function(u){var m=u.mouse,v=m.sourceEvents;v.mousemove&&d.trigger(u,"mousemove",{mouse:m}),v.mousedown&&d.trigger(u,"mousedown",{mouse:m}),v.mouseup&&d.trigger(u,"mouseup",{mouse:m}),c.clearSourceEvents(m)}})()},function(t,i,n){var s={};t.exports=s;var o=n(2),h=n(8),c=n(1),d=n(12),p=n(3);(function(){s.collides=function(r,l){for(var a=[],f=l.length,u=r.bounds,m=h.collides,v=c.overlaps,_=0;_<f;_++){var S=l[_],w=S.parts.length,x=w===1?0:1;if(v(S.bounds,u))for(var y=x;y<w;y++){var b=S.parts[y];if(v(b.bounds,u)){var M=m(b,r);if(M){a.push(M);break}}}}return a},s.ray=function(r,l,a,f){f=f||1e-100;for(var u=o.angle(l,a),m=o.magnitude(o.sub(l,a)),v=(a.x+l.x)*.5,_=(a.y+l.y)*.5,S=d.rectangle(v,_,m,f,{angle:u}),w=s.collides(S,r),x=0;x<w.length;x+=1){var y=w[x];y.body=y.bodyB=y.bodyA}return w},s.region=function(r,l,a){for(var f=[],u=0;u<r.length;u++){var m=r[u],v=c.overlaps(m.bounds,l);(v&&!a||!v&&a)&&f.push(m)}return f},s.point=function(r,l){for(var a=[],f=0;f<r.length;f++){var u=r[f];if(c.contains(u.bounds,l))for(var m=u.parts.length===1?0:1;m<u.parts.length;m++){var v=u.parts[m];if(c.contains(v.bounds,l)&&p.contains(v.vertices,l)){a.push(u);break}}}return a}})()},function(t,i,n){var s={};t.exports=s;var o=n(4),h=n(18),c=n(0);(function(){var d,p;if(typeof window<"u"&&(d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,p=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!d){var r;d=function(l){r=setTimeout(function(){l(c.now())},1e3/60)},p=function(){clearTimeout(r)}}s.create=function(l){var a={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},f=c.extend(a,l);return f.delta=f.delta||1e3/f.fps,f.deltaMin=f.deltaMin||1e3/f.fps,f.deltaMax=f.deltaMax||1e3/(f.fps*.5),f.fps=1e3/f.delta,f},s.run=function(l,a){return typeof l.positionIterations<"u"&&(a=l,l=s.create()),function f(u){l.frameRequestId=d(f),u&&l.enabled&&s.tick(l,a,u)}(),l},s.tick=function(l,a,f){var u=a.timing,m=1,v,_={timestamp:u.timestamp};o.trigger(l,"beforeTick",_),l.isFixed?v=l.delta:(v=f-l.timePrev||l.delta,l.timePrev=f,l.deltaHistory.push(v),l.deltaHistory=l.deltaHistory.slice(-l.deltaSampleSize),v=Math.min.apply(null,l.deltaHistory),v=v<l.deltaMin?l.deltaMin:v,v=v>l.deltaMax?l.deltaMax:v,m=v/l.delta,l.delta=v),l.timeScalePrev!==0&&(m*=u.timeScale/l.timeScalePrev),u.timeScale===0&&(m=0),l.timeScalePrev=u.timeScale,l.correction=m,l.frameCounter+=1,f-l.counterTimestamp>=1e3&&(l.fps=l.frameCounter*((f-l.counterTimestamp)/1e3),l.counterTimestamp=f,l.frameCounter=0),o.trigger(l,"tick",_),o.trigger(l,"beforeUpdate",_),h.update(a,v,m),o.trigger(l,"afterUpdate",_),o.trigger(l,"afterTick",_)},s.stop=function(l){p(l.frameRequestId)},s.start=function(l,a){s.run(l,a)}})()},function(t,i,n){var s={};t.exports=s;var o=n(8),h=n(0),c=h.deprecated;(function(){s.collides=function(d,p){return o.collides(d,p)},c(s,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(t,i,n){var s={};t.exports=s,n(1);var o=n(0);(function(){s.pathToVertices=function(h,c){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var d,p,r,l,a,f,u,m,v,_,S=[],w,x,y=0,b=0,M=0;c=c||15;var E=function(O,F,N){var W=N%2===1&&N>1;if(!v||O!=v.x||F!=v.y){v&&W?(w=v.x,x=v.y):(w=0,x=0);var q={x:w+O,y:x+F};(W||!v)&&(v=q),S.push(q),b=w+O,M=x+F}},I=function(O){var F=O.pathSegTypeAsLetter.toUpperCase();if(F!=="Z"){switch(F){case"M":case"L":case"T":case"C":case"S":case"Q":b=O.x,M=O.y;break;case"H":b=O.x;break;case"V":M=O.y;break}E(b,M,O.pathSegType)}};for(s._svgPathToAbsolute(h),r=h.getTotalLength(),f=[],d=0;d<h.pathSegList.numberOfItems;d+=1)f.push(h.pathSegList.getItem(d));for(u=f.concat();y<r;){if(_=h.getPathSegAtLength(y),a=f[_],a!=m){for(;u.length&&u[0]!=a;)I(u.shift());m=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":l=h.getPointAtLength(y),E(l.x,l.y,0);break}y+=c}for(d=0,p=u.length;d<p;++d)I(u[d]);return S},s._svgPathToAbsolute=function(h){for(var c,d,p,r,l,a,f=h.pathSegList,u=0,m=0,v=f.numberOfItems,_=0;_<v;++_){var S=f.getItem(_),w=S.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(w))"x"in S&&(u=S.x),"y"in S&&(m=S.y);else switch("x1"in S&&(p=u+S.x1),"x2"in S&&(l=u+S.x2),"y1"in S&&(r=m+S.y1),"y2"in S&&(a=m+S.y2),"x"in S&&(u+=S.x),"y"in S&&(m+=S.y),w){case"m":f.replaceItem(h.createSVGPathSegMovetoAbs(u,m),_);break;case"l":f.replaceItem(h.createSVGPathSegLinetoAbs(u,m),_);break;case"h":f.replaceItem(h.createSVGPathSegLinetoHorizontalAbs(u),_);break;case"v":f.replaceItem(h.createSVGPathSegLinetoVerticalAbs(m),_);break;case"c":f.replaceItem(h.createSVGPathSegCurvetoCubicAbs(u,m,p,r,l,a),_);break;case"s":f.replaceItem(h.createSVGPathSegCurvetoCubicSmoothAbs(u,m,l,a),_);break;case"q":f.replaceItem(h.createSVGPathSegCurvetoQuadraticAbs(u,m,p,r),_);break;case"t":f.replaceItem(h.createSVGPathSegCurvetoQuadraticSmoothAbs(u,m),_);break;case"a":f.replaceItem(h.createSVGPathSegArcAbs(u,m,S.r1,S.r2,S.angle,S.largeArcFlag,S.sweepFlag),_);break;case"z":case"Z":u=c,m=d;break}(w=="M"||w=="m")&&(c=u,d=m)}}})()},function(t,i,n){var s={};t.exports=s;var o=n(5);n(0),function(){s.create=o.create,s.add=o.add,s.remove=o.remove,s.clear=o.clear,s.addComposite=o.addComposite,s.addBody=o.addBody,s.addConstraint=o.addConstraint}()}])})})(jr);const jt=ro(jr.exports),$l=jt.Engine,ss=jt.Events,Xn=jt.Render,Kn=jt.Runner,vi=jt.Bodies,ns=jt.Body,rs=jt.Composite,$n=jt.Composites,Zl=jt.Constraint,Ql=jt.MouseConstraint,Zn=jt.Mouse;class ql{constructor(e,t,i,n,s,o,h){this.canvas=e,this.mouseHitzone=i,this.initShadowCanvas(t),this.isPullingCallback=n,this.pullCallback=s,this.startCallback=o,this.releaseCallback=h,this.init(e),this.addObjects(),this.isEnabled=!1,this.enable(),e.addEventListener("mouseout",this.outHandler.bind(this))}initShadowCanvas(e){const t=window.devicePixelRatio;e.width=500*t,e.height=500*t,e.style.width=e.width/t+"px",e.style.height=e.height/t+"px",this.shadowCtx=e.getContext("2d"),this.pixelRatio=t}resize(e){const t=1+1/(e/(1-e));Zn.setScale(this.mouse,{x:t,y:t})}init(e){const t=$l.create({constraintIterations:5});this.world=t.world;const i=Xn.create({canvas:e,engine:t,showAngleIndicator:!0,options:{width:500,height:500,wireframes:!1,background:"transparent",pixelRatio:"auto"}});this.render=i,Xn.run(i);const n=Kn.create({isFixed:!0,delta:1e3/45});Kn.run(n,t),this.mouse=Zn.create(this.mouseHitzone);const s=Ql.create(t,{mouse:this.mouse,constraint:{render:{visible:!1}}});this.mouseConstraint=s,rs.add(this.world,s),ss.on(t,"beforeUpdate",this.beforeUpdateHandler.bind(this)),ss.on(t,"afterUpdate",this.afterUpdateHandler.bind(this)),ss.on(this.mouseConstraint,"mousedown",this.startCallback),ss.on(this.mouseConstraint,"enddrag",this.releaseCallback)}addObjects(){let i=ns.nextGroup(!0);const n=.001,s=10,o=6,h=.03;var c=vi.rectangle(42+50,-50+50,50,50,{collisionFilter:{group:i},label:"kaka",render:{sprite:{texture:"/images/handle/4_handle_bg.png",xScale:.5,yScale:.5}}});this.handleBg=c,jt.Body.setStatic(this.handleBg,!0);var d=vi.rectangle(42+22,-50-11,22,22,{label:"top",collisionFilter:{group:i},isStatic:!0});this.top=d;var p=$n.stack(42+22,-50+41,1,o,1,1,function(y,b){return vi.rectangle(y,b,8,s,{density:.003,frictionAir:h,collisionFilter:{group:i},render:{sprite:{texture:"/images/handle/1_rope.png",xScale:.5,yScale:.25}}})});this.rope=p;var r=vi.rectangle(42+22,-50+91,16,26,{density:n,frictionAir:h,collisionFilter:{group:i},label:"ring",render:{sprite:{texture:"/images/handle/2_ring.png",xScale:.5,yScale:.5}}});this.ring=r;var l=vi.rectangle(42+22,-50+113,42,38,{density:n,frictionAir:h,collisionFilter:{group:i},label:"eye",render:{sprite:{texture:"/images/handle/3_eye.png",xScale:.5,yScale:.5}}});this.eye=l;var a=vi.rectangle(42+22,-50+190,44,120,{density:n,frictionAir:h,collisionFilter:{group:i},label:"handle",render:{sprite:{texture:"/images/handle/4_handle.png",xScale:.5,yScale:.5}}});this.handle=a;var f=vi.rectangle(42+22,-50+273,44,50,{density:n,frictionAir:h,collisionFilter:{group:i},label:"bottom",render:{sprite:{texture:"/images/handle/5_bottom.png",xScale:.5,yScale:.5}}});this.bottom=f,rs.add(this.world,[c,d,l,r,a,f]),rs.add(this.world,[p]),$n.chain(p,0,.5,0,-.5,{length:0,stifness:0,damping:0,render:{visible:!1}});const u=this.addContstraint(d,p.bodies[0],0,11,-s*.5,!0),m=this.addContstraint(p.bodies[p.bodies.length-1],r,0,s*.5,-13),v=this.addContstraint(r,l,0,9,-16),_=this.addContstraint(l,a,-1,18,-59),S=this.addContstraint(l,a,1,18,-59),w=this.addContstraint(a,f,-1,59,-24),x=this.addContstraint(a,f,1,59,-24);rs.add(this.world,[u,m,v,_,S,w,x])}addContstraint(e,t,i,n,s,o=!1){const c=o?0:.5;return Zl.create({length:0,stifness:c,damping:.1,bodyA:e,pointA:{x:i,y:n},bodyB:t,pointB:{x:i,y:s},render:{visible:!1}})}outHandler(){this.releaseMouse()}releaseMouse(){this.mouse.button=-1}beforeUpdateHandler(){const e=this.mouseConstraint.mouse;this.mouseConstraint.mouse.position.x=Math.min(e.position.x,300),this.mouseConstraint.mouse.position.y=Math.min(e.position.y,e.mousedownPosition.y+100)}limitDistance(e,t){const i=this.getDistance(this.top.position.x,this.top.position.y,e.position.x,e.position.y),n=t/i;console.log("handle dist: "+i),n<1&&(e.position.x*=n,e.position.y*=n)}afterUpdateHandler(){jt.Body.setPosition(this.handleBg,this.handle.position),jt.Body.setAngle(this.handleBg,this.handle.angle);const e=16,t=this.rope.bodies.length;for(let i=0;i<t;i++){const n=this.rope.bodies[i],s=i===t-1?this.ring:this.rope.bodies[i+1],h=this.getDistance(n.position.x,n.position.y,s.position.x,s.position.y)/e*.65;n.render.sprite.yScale=.5*h*1.2}if(this.isEnabled){const i=this.getDistance(this.top.position.x,this.top.position.y,this.ring.position.x,this.ring.position.y);let n=(i-100)/70;n=Math.min(1,Math.max(0,n)),this.mouse.button===0&&this.isPullingCallback(n),(n>1||i>170)&&(this.disable(),this.pullCallback())}this.shadowCtx.clearRect(0,0,500*this.pixelRatio,500*this.pixelRatio),this.shadowCtx.drawImage(this.canvas,-25*this.pixelRatio,0*this.pixelRatio,500*this.pixelRatio,550*this.pixelRatio)}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1,this.releaseMouse();for(const e of this.world.bodies)ns.setAngularVelocity(e,0),ns.setVelocity(e,{x:0,y:0})}push(e=!0){ns.applyForce(this.handle,{x:this.handle.position.x,y:this.handle.position.y},{x:.01,y:.05})}getDistance(e,t,i,n){return Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2))}changeHandleTexture(e){e!=this.type&&(this.type=e,e==="close"?this.handle.render.sprite.texture="/images/handle/4_handle_close.png":e==="active"?this.handle.render.sprite.texture="/images/handle/4_handle_active.png":this.handle.render.sprite.texture="/images/handle/4_handle.png",C.killTweensOf(this.handle.render),this.handle.render.opacity=0,C.to(this.handle.render,{duration:.3,opacity:1,ease:"power1.out"}))}}const{window:Jl}=fs;function Qn(g){let e,t,i,n;return{c(){e=$("button"),this.h()},l(s){e=Z(s,"BUTTON",{class:!0,"aria-label":!0}),Q(e).forEach(H),this.h()},h(){k(e,"class","handleButton svelte-ppy6mw"),k(e,"aria-label",t=g[7]?"close":"menu")},m(s,o){pe(s,e,o),i||(n=ze(e,"click",g[9]),i=!0)},p(s,o){o&128&&t!==(t=s[7]?"close":"menu")&&k(e,"aria-label",t)},d(s){s&&H(e),i=!1,n()}}}function ec(g){let e,t,i,n,s,o,h,c,d,p,r,l,a,f=g[5]&&Qn(g);return{c(){e=$("link"),t=$("link"),i=$("link"),n=ce(),s=$("canvas"),o=ce(),h=$("canvas"),c=ce(),d=$("div"),f&&f.c(),p=ce(),r=$("div"),this.h()},l(u){const m=Zi('[data-svelte="svelte-23tq8z"]',document.head);e=Z(m,"LINK",{rel:!0,as:!0,href:!0}),t=Z(m,"LINK",{rel:!0,as:!0,href:!0}),i=Z(m,"LINK",{rel:!0,as:!0,href:!0}),m.forEach(H),n=he(u),s=Z(u,"CANVAS",{style:!0,class:!0}),Q(s).forEach(H),o=he(u),h=Z(u,"CANVAS",{style:!0,class:!0}),Q(h).forEach(H),c=he(u),d=Z(u,"DIV",{style:!0,class:!0});var v=Q(d);f&&f.l(v),v.forEach(H),p=he(u),r=Z(u,"DIV",{style:!0,class:!0}),Q(r).forEach(H),this.h()},h(){k(e,"rel","preload"),k(e,"as","image"),k(e,"href","/images/handle/4_handle_close.png"),k(t,"rel","preload"),k(t,"as","image"),k(t,"href","/images/handle/4_handle_active.png"),k(i,"rel","preload"),k(i,"as","image"),k(i,"href","/images/handle/4_handle.png"),wt(s,"transform","scale("+g[4]+")"),k(s,"class","element shadowCanvas svelte-ppy6mw"),$e(s,"overMenu",g[7]),wt(h,"transform","scale("+g[4]+")"),k(h,"class","element matter overAll svelte-ppy6mw"),wt(d,"transform","scale("+g[4]+")"),k(d,"class","element buttonWrapper overAll  svelte-ppy6mw"),wt(r,"cursor","grab"),wt(r,"transform","scale("+g[4]+")"),k(r,"class","element hitzone overAll svelte-ppy6mw"),$e(r,"overMenu",g[7]),$e(r,"big",g[6])},m(u,m){z(document.head,e),z(document.head,t),z(document.head,i),pe(u,n,m),pe(u,s,m),g[16](s),pe(u,o,m),pe(u,h,m),g[17](h),pe(u,c,m),pe(u,d,m),f&&f.m(d,null),g[18](d),pe(u,p,m),pe(u,r,m),g[19](r),l||(a=[ze(Jl,"resize",g[8]),ze(r,"mouseover",g[11]),ze(r,"focus",g[11]),ze(r,"mouseout",g[12]),ze(r,"blur",g[12]),ze(r,"mouseleave",g[10]),ze(r,"mouseup",g[10])],l=!0)},p(u,[m]){m&16&&wt(s,"transform","scale("+u[4]+")"),m&128&&$e(s,"overMenu",u[7]),m&16&&wt(h,"transform","scale("+u[4]+")"),u[5]?f?f.p(u,m):(f=Qn(u),f.c(),f.m(d,null)):f&&(f.d(1),f=null),m&16&&wt(d,"transform","scale("+u[4]+")"),m&16&&wt(r,"transform","scale("+u[4]+")"),m&128&&$e(r,"overMenu",u[7]),m&64&&$e(r,"big",u[6])},i:gt,o:gt,d(u){H(e),H(t),H(i),u&&H(n),u&&H(s),g[16](null),u&&H(o),u&&H(h),g[17](null),u&&H(c),u&&H(d),f&&f.d(),g[18](null),u&&H(p),u&&H(r),g[19](null),l=!1,Ri(a)}}}function tc(g,e,t){let i,n,s;Ze(g,Di,K=>t(23,i=K)),Ze(g,Ui,K=>t(7,n=K)),Ze(g,cn,K=>t(24,s=K));const o=Us();let h,c,d,p,r,l,a,f,u=!1,m=!1;Gt(()=>{d=new ql(p,r,l,b,M,E,I),v();let K=[l,r,p,a];C.set(K,{top:-500})});function v(){const K=Math.min(1,window.innerWidth/1e3),le=Math.min(1,window.innerHeight/900),we=Math.min(K,le);t(4,f=.4+we*.8),d.resize(f)}function _(){o("pulled")}function S(){d.push(),N(n?"close":"normal",!1);let K=[l,r,p,a];C.killTweensOf(K),C.to(K,{duration:1.6,top:0,onComplete:w,ease:"power4.inOut"})}function w(){d.enable(),t(5,u=!0)}function x(){u&&(t(5,u=!1),d.disable());let K=[l,r,p,a];C.killTweensOf(K),C.set(K,{top:-500})}function y(){t(5,u=!1),d.disable();let K=[l,r,p,a];C.killTweensOf(K),C.to(K,{duration:.4,top:-500,ease:"power4.inOut"})}function b(K){s||(i.setProgress(K),K>.5&&i.setHint("KEEP GOING!"))}function M(){os(cn,s=!0,s),i.setProgress(0),o("pulled")}function E(){c=Date.now(),N("active",!1),t(6,m=!0)}function I(){m&&(Date.now()-c<150&&M(),s||i.setProgress(0),N(n?"close":"normal",!0)),t(6,m=!1)}function O(){s||i.setHint("PULL DOWN"),N("active",!1),d.push()}function F(){N(n?"close":"normal",!0),i.setHint("")}function N(K,le){clearTimeout(h),le?h=setTimeout(()=>{d.changeHandleTexture(K)},1e3):d.changeHandleTexture(K)}function W(K){xt[K?"unshift":"push"](()=>{r=K,t(1,r)})}function q(K){xt[K?"unshift":"push"](()=>{p=K,t(0,p)})}function X(K){xt[K?"unshift":"push"](()=>{a=K,t(3,a)})}function re(K){xt[K?"unshift":"push"](()=>{l=K,t(2,l)})}return[p,r,l,a,f,u,m,n,v,_,I,O,F,S,x,y,W,q,X,re]}class ic extends Pt{constructor(e){super(),At(this,e,tc,ec,vt,{show:13,hideForced:14,hide:15})}get show(){return this.$$.ctx[13]}get hideForced(){return this.$$.ctx[14]}get hide(){return this.$$.ctx[15]}}function sc(g){let e,t,i,n,s,o,h;return{c(){e=$("button"),t=St(g[2]),this.h()},l(c){e=Z(c,"BUTTON",{class:!0,"data-text":!0});var d=Q(e);t=Mt(d,g[2]),d.forEach(H),this.h()},h(){k(e,"class","menuItem svelte-eax5xi"),k(e,"data-text",g[2]),$e(e,"isActive",g[3])},m(c,d){pe(c,e,d),z(e,t),s=!0,o||(h=[ze(e,"click",g[4]),ze(e,"mouseout",g[5]),ze(e,"blur",g[6]),ze(e,"mouseover",g[7]),ze(e,"focus",g[8])],o=!0)},p(c,[d]){g=c,(!s||d&4)&&Pi(t,g[2]),(!s||d&4)&&k(e,"data-text",g[2]),d&8&&$e(e,"isActive",g[3])},i(c){s||(dt(()=>{n&&n.end(1),i=Lt(e,Vt,{y:-20,delay:g[0],duration:1e3,easing:ui}),i.start()}),s=!0)},o(c){i&&i.invalidate(),n=mt(e,Vt,{y:-20,delay:g[1],duration:250,easing:xi}),s=!1},d(c){c&&H(e),c&&n&&n.end(),o=!1,Ri(h)}}}function nc(g,e,t){let{delayIn:i}=e,{delayOut:n}=e,{label:s=""}=e,{isActive:o=!1}=e;Gt(()=>{}),js(()=>{});function h(l){Si.call(this,g,l)}function c(l){Si.call(this,g,l)}function d(l){Si.call(this,g,l)}function p(l){Si.call(this,g,l)}function r(l){Si.call(this,g,l)}return g.$$set=l=>{"delayIn"in l&&t(0,i=l.delayIn),"delayOut"in l&&t(1,n=l.delayOut),"label"in l&&t(2,s=l.label),"isActive"in l&&t(3,o=l.isActive)},[i,n,s,o,h,c,d,p,r]}class rc extends Pt{constructor(e){super(),At(this,e,nc,sc,vt,{delayIn:0,delayOut:1,label:2,isActive:3})}get delayIn(){return this.$$.ctx[0]}set delayIn(e){this.$$set({delayIn:e}),Vi()}get delayOut(){return this.$$.ctx[1]}set delayOut(e){this.$$set({delayOut:e}),Vi()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),Vi()}get isActive(){return this.$$.ctx[3]}set isActive(e){this.$$set({isActive:e}),Vi()}}function oc(g){let e,t,i,n,s,o;return{c(){e=$("div"),t=St(g[0]),i=ce(),n=$("div"),this.h()},l(h){e=Z(h,"DIV",{class:!0});var c=Q(e);t=Mt(c,g[0]),i=he(c),n=Z(c,"DIV",{class:!0}),Q(n).forEach(H),c.forEach(H),this.h()},h(){k(n,"class","line svelte-1i0da3o"),k(e,"class","container svelte-1i0da3o")},m(h,c){pe(h,e,c),z(e,t),z(e,i),z(e,n),g[6](n),g[7](e),s||(o=[ze(e,"click",g[5]),ze(e,"mouseover",g[3]),ze(e,"focus",g[3]),ze(e,"mouseout",g[4]),ze(e,"blur",g[4])],s=!0)},p(h,[c]){c&1&&Pi(t,h[0])},i:gt,o:gt,d(h){h&&H(e),g[6](null),g[7](null),s=!1,Ri(o)}}}function ac(g,e,t){let{label:i}=e,n,s,o,h,c;Gt(()=>{n=new SplitText(h,{type:"chars, words",charsClass:"char"}),s=C.to(n.chars,{paused:!0,duration:.25,y:"-20%",stagger:.2/n.chars.length,ease:"power2.inOut"}),o=C.to(c,{paused:!0,duration:.3,width:"100%",ease:"sine.inOut"})}),js(()=>{});function d(){s.play(),o.play()}function p(){s.reverse(),o.reverse()}function r(f){Si.call(this,g,f)}function l(f){xt[f?"unshift":"push"](()=>{c=f,t(2,c)})}function a(f){xt[f?"unshift":"push"](()=>{h=f,t(1,h)})}return g.$$set=f=>{"label"in f&&t(0,i=f.label)},[i,h,c,d,p,r,l,a]}class Cs extends Pt{constructor(e){super(),At(this,e,ac,oc,vt,{label:0})}}function lc(g){let e,t,i,n,s,o;return{c(){e=et("svg"),t=et("defs"),i=et("style"),n=St(`.cls-1 {
        fill: #dedec2;
      }
      .cls-2 {
        fill: #dedec2;
      }
    `),s=et("path"),o=et("path"),this.h()},l(h){e=tt(h,"svg",{id:!0,xmlns:!0,viewBox:!0});var c=Q(e);t=tt(c,"defs",{});var d=Q(t);i=tt(d,"style",{});var p=Q(i);n=Mt(p,`.cls-1 {
        fill: #dedec2;
      }
      .cls-2 {
        fill: #dedec2;
      }
    `),p.forEach(H),d.forEach(H),s=tt(c,"path",{class:!0,d:!0}),Q(s).forEach(H),o=tt(c,"path",{class:!0,d:!0}),Q(o).forEach(H),c.forEach(H),this.h()},h(){k(s,"class","cls-1"),k(s,"d","M8.83,68.32c-.55,0-1-.45-1-1V31.48H2c-.55,0-1-.45-1-1v-9.69c0-.55,.45-1,1-1H7.83v-2.5c0-4.1,.44-7.09,1.33-9.16,.92-2.13,2.62-3.87,5.04-5.2,2.37-1.29,5.38-1.94,8.95-1.94s7.16,.55,10.59,1.63c.49,.15,.78,.65,.68,1.14l-1.66,8.58c-.05,.27-.21,.5-.44,.65-.16,.1-.35,.16-.54,.16-.08,0-.16,0-.23-.03-1.89-.45-3.71-.68-5.42-.68-1.48,0-2.52,.31-3.1,.93-.41,.44-.89,1.51-.89,4.11v2.28h8.2c.55,0,1,.45,1,1v9.69c0,.55-.45,1-1,1h-8.2v35.84c0,.55-.45,1-1,1H8.83Z"),k(o,"class","cls-2"),k(o,"d","M23.16,2c3.5,0,6.94,.53,10.29,1.58l-1.66,8.58c-1.96-.47-3.84-.7-5.65-.7s-3.06,.42-3.83,1.25c-.78,.83-1.16,2.43-1.16,4.8v3.28h9.2v9.69h-9.2v36.84H8.83V30.48H2v-9.69h6.83v-3.5c0-3.92,.41-6.84,1.25-8.76,.83-1.93,2.37-3.5,4.6-4.71,2.23-1.21,5.06-1.82,8.48-1.82m0-2c-3.74,0-6.91,.69-9.43,2.06-2.63,1.43-4.47,3.34-5.49,5.68-.95,2.19-1.41,5.32-1.41,9.56v1.5H2c-1.1,0-2,.9-2,2v9.69c0,1.1,.9,2,2,2H6.83v34.84c0,1.1,.9,2,2,2h12.31c1.1,0,2-.9,2-2V32.48h7.2c1.1,0,2-.9,2-2v-9.69c0-1.1-.9-2-2-2h-7.2v-1.28c0-2.63,.52-3.32,.63-3.43,.37-.4,1.21-.62,2.37-.62,1.63,0,3.38,.22,5.19,.65,.15,.04,.31,.05,.46,.05,.38,0,.76-.11,1.08-.32,.46-.3,.78-.77,.88-1.3l1.66-8.58c.19-1-.39-1.98-1.36-2.29-3.53-1.11-7.19-1.67-10.89-1.67h0Z"),k(e,"id","facebook"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"viewBox","0 0 35.45 69.32")},m(h,c){pe(h,e,c),z(e,t),z(t,i),z(i,n),z(e,s),z(e,o)},p:gt,i:gt,o:gt,d(h){h&&H(e)}}}class cc extends Pt{constructor(e){super(),At(this,e,null,lc,vt,{})}}function hc(g){let e,t,i,n,s,o,h,c,d,p,r,l,a;return{c(){e=et("svg"),t=et("defs"),i=et("style"),n=St(`.cls-1 {
        fill: #dedec2;
      }
      .cls-2 {
        fill: #dedec2;
      }
    `),s=et("g"),o=et("path"),h=et("path"),c=et("g"),d=et("path"),p=et("path"),r=et("g"),l=et("path"),a=et("path"),this.h()},l(f){e=tt(f,"svg",{id:!0,xmlns:!0,viewBox:!0});var u=Q(e);t=tt(u,"defs",{});var m=Q(t);i=tt(m,"style",{});var v=Q(i);n=Mt(v,`.cls-1 {
        fill: #dedec2;
      }
      .cls-2 {
        fill: #dedec2;
      }
    `),v.forEach(H),m.forEach(H),s=tt(u,"g",{});var _=Q(s);o=tt(_,"path",{class:!0,d:!0}),Q(o).forEach(H),h=tt(_,"path",{class:!0,d:!0}),Q(h).forEach(H),_.forEach(H),c=tt(u,"g",{});var S=Q(c);d=tt(S,"path",{class:!0,d:!0}),Q(d).forEach(H),p=tt(S,"path",{class:!0,d:!0}),Q(p).forEach(H),S.forEach(H),r=tt(u,"g",{});var w=Q(r);l=tt(w,"path",{class:!0,d:!0}),Q(l).forEach(H),a=tt(w,"path",{class:!0,d:!0}),Q(a).forEach(H),w.forEach(H),u.forEach(H),this.h()},h(){k(o,"class","cls-1"),k(o,"d","M28.96,68.53c-1.23,0-2.46,0-3.69-.02h-.41c-2.94-.05-5.98-.09-8.97-.81-7.64-1.84-12.4-6.68-14.16-14.4-.6-2.62-.69-5.24-.71-7.68-.04-7.84-.04-14.95,0-21.74,.02-2.95,.16-6.11,1.07-9.15C4.19,7.77,8.92,3.4,16.16,1.75c2.65-.6,5.37-.7,7.68-.71,3.75-.02,7.5-.03,11.24-.03,3.52,0,7.03,.01,10.55,.03,2.84,.02,5.88,.15,8.84,.99,7.18,2.04,11.66,6.83,13.31,14.24,.68,3.07,.7,6.26,.72,9.08,.04,6.44,.04,12.76,0,18.79-.02,3.09-.04,6.28-.79,9.43-1.84,7.71-6.72,12.5-14.51,14.23-2.85,.63-5.75,.67-8.56,.71h-.31c-1.25,.02-2.5,.03-3.75,.03h-5.83c-.96-.01-4.82,0-5.79,0Zm.95-59.71c-1.01,0-2.02,0-3.04,.03l-1.43,.02c-2.46,.03-5,.06-7.42,.54-4.46,.89-7.21,3.39-8.4,7.66-.58,2.07-.67,4.26-.69,6.14-.06,6.86-.11,13.56-.08,20.21v.16c.01,2.63,.02,5.34,.55,7.92,.91,4.48,3.43,7.23,7.72,8.41,1.64,.45,3.46,.66,5.89,.67,3.92,.02,7.85,.03,11.77,.03s7.8-.01,11.7-.03c1.68-.01,3.34-.17,4.95-.46,4.52-.84,7.29-3.36,8.48-7.72,.58-2.11,.67-4.29,.67-6.14,.03-7.38,.03-15.11,0-22.97-.01-2.25-.19-4.05-.55-5.65-.74-3.23-2.38-5.52-5.01-6.98-1.8-1-3.95-1.53-6.57-1.61-3.22-.1-6.43-.16-9.65-.22l-3.65-.07c-.12,.06-.25,.09-.38,.09-.81,0-4.05-.02-4.85-.02Z"),k(h,"class","cls-2"),k(h,"d","M35.06,2c3.52,0,7.04,.01,10.56,.03,2.88,.02,5.77,.16,8.58,.95,6.92,1.96,11.05,6.53,12.6,13.49,.65,2.92,.68,5.9,.7,8.87,.04,6.26,.04,12.52,0,18.78-.02,3.08-.04,6.18-.77,9.21-1.76,7.37-6.38,11.85-13.76,13.48-2.85,.63-5.76,.65-8.67,.69-1.25,.02-2.51,.02-3.76,.02-1.93,0-3.87-.01-5.8-.01s-3.84,.01-5.76,.01c-1.23,0-2.47,0-3.7-.02-3.07-.04-6.15-.06-9.16-.78-7.3-1.76-11.75-6.34-13.42-13.65-.56-2.46-.67-4.96-.68-7.46-.04-7.24-.05-14.49,0-21.73,.02-2.98,.17-5.98,1.03-8.87,2.01-6.72,6.53-10.74,13.32-12.29,2.45-.56,4.96-.67,7.46-.69,3.74-.02,7.48-.03,11.21-.03m-.29,5.83c-1.62,0-3.23-.01-4.85-.01-1.02,0-2.04,0-3.06,.03-3.02,.06-6.05,0-9.03,.59-4.73,.94-7.86,3.67-9.17,8.37-.58,2.09-.71,4.25-.72,6.4-.06,6.74-.11,13.48-.08,20.23,.01,2.76,.01,5.54,.57,8.28,.96,4.75,3.71,7.87,8.43,9.17,2.01,.55,4.08,.7,6.15,.7,3.93,.02,7.86,.03,11.8,.03s7.79-.01,11.68-.03c1.71-.01,3.44-.17,5.12-.48,4.8-.89,7.96-3.67,9.27-8.44,.57-2.09,.7-4.25,.71-6.4,.04-7.66,.03-15.32,0-22.98,0-1.97-.13-3.93-.58-5.87-.76-3.32-2.48-5.95-5.5-7.63-2.17-1.21-4.57-1.66-7.03-1.73-4.57-.14-9.14-.21-13.71-.3,0,.03,0,.07,0,.1m.3-7.83V0c-3.75,0-7.49,.01-11.23,.03-2.37,.01-5.16,.11-7.9,.74C8.32,2.51,3.35,7.11,1.15,14.44,.2,17.61,.05,20.84,.03,23.87c-.05,6.81-.05,13.93,0,21.75,.01,2.5,.11,5.18,.73,7.9,1.85,8.12,6.86,13.21,14.9,15.15,3.1,.74,6.2,.79,9.2,.83h.4c1.24,.02,2.49,.03,3.73,.03,.96,0,1.93,0,2.89,0,.96,0,1.92,0,2.87,0s1.93,0,2.9,0c.97,0,1.94,0,2.91,0,1.26,0,2.53,0,3.79-.02h.31c2.86-.04,5.81-.08,8.76-.74,8.2-1.82,13.34-6.85,15.27-14.97,.78-3.27,.8-6.52,.82-9.66,.04-6.02,.04-12.35,0-18.8-.02-2.86-.04-6.11-.74-9.29-1.74-7.8-6.45-12.84-14.01-14.98C51.67,.19,48.55,.05,45.64,.03c-3.39-.02-6.94-.03-10.57-.03h0Zm-.3,9.83c.2,0,.4-.03,.58-.09,1.14,.02,2.28,.05,3.41,.07,3.17,.06,6.44,.13,9.66,.22,2.46,.08,4.46,.56,6.12,1.48,2.37,1.32,3.85,3.39,4.52,6.33,.35,1.53,.52,3.25,.53,5.43,.03,7.84,.03,15.57,0,22.96,0,1.78-.09,3.88-.64,5.88-1.08,3.95-3.6,6.24-7.7,7-1.54,.29-3.15,.44-4.77,.45-3.71,.02-7.52,.03-11.67,.03-3.93,0-7.86-.01-11.79-.03-2.34,0-4.07-.2-5.63-.63-3.88-1.07-6.17-3.57-7-7.64-.51-2.49-.52-5.04-.53-7.74v-.15c-.03-6.67,.02-13.36,.08-20.2,.02-1.81,.1-3.92,.65-5.88,1.08-3.87,3.58-6.14,7.63-6.95,2.33-.46,4.72-.49,7.24-.53,.48,0,.95-.01,1.43-.02,1.01-.02,2.02-.02,3.03-.02,.8,0,1.61,0,2.41,0,.81,0,1.62,0,2.43,0h0Z"),k(d,"class","cls-1"),k(d,"d","M34.6,52.59c-9.81-.06-17.74-8.15-17.68-18.04,.06-9.72,8.02-17.63,17.75-17.63,4.89,.02,9.39,1.89,12.75,5.27,3.36,3.38,5.2,7.88,5.17,12.67-.05,9.78-8.07,17.74-17.88,17.74h-.11Zm.14-27.81c-5.46,0-9.93,4.46-9.96,9.94-.02,2.64,1,5.14,2.88,7.03,1.89,1.9,4.4,2.96,7.08,2.96h0c2.68,0,5.19-1.03,7.06-2.91,1.88-1.88,2.91-4.39,2.91-7.06,0-5.48-4.46-9.95-9.95-9.96l-.02-1v1Z"),k(p,"class","cls-2"),k(p,"d","M34.68,17.92s.05,0,.08,0c9.39,.04,16.89,7.57,16.84,16.93-.04,9.28-7.58,16.74-16.88,16.74-.04,0-.07,0-.1,0-9.3-.06-16.74-7.66-16.69-17.04,.05-9.15,7.6-16.64,16.75-16.64m.08,27.79c6.07,0,10.96-4.89,10.96-10.97,0-6.05-4.9-10.95-10.95-10.96,0,0-.02,0-.02,0-6.02,0-10.92,4.89-10.96,10.93-.04,6.04,4.89,10.99,10.96,11,0,0,.01,0,.02,0m-.08-29.79h0c-10.28,0-18.69,8.36-18.75,18.63-.06,10.44,8.32,18.99,18.67,19.05h.12c10.36,0,18.83-8.4,18.88-18.73,.02-5.06-1.92-9.81-5.46-13.38-3.55-3.56-8.29-5.54-13.37-5.56h-.08Zm.08,29.79v-2c-2.42,0-4.69-.95-6.39-2.66-1.69-1.7-2.61-3.95-2.59-6.32,.03-4.93,4.05-8.95,8.96-8.95,4.96,.01,8.97,4.03,8.97,8.96,0,2.41-.93,4.66-2.62,6.35-1.69,1.69-3.94,2.62-6.34,2.62v2h0Z"),k(l,"class","cls-1"),k(l,"d","M52.21,22.19c-2.62,0-4.82-2.15-4.9-4.8-.04-1.29,.44-2.54,1.35-3.5,.92-.97,2.14-1.52,3.45-1.55,0,0,.11,0,.12,0,2.67,0,4.89,2.16,4.95,4.81,.07,2.71-2.11,4.97-4.84,5.04,0,0-.12,0-.12,0Z"),k(a,"class","cls-2"),k(a,"d","M52.23,13.33c2.14,0,3.9,1.7,3.95,3.84,.05,2.17-1.67,3.96-3.87,4.02-.03,0-.07,0-.1,0-2.1,0-3.84-1.7-3.9-3.83-.07-2.13,1.68-3.97,3.82-4.02,.03,0,.07,0,.1,0m0-2h-.15c-1.57,.04-3.05,.7-4.15,1.87-1.1,1.16-1.67,2.66-1.62,4.22,.1,3.18,2.75,5.77,5.9,5.77h.15c3.29-.09,5.9-2.81,5.82-6.07-.08-3.19-2.75-5.79-5.95-5.79h0Z"),k(e,"id","instagram"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"viewBox","0 0 69.53 69.53")},m(f,u){pe(f,e,u),z(e,t),z(t,i),z(i,n),z(e,s),z(s,o),z(s,h),z(e,c),z(c,d),z(c,p),z(e,r),z(r,l),z(r,a)},p:gt,i:gt,o:gt,d(f){f&&H(e)}}}class uc extends Pt{constructor(e){super(),At(this,e,null,hc,vt,{})}}function dc(g){let e,t,i,n,s,o,h,c,d,p;return{c(){e=et("svg"),t=et("defs"),i=et("style"),n=St(`.cls-1 {
        fill: #dedec2;
      }
      .cls-2 {
        fill: #dedec2;
      }
    `),s=et("g"),o=et("path"),h=et("path"),c=et("g"),d=et("path"),p=et("path"),this.h()},l(r){e=tt(r,"svg",{id:!0,xmlns:!0,viewBox:!0});var l=Q(e);t=tt(l,"defs",{});var a=Q(t);i=tt(a,"style",{});var f=Q(i);n=Mt(f,`.cls-1 {
        fill: #dedec2;
      }
      .cls-2 {
        fill: #dedec2;
      }
    `),f.forEach(H),a.forEach(H),s=tt(l,"g",{});var u=Q(s);o=tt(u,"path",{class:!0,d:!0}),Q(o).forEach(H),h=tt(u,"path",{class:!0,d:!0}),Q(h).forEach(H),u.forEach(H),c=tt(l,"g",{});var m=Q(c);d=tt(m,"path",{class:!0,d:!0}),Q(d).forEach(H),p=tt(m,"path",{class:!0,d:!0}),Q(p).forEach(H),m.forEach(H),l.forEach(H),this.h()},h(){k(o,"class","cls-1"),k(o,"d","M2,65.57c-.55,0-1-.45-1-1V19.24c0-.55,.45-1,1-1H14c.55,0,1,.45,1,1v45.33c0,.55-.45,1-1,1H2ZM2,14.09c-.55,0-1-.45-1-1V2c0-.55,.45-1,1-1H14c.55,0,1,.45,1,1V13.09c0,.55-.45,1-1,1H2Z"),k(h,"class","cls-2"),k(h,"d","M14,2V13.09H2V2H14m0,17.24v45.33H2V19.24H14M14,0H2C.9,0,0,.9,0,2V13.09c0,1.1,.9,2,2,2H14c1.1,0,2-.9,2-2V2c0-1.1-.9-2-2-2h0Zm0,17.24H2c-1.1,0-2,.9-2,2v45.33c0,1.1,.9,2,2,2H14c1.1,0,2-.9,2-2V19.24c0-1.1-.9-2-2-2h0Z"),k(d,"class","cls-1"),k(d,"d","M55.54,65.57c-.55,0-1-.45-1-1v-23.13c0-5.91-.39-8.24-.71-9.15-.44-1.25-1.14-2.19-2.12-2.88-.98-.68-2.16-1.01-3.59-1.01-1.89,0-3.53,.5-5.03,1.54-1.46,.99-2.47,2.33-3.01,3.99-.57,1.76-.86,5.16-.86,10.11v20.53c0,.55-.45,1-1,1h-12c-.55,0-1-.45-1-1V19.24c0-.55,.45-1,1-1h11.14c.55,0,1,.45,1,1v3.96c3.84-3.98,8.52-5.99,13.94-5.99,2.72,0,5.29,.51,7.66,1.52,2.35,1.03,4.16,2.37,5.38,3.97,1.19,1.55,2.04,3.37,2.52,5.4,.46,1.93,.69,4.64,.69,8.3v28.16c0,.55-.45,1-1,1h-11.99Z"),k(p,"class","cls-2"),k(p,"d","M52.29,18.21c2.65,0,5.07,.5,7.26,1.44,2.19,.96,3.85,2.17,4.97,3.66,1.13,1.46,1.9,3.15,2.34,5.03,.45,1.85,.66,4.55,.66,8.07v28.16h-11.99v-23.13c0-4.89-.26-8.05-.77-9.49-.51-1.44-1.34-2.56-2.5-3.36-1.16-.8-2.54-1.19-4.16-1.19-2.08,0-3.94,.57-5.59,1.71-1.65,1.12-2.78,2.63-3.4,4.5-.61,1.87-.91,5.37-.91,10.42v20.53h-12V19.24h11.14v6.65c3.96-5.12,8.94-7.68,14.94-7.68m0-2c-4.92,0-9.26,1.57-12.94,4.68v-1.65c0-1.1-.9-2-2-2h-11.14c-1.1,0-2,.9-2,2v45.33c0,1.1,.9,2,2,2h12c1.1,0,2-.9,2-2v-20.53c0-6.04,.44-8.66,.82-9.8,.48-1.46,1.33-2.6,2.62-3.47,1.34-.93,2.79-1.37,4.47-1.37,1.22,0,2.21,.27,3.02,.83,.81,.56,1.38,1.34,1.75,2.38,.25,.69,.66,2.75,.66,8.82v23.13c0,1.1,.9,2,2,2h11.99c1.1,0,2-.9,2-2v-28.16c0-3.74-.24-6.53-.72-8.54-.51-2.16-1.42-4.11-2.7-5.78-1.31-1.73-3.25-3.17-5.75-4.27-2.5-1.07-5.21-1.61-8.07-1.61h0Z"),k(e,"id","linkedIn"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"viewBox","0 0 69.53 66.57")},m(r,l){pe(r,e,l),z(e,t),z(t,i),z(i,n),z(e,s),z(s,o),z(s,h),z(e,c),z(c,d),z(c,p)},p:gt,i:gt,o:gt,d(r){r&&H(e)}}}class fc extends Pt{constructor(e){super(),At(this,e,null,dc,vt,{})}}function pc(g){let e,t,i,n,s,o,h,c,d,p,r,l,a,f,u,m,v,_,S,w,x,y,b,M,E,I,O,F,N,W,q,X;return{c(){e=$("div"),t=$("div"),i=$("button"),n=$("div"),s=$("div"),o=ce(),h=$("div"),c=ce(),d=$("div"),p=ce(),r=$("div"),l=ce(),a=$("div"),f=ce(),u=$("div"),m=$("div"),v=ce(),_=$("div"),S=ce(),w=$("div"),x=ce(),y=$("div"),b=ce(),M=$("div"),E=ce(),I=$("p"),O=St("TOGGLE MUSIC"),this.h()},l(re){e=Z(re,"DIV",{class:!0});var K=Q(e);t=Z(K,"DIV",{class:!0});var le=Q(t);i=Z(le,"BUTTON",{class:!0,"aria-label":!0});var we=Q(i);n=Z(we,"DIV",{class:!0});var se=Q(n);s=Z(se,"DIV",{class:!0}),Q(s).forEach(H),o=he(se),h=Z(se,"DIV",{class:!0}),Q(h).forEach(H),c=he(se),d=Z(se,"DIV",{class:!0}),Q(d).forEach(H),p=he(se),r=Z(se,"DIV",{class:!0}),Q(r).forEach(H),l=he(se),a=Z(se,"DIV",{class:!0}),Q(a).forEach(H),se.forEach(H),f=he(we),u=Z(we,"DIV",{class:!0});var ie=Q(u);m=Z(ie,"DIV",{class:!0}),Q(m).forEach(H),v=he(ie),_=Z(ie,"DIV",{class:!0}),Q(_).forEach(H),S=he(ie),w=Z(ie,"DIV",{class:!0}),Q(w).forEach(H),x=he(ie),y=Z(ie,"DIV",{class:!0}),Q(y).forEach(H),b=he(ie),M=Z(ie,"DIV",{class:!0}),Q(M).forEach(H),ie.forEach(H),we.forEach(H),le.forEach(H),E=he(K),I=Z(K,"P",{class:!0});var xe=Q(I);O=Mt(xe,"TOGGLE MUSIC"),xe.forEach(H),K.forEach(H),this.h()},h(){k(s,"class","bar svelte-nj4y8f"),k(h,"class","bar svelte-nj4y8f"),k(d,"class","bar svelte-nj4y8f"),k(r,"class","bar svelte-nj4y8f"),k(a,"class","bar svelte-nj4y8f"),k(n,"class","bars svelte-nj4y8f"),$e(n,"inactive",!g[0]),k(m,"class","darkBar svelte-nj4y8f"),k(_,"class","darkBar svelte-nj4y8f"),k(w,"class","darkBar svelte-nj4y8f"),k(y,"class","darkBar svelte-nj4y8f"),k(M,"class","darkBar svelte-nj4y8f"),k(u,"class","darkBars svelte-nj4y8f"),$e(u,"active",g[0]),k(i,"class","button svelte-nj4y8f"),k(i,"aria-label","toggle sound"),k(t,"class","top svelte-nj4y8f"),k(I,"class","text svelte-nj4y8f"),k(e,"class","container")},m(re,K){pe(re,e,K),z(e,t),z(t,i),z(i,n),z(n,s),z(n,o),z(n,h),z(n,c),z(n,d),z(n,p),z(n,r),z(n,l),z(n,a),z(i,f),z(i,u),z(u,m),z(u,v),z(u,_),z(u,S),z(u,w),z(u,x),z(u,y),z(u,b),z(u,M),z(e,E),z(e,I),z(I,O),W=!0,q||(X=ze(i,"click",g[1]),q=!0)},p(re,[K]){g=re,K&1&&$e(n,"inactive",!g[0]),K&1&&$e(u,"active",g[0])},i(re){W||(dt(()=>{N&&N.end(1),F=Lt(e,Vt,{y:-20,delay:500,duration:1e3,easing:ui}),F.start()}),W=!0)},o(re){F&&F.invalidate(),N=mt(e,Vt,{y:-50,delay:300,duration:300,easing:xi}),W=!1},d(re){re&&H(e),re&&N&&N.end(),q=!1,X()}}}function mc(g,e,t){let i;Ze(g,Gs,o=>t(2,i=o));let n;Gt(()=>{t(0,n=i.playing)});function s(){i.toggle(),t(0,n=i.playing)}return[n,s]}class gc extends Pt{constructor(e){super(),At(this,e,mc,pc,vt,{})}}function vc(g){let e,t,i,n,s,o,h,c,d,p,r,l,a,f,u,m,v,_,S;return{c(){e=$("div"),t=$("div"),i=$("div"),n=$("div"),s=$("div"),o=$("div"),h=$("input"),c=ce(),d=$("div"),p=ce(),r=$("div"),l=ce(),a=$("p"),f=St("SITE QUALITY"),this.h()},l(w){e=Z(w,"DIV",{class:!0});var x=Q(e);t=Z(x,"DIV",{class:!0});var y=Q(t);i=Z(y,"DIV",{class:!0});var b=Q(i);n=Z(b,"DIV",{class:!0});var M=Q(n);s=Z(M,"DIV",{class:!0});var E=Q(s);o=Z(E,"DIV",{class:!0,id:!0});var I=Q(o);h=Z(I,"INPUT",{type:!0,class:!0}),c=he(I),d=Z(I,"DIV",{class:!0}),Q(d).forEach(H),p=he(I),r=Z(I,"DIV",{class:!0}),Q(r).forEach(H),I.forEach(H),E.forEach(H),M.forEach(H),b.forEach(H),y.forEach(H),l=he(x),a=Z(x,"P",{class:!0});var O=Q(a);f=Mt(O,"SITE QUALITY"),O.forEach(H),x.forEach(H),this.h()},h(){k(h,"type","checkbox"),k(h,"class","checkbox svelte-xon4t7"),k(d,"class","knobs svelte-xon4t7"),k(r,"class","layer svelte-xon4t7"),k(o,"class","button r svelte-xon4t7"),k(o,"id","button-1"),k(s,"class","CURSOR button-cover svelte-xon4t7"),k(n,"class","toggle-button-cover svelte-xon4t7"),k(i,"class","row svelte-xon4t7"),k(t,"class","top svelte-xon4t7"),k(a,"class","text svelte-xon4t7"),k(e,"class","container svelte-xon4t7")},m(w,x){pe(w,e,x),z(e,t),z(t,i),z(i,n),z(n,s),z(s,o),z(o,h),h.checked=g[0],z(o,c),z(o,d),z(o,p),z(o,r),z(e,l),z(e,a),z(a,f),v=!0,_||(S=ze(h,"change",g[2]),_=!0)},p(w,[x]){g=w,x&1&&(h.checked=g[0])},i(w){v||(dt(()=>{m&&m.end(1),u=Lt(e,Vt,{y:-20,delay:500,duration:1e3,easing:ui}),u.start()}),v=!0)},o(w){u&&u.invalidate(),m=mt(e,Vt,{y:-50,delay:300,duration:300,easing:xi}),v=!1},d(w){w&&H(e),w&&m&&m.end(),_=!1,S()}}}function wc(g,e,t){let i;Ze(g,Wi,o=>t(1,i=o));let n=!i.lowSettings;Gt(()=>{});function s(){n=this.checked,t(0,n)}return g.$$.update=()=>{g.$$.dirty&3&&i.lowSettings==n&&i.setPerformance(!n)},[n,i,s]}class xc extends Pt{constructor(e){super(),At(this,e,wc,vc,vt,{})}}const{Boolean:yc}=fs;function qn(g,e,t){const i=g.slice();return i[42]=e[t],i[43]=e,i[44]=t,i}function Jn(g,e,t){const i=g.slice();return i[45]=e[t].label,i}function er(g){let e;return{c(){e=$("link"),this.h()},l(t){e=Z(t,"LINK",{rel:!0,as:!0,href:!0}),this.h()},h(){k(e,"rel","preload"),k(e,"as","image"),k(e,"href","/images/menu/shadows/"+g[45]+".png")},m(t,i){pe(t,e,i)},p:gt,d(t){t&&H(e)}}}function tr(g){let e,t,i=g[5],n,s,o,h,c,d,p,r,l,a,f,u,m,v,_,S,w,x,y,b,M,E,I,O,F,N,W,q,X,re,K,le,we,se,ie,xe,ue,_e,De,Le,_t,rt,Rt,Fe=ir(g);d=new xc({}),r=new gc({}),m=new fc({}),S=new uc({}),y=new cc({});let Ee=g[4]&&sr(g);W=new Cs({props:{label:"CAREERS"}}),re=new Cs({props:{label:"LEGAL INFO"}}),we=new Cs({props:{label:"COOKIES"}});let Ge=g[8],Se=[];for(let me=0;me<Ge.length;me+=1)Se[me]=nr(qn(g,Ge,me));const Tt=me=>ge(Se[me],1,1,()=>{Se[me]=null});return{c(){e=$("div"),t=$("div"),Fe.c(),o=ce(),h=$("div"),c=$("div"),ot(d.$$.fragment),p=ce(),ot(r.$$.fragment),l=ce(),a=$("div"),f=$("div"),u=$("a"),ot(m.$$.fragment),v=ce(),_=$("a"),ot(S.$$.fragment),w=ce(),x=$("a"),ot(y.$$.fragment),E=ce(),Ee&&Ee.c(),I=ce(),O=$("div"),F=$("div"),N=$("button"),ot(W.$$.fragment),q=ce(),X=$("button"),ot(re.$$.fragment),K=ce(),le=$("button"),ot(we.$$.fragment),se=ce(),ie=$("div"),xe=St("\xA9 2023 Curious & Company, Inc. All Rights Reserved."),De=ce(),Le=$("div");for(let me=0;me<Se.length;me+=1)Se[me].c();this.h()},l(me){e=Z(me,"DIV",{class:!0});var Pe=Q(e);t=Z(Pe,"DIV",{class:!0});var Ie=Q(t);Fe.l(Ie),Ie.forEach(H),o=he(Pe),h=Z(Pe,"DIV",{class:!0});var st=Q(h);c=Z(st,"DIV",{class:!0});var ft=Q(c);at(d.$$.fragment,ft),p=he(ft),at(r.$$.fragment,ft),ft.forEach(H),l=he(st),a=Z(st,"DIV",{class:!0});var je=Q(a);f=Z(je,"DIV",{class:!0});var ht=Q(f);u=Z(ht,"A",{class:!0,href:!0,target:!0});var Et=Q(u);at(m.$$.fragment,Et),Et.forEach(H),v=he(ht),_=Z(ht,"A",{class:!0,href:!0,target:!0});var fe=Q(_);at(S.$$.fragment,fe),fe.forEach(H),w=he(ht),x=Z(ht,"A",{class:!0,href:!0,target:!0});var ve=Q(x);at(y.$$.fragment,ve),ve.forEach(H),ht.forEach(H),E=he(je),Ee&&Ee.l(je),I=he(je),O=Z(je,"DIV",{class:!0});var Ne=Q(O);F=Z(Ne,"DIV",{class:!0});var ut=Q(F);N=Z(ut,"BUTTON",{class:!0});var Ct=Q(N);at(W.$$.fragment,Ct),Ct.forEach(H),q=he(ut),X=Z(ut,"BUTTON",{class:!0});var A=Q(X);at(re.$$.fragment,A),A.forEach(H),K=he(ut),le=Z(ut,"BUTTON",{class:!0});var J=Q(le);at(we.$$.fragment,J),J.forEach(H),ut.forEach(H),se=he(Ne),ie=Z(Ne,"DIV",{class:!0});var Ce=Q(ie);xe=Mt(Ce,"\xA9 2023 Curious & Company, Inc. All Rights Reserved."),Ce.forEach(H),Ne.forEach(H),je.forEach(H),st.forEach(H),De=he(Pe),Le=Z(Pe,"DIV",{class:!0});var Oe=Q(Le);for(let Ye=0;Ye<Se.length;Ye+=1)Se[Ye].l(Oe);Oe.forEach(H),Pe.forEach(H),this.h()},h(){k(t,"class","shadowWrapper svelte-dmwtib"),k(c,"class","top svelte-dmwtib"),k(u,"class","social svelte-dmwtib"),k(u,"href","https://www.linkedin.com/company/curiousandcompany/"),k(u,"target","_blank"),k(_,"class","social svelte-dmwtib"),k(_,"href","https://www.instagram.com/curiousandcompany/"),k(_,"target","_blank"),k(x,"class","social svelte-dmwtib"),k(x,"href","https://www.facebook.com/curiousandcompany/"),k(x,"target","_blank"),k(f,"class","bottomLeft svelte-dmwtib"),k(N,"class","bottomLink svelte-dmwtib"),k(X,"class","bottomLink svelte-dmwtib"),k(le,"class","bottomLink svelte-dmwtib"),k(F,"class","bottomRightTop svelte-dmwtib"),k(ie,"class","bottomRightBottom svelte-dmwtib"),k(O,"class","bottomRight svelte-dmwtib"),k(a,"class","bottom svelte-dmwtib"),k(h,"class","inner svelte-dmwtib"),k(Le,"class","menu svelte-dmwtib"),k(e,"class","container svelte-dmwtib")},m(me,Pe){pe(me,e,Pe),z(e,t),Fe.m(t,null),z(e,o),z(e,h),z(h,c),lt(d,c,null),z(c,p),lt(r,c,null),z(h,l),z(h,a),z(a,f),z(f,u),lt(m,u,null),z(f,v),z(f,_),lt(S,_,null),z(f,w),z(f,x),lt(y,x,null),z(a,E),Ee&&Ee.m(a,null),z(a,I),z(a,O),z(O,F),z(F,N),lt(W,N,null),z(F,q),z(F,X),lt(re,X,null),z(F,K),z(F,le),lt(we,le,null),z(O,se),z(O,ie),z(ie,xe),z(e,De),z(e,Le);for(let Ie=0;Ie<Se.length;Ie+=1)Se[Ie].m(Le,null);g[26](e),_t=!0,rt||(Rt=[ze(N,"click",g[17]),ze(X,"click",g[18]),ze(le,"click",g[19])],rt=!0)},p(me,Pe){if(g=me,Pe[0]&32&&vt(i,i=g[5])?(yt(),ge(Fe,1,1,gt),bt(),Fe=ir(g),Fe.c(),ae(Fe,1),Fe.m(t,null)):Fe.p(g,Pe),g[4]?Ee?(Ee.p(g,Pe),Pe[0]&16&&ae(Ee,1)):(Ee=sr(g),Ee.c(),ae(Ee,1),Ee.m(a,I)):Ee&&(yt(),ge(Ee,1,1,()=>{Ee=null}),bt()),Pe[0]&3905){Ge=g[8];let Ie;for(Ie=0;Ie<Ge.length;Ie+=1){const st=qn(g,Ge,Ie);Se[Ie]?(Se[Ie].p(st,Pe),ae(Se[Ie],1)):(Se[Ie]=nr(st),Se[Ie].c(),ae(Se[Ie],1),Se[Ie].m(Le,null))}for(yt(),Ie=Ge.length;Ie<Se.length;Ie+=1)Tt(Ie);bt()}},i(me){if(!_t){ae(Fe),dt(()=>{s&&s.end(1),n=Lt(t,Vt,{y:-500,delay:400,duration:250,easing:ui}),n.start()}),ae(d.$$.fragment,me),ae(r.$$.fragment,me),ae(m.$$.fragment,me),ae(S.$$.fragment,me),ae(y.$$.fragment,me),dt(()=>{M&&M.end(1),b=Lt(f,Vt,{y:-20,delay:1300,duration:600,easing:ui}),b.start()}),ae(Ee),ae(W.$$.fragment,me),ae(re.$$.fragment,me),ae(we.$$.fragment,me),dt(()=>{_e&&_e.end(1),ue=Lt(O,Vt,{y:-20,delay:1400,duration:600,easing:ui}),ue.start()});for(let Pe=0;Pe<Ge.length;Pe+=1)ae(Se[Pe]);_t=!0}},o(me){ge(Fe),n&&n.invalidate(),s=mt(t,Vt,{y:-50,delay:0,duration:300,easing:xi}),ge(d.$$.fragment,me),ge(r.$$.fragment,me),ge(m.$$.fragment,me),ge(S.$$.fragment,me),ge(y.$$.fragment,me),b&&b.invalidate(),M=mt(f,Vt,{y:-20,delay:0,duration:300,easing:xi}),ge(Ee),ge(W.$$.fragment,me),ge(re.$$.fragment,me),ge(we.$$.fragment,me),ue&&ue.invalidate(),_e=mt(O,Vt,{y:-20,delay:0,duration:300,easing:xi}),Se=Se.filter(yc);for(let Pe=0;Pe<Se.length;Pe+=1)ge(Se[Pe]);_t=!1},d(me){me&&H(e),Fe.d(me),me&&s&&s.end(),ct(d),ct(r),ct(m),ct(S),ct(y),me&&M&&M.end(),Ee&&Ee.d(),ct(W),ct(re),ct(we),me&&_e&&_e.end(),fr(Se,me),g[26](null),rt=!1,Ri(Rt)}}}function ir(g){let e,t,i,n;return{c(){e=$("img"),this.h()},l(s){e=Z(s,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){k(e,"class","shadow svelte-dmwtib"),k(e,"alt","shadow"),Ot(e.src,t="/images/menu/shadows/"+g[5]+".png")||k(e,"src",t)},m(s,o){pe(s,e,o),n=!0},p(s,o){g=s,(!n||o[0]&32&&!Ot(e.src,t="/images/menu/shadows/"+g[5]+".png"))&&k(e,"src",t)},i(s){n||(dt(()=>{i||(i=ei(e,Ut,{opacity:0,start:.97,duration:300,easing:ui},!0)),i.run(1)}),n=!0)},o(s){i||(i=ei(e,Ut,{opacity:0,start:.97,duration:300,easing:ui},!1)),i.run(0),n=!1},d(s){s&&H(e),s&&i&&i.end()}}}function sr(g){let e,t,i,n,s,o,h,c;return{c(){e=$("div"),t=$("button"),i=St("being curious"),this.h()},l(d){e=Z(d,"DIV",{class:!0});var p=Q(e);t=Z(p,"BUTTON",{class:!0});var r=Q(t);i=Mt(r,"being curious"),r.forEach(H),p.forEach(H),this.h()},h(){k(t,"class","curiousButton svelte-dmwtib"),k(e,"class","bottomCenter svelte-dmwtib")},m(d,p){pe(d,e,p),z(e,t),z(t,i),o=!0,h||(c=ze(t,"click",g[12]),h=!0)},p(d,p){g=d},i(d){o||(dt(()=>{s&&s.end(1),n=Lt(e,Vt,{y:-20,delay:1200,duration:600,easing:ui}),n.start()}),o=!0)},o(d){n&&n.invalidate(),s=mt(e,Vt,{y:-20,delay:0,duration:300,easing:xi}),o=!1},d(d){d&&H(e),d&&s&&s.end(),h=!1,c()}}}function nr(g){let e,t=g[44],i;const n=()=>g[20](e,t),s=()=>g[20](null,t);function o(){return g[21](g[42])}function h(){return g[24](g[42])}function c(){return g[25](g[42])}let d={delayIn:600+g[44]*100,delayOut:g[44]*55,label:g[42].label,isActive:g[42].label===g[6]};return e=new rc({props:d}),n(),e.$on("click",dr(o)),e.$on("mouseout",g[22]),e.$on("blur",g[23]),e.$on("mouseover",h),e.$on("focus",c),{c(){ot(e.$$.fragment)},l(p){at(e.$$.fragment,p)},m(p,r){lt(e,p,r),i=!0},p(p,r){g=p,t!==g[44]&&(s(),t=g[44],n());const l={};r[0]&64&&(l.isActive=g[42].label===g[6]),e.$set(l)},i(p){i||(ae(e.$$.fragment,p),i=!0)},o(p){ge(e.$$.fragment,p),i=!1},d(p){s(),ct(e,p)}}}function bc(g){let e,t,i,n,s=g[8],o=[];for(let c=0;c<s.length;c+=1)o[c]=er(Jn(g,s,c));let h=g[1]&&tr(g);return{c(){for(let c=0;c<o.length;c+=1)o[c].c();e=Bt(),t=ce(),i=$("div"),h&&h.c(),this.h()},l(c){const d=Zi('[data-svelte="svelte-1xjfk1d"]',document.head);for(let r=0;r<o.length;r+=1)o[r].l(d);e=Bt(),d.forEach(H),t=he(c),i=Z(c,"DIV",{class:!0});var p=Q(i);h&&h.l(p),p.forEach(H),this.h()},h(){k(i,"class","MENU wrapper svelte-dmwtib"),$e(i,"isVisible",g[2])},m(c,d){for(let p=0;p<o.length;p+=1)o[p].m(document.head,null);z(document.head,e),pe(c,t,d),pe(c,i,d),h&&h.m(i,null),n=!0},p(c,d){if(d[0]&256){s=c[8];let p;for(p=0;p<s.length;p+=1){const r=Jn(c,s,p);o[p]?o[p].p(r,d):(o[p]=er(r),o[p].c(),o[p].m(e.parentNode,e))}for(;p<o.length;p+=1)o[p].d(1);o.length=s.length}c[1]?h?(h.p(c,d),d[0]&2&&ae(h,1)):(h=tr(c),h.c(),ae(h,1),h.m(i,null)):h&&(yt(),ge(h,1,1,()=>{h=null}),bt()),d[0]&4&&$e(i,"isVisible",c[2])},i(c){n||(ae(h),n=!0)},o(c){ge(h),n=!1},d(c){fr(o,c),H(e),c&&H(t),c&&H(i),h&&h.d()}}}function _c(g,e,t){let i,n;Ze(g,ms,ue=>t(30,i=ue)),Ze(g,xr,ue=>t(7,n=ue));let s=[],o=!1,h=!1,c,d=!0,p="home",r="home",l,a,f;const u=[{path:"/",label:"home",color:7839138},{path:"/about/",label:"about",color:12092298},{path:"/services/",label:"services",color:8099719},{path:"/work/",label:"work",color:7768741},{path:"/team/",label:"team",color:9470630},{path:"/contact/",label:"contact",color:9867915}],m=Us();Gt(()=>{I()});function v(){t(1,o=t(2,h=!0)),t(6,r=i.url.pathname.replaceAll("/","")),I(),clearTimeout(a),a=setTimeout(S,2e3)}function _(ue){t(4,d=Boolean(Number(ue)))}function S(){m("shown")}function w(){t(2,h=!1),clearTimeout(a),clearTimeout(f),o&&(t(1,o=!1),m("hidden"))}function x(){t(1,o=!1),clearTimeout(a),a=setTimeout(y,2e3)}function y(){m("hidden"),t(2,h=!1)}function b(ue){m("close"),clearTimeout(f),f=setTimeout(()=>{oa(ue)},1500)}function M(ue){F(ue.color),t(5,p=ue.label.toLowerCase())}function E(){I(!0)}function I(ue){clearTimeout(l),ue?l=setTimeout(O,500):O()}function O(){var ue=u.filter(_e=>_e.path.replaceAll("/","")===r);ue&&ue.length>0?(F(ue[0].color),t(5,p=r)):F(u[0].color)}function F(ue){clearTimeout(l),m("setColor",{color:ue})}function N(){m("showCurious")}const W=()=>n.show("careers"),q=()=>n.show("legal"),X=()=>n.show("cookies");function re(ue,_e){xt[ue?"unshift":"push"](()=>{s[_e]=ue,t(0,s)})}const K=ue=>b(ue.path),le=()=>E(),we=()=>E(),se=ue=>M(ue),ie=ue=>M(ue);function xe(ue){xt[ue?"unshift":"push"](()=>{c=ue,t(3,c)})}return[s,o,h,c,d,p,r,n,u,b,M,E,N,v,_,w,x,W,q,X,re,K,le,we,se,ie,xe]}class Tc extends Pt{constructor(e){super(),At(this,e,_c,bc,vt,{show:13,setConfig:14,hideForced:15,hide:16},null,[-1,-1])}get show(){return this.$$.ctx[13]}get setConfig(){return this.$$.ctx[14]}get hideForced(){return this.$$.ctx[15]}get hide(){return this.$$.ctx[16]}}const rr=`uniform float uDangle;
uniform float uTime;
//uniform float uMouse;
//uniform float uMouseWeight;
uniform bool uIsLeft;
uniform vec3 uColor1;
uniform vec3 uColor2;
uniform float uColorMix;

attribute float aScale;

varying vec2 vUv;
varying float vElevation;

void main()
{   
    vec3 pos = position;

    float yFactor = pos.y - .5;

    //float mouseElevation = max(0.0, -abs(pos.x - uMouse) * 8.0 + 1.0) * uMouseWeight;

    float wrinkle = sin(pos.x * 40.0);
    float xWind1 = sin(-pos.x * 14.0 + uTime * 2.0);
    float xWind2 = sin(pos.x * 7.0 + uTime * 1.3);
    float yWind = sin(pos.y * 7.0 + uTime * 1.1);
    float elevation = wrinkle + (xWind1 * 1.5) + (xWind2 * 1.5); // + (yWind * mouseElevation * 1.5);

    //elevation *= 1.0 + (mouseElevation * 1.5 * yFactor);
    //elevation += mouseElevation * 5.0 * yFactor;

    pos.z += elevation * .005;
    if (uIsLeft) {
        pos.x = (pos.x + 0.5 ) * aScale - .5;
    } else {
        pos.x = (pos.x - 0.5 ) * aScale + .5;
    }
    //pos.x += (xWind1 * .002 + xWind2 * .002) * yFactor;
    pos.x += uDangle * .05 * yFactor;

    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectedPosition = projectionMatrix * viewPosition;

    gl_Position = projectedPosition;

    vUv = uv;
    vElevation = elevation;
}`,or=`uniform vec3 uColor1;
uniform vec3 uColor2;
uniform float uColorMix;
uniform sampler2D uTexture;

varying vec2 vUv;
varying float vElevation;

void main()
{   
    vec3 color = vec3(0.0);
    color = mix(uColor1, uColor2, uColorMix);

    vec4 textureColor = texture2D(uTexture, vUv);
    //vec4 baseColor = vec4(uColor.r, uColor.g, uColor.b, 1.0);
    vec4 baseColor = vec4(color.r, color.g, color.b, 1.0);
    //baseColor.rgb *= .9 + textureColor.rgb * .5;
    baseColor.rgb *= .5 + textureColor.rgb * .5;
    baseColor.rgb *= 1.0 + 0.1 * vElevation; // elevation
    
    gl_FragColor = baseColor;
}`,ar={type:"change"},Os={type:"start"},lr={type:"end"};class Sc extends yr{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Ae,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:$t.ROTATE,MIDDLE:$t.DOLLY,RIGHT:$t.PAN},this.touches={ONE:Zt.ROTATE,TWO:Zt.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(A){A.addEventListener("keydown",je),this._domElementKeyEvents=A},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(ar),i.update(),s=n.NONE},this.update=function(){const A=new Ae,J=new Yi().setFromUnitVectors(e.up,new Ae(0,1,0)),Ce=J.clone().invert(),Oe=new Ae,Ye=new Yi,zt=2*Math.PI;return function(){const si=i.object.position;A.copy(si).sub(i.target),A.applyQuaternion(J),h.setFromVector3(A),i.autoRotate&&s===n.NONE&&E(b()),i.enableDamping?(h.theta+=c.theta*i.dampingFactor,h.phi+=c.phi*i.dampingFactor):(h.theta+=c.theta,h.phi+=c.phi);let nt=i.minAzimuthAngle,Qe=i.maxAzimuthAngle;return isFinite(nt)&&isFinite(Qe)&&(nt<-Math.PI?nt+=zt:nt>Math.PI&&(nt-=zt),Qe<-Math.PI?Qe+=zt:Qe>Math.PI&&(Qe-=zt),nt<=Qe?h.theta=Math.max(nt,Math.min(Qe,h.theta)):h.theta=h.theta>(nt+Qe)/2?Math.max(nt,h.theta):Math.min(Qe,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=d,h.radius=Math.max(i.minDistance,Math.min(i.maxDistance,h.radius)),i.enableDamping===!0?i.target.addScaledVector(p,i.dampingFactor):i.target.add(p),A.setFromSpherical(h),A.applyQuaternion(Ce),si.copy(i.target).add(A),i.object.lookAt(i.target),i.enableDamping===!0?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,p.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),p.set(0,0,0)),d=1,r||Oe.distanceToSquared(i.object.position)>o||8*(1-Ye.dot(i.object.quaternion))>o?(i.dispatchEvent(ar),Oe.copy(i.object.position),Ye.copy(i.object.quaternion),r=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",fe),i.domElement.removeEventListener("pointerdown",Se),i.domElement.removeEventListener("pointercancel",Pe),i.domElement.removeEventListener("wheel",ft),i.domElement.removeEventListener("pointermove",Tt),i.domElement.removeEventListener("pointerup",me),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",je)};const i=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=n.NONE;const o=1e-6,h=new as,c=new as;let d=1;const p=new Ae;let r=!1;const l=new Me,a=new Me,f=new Me,u=new Me,m=new Me,v=new Me,_=new Me,S=new Me,w=new Me,x=[],y={};function b(){return 2*Math.PI/60/60*i.autoRotateSpeed}function M(){return Math.pow(.95,i.zoomSpeed)}function E(A){c.theta-=A}function I(A){c.phi-=A}const O=function(){const A=new Ae;return function(Ce,Oe){A.setFromMatrixColumn(Oe,0),A.multiplyScalar(-Ce),p.add(A)}}(),F=function(){const A=new Ae;return function(Ce,Oe){i.screenSpacePanning===!0?A.setFromMatrixColumn(Oe,1):(A.setFromMatrixColumn(Oe,0),A.crossVectors(i.object.up,A)),A.multiplyScalar(Ce),p.add(A)}}(),N=function(){const A=new Ae;return function(Ce,Oe){const Ye=i.domElement;if(i.object.isPerspectiveCamera){const zt=i.object.position;A.copy(zt).sub(i.target);let qt=A.length();qt*=Math.tan(i.object.fov/2*Math.PI/180),O(2*Ce*qt/Ye.clientHeight,i.object.matrix),F(2*Oe*qt/Ye.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(O(Ce*(i.object.right-i.object.left)/i.object.zoom/Ye.clientWidth,i.object.matrix),F(Oe*(i.object.top-i.object.bottom)/i.object.zoom/Ye.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function W(A){i.object.isPerspectiveCamera?d/=A:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*A)),i.object.updateProjectionMatrix(),r=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function q(A){i.object.isPerspectiveCamera?d*=A:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/A)),i.object.updateProjectionMatrix(),r=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function X(A){l.set(A.clientX,A.clientY)}function re(A){_.set(A.clientX,A.clientY)}function K(A){u.set(A.clientX,A.clientY)}function le(A){a.set(A.clientX,A.clientY),f.subVectors(a,l).multiplyScalar(i.rotateSpeed);const J=i.domElement;E(2*Math.PI*f.x/J.clientHeight),I(2*Math.PI*f.y/J.clientHeight),l.copy(a),i.update()}function we(A){S.set(A.clientX,A.clientY),w.subVectors(S,_),w.y>0?W(M()):w.y<0&&q(M()),_.copy(S),i.update()}function se(A){m.set(A.clientX,A.clientY),v.subVectors(m,u).multiplyScalar(i.panSpeed),N(v.x,v.y),u.copy(m),i.update()}function ie(A){A.deltaY<0?q(M()):A.deltaY>0&&W(M()),i.update()}function xe(A){let J=!1;switch(A.code){case i.keys.UP:N(0,i.keyPanSpeed),J=!0;break;case i.keys.BOTTOM:N(0,-i.keyPanSpeed),J=!0;break;case i.keys.LEFT:N(i.keyPanSpeed,0),J=!0;break;case i.keys.RIGHT:N(-i.keyPanSpeed,0),J=!0;break}J&&(A.preventDefault(),i.update())}function ue(){if(x.length===1)l.set(x[0].pageX,x[0].pageY);else{const A=.5*(x[0].pageX+x[1].pageX),J=.5*(x[0].pageY+x[1].pageY);l.set(A,J)}}function _e(){if(x.length===1)u.set(x[0].pageX,x[0].pageY);else{const A=.5*(x[0].pageX+x[1].pageX),J=.5*(x[0].pageY+x[1].pageY);u.set(A,J)}}function De(){const A=x[0].pageX-x[1].pageX,J=x[0].pageY-x[1].pageY,Ce=Math.sqrt(A*A+J*J);_.set(0,Ce)}function Le(){i.enableZoom&&De(),i.enablePan&&_e()}function _t(){i.enableZoom&&De(),i.enableRotate&&ue()}function rt(A){if(x.length==1)a.set(A.pageX,A.pageY);else{const Ce=Ct(A),Oe=.5*(A.pageX+Ce.x),Ye=.5*(A.pageY+Ce.y);a.set(Oe,Ye)}f.subVectors(a,l).multiplyScalar(i.rotateSpeed);const J=i.domElement;E(2*Math.PI*f.x/J.clientHeight),I(2*Math.PI*f.y/J.clientHeight),l.copy(a)}function Rt(A){if(x.length===1)m.set(A.pageX,A.pageY);else{const J=Ct(A),Ce=.5*(A.pageX+J.x),Oe=.5*(A.pageY+J.y);m.set(Ce,Oe)}v.subVectors(m,u).multiplyScalar(i.panSpeed),N(v.x,v.y),u.copy(m)}function Fe(A){const J=Ct(A),Ce=A.pageX-J.x,Oe=A.pageY-J.y,Ye=Math.sqrt(Ce*Ce+Oe*Oe);S.set(0,Ye),w.set(0,Math.pow(S.y/_.y,i.zoomSpeed)),W(w.y),_.copy(S)}function Ee(A){i.enableZoom&&Fe(A),i.enablePan&&Rt(A)}function Ge(A){i.enableZoom&&Fe(A),i.enableRotate&&rt(A)}function Se(A){i.enabled!==!1&&(x.length===0&&(i.domElement.setPointerCapture(A.pointerId),i.domElement.addEventListener("pointermove",Tt),i.domElement.addEventListener("pointerup",me)),ve(A),A.pointerType==="touch"?ht(A):Ie(A))}function Tt(A){i.enabled!==!1&&(A.pointerType==="touch"?Et(A):st(A))}function me(A){Ne(A),x.length===0&&(i.domElement.releasePointerCapture(A.pointerId),i.domElement.removeEventListener("pointermove",Tt),i.domElement.removeEventListener("pointerup",me)),i.dispatchEvent(lr),s=n.NONE}function Pe(A){Ne(A)}function Ie(A){let J;switch(A.button){case 0:J=i.mouseButtons.LEFT;break;case 1:J=i.mouseButtons.MIDDLE;break;case 2:J=i.mouseButtons.RIGHT;break;default:J=-1}switch(J){case $t.DOLLY:if(i.enableZoom===!1)return;re(A),s=n.DOLLY;break;case $t.ROTATE:if(A.ctrlKey||A.metaKey||A.shiftKey){if(i.enablePan===!1)return;K(A),s=n.PAN}else{if(i.enableRotate===!1)return;X(A),s=n.ROTATE}break;case $t.PAN:if(A.ctrlKey||A.metaKey||A.shiftKey){if(i.enableRotate===!1)return;X(A),s=n.ROTATE}else{if(i.enablePan===!1)return;K(A),s=n.PAN}break;default:s=n.NONE}s!==n.NONE&&i.dispatchEvent(Os)}function st(A){if(i.enabled!==!1)switch(s){case n.ROTATE:if(i.enableRotate===!1)return;le(A);break;case n.DOLLY:if(i.enableZoom===!1)return;we(A);break;case n.PAN:if(i.enablePan===!1)return;se(A);break}}function ft(A){i.enabled===!1||i.enableZoom===!1||s!==n.NONE||(A.preventDefault(),i.dispatchEvent(Os),ie(A),i.dispatchEvent(lr))}function je(A){i.enabled===!1||i.enablePan===!1||xe(A)}function ht(A){switch(ut(A),x.length){case 1:switch(i.touches.ONE){case Zt.ROTATE:if(i.enableRotate===!1)return;ue(),s=n.TOUCH_ROTATE;break;case Zt.PAN:if(i.enablePan===!1)return;_e(),s=n.TOUCH_PAN;break;default:s=n.NONE}break;case 2:switch(i.touches.TWO){case Zt.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Le(),s=n.TOUCH_DOLLY_PAN;break;case Zt.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;_t(),s=n.TOUCH_DOLLY_ROTATE;break;default:s=n.NONE}break;default:s=n.NONE}s!==n.NONE&&i.dispatchEvent(Os)}function Et(A){switch(ut(A),s){case n.TOUCH_ROTATE:if(i.enableRotate===!1)return;rt(A),i.update();break;case n.TOUCH_PAN:if(i.enablePan===!1)return;Rt(A),i.update();break;case n.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ee(A),i.update();break;case n.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ge(A),i.update();break;default:s=n.NONE}}function fe(A){i.enabled!==!1&&A.preventDefault()}function ve(A){x.push(A)}function Ne(A){delete y[A.pointerId];for(let J=0;J<x.length;J++)if(x[J].pointerId==A.pointerId){x.splice(J,1);return}}function ut(A){let J=y[A.pointerId];J===void 0&&(J=new Me,y[A.pointerId]=J),J.set(A.pageX,A.pageY)}function Ct(A){const J=A.pointerId===x[0].pointerId?x[1]:x[0];return y[J.pointerId]}i.domElement.addEventListener("contextmenu",fe),i.domElement.addEventListener("pointerdown",Se),i.domElement.addEventListener("pointercancel",Pe),i.domElement.addEventListener("wheel",ft,{passive:!1}),this.update()}}class Mc{constructor(e,t,i=!0){this.mousePosition=t,this.debug=i,this.fpsInterval=1/60,this.width=this.height=0,this.canvas=e}init(e){this.debug&&(this.stats=ji(),document.body.appendChild(this.stats.dom),this.gui=new gs,this.gui.close()),this.scene=new Or,this.loadingManager=new Cr,this.textureLoader=new Ws(this.loadingManager),this.loadingManager.onLoad=()=>{e&&e()},this.camera=new Ys,this.camera.near=.2,this.camera.far=1e3,this.camera.position.z=3,this.scene.add(this.camera),this.renderer=new kr({antialias:window.devicePixelRatio<2,canvas:this.canvas,powerPreference:"high-performance",alpha:!0}),this.debug&&(this.orbitControls=new Sc(this.camera,this.canvas),this.orbitControls.enableDamping=!0),window.addEventListener("resize",this.resizeHandler.bind(this))}convertTo3D(e,t,i=0){const n=new Ae,s=new Ae;n.set(e/this.width*2-1,-(t/this.height)*2+1,.5),n.unproject(this.camera),n.sub(this.camera.position).normalize();var o=(i-this.camera.position.z)/n.z;return s.copy(this.camera.position).add(n.multiplyScalar(o)),s}enable(){this.isEnabled||(this.isEnabled=!0,this.scene.visible=!0,this.clock=new fi,this.then=this.clock.getElapsedTime(),this.loop(),this.resizeHandler())}disable(){this.isEnabled&&(this.isEnabled=!1,this.scene.visible=!1)}resizeHandler(){if(this.isEnabled){if(this.width=window.innerWidth,this.height=window.innerHeight*1.1,this.camera.aspect=this.width/this.height,this.camera.aspect>1)this.camera.fov=50;else{const i=Math.tan(Xi.degToRad(25)),n=this.camera.aspect/1,s=i/n;this.camera.fov=Xi.radToDeg(Math.atan(s))*2}this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio))}}loop(){this.isEnabled&&requestAnimationFrame(this.loop.bind(this));const e=this.clock.getElapsedTime(),t=e-this.then;t>this.fpsInterval&&(this.render(),this.then=e-t%this.fpsInterval)}render(){this.orbitControls&&this.orbitControls.update(),this.stats&&this.stats.update(),this.composer?this.composer.render():this.renderer.render(this.scene,this.camera)}}class Pc extends Mc{constructor(e,t,i=!0){super(e,t,i)}setColor(e){this.materialLeft.uniforms.uColor1.value=this.materialLeft.uniforms.uColor2.value,this.materialRight.uniforms.uColor1.value=this.materialLeft.uniforms.uColor2.value;const t=new Ke(e);this.materialLeft.uniforms.uColor2.value=t,this.materialRight.uniforms.uColor2.value=t;const i=this.materialLeft.uniforms.uColorMix,n=this.materialRight.uniforms.uColorMix;i.value=n.value=0,C.killTweensOf(i),C.to(i,{duration:.15,value:1,ease:"power1.out"}),C.killTweensOf(n),C.to(n,{duration:.15,value:1,ease:"power1.out"})}init(e){super.init(e),this.initObjects()}initObjects(){this.rows=80,this.columns=80;const e=this.textureLoader.load("/textures/curtains/curtain.jpg");e.encoding=it;const t=new Ht(1,1,this.columns,this.rows),i=new Ht(1,1,this.columns,this.rows),n=t.attributes.position.count;this.bufferLeft=new Oi(new Float32Array(n),1),t.setAttribute("aScale",this.bufferLeft),this.bufferRight=new Oi(new Float32Array(n),1),i.setAttribute("aScale",this.bufferRight),this.materialLeft=new Nt({vertexShader:rr,fragmentShader:or,uniforms:{uDangle:{value:0},uIsLeft:{value:!0},uTime:{value:0},uColor1:{value:new Ke(0)},uColor2:{value:new Ke(0)},uColorMix:{value:1},uTexture:{value:e}}}),this.materialRight=new Nt({vertexShader:rr,fragmentShader:or,uniforms:{uDangle:{value:0},uIsLeft:{value:!1},uTime:{value:0},uColor1:{value:new Ke(0)},uColor2:{value:new Ke(0)},uColorMix:{value:1},uTexture:{value:e}}}),this.base=new ye,this.scene.add(this.base),this.meshLeft=new Ue(t,this.materialLeft),this.base.add(this.meshLeft),this.meshRight=new Ue(i,this.materialRight),this.base.add(this.meshRight),this.positionsLeft=[],this.positionsRight=[];for(let s=0;s<n;s++)this.positionsLeft[s]={x:1},this.positionsRight[s]={x:1}}resizeHandler(){super.resizeHandler(),this.render();const e=this.convertTo3D(0,window.innerHeight*1.1,0),t=window.innerWidth/window.innerHeight;let i=1-(t-2/3);i=Math.min(1,Math.max(0,i));const n=Math.abs(e.x*1),s=Math.abs(e.y*2);this.meshLeft.scale.set(n*(1.1+i),s*1.1),this.meshRight.scale.set(n*(1.1+i),s*1.1),this.posLeft=-n*(.55+i*.5),this.meshLeft.position.y=s*.065,this.posRight=n*(.55+i*.5),this.meshRight.position.y=s*.065,super.resizeHandler()}open(){this.killTweens(),C.to(this.positionsLeft,{delay:.5,duration:.7,x:-.1,ease:"power2.inOut",stagger:{grid:[this.columns+1,this.rows+1],from:"end",amount:.3}}),C.to(this.positionsRight,{delay:.35,duration:.7,x:-.1,ease:"power2.inOut",stagger:{grid:[this.columns+1,this.rows+1],from:"end",amount:.3}})}openForced(){this.killTweens();for(let e=0;e<this.positionsLeft.length;e++)this.positionsLeft[e].x=0,this.positionsRight[e].x=0}closeForced(){this.killTweens();for(let e=0;e<this.positionsLeft.length;e++)this.positionsLeft[e].x=1,this.positionsRight[e].x=1}close(){this.killTweens(),C.to(this.positionsLeft,{duration:.65,x:1,ease:"sine.out",stagger:{grid:[this.columns+1,this.rows+1],from:this.columns,amount:.3}}),C.to(this.positionsRight,{duration:.65,x:1,ease:"sine.out",stagger:{grid:[this.columns+1,this.rows+1],from:this.columns,amount:.3}});const e=C.timeline();e.to(this.materialLeft.uniforms.uDangle,{duration:.5,value:-1,ease:"sine.in"}),e.to(this.materialLeft.uniforms.uDangle,{duration:6.1,value:0,ease:"elastic.out"});const t=C.timeline();t.to(this.materialRight.uniforms.uDangle,{duration:.9,value:1,ease:"sine.in"}),t.to(this.materialRight.uniforms.uDangle,{duration:8.2,value:0,ease:"elastic.out"})}killTweens(){C.killTweensOf(this.positionsLeft),C.killTweensOf(this.materialLeft.uniforms.uDangle),C.killTweensOf(this.materialRight.uniforms.uDangle)}setGap(e){for(let t=0;t<this.positionsLeft.length;t++)this.positionsLeft[t].x=.2+e*.5}render(){if(super.render(),this.isEnabled){const e=this.clock.getElapsedTime();this.meshLeft.position.x=this.posLeft,this.meshRight.position.x=this.posRight,this.materialLeft.uniforms.uTime.value=e*.5,this.materialRight.uniforms.uTime.value=e*.5+.5;const t=this.bufferLeft.array.length;for(let i=0;i<t;i++)this.bufferLeft.array[i]=this.positionsLeft[i].x,this.bufferRight.array[i]=this.positionsRight[i].x;this.bufferLeft.needsUpdate=!0,this.bufferRight.needsUpdate=!0}}}function Ac(g){let e;return{c(){e=$("canvas"),this.h()},l(t){e=Z(t,"CANVAS",{id:!0,"aria-hidden":!0,class:!0}),Q(e).forEach(H),this.h()},h(){k(e,"id","curtainsCanvas"),k(e,"aria-hidden","true"),k(e,"class","svelte-1xqzfe1")},m(t,i){pe(t,e,i),g[5](e)},p:gt,i:gt,o:gt,d(t){t&&H(e),g[5](null)}}}function Ec(g,e,t){let i;Ze(g,Gi,a=>t(8,i=a));let n,s,o;Gt(()=>{n=new Pc(document.querySelector("#curtainsCanvas"),i,!1),n.init(null),C.set(s,{top:"-110%"})});function h(a){n.setColor(a.detail.color)}function c(){clearTimeout(o),n.enable(),n.close(),C.set(s,{top:"-110%"}),C.set(s,{scaleY:.8}),C.to(s,{duration:.9,top:"0%",ease:"sine.inOut"}),C.to(s,{delay:.45,duration:2.4,scaleY:1,ease:"elastic.out"})}function d(){n.openForced(),n.disable()}function p(){n.open(),clearTimeout(o),o=setTimeout(r,1200)}function r(){n.disable()}function l(a){xt[a?"unshift":"push"](()=>{s=a,t(0,s)})}return[s,h,c,d,p,l]}class Cc extends Pt{constructor(e){super(),At(this,e,Ec,Ac,vt,{setColor:1,show:2,hideForced:3,hide:4})}get setColor(){return this.$$.ctx[1]}get show(){return this.$$.ctx[2]}get hideForced(){return this.$$.ctx[3]}get hide(){return this.$$.ctx[4]}}function cr(g){let e,t,i,n,s;return{c(){e=$("div"),t=$("iframe"),this.h()},l(o){e=Z(o,"DIV",{class:!0});var h=Q(e);t=Z(h,"IFRAME",{title:!0,class:!0,src:!0,allowtransparency:!0}),Q(t).forEach(H),h.forEach(H),this.h()},h(){k(t,"title","curious"),k(t,"class","iframe svelte-1035h51"),Ot(t.src,i=g[1])||k(t,"src",i),k(t,"allowtransparency","true"),k(e,"class","container svelte-1035h51")},m(o,h){pe(o,e,h),z(e,t),s=!0},p(o,h){g=o,(!s||h&2&&!Ot(t.src,i=g[1]))&&k(t,"src",i)},i(o){s||(dt(()=>{n||(n=ei(e,pt,{duration:200,easing:Mi},!0)),n.run(1)}),s=!0)},o(o){n||(n=ei(e,pt,{duration:200,easing:Mi},!1)),n.run(0),s=!1},d(o){o&&H(e),o&&n&&n.end()}}}function Oc(g){let e,t,i=g[0]&&cr(g);return{c(){i&&i.c(),e=Bt()},l(n){i&&i.l(n),e=Bt()},m(n,s){i&&i.m(n,s),pe(n,e,s),t=!0},p(n,[s]){n[0]?i?(i.p(n,s),s&1&&ae(i,1)):(i=cr(n),i.c(),ae(i,1),i.m(e.parentNode,e)):i&&(yt(),ge(i,1,1,()=>{i=null}),bt())},i(n){t||(ae(i),t=!0)},o(n){ge(i),t=!1},d(n){i&&i.d(n),n&&H(e)}}}function kc(g,e,t){let i;Ze(g,Di,c=>t(3,i=c));let n=!1,s;Gt(()=>{window.frameContentClosed=h,window.hideCloseButton=()=>{}});function o(c){i.disableCursor(),c==="legal"?t(1,s="https://curious.co/legal/index.html"):c==="cookies"?t(1,s="https://curious.co/cookies/index.html"):c==="careers"?t(1,s="https://curious.co/careers/index.html"):t(1,s="https://curious.co/curious/index.html"),t(0,n=!0)}function h(){i.enableCursor(),t(0,n=!1)}return[n,s,o]}class Lc extends Pt{constructor(e){super(),At(this,e,kc,Oc,vt,{show:2})}get show(){return this.$$.ctx[2]}}function hr(g){let e,t,i,n,s,o,h,c,d,p,r,l,a,f,u,m,v,_,S,w,x,y,b,M,E,I,O,F,N,W,q,X,re;return o=new aa({props:{dark:!0}}),o.$on("click",g[1]),b=new wr({props:{label:"SWITCH TO LOW QUALITY",inactiveOutlineColor:"#383430",inactiveInlineColor:"#f0ecd9",inactiveTextColor:"#383430",activeOutlineColor:"#e7cea8",activeInlineColor:"#383430",activeTextColor:"#e8dcc6"}}),b.$on("click",g[3]),{c(){e=$("div"),t=$("div"),i=$("div"),n=$("div"),s=$("div"),ot(o.$$.fragment),d=ce(),p=$("h1"),r=St("sorry to interrupt"),l=ce(),a=$("h2"),f=St("\u2026but we noticed things aren\u2019t running so smooth."),u=ce(),m=$("img"),_=ce(),S=$("p"),w=St(`Our website uses technology and features that function best on newer computers and devices. For a more
            enjoyable experience, we recommend switching to low quality mode.`),x=ce(),y=$("div"),ot(b.$$.fragment),M=ce(),E=$("p"),I=St("Note: "),O=$("em"),F=St("You can always revert to high quality mode from within the main menu of the website."),this.h()},l(K){e=Z(K,"DIV",{class:!0});var le=Q(e);t=Z(le,"DIV",{class:!0});var we=Q(t);i=Z(we,"DIV",{class:!0});var se=Q(i);n=Z(se,"DIV",{class:!0});var ie=Q(n);s=Z(ie,"DIV",{class:!0});var xe=Q(s);at(o.$$.fragment,xe),xe.forEach(H),d=he(ie),p=Z(ie,"H1",{class:!0});var ue=Q(p);r=Mt(ue,"sorry to interrupt"),ue.forEach(H),l=he(ie),a=Z(ie,"H2",{class:!0});var _e=Q(a);f=Mt(_e,"\u2026but we noticed things aren\u2019t running so smooth."),_e.forEach(H),u=he(ie),m=Z(ie,"IMG",{src:!0,class:!0,alt:!0}),_=he(ie),S=Z(ie,"P",{class:!0});var De=Q(S);w=Mt(De,`Our website uses technology and features that function best on newer computers and devices. For a more
            enjoyable experience, we recommend switching to low quality mode.`),De.forEach(H),x=he(ie),y=Z(ie,"DIV",{class:!0});var Le=Q(y);at(b.$$.fragment,Le),Le.forEach(H),ie.forEach(H),se.forEach(H),M=he(we),E=Z(we,"P",{class:!0});var _t=Q(E);I=Mt(_t,"Note: "),O=Z(_t,"EM",{class:!0});var rt=Q(O);F=Mt(rt,"You can always revert to high quality mode from within the main menu of the website."),rt.forEach(H),_t.forEach(H),we.forEach(H),le.forEach(H),this.h()},h(){k(s,"class","closeButtonWrapper svelte-1f681vw"),k(p,"class","svelte-1f681vw"),k(a,"class","svelte-1f681vw"),Ot(m.src,v="/images/performance/divider.png")||k(m,"src",v),k(m,"class","divider svelte-1f681vw"),k(m,"alt","divider"),k(S,"class","main svelte-1f681vw"),k(y,"class","mainButtonWrapper svelte-1f681vw"),k(n,"class","modal svelte-1f681vw"),k(i,"class","modalEdge svelte-1f681vw"),k(O,"class","svelte-1f681vw"),k(E,"class","small svelte-1f681vw"),k(t,"class","modalWrapper svelte-1f681vw"),k(e,"class","container svelte-1f681vw")},m(K,le){pe(K,e,le),z(e,t),z(t,i),z(i,n),z(n,s),lt(o,s,null),z(n,d),z(n,p),z(p,r),z(n,l),z(n,a),z(a,f),z(n,u),z(n,m),z(n,_),z(n,S),z(S,w),z(n,x),z(n,y),lt(b,y,null),z(t,M),z(t,E),z(E,I),z(E,O),z(O,F),q=!0,X||(re=ze(e,"click",io(g[1])),X=!0)},p(K,le){g=K},i(K){q||(ae(o.$$.fragment,K),dt(()=>{c&&c.end(1),h=Lt(s,Ut,{delay:700,duration:300,easing:Mi}),h.start()}),ae(b.$$.fragment,K),dt(()=>{W&&W.end(1),N=Lt(e,pt,{delay:700,duration:300,easing:Mi}),N.start()}),q=!0)},o(K){ge(o.$$.fragment,K),h&&h.invalidate(),c=mt(s,Ut,{duration:300,easing:Mi}),ge(b.$$.fragment,K),N&&N.invalidate(),W=mt(e,pt,{delay:0,duration:200,easing:Mi}),q=!1},d(K){K&&H(e),ct(o),K&&c&&c.end(),ct(b),K&&W&&W.end(),X=!1,re()}}}function Ic(g){let e,t,i,n,s,o,h=g[0]&&hr(g);return{c(){e=$("link"),t=ce(),h&&h.c(),i=Bt(),this.h()},l(c){const d=Zi('[data-svelte="svelte-rzxp7j"]',document.head);e=Z(d,"LINK",{rel:!0,as:!0,href:!0}),d.forEach(H),t=he(c),h&&h.l(c),i=Bt(),this.h()},h(){k(e,"rel","preload"),k(e,"as","image"),k(e,"href","/images/performance/bg.jpg")},m(c,d){z(document.head,e),pe(c,t,d),h&&h.m(c,d),pe(c,i,d),n=!0,s||(o=ze(window,"keydown",g[2]),s=!0)},p(c,[d]){c[0]?h?(h.p(c,d),d&1&&ae(h,1)):(h=hr(c),h.c(),ae(h,1),h.m(i.parentNode,i)):h&&(yt(),ge(h,1,1,()=>{h=null}),bt())},i(c){n||(ae(h),n=!0)},o(c){ge(h),n=!1},d(c){H(e),c&&H(t),h&&h.d(c),c&&H(i),s=!1,o()}}}function Rc(g,e,t){let i,n;Ze(g,Wi,l=>t(5,i=l)),Ze(g,Di,l=>t(6,n=l));let{shown:s=!1}=e,o;Gt(()=>{o=setInterval(h,1e3)});function h(){i.performance.ready&&i.performance.avgFPS<30&&c()}function c(){clearInterval(o),t(0,s=!0),n.pauseHints()}const d=()=>{t(0,s=!1),n.unpauseHints()},p=l=>{s&&l.code=="Escape"&&d()};function r(){i.setPerformance(!0),d()}return g.$$set=l=>{"shown"in l&&t(0,s=l.shown)},[s,d,p,r]}class Dc extends Pt{constructor(e){super(),At(this,e,Rc,Ic,vt,{shown:0})}}function Hc(g){let e,t,i,n,s,o,h,c,d,p,r,l,a,f,u,m;const v=g[12].default,_=pr(v,g,g[11],null);let S={};h=new Cc({props:S}),g[13](h);let w={};d=new Tc({props:w}),g[14](d),d.$on("setColor",function(){so(g[1].setColor)&&g[1].setColor.apply(this,arguments)}),d.$on("shown",g[8]),d.$on("hidden",g[9]),d.$on("close",g[7]),d.$on("showCurious",g[15]);let x={};r=new ic({props:x}),g[16](r),r.$on("pulled",g[6]);let y={};return a=new Lc({props:y}),g[17](a),u=new Dc({}),{c(){e=$("main"),t=$("canvas"),i=ce(),n=$("div"),_&&_.c(),o=ce(),ot(h.$$.fragment),c=ce(),ot(d.$$.fragment),p=ce(),ot(r.$$.fragment),l=ce(),ot(a.$$.fragment),f=ce(),ot(u.$$.fragment),this.h()},l(b){e=Z(b,"MAIN",{class:!0});var M=Q(e);t=Z(M,"CANVAS",{id:!0,"aria-hidden":!0,class:!0}),Q(t).forEach(H),i=he(M),n=Z(M,"DIV",{class:!0,"aria-hidden":!0,inert:!0});var E=Q(n);_&&_.l(E),E.forEach(H),o=he(M),at(h.$$.fragment,M),c=he(M),at(d.$$.fragment,M),p=he(M),at(r.$$.fragment,M),M.forEach(H),l=he(b),at(a.$$.fragment,b),f=he(b),at(u.$$.fragment,b),this.h()},h(){k(t,"id","three"),k(t,"aria-hidden","true"),k(t,"class","svelte-1m3zf8b"),k(n,"class","content svelte-1m3zf8b"),k(n,"aria-hidden",g[5]),k(n,"inert",s=g[5]||g[0]?"":void 0),k(e,"class","svelte-1m3zf8b")},m(b,M){pe(b,e,M),z(e,t),z(e,i),z(e,n),_&&_.m(n,null),z(e,o),lt(h,e,null),z(e,c),lt(d,e,null),z(e,p),lt(r,e,null),pe(b,l,M),lt(a,b,M),pe(b,f,M),lt(u,b,M),m=!0},p(b,[M]){g=b,_&&_.p&&(!m||M&2048)&&mr(_,v,g,g[11],m?vr(v,g[11],M,null):gr(g[11]),null),(!m||M&32)&&k(n,"aria-hidden",g[5]),(!m||M&33&&s!==(s=g[5]||g[0]?"":void 0))&&k(n,"inert",s);const E={};h.$set(E);const I={};d.$set(I);const O={};r.$set(O);const F={};a.$set(F)},i(b){m||(ae(_,b),ae(h.$$.fragment,b),ae(d.$$.fragment,b),ae(r.$$.fragment,b),ae(a.$$.fragment,b),ae(u.$$.fragment,b),m=!0)},o(b){ge(_,b),ge(h.$$.fragment,b),ge(d.$$.fragment,b),ge(r.$$.fragment,b),ge(a.$$.fragment,b),ge(u.$$.fragment,b),m=!1},d(b){b&&H(e),_&&_.d(b),g[13](null),ct(h),g[14](null),ct(d),g[16](null),ct(r),b&&H(l),g[17](null),ct(a,b),b&&H(f),ct(u,b)}}}function Bc(g,e,t){let i,n,s,o,h;Ze(g,Wi,X=>t(21,i=X)),Ze(g,Di,X=>t(22,n=X)),Ze(g,Ui,X=>t(5,s=X)),Ze(g,ms,X=>t(23,o=X)),Ze(g,Rr,X=>t(10,h=X));let{$$slots:c={},$$scope:d}=e,{loaderShown:p}=e,r,l,a,f,u,m=!1,v=!1;Gt(()=>{xr.set(f),S(),_()});function _(){fetch("/config/config.json").then(X=>X.json()).then(X=>{l.setConfig(X.showCuriousButton)})}function S(){M(),v=!1,m=!1,l.hideForced(),r.hideForced(),a.hide(),clearTimeout(u),u=setTimeout(w,4e3)}function w(){os(Ui,s=!1,s),o.url.pathname!=="/"&&!o.url.pathname.includes("index")&&(a.show(),v=!0)}function x(){m?b():y()}function y(){m=os(Ui,s=!0,s),a.hide(),n.setBlockRotation(!0),n.pauseHints(),i.disable(),clearTimeout(u),u=setTimeout(()=>{l.show(),r.show()},500)}function b(X){X?v=!1:(os(Ui,s=!1,s),n.unpauseHints()),a.hide(),n.setBlockRotation("auto"),clearTimeout(u),u=setTimeout(()=>{l.hide(),r.hide(),u=setTimeout(M,100)},200)}function M(){i&&i.enable()}function E(){a.show()}function I(){m=!1,v&&a.show()}function O(X){xt[X?"unshift":"push"](()=>{r=X,t(1,r)})}function F(X){xt[X?"unshift":"push"](()=>{l=X,t(2,l)})}const N=()=>f.show("curious");function W(X){xt[X?"unshift":"push"](()=>{a=X,t(3,a)})}function q(X){xt[X?"unshift":"push"](()=>{f=X,t(4,f)})}return g.$$set=X=>{"loaderShown"in X&&t(0,p=X.loaderShown),"$$scope"in X&&t(11,d=X.$$scope)},g.$$.update=()=>{g.$$.dirty&1024&&h&&S()},[p,r,l,a,f,s,x,b,E,I,h,d,c,O,F,N,W,q]}class zc extends Pt{constructor(e){super(),At(this,e,Bc,Hc,vt,{loaderShown:0})}}class Fc extends Pt{constructor(e){super(),At(this,e,null,null,vt,{})}}var Vs={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(g){(function(){var e=function(){this.init()};e.prototype={init:function(){var r=this||t;return r._counter=1e3,r._html5AudioPool=[],r.html5PoolSize=10,r._codecs={},r._howls=[],r._muted=!1,r._volume=1,r._canPlayEvent="canplaythrough",r._navigator=typeof window<"u"&&window.navigator?window.navigator:null,r.masterGain=null,r.noAudio=!1,r.usingWebAudio=!0,r.autoSuspend=!0,r.ctx=null,r.autoUnlock=!0,r._setup(),r},volume:function(r){var l=this||t;if(r=parseFloat(r),l.ctx||p(),typeof r<"u"&&r>=0&&r<=1){if(l._volume=r,l._muted)return l;l.usingWebAudio&&l.masterGain.gain.setValueAtTime(r,t.ctx.currentTime);for(var a=0;a<l._howls.length;a++)if(!l._howls[a]._webAudio)for(var f=l._howls[a]._getSoundIds(),u=0;u<f.length;u++){var m=l._howls[a]._soundById(f[u]);m&&m._node&&(m._node.volume=m._volume*r)}return l}return l._volume},mute:function(r){var l=this||t;l.ctx||p(),l._muted=r,l.usingWebAudio&&l.masterGain.gain.setValueAtTime(r?0:l._volume,t.ctx.currentTime);for(var a=0;a<l._howls.length;a++)if(!l._howls[a]._webAudio)for(var f=l._howls[a]._getSoundIds(),u=0;u<f.length;u++){var m=l._howls[a]._soundById(f[u]);m&&m._node&&(m._node.muted=r?!0:m._muted)}return l},stop:function(){for(var r=this||t,l=0;l<r._howls.length;l++)r._howls[l].stop();return r},unload:function(){for(var r=this||t,l=r._howls.length-1;l>=0;l--)r._howls[l].unload();return r.usingWebAudio&&r.ctx&&typeof r.ctx.close<"u"&&(r.ctx.close(),r.ctx=null,p()),r},codecs:function(r){return(this||t)._codecs[r.replace(/^x-/,"")]},_setup:function(){var r=this||t;if(r.state=r.ctx&&r.ctx.state||"suspended",r._autoSuspend(),!r.usingWebAudio)if(typeof Audio<"u")try{var l=new Audio;typeof l.oncanplaythrough>"u"&&(r._canPlayEvent="canplay")}catch{r.noAudio=!0}else r.noAudio=!0;try{var l=new Audio;l.muted&&(r.noAudio=!0)}catch{}return r.noAudio||r._setupCodecs(),r},_setupCodecs:function(){var r=this||t,l=null;try{l=typeof Audio<"u"?new Audio:null}catch{return r}if(!l||typeof l.canPlayType!="function")return r;var a=l.canPlayType("audio/mpeg;").replace(/^no$/,""),f=r._navigator?r._navigator.userAgent:"",u=f.match(/OPR\/([0-6].)/g),m=u&&parseInt(u[0].split("/")[1],10)<33,v=f.indexOf("Safari")!==-1&&f.indexOf("Chrome")===-1,_=f.match(/Version\/(.*?) /),S=v&&_&&parseInt(_[1],10)<15;return r._codecs={mp3:!!(!m&&(a||l.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!a,opus:!!l.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!l.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!l.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(l.canPlayType('audio/wav; codecs="1"')||l.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!l.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!l.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(l.canPlayType("audio/x-m4a;")||l.canPlayType("audio/m4a;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(l.canPlayType("audio/x-m4b;")||l.canPlayType("audio/m4b;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(l.canPlayType("audio/x-mp4;")||l.canPlayType("audio/mp4;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!S&&l.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!S&&l.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!l.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(l.canPlayType("audio/x-flac;")||l.canPlayType("audio/flac;")).replace(/^no$/,"")},r},_unlockAudio:function(){var r=this||t;if(!(r._audioUnlocked||!r.ctx)){r._audioUnlocked=!1,r.autoUnlock=!1,!r._mobileUnloaded&&r.ctx.sampleRate!==44100&&(r._mobileUnloaded=!0,r.unload()),r._scratchBuffer=r.ctx.createBuffer(1,1,22050);var l=function(a){for(;r._html5AudioPool.length<r.html5PoolSize;)try{var f=new Audio;f._unlocked=!0,r._releaseHtml5Audio(f)}catch{r.noAudio=!0;break}for(var u=0;u<r._howls.length;u++)if(!r._howls[u]._webAudio)for(var m=r._howls[u]._getSoundIds(),v=0;v<m.length;v++){var _=r._howls[u]._soundById(m[v]);_&&_._node&&!_._node._unlocked&&(_._node._unlocked=!0,_._node.load())}r._autoResume();var S=r.ctx.createBufferSource();S.buffer=r._scratchBuffer,S.connect(r.ctx.destination),typeof S.start>"u"?S.noteOn(0):S.start(0),typeof r.ctx.resume=="function"&&r.ctx.resume(),S.onended=function(){S.disconnect(0),r._audioUnlocked=!0,document.removeEventListener("touchstart",l,!0),document.removeEventListener("touchend",l,!0),document.removeEventListener("click",l,!0),document.removeEventListener("keydown",l,!0);for(var w=0;w<r._howls.length;w++)r._howls[w]._emit("unlock")}};return document.addEventListener("touchstart",l,!0),document.addEventListener("touchend",l,!0),document.addEventListener("click",l,!0),document.addEventListener("keydown",l,!0),r}},_obtainHtml5Audio:function(){var r=this||t;if(r._html5AudioPool.length)return r._html5AudioPool.pop();var l=new Audio().play();return l&&typeof Promise<"u"&&(l instanceof Promise||typeof l.then=="function")&&l.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(r){var l=this||t;return r._unlocked&&l._html5AudioPool.push(r),l},_autoSuspend:function(){var r=this;if(!(!r.autoSuspend||!r.ctx||typeof r.ctx.suspend>"u"||!t.usingWebAudio)){for(var l=0;l<r._howls.length;l++)if(r._howls[l]._webAudio){for(var a=0;a<r._howls[l]._sounds.length;a++)if(!r._howls[l]._sounds[a]._paused)return r}return r._suspendTimer&&clearTimeout(r._suspendTimer),r._suspendTimer=setTimeout(function(){if(!!r.autoSuspend){r._suspendTimer=null,r.state="suspending";var f=function(){r.state="suspended",r._resumeAfterSuspend&&(delete r._resumeAfterSuspend,r._autoResume())};r.ctx.suspend().then(f,f)}},3e4),r}},_autoResume:function(){var r=this;if(!(!r.ctx||typeof r.ctx.resume>"u"||!t.usingWebAudio))return r.state==="running"&&r.ctx.state!=="interrupted"&&r._suspendTimer?(clearTimeout(r._suspendTimer),r._suspendTimer=null):r.state==="suspended"||r.state==="running"&&r.ctx.state==="interrupted"?(r.ctx.resume().then(function(){r.state="running";for(var l=0;l<r._howls.length;l++)r._howls[l]._emit("resume")}),r._suspendTimer&&(clearTimeout(r._suspendTimer),r._suspendTimer=null)):r.state==="suspending"&&(r._resumeAfterSuspend=!0),r}};var t=new e,i=function(r){var l=this;if(!r.src||r.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}l.init(r)};i.prototype={init:function(r){var l=this;return t.ctx||p(),l._autoplay=r.autoplay||!1,l._format=typeof r.format!="string"?r.format:[r.format],l._html5=r.html5||!1,l._muted=r.mute||!1,l._loop=r.loop||!1,l._pool=r.pool||5,l._preload=typeof r.preload=="boolean"||r.preload==="metadata"?r.preload:!0,l._rate=r.rate||1,l._sprite=r.sprite||{},l._src=typeof r.src!="string"?r.src:[r.src],l._volume=r.volume!==void 0?r.volume:1,l._xhr={method:r.xhr&&r.xhr.method?r.xhr.method:"GET",headers:r.xhr&&r.xhr.headers?r.xhr.headers:null,withCredentials:r.xhr&&r.xhr.withCredentials?r.xhr.withCredentials:!1},l._duration=0,l._state="unloaded",l._sounds=[],l._endTimers={},l._queue=[],l._playLock=!1,l._onend=r.onend?[{fn:r.onend}]:[],l._onfade=r.onfade?[{fn:r.onfade}]:[],l._onload=r.onload?[{fn:r.onload}]:[],l._onloaderror=r.onloaderror?[{fn:r.onloaderror}]:[],l._onplayerror=r.onplayerror?[{fn:r.onplayerror}]:[],l._onpause=r.onpause?[{fn:r.onpause}]:[],l._onplay=r.onplay?[{fn:r.onplay}]:[],l._onstop=r.onstop?[{fn:r.onstop}]:[],l._onmute=r.onmute?[{fn:r.onmute}]:[],l._onvolume=r.onvolume?[{fn:r.onvolume}]:[],l._onrate=r.onrate?[{fn:r.onrate}]:[],l._onseek=r.onseek?[{fn:r.onseek}]:[],l._onunlock=r.onunlock?[{fn:r.onunlock}]:[],l._onresume=[],l._webAudio=t.usingWebAudio&&!l._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(l),l._autoplay&&l._queue.push({event:"play",action:function(){l.play()}}),l._preload&&l._preload!=="none"&&l.load(),l},load:function(){var r=this,l=null;if(t.noAudio){r._emit("loaderror",null,"No audio support.");return}typeof r._src=="string"&&(r._src=[r._src]);for(var a=0;a<r._src.length;a++){var f,u;if(r._format&&r._format[a])f=r._format[a];else{if(u=r._src[a],typeof u!="string"){r._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}f=/^data:audio\/([^;,]+);/i.exec(u),f||(f=/\.([^.]+)$/.exec(u.split("?",1)[0])),f&&(f=f[1].toLowerCase())}if(f||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),f&&t.codecs(f)){l=r._src[a];break}}if(!l){r._emit("loaderror",null,"No codec support for selected audio sources.");return}return r._src=l,r._state="loading",window.location.protocol==="https:"&&l.slice(0,5)==="http:"&&(r._html5=!0,r._webAudio=!1),new n(r),r._webAudio&&o(r),r},play:function(r,l){var a=this,f=null;if(typeof r=="number")f=r,r=null;else{if(typeof r=="string"&&a._state==="loaded"&&!a._sprite[r])return null;if(typeof r>"u"&&(r="__default",!a._playLock)){for(var u=0,m=0;m<a._sounds.length;m++)a._sounds[m]._paused&&!a._sounds[m]._ended&&(u++,f=a._sounds[m]._id);u===1?r=null:f=null}}var v=f?a._soundById(f):a._inactiveSound();if(!v)return null;if(f&&!r&&(r=v._sprite||"__default"),a._state!=="loaded"){v._sprite=r,v._ended=!1;var _=v._id;return a._queue.push({event:"play",action:function(){a.play(_)}}),_}if(f&&!v._paused)return l||a._loadQueue("play"),v._id;a._webAudio&&t._autoResume();var S=Math.max(0,v._seek>0?v._seek:a._sprite[r][0]/1e3),w=Math.max(0,(a._sprite[r][0]+a._sprite[r][1])/1e3-S),x=w*1e3/Math.abs(v._rate),y=a._sprite[r][0]/1e3,b=(a._sprite[r][0]+a._sprite[r][1])/1e3;v._sprite=r,v._ended=!1;var M=function(){v._paused=!1,v._seek=S,v._start=y,v._stop=b,v._loop=!!(v._loop||a._sprite[r][2])};if(S>=b){a._ended(v);return}var E=v._node;if(a._webAudio){var I=function(){a._playLock=!1,M(),a._refreshBuffer(v);var W=v._muted||a._muted?0:v._volume;E.gain.setValueAtTime(W,t.ctx.currentTime),v._playStart=t.ctx.currentTime,typeof E.bufferSource.start>"u"?v._loop?E.bufferSource.noteGrainOn(0,S,86400):E.bufferSource.noteGrainOn(0,S,w):v._loop?E.bufferSource.start(0,S,86400):E.bufferSource.start(0,S,w),x!==1/0&&(a._endTimers[v._id]=setTimeout(a._ended.bind(a,v),x)),l||setTimeout(function(){a._emit("play",v._id),a._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?I():(a._playLock=!0,a.once("resume",I),a._clearTimer(v._id))}else{var O=function(){E.currentTime=S,E.muted=v._muted||a._muted||t._muted||E.muted,E.volume=v._volume*t.volume(),E.playbackRate=v._rate;try{var W=E.play();if(W&&typeof Promise<"u"&&(W instanceof Promise||typeof W.then=="function")?(a._playLock=!0,M(),W.then(function(){a._playLock=!1,E._unlocked=!0,l?a._loadQueue():a._emit("play",v._id)}).catch(function(){a._playLock=!1,a._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):l||(a._playLock=!1,M(),a._emit("play",v._id)),E.playbackRate=v._rate,E.paused){a._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}r!=="__default"||v._loop?a._endTimers[v._id]=setTimeout(a._ended.bind(a,v),x):(a._endTimers[v._id]=function(){a._ended(v),E.removeEventListener("ended",a._endTimers[v._id],!1)},E.addEventListener("ended",a._endTimers[v._id],!1))}catch(q){a._emit("playerror",v._id,q)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=a._src,E.load());var F=window&&window.ejecta||!E.readyState&&t._navigator.isCocoonJS;if(E.readyState>=3||F)O();else{a._playLock=!0,a._state="loading";var N=function(){a._state="loaded",O(),E.removeEventListener(t._canPlayEvent,N,!1)};E.addEventListener(t._canPlayEvent,N,!1),a._clearTimer(v._id)}}return v._id},pause:function(r){var l=this;if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"pause",action:function(){l.pause(r)}}),l;for(var a=l._getSoundIds(r),f=0;f<a.length;f++){l._clearTimer(a[f]);var u=l._soundById(a[f]);if(u&&!u._paused&&(u._seek=l.seek(a[f]),u._rateSeek=0,u._paused=!0,l._stopFade(a[f]),u._node))if(l._webAudio){if(!u._node.bufferSource)continue;typeof u._node.bufferSource.stop>"u"?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),l._cleanBuffer(u._node)}else(!isNaN(u._node.duration)||u._node.duration===1/0)&&u._node.pause();arguments[1]||l._emit("pause",u?u._id:null)}return l},stop:function(r,l){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"stop",action:function(){a.stop(r)}}),a;for(var f=a._getSoundIds(r),u=0;u<f.length;u++){a._clearTimer(f[u]);var m=a._soundById(f[u]);m&&(m._seek=m._start||0,m._rateSeek=0,m._paused=!0,m._ended=!0,a._stopFade(f[u]),m._node&&(a._webAudio?m._node.bufferSource&&(typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),a._cleanBuffer(m._node)):(!isNaN(m._node.duration)||m._node.duration===1/0)&&(m._node.currentTime=m._start||0,m._node.pause(),m._node.duration===1/0&&a._clearSound(m._node))),l||a._emit("stop",m._id))}return a},mute:function(r,l){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"mute",action:function(){a.mute(r,l)}}),a;if(typeof l>"u")if(typeof r=="boolean")a._muted=r;else return a._muted;for(var f=a._getSoundIds(l),u=0;u<f.length;u++){var m=a._soundById(f[u]);m&&(m._muted=r,m._interval&&a._stopFade(m._id),a._webAudio&&m._node?m._node.gain.setValueAtTime(r?0:m._volume,t.ctx.currentTime):m._node&&(m._node.muted=t._muted?!0:r),a._emit("mute",m._id))}return a},volume:function(){var r=this,l=arguments,a,f;if(l.length===0)return r._volume;if(l.length===1||l.length===2&&typeof l[1]>"u"){var u=r._getSoundIds(),m=u.indexOf(l[0]);m>=0?f=parseInt(l[0],10):a=parseFloat(l[0])}else l.length>=2&&(a=parseFloat(l[0]),f=parseInt(l[1],10));var v;if(typeof a<"u"&&a>=0&&a<=1){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,l)}}),r;typeof f>"u"&&(r._volume=a),f=r._getSoundIds(f);for(var _=0;_<f.length;_++)v=r._soundById(f[_]),v&&(v._volume=a,l[2]||r._stopFade(f[_]),r._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(a,t.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=a*t.volume()),r._emit("volume",v._id))}else return v=f?r._soundById(f):r._sounds[0],v?v._volume:0;return r},fade:function(r,l,a,f){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"fade",action:function(){u.fade(r,l,a,f)}}),u;r=Math.min(Math.max(0,parseFloat(r)),1),l=Math.min(Math.max(0,parseFloat(l)),1),a=parseFloat(a),u.volume(r,f);for(var m=u._getSoundIds(f),v=0;v<m.length;v++){var _=u._soundById(m[v]);if(_){if(f||u._stopFade(m[v]),u._webAudio&&!_._muted){var S=t.ctx.currentTime,w=S+a/1e3;_._volume=r,_._node.gain.setValueAtTime(r,S),_._node.gain.linearRampToValueAtTime(l,w)}u._startFadeInterval(_,r,l,a,m[v],typeof f>"u")}}return u},_startFadeInterval:function(r,l,a,f,u,m){var v=this,_=l,S=a-l,w=Math.abs(S/.01),x=Math.max(4,w>0?f/w:f),y=Date.now();r._fadeTo=a,r._interval=setInterval(function(){var b=(Date.now()-y)/f;y=Date.now(),_+=S*b,_=Math.round(_*100)/100,S<0?_=Math.max(a,_):_=Math.min(a,_),v._webAudio?r._volume=_:v.volume(_,r._id,!0),m&&(v._volume=_),(a<l&&_<=a||a>l&&_>=a)&&(clearInterval(r._interval),r._interval=null,r._fadeTo=null,v.volume(a,r._id),v._emit("fade",r._id))},x)},_stopFade:function(r){var l=this,a=l._soundById(r);return a&&a._interval&&(l._webAudio&&a._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(a._interval),a._interval=null,l.volume(a._fadeTo,r),a._fadeTo=null,l._emit("fade",r)),l},loop:function(){var r=this,l=arguments,a,f,u;if(l.length===0)return r._loop;if(l.length===1)if(typeof l[0]=="boolean")a=l[0],r._loop=a;else return u=r._soundById(parseInt(l[0],10)),u?u._loop:!1;else l.length===2&&(a=l[0],f=parseInt(l[1],10));for(var m=r._getSoundIds(f),v=0;v<m.length;v++)u=r._soundById(m[v]),u&&(u._loop=a,r._webAudio&&u._node&&u._node.bufferSource&&(u._node.bufferSource.loop=a,a&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop,r.playing(m[v])&&(r.pause(m[v],!0),r.play(m[v],!0)))));return r},rate:function(){var r=this,l=arguments,a,f;if(l.length===0)f=r._sounds[0]._id;else if(l.length===1){var u=r._getSoundIds(),m=u.indexOf(l[0]);m>=0?f=parseInt(l[0],10):a=parseFloat(l[0])}else l.length===2&&(a=parseFloat(l[0]),f=parseInt(l[1],10));var v;if(typeof a=="number"){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,l)}}),r;typeof f>"u"&&(r._rate=a),f=r._getSoundIds(f);for(var _=0;_<f.length;_++)if(v=r._soundById(f[_]),v){r.playing(f[_])&&(v._rateSeek=r.seek(f[_]),v._playStart=r._webAudio?t.ctx.currentTime:v._playStart),v._rate=a,r._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(a,t.ctx.currentTime):v._node&&(v._node.playbackRate=a);var S=r.seek(f[_]),w=(r._sprite[v._sprite][0]+r._sprite[v._sprite][1])/1e3-S,x=w*1e3/Math.abs(v._rate);(r._endTimers[f[_]]||!v._paused)&&(r._clearTimer(f[_]),r._endTimers[f[_]]=setTimeout(r._ended.bind(r,v),x)),r._emit("rate",v._id)}}else return v=r._soundById(f),v?v._rate:r._rate;return r},seek:function(){var r=this,l=arguments,a,f;if(l.length===0)r._sounds.length&&(f=r._sounds[0]._id);else if(l.length===1){var u=r._getSoundIds(),m=u.indexOf(l[0]);m>=0?f=parseInt(l[0],10):r._sounds.length&&(f=r._sounds[0]._id,a=parseFloat(l[0]))}else l.length===2&&(a=parseFloat(l[0]),f=parseInt(l[1],10));if(typeof f>"u")return 0;if(typeof a=="number"&&(r._state!=="loaded"||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,l)}}),r;var v=r._soundById(f);if(v)if(typeof a=="number"&&a>=0){var _=r.playing(f);_&&r.pause(f,!0),v._seek=a,v._ended=!1,r._clearTimer(f),!r._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=a);var S=function(){_&&r.play(f,!0),r._emit("seek",f)};if(_&&!r._webAudio){var w=function(){r._playLock?setTimeout(w,0):S()};setTimeout(w,0)}else S()}else if(r._webAudio){var x=r.playing(f)?t.ctx.currentTime-v._playStart:0,y=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(y+x*Math.abs(v._rate))}else return v._node.currentTime;return r},playing:function(r){var l=this;if(typeof r=="number"){var a=l._soundById(r);return a?!a._paused:!1}for(var f=0;f<l._sounds.length;f++)if(!l._sounds[f]._paused)return!0;return!1},duration:function(r){var l=this,a=l._duration,f=l._soundById(r);return f&&(a=l._sprite[f._sprite][1]/1e3),a},state:function(){return this._state},unload:function(){for(var r=this,l=r._sounds,a=0;a<l.length;a++)l[a]._paused||r.stop(l[a]._id),r._webAudio||(r._clearSound(l[a]._node),l[a]._node.removeEventListener("error",l[a]._errorFn,!1),l[a]._node.removeEventListener(t._canPlayEvent,l[a]._loadFn,!1),l[a]._node.removeEventListener("ended",l[a]._endFn,!1),t._releaseHtml5Audio(l[a]._node)),delete l[a]._node,r._clearTimer(l[a]._id);var f=t._howls.indexOf(r);f>=0&&t._howls.splice(f,1);var u=!0;for(a=0;a<t._howls.length;a++)if(t._howls[a]._src===r._src||r._src.indexOf(t._howls[a]._src)>=0){u=!1;break}return s&&u&&delete s[r._src],t.noAudio=!1,r._state="unloaded",r._sounds=[],r=null,null},on:function(r,l,a,f){var u=this,m=u["_on"+r];return typeof l=="function"&&m.push(f?{id:a,fn:l,once:f}:{id:a,fn:l}),u},off:function(r,l,a){var f=this,u=f["_on"+r],m=0;if(typeof l=="number"&&(a=l,l=null),l||a)for(m=0;m<u.length;m++){var v=a===u[m].id;if(l===u[m].fn&&v||!l&&v){u.splice(m,1);break}}else if(r)f["_on"+r]=[];else{var _=Object.keys(f);for(m=0;m<_.length;m++)_[m].indexOf("_on")===0&&Array.isArray(f[_[m]])&&(f[_[m]]=[])}return f},once:function(r,l,a){var f=this;return f.on(r,l,a,1),f},_emit:function(r,l,a){for(var f=this,u=f["_on"+r],m=u.length-1;m>=0;m--)(!u[m].id||u[m].id===l||r==="load")&&(setTimeout(function(v){v.call(this,l,a)}.bind(f,u[m].fn),0),u[m].once&&f.off(r,u[m].fn,u[m].id));return f._loadQueue(r),f},_loadQueue:function(r){var l=this;if(l._queue.length>0){var a=l._queue[0];a.event===r&&(l._queue.shift(),l._loadQueue()),r||a.action()}return l},_ended:function(r){var l=this,a=r._sprite;if(!l._webAudio&&r._node&&!r._node.paused&&!r._node.ended&&r._node.currentTime<r._stop)return setTimeout(l._ended.bind(l,r),100),l;var f=!!(r._loop||l._sprite[a][2]);if(l._emit("end",r._id),!l._webAudio&&f&&l.stop(r._id,!0).play(r._id),l._webAudio&&f){l._emit("play",r._id),r._seek=r._start||0,r._rateSeek=0,r._playStart=t.ctx.currentTime;var u=(r._stop-r._start)*1e3/Math.abs(r._rate);l._endTimers[r._id]=setTimeout(l._ended.bind(l,r),u)}return l._webAudio&&!f&&(r._paused=!0,r._ended=!0,r._seek=r._start||0,r._rateSeek=0,l._clearTimer(r._id),l._cleanBuffer(r._node),t._autoSuspend()),!l._webAudio&&!f&&l.stop(r._id,!0),l},_clearTimer:function(r){var l=this;if(l._endTimers[r]){if(typeof l._endTimers[r]!="function")clearTimeout(l._endTimers[r]);else{var a=l._soundById(r);a&&a._node&&a._node.removeEventListener("ended",l._endTimers[r],!1)}delete l._endTimers[r]}return l},_soundById:function(r){for(var l=this,a=0;a<l._sounds.length;a++)if(r===l._sounds[a]._id)return l._sounds[a];return null},_inactiveSound:function(){var r=this;r._drain();for(var l=0;l<r._sounds.length;l++)if(r._sounds[l]._ended)return r._sounds[l].reset();return new n(r)},_drain:function(){var r=this,l=r._pool,a=0,f=0;if(!(r._sounds.length<l)){for(f=0;f<r._sounds.length;f++)r._sounds[f]._ended&&a++;for(f=r._sounds.length-1;f>=0;f--){if(a<=l)return;r._sounds[f]._ended&&(r._webAudio&&r._sounds[f]._node&&r._sounds[f]._node.disconnect(0),r._sounds.splice(f,1),a--)}}},_getSoundIds:function(r){var l=this;if(typeof r>"u"){for(var a=[],f=0;f<l._sounds.length;f++)a.push(l._sounds[f]._id);return a}else return[r]},_refreshBuffer:function(r){var l=this;return r._node.bufferSource=t.ctx.createBufferSource(),r._node.bufferSource.buffer=s[l._src],r._panner?r._node.bufferSource.connect(r._panner):r._node.bufferSource.connect(r._node),r._node.bufferSource.loop=r._loop,r._loop&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop||0),r._node.bufferSource.playbackRate.setValueAtTime(r._rate,t.ctx.currentTime),l},_cleanBuffer:function(r){var l=this,a=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&r.bufferSource&&(r.bufferSource.onended=null,r.bufferSource.disconnect(0),a))try{r.bufferSource.buffer=t._scratchBuffer}catch{}return r.bufferSource=null,l},_clearSound:function(r){var l=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);l||(r.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(r){this._parent=r,this.init()};n.prototype={init:function(){var r=this,l=r._parent;return r._muted=l._muted,r._loop=l._loop,r._volume=l._volume,r._rate=l._rate,r._seek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,l._sounds.push(r),r.create(),r},create:function(){var r=this,l=r._parent,a=t._muted||r._muted||r._parent._muted?0:r._volume;return l._webAudio?(r._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),r._node.gain.setValueAtTime(a,t.ctx.currentTime),r._node.paused=!0,r._node.connect(t.masterGain)):t.noAudio||(r._node=t._obtainHtml5Audio(),r._errorFn=r._errorListener.bind(r),r._node.addEventListener("error",r._errorFn,!1),r._loadFn=r._loadListener.bind(r),r._node.addEventListener(t._canPlayEvent,r._loadFn,!1),r._endFn=r._endListener.bind(r),r._node.addEventListener("ended",r._endFn,!1),r._node.src=l._src,r._node.preload=l._preload===!0?"auto":l._preload,r._node.volume=a*t.volume(),r._node.load()),r},reset:function(){var r=this,l=r._parent;return r._muted=l._muted,r._loop=l._loop,r._volume=l._volume,r._rate=l._rate,r._seek=0,r._rateSeek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,r},_errorListener:function(){var r=this;r._parent._emit("loaderror",r._id,r._node.error?r._node.error.code:0),r._node.removeEventListener("error",r._errorFn,!1)},_loadListener:function(){var r=this,l=r._parent;l._duration=Math.ceil(r._node.duration*10)/10,Object.keys(l._sprite).length===0&&(l._sprite={__default:[0,l._duration*1e3]}),l._state!=="loaded"&&(l._state="loaded",l._emit("load"),l._loadQueue()),r._node.removeEventListener(t._canPlayEvent,r._loadFn,!1)},_endListener:function(){var r=this,l=r._parent;l._duration===1/0&&(l._duration=Math.ceil(r._node.duration*10)/10,l._sprite.__default[1]===1/0&&(l._sprite.__default[1]=l._duration*1e3),l._ended(r)),r._node.removeEventListener("ended",r._endFn,!1)}};var s={},o=function(r){var l=r._src;if(s[l]){r._duration=s[l].duration,d(r);return}if(/^data:[^;]+;base64,/.test(l)){for(var a=atob(l.split(",")[1]),f=new Uint8Array(a.length),u=0;u<a.length;++u)f[u]=a.charCodeAt(u);c(f.buffer,r)}else{var m=new XMLHttpRequest;m.open(r._xhr.method,l,!0),m.withCredentials=r._xhr.withCredentials,m.responseType="arraybuffer",r._xhr.headers&&Object.keys(r._xhr.headers).forEach(function(v){m.setRequestHeader(v,r._xhr.headers[v])}),m.onload=function(){var v=(m.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){r._emit("loaderror",null,"Failed loading audio file with status: "+m.status+".");return}c(m.response,r)},m.onerror=function(){r._webAudio&&(r._html5=!0,r._webAudio=!1,r._sounds=[],delete s[l],r.load())},h(m)}},h=function(r){try{r.send()}catch{r.onerror()}},c=function(r,l){var a=function(){l._emit("loaderror",null,"Decoding audio data failed.")},f=function(u){u&&l._sounds.length>0?(s[l._src]=u,d(l,u)):a()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(r).then(f).catch(a):t.ctx.decodeAudioData(r,f,a)},d=function(r,l){l&&!r._duration&&(r._duration=l.duration),Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue())},p=function(){if(!!t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var r=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),l=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),a=l?parseInt(l[1],10):null;if(r&&a&&a<9){var f=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!f&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};g.Howler=t,g.Howl=i,typeof ci<"u"?(ci.HowlerGlobal=e,ci.Howler=t,ci.Howl=i,ci.Sound=n):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=i,window.Sound=n)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var n=i._howls.length-1;n>=0;n--)i._howls[n].stereo(t);return i},HowlerGlobal.prototype.pos=function(t,i,n){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(i=typeof i!="number"?s._pos[1]:i,n=typeof n!="number"?s._pos[2]:n,typeof t=="number")s._pos=[t,i,n],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,i,n,s,o,h){var c=this;if(!c.ctx||!c.ctx.listener)return c;var d=c._orientation;if(i=typeof i!="number"?d[1]:i,n=typeof n!="number"?d[2]:n,s=typeof s!="number"?d[3]:s,o=typeof o!="number"?d[4]:o,h=typeof h!="number"?d[5]:h,typeof t=="number")c._orientation=[t,i,n,s,o,h],typeof c.ctx.listener.forwardX<"u"?(c.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),c.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),c.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),c.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),c.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),c.ctx.listener.upZ.setTargetAtTime(h,Howler.ctx.currentTime,.1)):c.ctx.listener.setOrientation(t,i,n,s,o,h);else return d;return c},Howl.prototype.init=function(t){return function(i){var n=this;return n._orientation=i.orientation||[1,0,0],n._stereo=i.stereo||null,n._pos=i.pos||null,n._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},n._onstereo=i.onstereo?[{fn:i.onstereo}]:[],n._onpos=i.onpos?[{fn:i.onpos}]:[],n._onorientation=i.onorientation?[{fn:i.onorientation}]:[],t.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof t=="number")n._stereo=t,n._pos=[t,0,0];else return n._stereo;for(var o=n._getSoundIds(i),h=0;h<o.length;h++){var c=n._soundById(o[h]);if(c)if(typeof t=="number")c._stereo=t,c._pos=[t,0,0],c._node&&(c._pannerAttr.panningModel="equalpower",(!c._panner||!c._panner.pan)&&e(c,s),s==="spatial"?typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):c._panner.setPosition(t,0,0):c._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",c._id);else return c._stereo}return n},Howl.prototype.pos=function(t,i,n,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,i,n,s)}}),o;if(i=typeof i!="number"?0:i,n=typeof n!="number"?-.5:n,typeof s>"u")if(typeof t=="number")o._pos=[t,i,n];else return o._pos;for(var h=o._getSoundIds(s),c=0;c<h.length;c++){var d=o._soundById(h[c]);if(d)if(typeof t=="number")d._pos=[t,i,n],d._node&&((!d._panner||d._panner.pan)&&e(d,"spatial"),typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):d._panner.setPosition(t,i,n)),o._emit("pos",d._id);else return d._pos}return o},Howl.prototype.orientation=function(t,i,n,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,i,n,s)}}),o;if(i=typeof i!="number"?o._orientation[1]:i,n=typeof n!="number"?o._orientation[2]:n,typeof s>"u")if(typeof t=="number")o._orientation=[t,i,n];else return o._orientation;for(var h=o._getSoundIds(s),c=0;c<h.length;c++){var d=o._soundById(h[c]);if(d)if(typeof t=="number")d._orientation=[t,i,n],d._node&&(d._panner||(d._pos||(d._pos=o._pos||[0,0,-.5]),e(d,"spatial")),typeof d._panner.orientationX<"u"?(d._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):d._panner.setOrientation(t,i,n)),o._emit("orientation",d._id);else return d._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,i=arguments,n,s,o;if(!t._webAudio)return t;if(i.length===0)return t._pannerAttr;if(i.length===1)if(typeof i[0]=="object")n=i[0],typeof s>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),t._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(i[0],10)),o?o._pannerAttr:t._pannerAttr;else i.length===2&&(n=i[0],s=parseInt(i[1],10));for(var h=t._getSoundIds(s),c=0;c<h.length;c++)if(o=t._soundById(h[c]),o){var d=o._pannerAttr;d={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:d.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:d.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:d.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:d.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:d.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:d.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:d.panningModel};var p=o._panner;p?(p.coneInnerAngle=d.coneInnerAngle,p.coneOuterAngle=d.coneOuterAngle,p.coneOuterGain=d.coneOuterGain,p.distanceModel=d.distanceModel,p.maxDistance=d.maxDistance,p.refDistance=d.refDistance,p.rolloffFactor=d.rolloffFactor,p.panningModel=d.panningModel):(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var i=this,n=i._parent;i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,t.call(this),i._stereo?n.stereo(i._stereo):i._pos&&n.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var i=this,n=i._parent;return i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,i._stereo?n.stereo(i._stereo):i._pos?n.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,n._refreshBuffer(i)),t.call(this)}}(Sound.prototype.reset);var e=function(t,i){i=i||"spatial",i==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(Vs);function Nc(g,e,t){let i={},n,s,o,h,{playing:c=!1}=e,d=!1;Gt(()=>{});function p(v){d=!0,t(0,c=v),Vs.Howler.volume(.5)}function r(v){if(!i.scene){const _=new Vs.Howl({src:[`/sounds/${v}.mp3`],html5:!1,loop:!0,preload:!0});i[v]=_}}function l(v){o=v,r(o),s&&a(),n&&(n.fade(1,0,3e3),s=n),n=i[o],c&&(n.play(),n.fade(0,1,4e3)),clearTimeout(h),h=setTimeout(a,3e3)}function a(){s&&(s.pause(),s=null)}function f(){d=!0,c&&n.fade(0,1,2e3)}function u(){d&&(d=!1,c&&n.fade(1,0,2e3))}function m(){d&&(t(0,c=!c),c?n.play():n.pause())}return g.$$set=v=>{"playing"in v&&t(0,c=v.playing)},[c,p,l,f,u,m]}class Vc extends Pt{constructor(e){super(),At(this,e,Nc,null,vt,{playing:0,start:1,setScene:2,enable:3,disable:4,toggle:5})}get playing(){return this.$$.ctx[0]}set playing(e){this.$$set({playing:e}),Vi()}get start(){return this.$$.ctx[1]}get setScene(){return this.$$.ctx[2]}get enable(){return this.$$.ctx[3]}get disable(){return this.$$.ctx[4]}get toggle(){return this.$$.ctx[5]}}function ur(g){let e;const t=g[6].default,i=pr(t,g,g[9],null);return{c(){i&&i.c()},l(n){i&&i.l(n)},m(n,s){i&&i.m(n,s),e=!0},p(n,s){i&&i.p&&(!e||s&512)&&mr(i,t,n,n[9],e?vr(t,n[9],s,null):gr(n[9]),null)},i(n){e||(ae(i,n),e=!0)},o(n){ge(i,n),e=!1},d(n){i&&i.d(n)}}}function Uc(g){let e,t,i=g[0]&&ur(g);return{c(){i&&i.c(),e=Bt()},l(n){i&&i.l(n),e=Bt()},m(n,s){i&&i.m(n,s),pe(n,e,s),t=!0},p(n,s){n[0]?i?(i.p(n,s),s&1&&ae(i,1)):(i=ur(n),i.c(),ae(i,1),i.m(e.parentNode,e)):i&&(yt(),ge(i,1,1,()=>{i=null}),bt())},i(n){t||(ae(i),t=!0)},o(n){ge(i),t=!1},d(n){i&&i.d(n),n&&H(e)}}}function jc(g){let e,t,i,n,s,o,h,c,d,p,r,l;e=new zc({props:{loaderShown:!g[0],$$slots:{default:[Uc]},$$scope:{ctx:g}}}),s=new Bl({props:{loadProgress:g[3],sceneProgress:g[4]}}),s.$on("continue",g[5]);let a={};h=new Kl({props:a}),g[7](h);let f={};return d=new Vc({props:f}),g[8](d),r=new Fc({}),{c(){ot(e.$$.fragment),t=ce(),i=$("canvas"),n=ce(),ot(s.$$.fragment),o=ce(),ot(h.$$.fragment),c=ce(),ot(d.$$.fragment),p=ce(),ot(r.$$.fragment),this.h()},l(u){at(e.$$.fragment,u),t=he(u),i=Z(u,"CANVAS",{id:!0,"aria-hidden":!0,class:!0}),Q(i).forEach(H),n=he(u),at(s.$$.fragment,u),o=he(u),at(h.$$.fragment,u),c=he(u),at(d.$$.fragment,u),p=he(u),at(r.$$.fragment,u),this.h()},h(){k(i,"id","textureSrc"),k(i,"aria-hidden","true"),k(i,"class","svelte-1vhwcbo")},m(u,m){lt(e,u,m),pe(u,t,m),pe(u,i,m),pe(u,n,m),lt(s,u,m),pe(u,o,m),lt(h,u,m),pe(u,c,m),lt(d,u,m),pe(u,p,m),lt(r,u,m),l=!0},p(u,[m]){const v={};m&1&&(v.loaderShown=!u[0]),m&513&&(v.$$scope={dirty:m,ctx:u}),e.$set(v);const _={};m&8&&(_.loadProgress=u[3]),m&16&&(_.sceneProgress=u[4]),s.$set(_);const S={};h.$set(S);const w={};d.$set(w)},i(u){l||(ae(e.$$.fragment,u),ae(s.$$.fragment,u),ae(h.$$.fragment,u),ae(d.$$.fragment,u),ae(r.$$.fragment,u),l=!0)},o(u){ge(e.$$.fragment,u),ge(s.$$.fragment,u),ge(h.$$.fragment,u),ge(d.$$.fragment,u),ge(r.$$.fragment,u),l=!1},d(u){ct(e,u),u&&H(t),u&&H(i),u&&H(n),ct(s,u),u&&H(o),g[7](null),ct(h,u),u&&H(c),g[8](null),ct(d,u),u&&H(p),ct(r,u)}}}function Gc(g,e,t){let i,n,s,o,h;Ze(g,Wi,y=>t(10,i=y)),Ze(g,na,y=>t(11,n=y)),Ze(g,Gi,y=>t(12,s=y)),Ze(g,ra,y=>t(13,o=y)),Ze(g,sa,y=>t(14,h=y));let{$$slots:c={},$$scope:d}=e;C.config({nullTargetWarn:!1}),Gi.set(new ca(!0));let p=!1,r,l,a=0,f=-1;Gt(()=>{u()});function u(){h(),o(),C.registerPlugin(Ds.exports.MotionPathPlugin),la.polyfill(),s.init(),Gs.set(l),Wi.set(new Il(document.querySelector("#three"),s,l,!1,!1)),Di.set(r),setTimeout(m,2e3)}function m(){i.init(v,_,r,n)}function v(y,b,M){t(3,a=b/M)}function _(y,b){t(4,f=y)}function S(){i.enable(),t(0,p=!0)}function w(y){xt[y?"unshift":"push"](()=>{r=y,t(1,r)})}function x(y){xt[y?"unshift":"push"](()=>{l=y,t(2,l)})}return g.$$set=y=>{"$$scope"in y&&t(9,d=y.$$scope)},[p,r,l,a,f,S,c,w,x,d]}class eh extends Pt{constructor(e){super(),At(this,e,Gc,jc,vt,{})}}export{eh as default};
