(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4376],{11249:function(t,e,r){t=r.nmd(t);var n=Object.create,o=Object.defineProperty,i=Object.defineProperties,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,h=(t,e,r)=>e in t?o(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p=(t,e)=>{for(var r in e||(e={}))f.call(e,r)&&h(t,r,e[r]);if(c)for(var r of c(e))d.call(e,r)&&h(t,r,e[r]);return t},v=(t,e)=>i(t,s(e)),g=t=>o(t,"__esModule",{value:!0}),y=(t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports},b=(t,e)=>{for(var r in g(t),e)o(t,r,{get:e[r],enumerable:!0})},_=t=>((t,e,r)=>{if(e&&"object"===typeof e||"function"===typeof e)for(let n of u(e))f.call(t,n)||"default"===n||o(t,n,{get:()=>e[n],enumerable:!(r=a(e,n))||r.enumerable});return t})(g(o(null!=t?n(l(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),m=(t,e,r)=>(h(t,"symbol"!==typeof e?e+"":e,r),r),w=y({"../node_modules/timing-function/lib/UnitBezier.js"(t,e){e.exports=function(){function t(t,e,r,n){this.set(t,e,r,n)}return t.prototype.set=function(t,e,r,n){this._cx=3*t,this._bx=3*(r-t)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*e,this._by=3*(n-e)-this._cy,this._ay=1-this._cy-this._by},t.epsilon=1e-6,t.prototype._sampleCurveX=function(t){return((this._ax*t+this._bx)*t+this._cx)*t},t.prototype._sampleCurveY=function(t){return((this._ay*t+this._by)*t+this._cy)*t},t.prototype._sampleCurveDerivativeX=function(t){return(3*this._ax*t+2*this._bx)*t+this._cx},t.prototype._solveCurveX=function(t,e){var r,n,o,i,a,s;for(o=void 0,i=void 0,a=void 0,s=void 0,r=void 0,n=void 0,a=t,n=0;n<8;){if(s=this._sampleCurveX(a)-t,Math.abs(s)<e)return a;if(r=this._sampleCurveDerivativeX(a),Math.abs(r)<e)break;a-=s/r,n++}if((a=t)<(o=0))return o;if(a>(i=1))return i;for(;o<i;){if(s=this._sampleCurveX(a),Math.abs(s-t)<e)return a;t>s?o=a:i=a,a=.5*(i-o)+o}return a},t.prototype.solve=function(t,e){return this._sampleCurveY(this._solveCurveX(t,e))},t.prototype.solveSimple=function(t){return this._sampleCurveY(this._solveCurveX(t,1e-6))},t}()}}),j=y({"../node_modules/levenshtein-edit-distance/index.js"(t,e){var r,n;r=[],n=[],e.exports=function(t,e,o){var i,a,s,u,c,l,f,d;if(t===e)return 0;if(i=t.length,a=e.length,0===i)return a;if(0===a)return i;for(o&&(t=t.toLowerCase(),e=e.toLowerCase()),f=0;f<i;)n[f]=t.charCodeAt(f),r[f]=++f;for(d=0;d<a;)for(s=e.charCodeAt(d),u=c=d++,f=-1;++f<i;)l=s===n[f]?c:c+1,c=r[f],r[f]=u=c>u?l>u?u+1:l:l>c?c+1:l;return u}}}),P=y({"../node_modules/propose/propose.js"(t,e){var r=j();e.exports=function(){var t,e,n,o,i,a=0,s=arguments[0],u=arguments[1],c=u.length,l=arguments[2];l&&(o=l.threshold,i=l.ignoreCase),void 0===o&&(o=0);for(var f=0;f<c;++f)(t=(e=i?r(s,u[f],!0):r(s,u[f]))>s.length?1-e/u[f].length:1-e/s.length)>a&&(a=t,n=u[f]);return a>=o?n:null}}}),O=y({"../node_modules/fast-deep-equal/index.js"(t,e){"use strict";e.exports=function t(e,r){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(e.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(e)){if((n=e.length)!=r.length)return!1;for(o=n;0!==o--;)if(!t(e[o],r[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(o=n;0!==o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!==o--;){var a=i[o];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}}});b(e,{getProject:()=>es,notify:()=>vi,onChange:()=>ns,types:()=>mi,val:()=>os});var S={};b(S,{getProject:()=>es,notify:()=>vi,onChange:()=>ns,types:()=>mi,val:()=>os});var T=_(r(35298)),D=new class{constructor(){m(this,"atom",new T.Atom({projects:{}}))}add(t,e){this.atom.reduceState(["projects",t],(()=>e))}get(t){return this.atom.getState().projects[t]}has(t){return!!this.get(t)}},A=new WeakMap;function k(t){return A.get(t)}function C(t,e){A.set(t,e)}var x=[],I=Array.isArray,E="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,R="object"==typeof self&&self&&self.Object===Object&&self,B=E||R||Function("return this")(),M=B.Symbol,V=Object.prototype,N=V.hasOwnProperty,z=V.toString,F=M?M.toStringTag:void 0;var $=function(t){var e=N.call(t,F),r=t[F];try{t[F]=void 0;var n=!0}catch(i){}var o=z.call(t);return n&&(e?t[F]=r:delete t[F]),o},U=Object.prototype.toString;var L=function(t){return U.call(t)},q=M?M.toStringTag:void 0;var W=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":q&&q in Object(t)?$(t):L(t)};var G=function(t){return null!=t&&"object"==typeof t};var K=function(t){return"symbol"==typeof t||G(t)&&"[object Symbol]"==W(t)},H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/;var X=function(t,e){if(I(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!K(t))||(J.test(t)||!H.test(t)||null!=e&&t in Object(e))};var Y=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var Q=function(t){if(!Y(t))return!1;var e=W(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Z=B["__core-js_shared__"],tt=function(){var t=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var et=function(t){return!!tt&&tt in t},rt=Function.prototype.toString;var nt=function(t){if(null!=t){try{return rt.call(t)}catch(e){}try{return t+""}catch(e){}}return""},ot=/^\[object .+?Constructor\]$/,it=Function.prototype,at=Object.prototype,st=it.toString,ut=at.hasOwnProperty,ct=RegExp("^"+st.call(ut).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var lt=function(t){return!(!Y(t)||et(t))&&(Q(t)?ct:ot).test(nt(t))};var ft=function(t,e){return null==t?void 0:t[e]};var dt=function(t,e){var r=ft(t,e);return lt(r)?r:void 0},ht=dt(Object,"create");var pt=function(){this.__data__=ht?ht(null):{},this.size=0};var vt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},gt=Object.prototype.hasOwnProperty;var yt=function(t){var e=this.__data__;if(ht){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return gt.call(e,t)?e[t]:void 0},bt=Object.prototype.hasOwnProperty;var _t=function(t){var e=this.__data__;return ht?void 0!==e[t]:bt.call(e,t)};var mt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ht&&void 0===e?"__lodash_hash_undefined__":e,this};function wt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}wt.prototype.clear=pt,wt.prototype.delete=vt,wt.prototype.get=yt,wt.prototype.has=_t,wt.prototype.set=mt;var jt=wt;var Pt=function(){this.__data__=[],this.size=0};var Ot=function(t,e){return t===e||t!==t&&e!==e};var St=function(t,e){for(var r=t.length;r--;)if(Ot(t[r][0],e))return r;return-1},Tt=Array.prototype.splice;var Dt=function(t){var e=this.__data__,r=St(e,t);return!(r<0)&&(r==e.length-1?e.pop():Tt.call(e,r,1),--this.size,!0)};var At=function(t){var e=this.__data__,r=St(e,t);return r<0?void 0:e[r][1]};var kt=function(t){return St(this.__data__,t)>-1};var Ct=function(t,e){var r=this.__data__,n=St(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function xt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}xt.prototype.clear=Pt,xt.prototype.delete=Dt,xt.prototype.get=At,xt.prototype.has=kt,xt.prototype.set=Ct;var It=xt,Et=dt(B,"Map");var Rt=function(){this.size=0,this.__data__={hash:new jt,map:new(Et||It),string:new jt}};var Bt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Mt=function(t,e){var r=t.__data__;return Bt(e)?r["string"==typeof e?"string":"hash"]:r.map};var Vt=function(t){var e=Mt(this,t).delete(t);return this.size-=e?1:0,e};var Nt=function(t){return Mt(this,t).get(t)};var zt=function(t){return Mt(this,t).has(t)};var Ft=function(t,e){var r=Mt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function $t(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}$t.prototype.clear=Rt,$t.prototype.delete=Vt,$t.prototype.get=Nt,$t.prototype.has=zt,$t.prototype.set=Ft;var Ut=$t;function Lt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Lt.Cache||Ut),r}Lt.Cache=Ut;var qt=Lt;var Wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gt=/\\(\\)?/g,Kt=function(t){var e=qt(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Wt,(function(t,r,n,o){e.push(n?o.replace(Gt,"$1"):r||t)})),e}));var Ht=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},Jt=M?M.prototype:void 0,Xt=Jt?Jt.toString:void 0;var Yt=function t(e){if("string"==typeof e)return e;if(I(e))return Ht(e,t)+"";if(K(e))return Xt?Xt.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r};var Qt=function(t){return null==t?"":Yt(t)};var Zt=function(t,e){return I(t)?t:X(t,e)?[t]:Kt(Qt(t))};var te=function(t){if("string"==typeof t||K(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var ee=function(t,e){for(var r=0,n=(e=Zt(e,t)).length;null!=t&&r<n;)t=t[te(e[r++])];return r&&r==n?t:void 0};var re=function(t,e,r){var n=null==t?void 0:ee(t,e);return void 0===n?r:n};var ne=class{constructor(){m(this,"_values",{})}get(t,e){if(this.has(t))return this._values[t];{const r=e();return this._values[t]=r,r}}has(t){return this._values.hasOwnProperty(t)}},oe=_(r(35298)),ie=function(){try{var t=dt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();var ae=function(t,e,r){"__proto__"==e&&ie?ie(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},se=Object.prototype.hasOwnProperty;var ue=function(t,e,r){var n=t[e];se.call(t,e)&&Ot(n,r)&&(void 0!==r||e in t)||ae(t,e,r)},ce=/^(?:0|[1-9]\d*)$/;var le=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&ce.test(t))&&t>-1&&t%1==0&&t<e};var fe=function(t,e,r,n){if(!Y(t))return t;for(var o=-1,i=(e=Zt(e,t)).length,a=i-1,s=t;null!=s&&++o<i;){var u=te(e[o]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var l=s[u];void 0===(c=n?n(l,u,s):void 0)&&(c=Y(l)?l:le(e[o+1])?[]:{})}ue(s,u,c),s=s[u]}return t};var de=function(t,e,r){return null==t?t:fe(t,e,r)},he=new WeakMap;function pe(t){if(he.has(t))return he.get(t);const e="compound"===t.type?function(t){const e={};for(const[r,n]of Object.entries(t.props))e[r]=pe(n);return e}(t):"enum"===t.type?function(t){const e={$case:t.defaultCase};for(const[r,n]of Object.entries(t.cases))e[r]=pe(n);return e}(t):t.default;return he.set(t,e),e}var ve=_(r(35298)),ge=_(w());function ye(t,e,r){return(0,ve.prism)((()=>{const n=(0,ve.val)(e),o=ve.prism.memo("driver",(()=>n?"BasicKeyframedTrack"===n.type?function(t,e,r){return(0,ve.prism)((()=>{let t=ve.prism.ref("state",{started:!1}),n=t.current;const o=r.getValue();return(!n.started||o<n.validFrom||n.validTo<=o)&&(t.current=n=function(t,e,r){const n=e.getValue();if(0===r.keyframes.length)return{started:!0,validFrom:-1/0,validTo:1/0,der:be};let o=0;for(;;){const t=r.keyframes[o];if(!t)return _e.error;const i=o===r.keyframes.length-1;if(n<t.position)return 0===o?_e.beforeFirstKeyframe(t):_e.error;if(t.position===n)return i?_e.lastKeyframe(t):_e.between(t,r.keyframes[o+1],e);if(o===r.keyframes.length-1)return _e.lastKeyframe(t);{const i=o+1;if(r.keyframes[i].position<=n){o=i;continue}return _e.between(t,r.keyframes[o+1],e)}}}(0,r,e)),n.der.getValue()}))}(0,n,r):(t.logger.error("Track type not yet supported."),new ve.ConstantDerivation(void 0)):new ve.ConstantDerivation(void 0)),[n]);return o.getValue()}))}var be=new ve.ConstantDerivation(void 0);var _e={beforeFirstKeyframe:t=>({started:!0,validFrom:-1/0,validTo:t.position,der:new ve.ConstantDerivation({left:t.value,progression:0})}),lastKeyframe:t=>({started:!0,validFrom:t.position,validTo:1/0,der:new ve.ConstantDerivation({left:t.value,progression:0})}),between(t,e,r){if(!t.connectedRight)return{started:!0,validFrom:t.position,validTo:e.position,der:new ve.ConstantDerivation({left:t.value,progression:0})};const n=r=>(r-t.position)/(e.position-t.position);if(!t.type||"bezier"===t.type){const o=new ge.default(t.handles[2],t.handles[3],e.handles[0],e.handles[1]),i=(0,ve.prism)((()=>{const i=n(r.getValue()),a=o.solveSimple(i);return{left:t.value,right:e.value,progression:a}}));return{started:!0,validFrom:t.position,validTo:e.position,der:i}}const o=(0,ve.prism)((()=>{const o=n(r.getValue()),i=Math.floor(o);return{left:t.value,right:e.value,progression:i}}));return{started:!0,validFrom:t.position,validTo:e.position,der:o}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:be}};function me(t,e,r){const n=r.get(t);if(n&&n.override===e)return n.merged;const o=p({},t);for(const i of Object.keys(e)){const n=e[i],a=t[i];o[i]="object"===typeof n&&"object"===typeof a?me(a,n,r):void 0===n?a:n}return r.set(t,{override:e,merged:o}),o}function we(t,e){let r=t;for(const n of e)r=r[n];return r}var je=_(r(35298)),Pe=_(r(35298)),Oe=_(r(35298)).Ticker.raf,Se=_(r(35298)),Te=/\s/;var De=function(t){for(var e=t.length;e--&&Te.test(t.charAt(e)););return e},Ae=/^\s+/;var ke=function(t){return t?t.slice(0,De(t)+1).replace(Ae,""):t},Ce=/^[-+]0x[0-9a-f]+$/i,xe=/^0b[01]+$/i,Ie=/^0o[0-7]+$/i,Ee=parseInt;var Re=function(t){if("number"==typeof t)return t;if(K(t))return NaN;if(Y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=ke(t);var r=xe.test(t);return r||Ie.test(t)?Ee(t.slice(2),r?2:8):Ce.test(t)?NaN:+t},Be=1/0;var Me=function(t){return t?(t=Re(t))===Be||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0};var Ve=function(t){var e=Me(t),r=e%1;return e===e?r?e-r:e:0};var Ne=function(t){return t},ze=dt(B,"WeakMap");var Fe=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var $e=function(t){return null!=t&&Fe(t.length)&&!Q(t)},Ue=Object.prototype;var Le=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ue)};var qe=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var We=function(t){return G(t)&&"[object Arguments]"==W(t)},Ge=Object.prototype,Ke=Ge.hasOwnProperty,He=Ge.propertyIsEnumerable,Je=We(function(){return arguments}())?We:function(t){return G(t)&&Ke.call(t,"callee")&&!He.call(t,"callee")},Xe=Je;var Ye=function(){return!1},Qe=e&&!e.nodeType&&e,Ze=Qe&&t&&!t.nodeType&&t,tr=Ze&&Ze.exports===Qe?B.Buffer:void 0,er=(tr?tr.isBuffer:void 0)||Ye,rr={};rr["[object Float32Array]"]=rr["[object Float64Array]"]=rr["[object Int8Array]"]=rr["[object Int16Array]"]=rr["[object Int32Array]"]=rr["[object Uint8Array]"]=rr["[object Uint8ClampedArray]"]=rr["[object Uint16Array]"]=rr["[object Uint32Array]"]=!0,rr["[object Arguments]"]=rr["[object Array]"]=rr["[object ArrayBuffer]"]=rr["[object Boolean]"]=rr["[object DataView]"]=rr["[object Date]"]=rr["[object Error]"]=rr["[object Function]"]=rr["[object Map]"]=rr["[object Number]"]=rr["[object Object]"]=rr["[object RegExp]"]=rr["[object Set]"]=rr["[object String]"]=rr["[object WeakMap]"]=!1;var nr=function(t){return G(t)&&Fe(t.length)&&!!rr[W(t)]};var or=function(t){return function(e){return t(e)}},ir=e&&!e.nodeType&&e,ar=ir&&t&&!t.nodeType&&t,sr=ar&&ar.exports===ir&&E.process,ur=function(){try{var t=ar&&ar.require&&ar.require("util").types;return t||sr&&sr.binding&&sr.binding("util")}catch(e){}}(),cr=ur&&ur.isTypedArray,lr=cr?or(cr):nr,fr=Object.prototype.hasOwnProperty;var dr=function(t,e){var r=I(t),n=!r&&Xe(t),o=!r&&!n&&er(t),i=!r&&!n&&!o&&lr(t),a=r||n||o||i,s=a?qe(t.length,String):[],u=s.length;for(var c in t)!e&&!fr.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||le(c,u))||s.push(c);return s};var hr=function(t,e){return function(r){return t(e(r))}},pr=hr(Object.keys,Object),vr=Object.prototype.hasOwnProperty;var gr=function(t){if(!Le(t))return pr(t);var e=[];for(var r in Object(t))vr.call(t,r)&&"constructor"!=r&&e.push(r);return e};var yr=function(t){return $e(t)?dr(t):gr(t)};var br=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},_r=hr(Object.getPrototypeOf,Object),mr=Function.prototype,wr=Object.prototype,jr=mr.toString,Pr=wr.hasOwnProperty,Or=jr.call(Object);var Sr=function(t){if(!G(t)||"[object Object]"!=W(t))return!1;var e=_r(t);if(null===e)return!0;var r=Pr.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&jr.call(r)==Or};var Tr=function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i};var Dr=function(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:Tr(t,e,r)},Ar=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var kr=function(t){return Ar.test(t)};var Cr=function(t){return t.split("")},xr="[\\ud800-\\udfff]",Ir="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Er="\\ud83c[\\udffb-\\udfff]",Rr="[^\\ud800-\\udfff]",Br="(?:\\ud83c[\\udde6-\\uddff]){2}",Mr="[\\ud800-\\udbff][\\udc00-\\udfff]",Vr="(?:"+Ir+"|"+Er+")"+"?",Nr="[\\ufe0e\\ufe0f]?",zr=Nr+Vr+("(?:\\u200d(?:"+[Rr,Br,Mr].join("|")+")"+Nr+Vr+")*"),Fr="(?:"+[Rr+Ir+"?",Ir,Br,Mr,xr].join("|")+")",$r=RegExp(Er+"(?="+Er+")|"+Fr+zr,"g");var Ur=function(t){return t.match($r)||[]};var Lr=function(t){return kr(t)?Ur(t):Cr(t)};var qr=function(t,e,r){return t===t&&(void 0!==r&&(t=t<=r?t:r),void 0!==e&&(t=t>=e?t:e)),t};var Wr=function(t,e,r){return void 0===r&&(r=e,e=void 0),void 0!==r&&(r=(r=Re(r))===r?r:0),void 0!==e&&(e=(e=Re(e))===e?e:0),qr(Re(t),e,r)};var Gr=function(){this.__data__=new It,this.size=0};var Kr=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var Hr=function(t){return this.__data__.get(t)};var Jr=function(t){return this.__data__.has(t)};var Xr=function(t,e){var r=this.__data__;if(r instanceof It){var n=r.__data__;if(!Et||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ut(n)}return r.set(t,e),this.size=r.size,this};function Yr(t){var e=this.__data__=new It(t);this.size=e.size}Yr.prototype.clear=Gr,Yr.prototype.delete=Kr,Yr.prototype.get=Hr,Yr.prototype.has=Jr,Yr.prototype.set=Xr;var Qr=Yr;var Zr=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i};var tn=function(){return[]},en=Object.prototype.propertyIsEnumerable,rn=Object.getOwnPropertySymbols,nn=rn?function(t){return null==t?[]:(t=Object(t),Zr(rn(t),(function(e){return en.call(t,e)})))}:tn;var on=function(t,e,r){var n=e(t);return I(t)?n:br(n,r(t))};var an=function(t){return on(t,yr,nn)},sn=dt(B,"DataView"),un=dt(B,"Promise"),cn=dt(B,"Set"),ln="[object Map]",fn="[object Promise]",dn="[object Set]",hn="[object WeakMap]",pn="[object DataView]",vn=nt(sn),gn=nt(Et),yn=nt(un),bn=nt(cn),_n=nt(ze),mn=W;(sn&&mn(new sn(new ArrayBuffer(1)))!=pn||Et&&mn(new Et)!=ln||un&&mn(un.resolve())!=fn||cn&&mn(new cn)!=dn||ze&&mn(new ze)!=hn)&&(mn=function(t){var e=W(t),r="[object Object]"==e?t.constructor:void 0,n=r?nt(r):"";if(n)switch(n){case vn:return pn;case gn:return ln;case yn:return fn;case bn:return dn;case _n:return hn}return e});var wn=mn,jn=B.Uint8Array;var Pn=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var On=function(t){return this.__data__.has(t)};function Sn(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Ut;++e<r;)this.add(t[e])}Sn.prototype.add=Sn.prototype.push=Pn,Sn.prototype.has=On;var Tn=Sn;var Dn=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var An=function(t,e){return t.has(e)};var kn=function(t,e,r,n,o,i){var a=1&r,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(t),l=i.get(e);if(c&&l)return c==e&&l==t;var f=-1,d=!0,h=2&r?new Tn:void 0;for(i.set(t,e),i.set(e,t);++f<s;){var p=t[f],v=e[f];if(n)var g=a?n(v,p,f,e,t,i):n(p,v,f,t,e,i);if(void 0!==g){if(g)continue;d=!1;break}if(h){if(!Dn(e,(function(t,e){if(!An(h,e)&&(p===t||o(p,t,r,n,i)))return h.push(e)}))){d=!1;break}}else if(p!==v&&!o(p,v,r,n,i)){d=!1;break}}return i.delete(t),i.delete(e),d};var Cn=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r};var xn=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},In=M?M.prototype:void 0,En=In?In.valueOf:void 0;var Rn=function(t,e,r,n,o,i,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new jn(t),new jn(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ot(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Cn;case"[object Set]":var u=1&n;if(s||(s=xn),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;n|=2,a.set(t,e);var l=kn(s(t),s(e),n,o,i,a);return a.delete(t),l;case"[object Symbol]":if(En)return En.call(t)==En.call(e)}return!1},Bn=Object.prototype.hasOwnProperty;var Mn=function(t,e,r,n,o,i){var a=1&r,s=an(t),u=s.length;if(u!=an(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:Bn.call(e,l)))return!1}var f=i.get(t),d=i.get(e);if(f&&d)return f==e&&d==t;var h=!0;i.set(t,e),i.set(e,t);for(var p=a;++c<u;){var v=t[l=s[c]],g=e[l];if(n)var y=a?n(g,v,l,e,t,i):n(v,g,l,t,e,i);if(!(void 0===y?v===g||o(v,g,r,n,i):y)){h=!1;break}p||(p="constructor"==l)}if(h&&!p){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(h=!1)}return i.delete(t),i.delete(e),h},Vn="[object Arguments]",Nn="[object Array]",zn="[object Object]",Fn=Object.prototype.hasOwnProperty;var $n=function(t,e,r,n,o,i){var a=I(t),s=I(e),u=a?Nn:wn(t),c=s?Nn:wn(e),l=(u=u==Vn?zn:u)==zn,f=(c=c==Vn?zn:c)==zn,d=u==c;if(d&&er(t)){if(!er(e))return!1;a=!0,l=!1}if(d&&!l)return i||(i=new Qr),a||lr(t)?kn(t,e,r,n,o,i):Rn(t,e,u,r,n,o,i);if(!(1&r)){var h=l&&Fn.call(t,"__wrapped__"),p=f&&Fn.call(e,"__wrapped__");if(h||p){var v=h?t.value():t,g=p?e.value():e;return i||(i=new Qr),o(v,g,r,n,i)}}return!!d&&(i||(i=new Qr),Mn(t,e,r,n,o,i))};var Un=function t(e,r,n,o,i){return e===r||(null==e||null==r||!G(e)&&!G(r)?e!==e&&r!==r:$n(e,r,n,o,t,i))};var Ln=function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var s=r[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){var u=(s=r[o])[0],c=t[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var f=new Qr;if(n)var d=n(c,l,u,t,e,f);if(!(void 0===d?Un(l,c,3,n,f):d))return!1}}return!0};var qn=function(t){return t===t&&!Y(t)};var Wn=function(t){for(var e=yr(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,qn(o)]}return e};var Gn=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}};var Kn=function(t){var e=Wn(t);return 1==e.length&&e[0][2]?Gn(e[0][0],e[0][1]):function(r){return r===t||Ln(r,t,e)}};var Hn=function(t,e){return null!=t&&e in Object(t)};var Jn=function(t,e,r){for(var n=-1,o=(e=Zt(e,t)).length,i=!1;++n<o;){var a=te(e[n]);if(!(i=null!=t&&r(t,a)))break;t=t[a]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&Fe(o)&&le(a,o)&&(I(t)||Xe(t))};var Xn=function(t,e){return null!=t&&Jn(t,e,Hn)};var Yn=function(t,e){return X(t)&&qn(e)?Gn(te(t),e):function(r){var n=re(r,t);return void 0===n&&n===e?Xn(r,t):Un(e,n,3)}};var Qn=function(t){return function(e){return null==e?void 0:e[t]}};var Zn=function(t){return function(e){return ee(e,t)}};var to=function(t){return X(t)?Qn(te(t)):Zn(t)};var eo=function(t){return"function"==typeof t?t:null==t?Ne:"object"==typeof t?I(t)?Yn(t[0],t[1]):Kn(t):to(t)};var ro=function(t){return function(e,r,n){for(var o=-1,i=Object(e),a=n(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===r(i[u],u,i))break}return e}}();var no=function(t,e){return t&&ro(t,e,yr)},oo=function(){return B.Date.now()},io=Math.max,ao=Math.min;var so=function(t,e,r){var n,o,i,a,s,u,c=0,l=!1,f=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var r=n,i=o;return n=o=void 0,c=e,a=t.apply(i,r)}function p(t){return c=t,s=setTimeout(g,e),l?h(t):a}function v(t){var r=t-u;return void 0===u||r>=e||r<0||f&&t-c>=i}function g(){var t=oo();if(v(t))return y(t);s=setTimeout(g,function(t){var r=e-(t-u);return f?ao(r,i-(t-c)):r}(t))}function y(t){return s=void 0,d&&n?h(t):(n=o=void 0,a)}function b(){var t=oo(),r=v(t);if(n=arguments,o=this,u=t,r){if(void 0===s)return p(u);if(f)return clearTimeout(s),s=setTimeout(g,e),h(u)}return void 0===s&&(s=setTimeout(g,e)),a}return e=Re(e)||0,Y(r)&&(l=!!r.leading,i=(f="maxWait"in r)?io(Re(r.maxWait)||0,e):i,d="trailing"in r?!!r.trailing:d),b.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=u=o=s=void 0},b.flush=function(){return void 0===s?a:y(oo())},b};var uo=function(t){return"number"==typeof t&&t==Ve(t)};var co=function(t,e){var r={};return e=eo(e,3),no(t,(function(t,n,o){ae(r,n,e(t,n,o))})),r},lo=Math.floor;var fo=function(t,e){var r="";if(!t||e<1||e>9007199254740991)return r;do{e%2&&(r+=t),(e=lo(e/2))&&(t+=t)}while(e);return r},ho=Qn("length"),po="[\\ud800-\\udfff]",vo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",go="\\ud83c[\\udffb-\\udfff]",yo="[^\\ud800-\\udfff]",bo="(?:\\ud83c[\\udde6-\\uddff]){2}",_o="[\\ud800-\\udbff][\\udc00-\\udfff]",mo="(?:"+vo+"|"+go+")"+"?",wo="[\\ufe0e\\ufe0f]?",jo=wo+mo+("(?:\\u200d(?:"+[yo,bo,_o].join("|")+")"+wo+mo+")*"),Po="(?:"+[yo+vo+"?",vo,bo,_o,po].join("|")+")",Oo=RegExp(go+"(?="+go+")|"+Po+jo,"g");var So=function(t){for(var e=Oo.lastIndex=0;Oo.test(t);)++e;return e};var To=function(t){return kr(t)?So(t):ho(t)},Do=Math.ceil;var Ao=function(t,e){var r=(e=void 0===e?" ":Yt(e)).length;if(r<2)return r?fo(e,t):e;var n=fo(e,Do(t/To(e)));return kr(e)?Dr(Lr(n),0,t).join(""):n.slice(0,t)};var ko=function(t,e,r){t=Qt(t);var n=(e=Ve(e))?To(t):0;return e&&n<e?Ao(e-n,r)+t:t};function Co(t){return"compound"===t.type||"enum"===t.type}function xo(t,e){if(!t)return;const[r,...n]=e;if(void 0===r)return t;if(!Co(t))return;return xo("enum"===t.type?t.cases[r]:t.props[r],n)}var Io,Eo,Ro,Bo,Mo,Vo,No,zo;new WeakMap;function Fo(t){return function(e,r){return t(e,r())}}(Eo=Io||(Io={}))[Eo.GENERAL=1]="GENERAL",Eo[Eo.TODO=2]="TODO",Eo[Eo.TROUBLESHOOTING=4]="TROUBLESHOOTING",(Bo=Ro||(Ro={}))[Bo.INTERNAL=8]="INTERNAL",Bo[Bo.DEV=16]="DEV",Bo[Bo.PUBLIC=32]="PUBLIC",(Vo=Mo||(Mo={}))[Vo.TRACE=64]="TRACE",Vo[Vo.DEBUG=128]="DEBUG",Vo[Vo.WARN=256]="WARN",Vo[Vo.ERROR=512]="ERROR",(zo=No||(No={}))[zo.ERROR_PUBLIC=545]="ERROR_PUBLIC",zo[zo.ERROR_DEV=529]="ERROR_DEV",zo[zo._HMM=524]="_HMM",zo[zo._TODO=522]="_TODO",zo[zo._ERROR=521]="_ERROR",zo[zo.WARN_PUBLIC=289]="WARN_PUBLIC",zo[zo.WARN_DEV=273]="WARN_DEV",zo[zo._KAPOW=268]="_KAPOW",zo[zo._WARN=265]="_WARN",zo[zo.DEBUG_DEV=145]="DEBUG_DEV",zo[zo._DEBUG=137]="_DEBUG",zo[zo.TRACE_DEV=81]="TRACE_DEV",zo[zo._TRACE=73]="_TRACE";var $o={_hmm:Uo(524),_todo:Uo(522),_error:Uo(521),errorDev:Uo(529),errorPublic:Uo(545),_kapow:Uo(268),_warn:Uo(265),warnDev:Uo(273),warnPublic:Uo(289),_debug:Uo(137),debugDev:Uo(145),_trace:Uo(73),traceDev:Uo(81)};function Uo(t){return Object.freeze({audience:Lo(t,8)?"internal":Lo(t,16)?"dev":"public",category:Lo(t,4)?"troubleshooting":Lo(t,2)?"todo":"general",level:Lo(t,512)?512:Lo(t,256)?256:Lo(t,128)?128:64})}function Lo(t,e){return(t&e)===e}function qo(t,e){return(32===(32&e)||(16===(16&e)?t.dev:8===(8&e)&&t.internal))&&t.min<=e}var Wo={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(t,e,r){return this.create({names:[...t.names,{name:e,key:r}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(t){if(t.length<5)return t;const e=t.replace(this.collapseOnRE,"");return this.cssMemo.has(e)||this.cssMemo.set(e,this.css(t)),e},css(t){var e,r,n,o;const i=this.cssMemo.get(t);if(i)return i;let a=`color:${null!=(r=null==(e=this.color)?void 0:e.call(this,t))?r:`hsl(${(t.charCodeAt(0)+t.charCodeAt(t.length-1))%360}, 100%, 60%)`}`;return(null==(n=this.bold)?void 0:n.test(t))&&(a+=";font-weight:600"),(null==(o=this.italic)?void 0:o.test(t))&&(a+=";font-style:italic"),this.cssMemo.set(t,a),a}}};function Go(t=console,e={}){const r=v(p({},Wo),{includes:p({},Wo.includes)}),n={styled:Jo.bind(r,t),noStyle:Xo.bind(r,t)},o=Ho.bind(r);function i(){return r.loggingConsoleStyle&&r.loggerConsoleStyle?n.styled:n.noStyle}return r.create=i(),{configureLogger(t){var e;"console"===t?(r.loggerConsoleStyle=Wo.loggerConsoleStyle,r.create=i()):"console"===t.type?(r.loggerConsoleStyle=null!=(e=t.style)?e:Wo.loggerConsoleStyle,r.create=i()):"keyed"===t.type?(r.creatExt=e=>t.keyed(e.names),r.create=o):"named"===t.type&&(r.creatExt=Ko.bind(null,t.named),r.create=o)},configureLogging(t){var e,n,o,a,s;r.includes.dev=null!=(e=t.dev)?e:Wo.includes.dev,r.includes.internal=null!=(n=t.internal)?n:Wo.includes.internal,r.includes.min=null!=(o=t.min)?o:Wo.includes.min,r.include=null!=(a=t.include)?a:Wo.include,r.loggingConsoleStyle=null!=(s=t.consoleStyle)?s:Wo.loggingConsoleStyle,r.create=i()},getLogger:()=>r.create({names:[]})}}function Ko(t,e){const r=[];for(let{name:n,key:o}of e.names)r.push(null==o?n:`${n} (${o})`);return t(r)}function Ho(t){const e=p(p({},this.includes),this.include(t)),r=this.filtered,n=this.named.bind(this,t),o=this.creatExt(t),i=qo(e,524),a=qo(e,522),s=qo(e,521),u=qo(e,529),c=qo(e,545),l=qo(e,265),f=qo(e,268),d=qo(e,273),h=qo(e,289),v=qo(e,137),g=qo(e,145),y=qo(e,73),b=qo(e,81),_=i?o.error.bind(o,$o._hmm):r.bind(t,524),m=a?o.error.bind(o,$o._todo):r.bind(t,522),w=s?o.error.bind(o,$o._error):r.bind(t,521),j=u?o.error.bind(o,$o.errorDev):r.bind(t,529),P=c?o.error.bind(o,$o.errorPublic):r.bind(t,545),O=f?o.warn.bind(o,$o._kapow):r.bind(t,268),S=l?o.warn.bind(o,$o._warn):r.bind(t,265),T=d?o.warn.bind(o,$o.warnDev):r.bind(t,273),D=h?o.warn.bind(o,$o.warnPublic):r.bind(t,273),A=v?o.debug.bind(o,$o._debug):r.bind(t,137),k=g?o.debug.bind(o,$o.debugDev):r.bind(t,145),C=y?o.trace.bind(o,$o._trace):r.bind(t,73),x=b?o.trace.bind(o,$o.traceDev):r.bind(t,81),I={_hmm:_,_todo:m,_error:w,errorDev:j,errorPublic:P,_kapow:O,_warn:S,warnDev:T,warnPublic:D,_debug:A,debugDev:k,_trace:C,traceDev:x,lazy:{_hmm:i?Fo(_):_,_todo:a?Fo(m):m,_error:s?Fo(w):w,errorDev:u?Fo(j):j,errorPublic:c?Fo(P):P,_kapow:f?Fo(O):O,_warn:l?Fo(S):S,warnDev:d?Fo(T):T,warnPublic:h?Fo(D):D,_debug:v?Fo(A):A,debugDev:g?Fo(k):k,_trace:y?Fo(C):C,traceDev:b?Fo(x):x},named:n,utilFor:{internal:()=>({debug:I._debug,error:I._error,warn:I._warn,trace:I._trace,named:(t,e)=>I.named(t,e).utilFor.internal()}),dev:()=>({debug:I.debugDev,error:I.errorDev,warn:I.warnDev,trace:I.traceDev,named:(t,e)=>I.named(t,e).utilFor.dev()}),public:()=>({error:I.errorPublic,warn:I.warnPublic,debug(t,e){I._warn(`(public "debug" filtered out) ${t}`,e)},trace(t,e){I._warn(`(public "trace" filtered out) ${t}`,e)},named:(t,e)=>I.named(t,e).utilFor.public()})}};return I}function Jo(t,e){const r=p(p({},this.includes),this.include(e)),n=[];let o="";for(let u=0;u<e.names.length;u++){const{name:t,key:r}=e.names[u];if(o+=` %c${t}`,n.push(this.style.css(t)),null!=r){const t=`%c#${r}`;o+=t,n.push(this.style.css(t))}}const i=this.filtered,a=this.named.bind(this,e),s=[o,...n];return Yo(i,e,r,t,s,function(t){const e=t.slice(0);for(let r=1;r<e.length;r++)e[r]+=";background-color:#e0005a;padding:2px;color:white";return e}(s),a)}function Xo(t,e){const r=p(p({},this.includes),this.include(e));let n="";for(let i=0;i<e.names.length;i++){const{name:t,key:r}=e.names[i];n+=` ${t}`,null!=r&&(n+=`#${r}`)}const o=[n];return Yo(this.filtered,e,r,t,o,o,this.named.bind(this,e))}function Yo(t,e,r,n,o,i,a){const s=qo(r,524),u=qo(r,522),c=qo(r,521),l=qo(r,529),f=qo(r,545),d=qo(r,265),h=qo(r,268),p=qo(r,273),v=qo(r,289),g=qo(r,137),y=qo(r,145),b=qo(r,73),_=qo(r,81),m=s?n.error.bind(n,...o):t.bind(e,524),w=u?n.error.bind(n,...o):t.bind(e,522),j=c?n.error.bind(n,...o):t.bind(e,521),P=l?n.error.bind(n,...o):t.bind(e,529),O=f?n.error.bind(n,...o):t.bind(e,545),S=h?n.warn.bind(n,...i):t.bind(e,268),T=d?n.warn.bind(n,...o):t.bind(e,265),D=p?n.warn.bind(n,...o):t.bind(e,273),A=v?n.warn.bind(n,...o):t.bind(e,273),k=g?n.info.bind(n,...o):t.bind(e,137),C=y?n.info.bind(n,...o):t.bind(e,145),x=b?n.debug.bind(n,...o):t.bind(e,73),I=_?n.debug.bind(n,...o):t.bind(e,81),E={_hmm:m,_todo:w,_error:j,errorDev:P,errorPublic:O,_kapow:S,_warn:T,warnDev:D,warnPublic:A,_debug:k,debugDev:C,_trace:x,traceDev:I,lazy:{_hmm:s?Fo(m):m,_todo:u?Fo(w):w,_error:c?Fo(j):j,errorDev:l?Fo(P):P,errorPublic:f?Fo(O):O,_kapow:h?Fo(S):S,_warn:d?Fo(T):T,warnDev:p?Fo(D):D,warnPublic:v?Fo(A):A,_debug:g?Fo(k):k,debugDev:y?Fo(C):C,_trace:b?Fo(x):x,traceDev:_?Fo(I):I},named:a,utilFor:{internal:()=>({debug:E._debug,error:E._error,warn:E._warn,trace:E._trace,named:(t,e)=>E.named(t,e).utilFor.internal()}),dev:()=>({debug:E.debugDev,error:E.errorDev,warn:E.warnDev,trace:E.traceDev,named:(t,e)=>E.named(t,e).utilFor.dev()}),public:()=>({error:E.errorPublic,warn:E.warnPublic,debug(t,e){E._warn(`(public "debug" filtered out) ${t}`,e)},trace(t,e){E._warn(`(public "trace" filtered out) ${t}`,e)},named:(t,e)=>E.named(t,e).utilFor.public()})}};return E}var Qo=Go(console,{_debug:function(){},_error:function(){}});Qo.configureLogging({dev:!0,min:Mo.TRACE});var Zo=Qo.getLogger().named("Theatre.js (default logger)").utilFor.dev(),ti=new WeakMap;function ei(t,e,r){for(const[n,o]of Object.entries(e.props))if(!Co(o)){const e=[...t,n];r.set(JSON.stringify(e),r.size),ri(e,o,r)}for(const[n,o]of Object.entries(e.props))if(Co(o)){const e=[...t,n];r.set(JSON.stringify(e),r.size),ri(e,o,r)}}function ri(t,e,r){if("compound"===e.type)ei(t,e,r);else{if("enum"===e.type)throw new Error("Enums aren't supported yet");r.set(JSON.stringify(t),r.size)}}function ni(t){try{return JSON.parse(t)}catch(e){return void Zo.warn(`property ${JSON.stringify(t)} cannot be parsed. Skipping.`)}}var oi=_(r(35298));_(P());var ii=class extends Error{},ai=class extends ii{},si=_(r(35298)),ui=_(r(35298));function ci(){let t,e;const r=new Promise(((r,o)=>{t=t=>{r(t),n.status="resolved"},e=t=>{o(t),n.status="rejected"}})),n={resolve:t,reject:e,promise:r,status:"pending"};return n}var li=()=>{},fi=_(r(35298)),di=_(r(35298)),hi="__TheatreJS_CoreBundle",pi=t=>(...e)=>{var r;switch(t){case"success":case"info":Zo.debug(e.slice(0,2).join("\n"));break;case"warning":Zo.warn(e.slice(0,2).join("\n"))}return"undefined"!==typeof window?null==(r=window.__TheatreJS_Notifications)?void 0:r.notify[t](...e):void 0},vi={warning:pi("warning"),success:pi("success"),info:pi("info"),error:pi("error")};"undefined"!==typeof window&&(window.addEventListener("error",(t=>{vi.error("An error occurred",`<pre>${t.message}</pre>\n\nSee **console** for details.`)})),window.addEventListener("unhandledrejection",(t=>{vi.error("An error occurred",`<pre>${t.reason}</pre>\n\nSee **console** for details.`)})));var gi=class{constructor(t){this._fps=t}formatSubUnitForGrid(t){const e=t%1,r=1/this._fps;return Math.round(e/r)+"f"}formatFullUnitForGrid(t){let e=t,r="";if(e>=_i){r+=Math.floor(e/_i)+"h",e%=_i}if(e>=bi){r+=Math.floor(e/bi)+"m",e%=bi}if(e>=yi){r+=Math.floor(e/yi)+"s",e%=yi}const n=1/this._fps;if(e>=n){r+=Math.floor(e/n)+"f",e%=n}return 0===r.length?"0s":r}formatForPlayhead(t){let e=t,r="";if(e>=_i){const t=Math.floor(e/_i);r+=ko(t.toString(),2,"0")+"h",e%=_i}if(e>=bi){const t=Math.floor(e/bi);r+=ko(t.toString(),2,"0")+"m",e%=bi}else r.length>0&&(r+="00m");if(e>=yi){const t=Math.floor(e/yi);r+=ko(t.toString(),2,"0")+"s",e%=yi}else r+="00s";const n=1/this._fps;if(e>=n){const t=Math.round(e/n);r+=ko(t.toString(),2,"0")+"f",e%=n}else if(e/n>.98){r+=ko(1..toString(),2,"0")+"f",e%=n}else r+="00f";return 0===r.length?"00s00f":r}formatBasic(t){return t.toFixed(2)+"s"}},yi=1,bi=60*yi,_i=60*bi,mi={};function wi(t,e){return t.length<=e?t:t.substr(0,e-3)+"..."}b(mi,{boolean:()=>Fi,compound:()=>Ci,image:()=>xi,number:()=>Ei,rgba:()=>Vi,string:()=>Li,stringLiteral:()=>Wi});var ji=t=>"string"===typeof t?`string("${wi(t,10)}")`:"number"===typeof t?`number(${wi(String(t),10)})`:null===t?"null":void 0===t?"undefined":"boolean"===typeof t?String(t):Array.isArray(t)?"array":"object"===typeof t?"object":"unknown";function Pi(t){return v(p({},t),{toString(){return function(t,{removeAlphaIfOpaque:e=!1}={}){const r=(255*t.a|256).toString(16).slice(1);return`#${(255*t.r|256).toString(16).slice(1)+(255*t.g|256).toString(16).slice(1)+(255*t.b|256).toString(16).slice(1)+(e&&"ff"===r?"":r)}`}(this,{removeAlphaIfOpaque:!0})}})}function Oi(t){function e(t){return t>=.0031308?1.055*t**(1/2.4)-.055:12.92*t}return function(t){return Object.fromEntries(Object.entries(t).map((([t,e])=>[t,Wr(e,0,1)])))}({r:e(t.r),g:e(t.g),b:e(t.b),a:t.a})}function Si(t){function e(t){return t>=.04045?((t+.055)/1.055)**2.4:t/12.92}return{r:e(t.r),g:e(t.g),b:e(t.b),a:t.a}}function Ti(t){let e=.4122214708*t.r+.5363325363*t.g+.0514459929*t.b,r=.2119034982*t.r+.6806995451*t.g+.1073969566*t.b,n=.0883024619*t.r+.2817188376*t.g+.6299787005*t.b,o=Math.cbrt(e),i=Math.cbrt(r),a=Math.cbrt(n);return{L:.2104542553*o+.793617785*i-.0040720468*a,a:1.9779984951*o-2.428592205*i+.4505937099*a,b:.0259040371*o+.7827717662*i-.808675766*a,alpha:t.a}}var Di=Symbol("TheatrePropType_Basic");function Ai(t){return"object"===typeof t&&!!t&&"TheatrePropType"===t[Di]}function ki(t){if("number"===typeof t)return Ei(t);if("boolean"===typeof t)return Fi(t);if("string"===typeof t)return Li(t);if("object"===typeof t&&t){if(Ai(t))return t;if(Sr(t))return Ci(t);throw new ai(`This value is not a valid prop type: ${ji(t)}`)}throw new ai(`This value is not a valid prop type: ${ji(t)}`)}var Ci=(t,e={})=>{const r=function(t){const e={};for(const r of Object.keys(t)){const n=t[r];Ai(n)?e[r]=n:e[r]=ki(n)}return e}(t),n=new WeakMap;return{type:"compound",props:r,valueType:null,[Di]:"TheatrePropType",label:e.label,default:co(r,(t=>t.default)),deserializeAndSanitize:t=>{if("object"!==typeof t||!t)return;if(n.has(t))return n.get(t);const e={};let o=!1;for(const[n,i]of Object.entries(r))if(Object.prototype.hasOwnProperty.call(t,n)){const r=i.deserializeAndSanitize(t[n]);null!=r&&(o=!0,e[n]=r)}return n.set(t,e),o?e:void 0}}},xi=(t,e={})=>{return{type:"image",default:{type:"image",id:t},valueType:null,[Di]:"TheatrePropType",label:e.label,interpolate:(t,r,n)=>{var o;return{type:"image",id:(null!=(o=e.interpolate)?o:Ui)(t.id,r.id,n)}},deserializeAndSanitize:Ii}},Ii=t=>{if(!t)return;let e=!0;return"string"===typeof t.id||[null,void 0].includes(t.id)||(e=!1),"image"!==t.type&&(e=!1),e?t:void 0},Ei=(t,e={})=>{var r;return v(p({type:"number",valueType:0,default:t,[Di]:"TheatrePropType"},e||{}),{label:e.label,nudgeFn:null!=(r=e.nudgeFn)?r:Gi,nudgeMultiplier:"number"===typeof e.nudgeMultiplier?e.nudgeMultiplier:void 0,interpolate:Mi,deserializeAndSanitize:Ri(e.range)})},Ri=t=>t?e=>{if("number"===typeof e&&isFinite(e))return Wr(e,t[0],t[1])}:Bi,Bi=t=>"number"===typeof t&&isFinite(t)?t:void 0,Mi=(t,e,r)=>t+r*(e-t),Vi=(t={r:0,g:0,b:0,a:1},e={})=>{const r={};for(const n of["r","g","b","a"])r[n]=Math.min(Math.max(t[n],0),1);return{type:"rgba",valueType:null,default:Pi(r),[Di]:"TheatrePropType",label:e.label,interpolate:zi,deserializeAndSanitize:Ni}},Ni=t=>{if(!t)return;let e=!0;for(const n of["r","g","b","a"])Object.prototype.hasOwnProperty.call(t,n)&&"number"===typeof t[n]||(e=!1);if(!e)return;const r={};for(const n of["r","g","b","a"])r[n]=Math.min(Math.max(t[n],0),1);return Pi(r)},zi=(t,e,r)=>{const n=Ti(Si(t)),o=Ti(Si(e));return Pi(Oi(function(t){let e=t.L+.3963377774*t.a+.2158037573*t.b,r=t.L-.1055613458*t.a-.0638541728*t.b,n=t.L-.0894841775*t.a-1.291485548*t.b,o=e*e*e,i=r*r*r,a=n*n*n;return{r:4.0767416621*o-3.3077115913*i+.2309699292*a,g:-1.2684380046*o+2.6097574011*i-.3413193965*a,b:-.0041960863*o-.7034186147*i+1.707614701*a,a:t.alpha}}({L:(1-r)*n.L+r*o.L,a:(1-r)*n.a+r*o.a,b:(1-r)*n.b+r*o.b,alpha:(1-r)*n.alpha+r*o.alpha})))},Fi=(t,e={})=>{var r;return{type:"boolean",default:t,valueType:null,[Di]:"TheatrePropType",label:e.label,interpolate:null!=(r=e.interpolate)?r:Ui,deserializeAndSanitize:$i}},$i=t=>"boolean"===typeof t?t:void 0;function Ui(t){return t}var Li=(t,e={})=>{var r;return{type:"string",default:t,valueType:null,[Di]:"TheatrePropType",label:e.label,interpolate:null!=(r=e.interpolate)?r:Ui,deserializeAndSanitize:qi}};function qi(t){return"string"===typeof t?t:void 0}function Wi(t,e,r={}){var n,o;return{type:"stringLiteral",default:t,valuesAndLabels:p({},e),[Di]:"TheatrePropType",valueType:null,as:null!=(n=r.as)?n:"menu",label:r.label,interpolate:null!=(o=r.interpolate)?o:Ui,deserializeAndSanitize(t){if("string"===typeof t)return Object.prototype.hasOwnProperty.call(e,t)?t:void 0}}}var Gi=({config:t,deltaX:e,deltaFraction:r,magnitude:n})=>{var o;const{range:i}=t;return console.log(e,r,t),t.nudgeMultiplier||!i||i.includes(1/0)||i.includes(-1/0)?e*n*(null!=(o=t.nudgeMultiplier)?o:1):r*(i[1]-i[0])*n};function Ki(t,e){const r=t.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");return r}_(O()),new WeakMap;var Hi,Ji,Xi=_(r(35298)),Yi=t=>"number"===typeof t&&isFinite(t)&&t>0?t:10,Qi=t=>"number"===typeof t&&uo(t)&&t>=1&&t<=1e3?t:30,Zi=_(r(35298)),ta=_(r(35298)),ea=t=>new Promise((e=>setTimeout(e,t)));function ra(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function na(t){return!!t&&!!t[Fa]}function oa(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===$a}(t)||Array.isArray(t)||!!t[za]||!!t.constructor[za]||ca(t)||la(t))}function ia(t,e,r){void 0===r&&(r=!1),0===aa(t)?(r?Object.keys:Ua)(t).forEach((function(n){r&&"symbol"==typeof n||e(n,t[n],t)})):t.forEach((function(r,n){return e(n,r,t)}))}function aa(t){var e=t[Fa];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:ca(t)?2:la(t)?3:0}function sa(t,e){return 2===aa(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function ua(t,e,r){var n=aa(t);2===n?t.set(e,r):3===n?(t.delete(e),t.add(r)):t[e]=r}function ca(t){return Ba&&t instanceof Map}function la(t){return Ma&&t instanceof Set}function fa(t){return t.o||t.t}function da(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=La(t);delete e[Fa];for(var r=Ua(e),n=0;n<r.length;n++){var o=r[n],i=e[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),e)}function ha(t,e){return void 0===e&&(e=!1),va(t)||na(t)||!oa(t)||(aa(t)>1&&(t.set=t.add=t.clear=t.delete=pa),Object.freeze(t),e&&ia(t,(function(t,e){return ha(e,!0)}),!0)),t}function pa(){ra(2)}function va(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function ga(t){var e=qa[t];return e||ra(18,t),e}function ya(){return Ji}function ba(t,e){e&&(ga("Patches"),t.u=[],t.s=[],t.v=e)}function _a(t){ma(t),t.p.forEach(ja),t.p=null}function ma(t){t===Ji&&(Ji=t.l)}function wa(t){return Ji={p:[],l:Ji,h:t,m:!0,_:0}}function ja(t){var e=t[Fa];0===e.i||1===e.i?e.j():e.O=!0}function Pa(t,e){e._=e.p.length;var r=e.p[0],n=void 0!==t&&t!==r;return e.h.g||ga("ES5").S(e,t,n),n?(r[Fa].P&&(_a(e),ra(4)),oa(t)&&(t=Oa(e,t),e.l||Ta(e,t)),e.u&&ga("Patches").M(r[Fa],t,e.u,e.s)):t=Oa(e,r,[]),_a(e),e.u&&e.v(e.u,e.s),t!==Na?t:void 0}function Oa(t,e,r){if(va(e))return e;var n=e[Fa];if(!n)return ia(e,(function(o,i){return Sa(t,n,e,o,i,r)}),!0),e;if(n.A!==t)return e;if(!n.P)return Ta(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=da(n.k):n.o;ia(3===n.i?new Set(o):o,(function(e,i){return Sa(t,n,o,e,i,r)})),Ta(t,o,!1),r&&t.u&&ga("Patches").R(n,r,t.u,t.s)}return n.o}function Sa(t,e,r,n,o,i){if(na(o)){var a=Oa(t,o,i&&e&&3!==e.i&&!sa(e.D,n)?i.concat(n):void 0);if(ua(r,n,a),!na(a))return;t.m=!1}if(oa(o)&&!va(o)){if(!t.h.F&&t._<1)return;Oa(t,o),e&&e.A.l||Ta(t,o)}}function Ta(t,e,r){void 0===r&&(r=!1),t.h.F&&t.m&&ha(e,r)}function Da(t,e){var r=t[Fa];return(r?fa(r):t)[e]}function Aa(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function ka(t){t.P||(t.P=!0,t.l&&ka(t.l))}function Ca(t){t.o||(t.o=da(t.t))}function xa(t,e,r){var n=ca(e)?ga("MapSet").N(e,r):la(e)?ga("MapSet").T(e,r):t.g?function(t,e){var r=Array.isArray(t),n={i:r?1:0,A:e?e.A:ya(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},o=n,i=Wa;r&&(o=[n],i=Ga);var a=Proxy.revocable(o,i),s=a.revoke,u=a.proxy;return n.k=u,n.j=s,u}(e,r):ga("ES5").J(e,r);return(r?r.A:ya()).p.push(n),n}function Ia(t){return na(t)||ra(22,t),function t(e){if(!oa(e))return e;var r,n=e[Fa],o=aa(e);if(n){if(!n.P&&(n.i<4||!ga("ES5").K(n)))return n.t;n.I=!0,r=Ea(e,o),n.I=!1}else r=Ea(e,o);return ia(r,(function(e,o){n&&function(t,e){return 2===aa(t)?t.get(e):t[e]}(n.t,e)===o||ua(r,e,t(o))})),3===o?new Set(r):r}(t)}function Ea(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return da(t)}var Ra="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ba="undefined"!=typeof Map,Ma="undefined"!=typeof Set,Va="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Na=Ra?Symbol.for("immer-nothing"):((Hi={})["immer-nothing"]=!0,Hi),za=Ra?Symbol.for("immer-draftable"):"__$immer_draftable",Fa=Ra?Symbol.for("immer-state"):"__$immer_state",$a=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Ua="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,La=Object.getOwnPropertyDescriptors||function(t){var e={};return Ua(t).forEach((function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})),e},qa={},Wa={get:function(t,e){if(e===Fa)return t;var r=fa(t);if(!sa(r,e))return function(t,e,r){var n,o=Aa(e,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(t.k):void 0}(t,r,e);var n=r[e];return t.I||!oa(n)?n:n===Da(t.t,e)?(Ca(t),t.o[e]=xa(t.A.h,n,t)):n},has:function(t,e){return e in fa(t)},ownKeys:function(t){return Reflect.ownKeys(fa(t))},set:function(t,e,r){var n=Aa(fa(t),e);if(null==n?void 0:n.set)return n.set.call(t.k,r),!0;if(!t.P){var o=Da(fa(t),e),i=null==o?void 0:o[Fa];if(i&&i.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}(r,o)&&(void 0!==r||sa(t.t,e)))return!0;Ca(t),ka(t)}return t.o[e]===r&&"number"!=typeof r&&(void 0!==r||e in t.o)||(t.o[e]=r,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==Da(t.t,e)||e in t.t?(t.D[e]=!1,Ca(t),ka(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=fa(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty:function(){ra(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){ra(12)}},Ga={};ia(Wa,(function(t,e){Ga[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Ga.deleteProperty=function(t,e){return Wa.deleteProperty.call(this,t[0],e)},Ga.set=function(t,e,r){return Wa.set.call(this,t[0],e,r,t[0])};var Ka=function(){function t(t){var e=this;this.g=Va,this.F=!0,this.produce=function(t,r,n){if("function"==typeof t&&"function"!=typeof r){var o=r;r=t;var i=e;return function(t){var e=this;void 0===t&&(t=o);for(var n=arguments.length,a=Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return i.produce(t,(function(t){var n;return(n=r).call.apply(n,[e,t].concat(a))}))}}var a;if("function"!=typeof r&&ra(6),void 0!==n&&"function"!=typeof n&&ra(7),oa(t)){var s=wa(e),u=xa(e,t,void 0),c=!0;try{a=r(u),c=!1}finally{c?_a(s):ma(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(t){return ba(s,n),Pa(t,s)}),(function(t){throw _a(s),t})):(ba(s,n),Pa(a,s))}if(!t||"object"!=typeof t){if((a=r(t))===Na)return;return void 0===a&&(a=t),e.F&&ha(a,!0),a}ra(21,t)},this.produceWithPatches=function(t,r){return"function"==typeof t?function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return e.produceWithPatches(r,(function(e){return t.apply(void 0,[e].concat(o))}))}:[e.produce(t,r,(function(t,e){n=t,o=e})),n,o];var n,o},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){oa(t)||ra(8),na(t)&&(t=Ia(t));var e=wa(this),r=xa(this,t,void 0);return r[Fa].C=!0,ma(e),r},e.finishDraft=function(t,e){var r=(t&&t[Fa]).A;return ba(r,e),Pa(void 0,r)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!Va&&ra(20),this.g=t},e.applyPatches=function(t,e){var r;for(r=e.length-1;r>=0;r--){var n=e[r];if(0===n.path.length&&"replace"===n.op){t=n.value;break}}var o=ga("Patches").$;return na(t)?o(t,e):this.produce(t,(function(t){return o(t,e.slice(r+1))}))},t}(),Ha=new Ka,Ja=(Ha.produce,Ha.produceWithPatches.bind(Ha),Ha.setAutoFreeze.bind(Ha),Ha.setUseProxies.bind(Ha),Ha.applyPatches.bind(Ha),Ha.createDraft.bind(Ha),Ha.finishDraft.bind(Ha),{currentProjectStateDefinitionVersion:"0.4.0"});async function Xa(t,e,r){await ea(0),t.transaction((({drafts:t})=>{var n;const o=e.address.projectId;function i(){t.ephemeral.coreByProject[o].loadingState={type:"loaded"}}t.ephemeral.coreByProject[o]={lastExportedObject:null,loadingState:{type:"loading"}},t.ahistoric.coreByProject[o]={ahistoricStuff:""};const a=null==(na(s=t.historic)||ra(23,s),n=s[Fa].t)?void 0:n.coreByProject[e.address.projectId];var s,u,c;a?r&&-1==a.revisionHistory.indexOf(r.revisionHistory[0])?(u=r,t.ephemeral.coreByProject[o].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:u}):i():r?(c=r,t.ephemeral.coreByProject[o].loadingState={type:"loaded"},t.historic.coreByProject[o]=c):(t.ephemeral.coreByProject[o].loadingState={type:"loaded"},t.historic.coreByProject[o]={sheetsById:{},definitionVersion:Ja.currentProjectStateDefinitionVersion,revisionHistory:[]})}))}function Ya(){}function Qa(t){var e,r;const n=(null==(e=null==t?void 0:t.logging)?void 0:e.internal)?null!=(r=t.logging.min)?r:Mo.WARN:1/0,o=n<=Mo.DEBUG,i=n<=Mo.ERROR,a=Go(void 0,{_debug:o?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):Ya,_error:i?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):Ya});if(t){const{logger:e,logging:r}=t;e&&a.configureLogger(e),r?a.configureLogging(r):a.configureLogging({dev:!1})}return a.getLogger().named("Theatre")}_(O());var Za=_(r(35298)),ts=_(r(35298));function es(t,e={}){const r=D.get(t);if(r)return r.publicApi;const n=Qa().named("Project",t);return e.state?(rs(t,e.state),n._debug("deep validated config.state on disk")):n._debug("no config.state"),new class{get type(){return"Theatre_Project_PublicAPI"}constructor(t,e={}){C(this,new class{constructor(t,e={},r){var n;this.config=e,this.publicApi=r,m(this,"pointers"),m(this,"_pointerProxies"),m(this,"address"),m(this,"_studioReadyDeferred"),m(this,"_assetStorageReadyDeferred"),m(this,"_readyPromise"),m(this,"_sheetTemplates",new ta.Atom({})),m(this,"sheetTemplatesP",this._sheetTemplates.pointer),m(this,"_studio"),m(this,"assetStorage"),m(this,"type","Theatre_Project"),m(this,"_logger"),this._logger=Qa({logging:{dev:!0}}).named("Project",t),this._logger.traceDev("creating project"),this.address={projectId:t};const o=new ta.Atom({ahistoric:{ahistoricStuff:""},historic:null!=(n=e.state)?n:{sheetsById:{},definitionVersion:Ja.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=ci(),this.assetStorage={getAssetUrl:t=>{var r;return`${null==(r=e.assets)?void 0:r.baseUrl}/${t}`},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new Zi.PointerProxy(o.pointer.historic),ahistoric:new Zi.PointerProxy(o.pointer.ahistoric),ephemeral:new Zi.PointerProxy(o.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},D.add(t,this),this._studioReadyDeferred=ci(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then((()=>{})),e.state?setTimeout((()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))}),0):"undefined"===typeof window?console.error(`Argument config.state in Theatre.getProject("${t}", config) is empty. You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state`):setTimeout((()=>{if(!this._studio)throw new Error(`Argument config.state in Theatre.getProject("${t}", config) is empty. This is fine while you are using @theatre/core along with @theatre/studio. But since @theatre/studio is not loaded, the state of project "${t}" will be empty.\n\nTo fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state\n`)}),1e3)}attachToStudio(t){if(this._studio){if(this._studio!==t)throw new Error(`Project ${this.address.projectId} is already attached to studio ${this._studio.address.studioId}`);console.warn(`Project ${this.address.projectId} is already attached to studio ${this._studio.address.studioId}`)}else this._studio=t,t.initialized.then((async()=>{var e;await Xa(t,this,this.config.state),this._pointerProxies.historic.setPointer(t.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(t.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(t.atomP.ephemeral.coreByProject[this.address.projectId]),t.createAssetStorage(this,null==(e=this.config.assets)?void 0:e.baseUrl).then((t=>{this.assetStorage=t,this._assetStorageReadyDeferred.resolve(void 0)})),this._studioReadyDeferred.resolve(void 0)}))}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return"resolved"===this._studioReadyDeferred.status&&"resolved"===this._assetStorageReadyDeferred.status}getOrCreateSheet(t,e="default"){let r=this._sheetTemplates.getState()[t];return r||(r=new class{constructor(t,e){this.project=t,m(this,"type","Theatre_SheetTemplate"),m(this,"address"),m(this,"_instances",new oi.Atom({})),m(this,"instancesP",this._instances.pointer),m(this,"_objectTemplates",new oi.Atom({})),m(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=v(p({},t.address),{sheetId:e})}getInstance(t){let e=this._instances.getState()[t];return e||(e=new class{constructor(t,e){this.template=t,this.instanceId=e,m(this,"_objects",new Xi.Atom({})),m(this,"_sequence"),m(this,"address"),m(this,"publicApi"),m(this,"project"),m(this,"objectsP",this._objects.pointer),m(this,"type","Theatre_Sheet"),m(this,"_logger"),this._logger=t.project._logger.named("Sheet",e),this._logger._trace("creating sheet"),this.project=t.project,this.address=v(p({},t.address),{sheetInstanceId:this.instanceId}),this.publicApi=new class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(t){C(this,t)}object(t,e,r){const n=k(this),o=Ki(t),i=n.getObject(o);if(i)return(null==r?void 0:r.actions)&&(Object.entries(r.actions).forEach((([t,e])=>{i.template.registerAction(t,e)})),console.log("registered actions",r.actions)),i.publicApi;{const t=Ci(e);return n.createObject(o,null,t,null==r?void 0:r.actions).publicApi}}get sequence(){return k(this).getSequence().publicApi}get project(){return k(this).project.publicApi}get address(){return p({},k(this).address)}detachObject(t){const e=k(this),r=Ki(t);if(!e.getObject(r))return vi.warning(`Couldn't delete object "${r}"`,`There is no object with key "${r}".\n\nTo fix this, make sure you are calling \`sheet.deleteObject("${r}")\` with the correct key.`),void console.warn(`Object key "${r}" does not exist.`);e.deleteObject(r)}}(this)}createObject(t,e,r,n={}){const o=this.template.getObjectTemplate(t,e,r,n).createInstance(this,e,r);return this._objects.setIn([t],o),o}getObject(t){return this._objects.getState()[t]}deleteObject(t){this._objects.reduceState([],(e=>{const r=p({},e);return delete r[t],r}))}getSequence(){if(!this._sequence){const t=(0,Xi.valueDerivation)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length).map(Yi),e=(0,Xi.valueDerivation)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit).map(Qi);this._sequence=new class{constructor(t,e,r,n,o){this._project=t,this._sheet=e,this._lengthD=r,this._subUnitsPerUnitD=n,m(this,"address"),m(this,"publicApi"),m(this,"_playbackControllerBox"),m(this,"_statePointerDerivation"),m(this,"_positionD"),m(this,"_positionFormatterD"),m(this,"_playableRangeD"),m(this,"pointer",(0,si.pointer)({root:this,path:[]})),m(this,"$$isIdentityDerivationProvider",!0),m(this,"_logger"),m(this,"closestGridPosition",(t=>{const e=1/this.subUnitsPerUnit;return parseFloat((Math.round(t/e)*e).toFixed(3))})),this._logger=t._logger.named("Sheet",e.address.sheetId).named("Instance",e.address.sheetInstanceId),this.address=v(p({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(t){C(this,t)}play(t){const e=k(this);if(e._project.isReady())return e.play(t);{const t=ci();return t.resolve(!0),t.promise}}pause(){k(this).pause()}get position(){return k(this).position}set position(t){k(this).position=t}async attachAudio(t){const{audioContext:e,destinationNode:r,decodedBuffer:n,gainNode:o}=await async function(t){function e(){if(t.audioContext)return Promise.resolve(t.audioContext);const e=new AudioContext;return"running"===e.state||"undefined"===typeof window?Promise.resolve(e):new Promise((t=>{const r=()=>{e.resume()},n=["mousedown","keydown","touchstart"],o={capture:!0,passive:!1};n.forEach((t=>{window.addEventListener(t,r,o)})),e.addEventListener("statechange",(()=>{"running"===e.state&&(n.forEach((t=>{window.removeEventListener(t,r,o)})),t(e))}))}))}async function r(){if(t.source instanceof AudioBuffer)return t.source;const e=ci();if("string"!==typeof t.source)throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let r,o,i;try{r=await fetch(t.source)}catch(a){throw console.error(a),new Error(`Could not fetch '${t.source}'. Network error logged above.`)}try{o=await r.arrayBuffer()}catch(a){throw console.error(a),new Error(`Could not read '${t.source}' as an arrayBuffer.`)}(await n).decodeAudioData(o,e.resolve,e.reject);try{i=await e.promise}catch(a){throw console.error(a),new Error(`Could not decode ${t.source} as an audio file.`)}return i}const n=e(),o=r(),[i,a]=await Promise.all([n,o]),s=t.destinationNode||i.destination,u=i.createGain();return u.connect(s),{audioContext:i,decodedBuffer:a,gainNode:u,destinationNode:s}}(t),i=new class{constructor(t,e,r,n){this._ticker=t,this._decodedBuffer=e,this._audioContext=r,this._nodeDestination=n,m(this,"_mainGain"),m(this,"_state",new di.Atom({position:0,playing:!1})),m(this,"statePointer"),m(this,"_stopPlayCallback",li),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(t){const e=ci();let r;this._playing&&this.pause(),this._playing=!0;const n=()=>{null==r||r(),r=this._loopInRange(t.getValue()).stop},o=t.changesWithoutValues().tap(n);return n(),this._stopPlayCallback=()=>{null==r||r(),o(),e.resolve(!1)},e.promise}_loopInRange(t){const e=this._ticker;let r=this.getCurrentPosition();const n=t[1]-t[0];(r<t[0]||r>t[1]||r===t[1])&&this._updatePositionInState(t[0]),r=this.getCurrentPosition();const o=this._audioContext.createBufferSource();o.buffer=this._decodedBuffer,o.connect(this._mainGain),o.playbackRate.value=1,o.loop=!0,o.loopStart=t[0],o.loopEnd=t[1];const i=e.time;let a=r-t[0];o.start(0,r);const s=e=>{let r=(Math.max(e-i,0)/1e3*1+a)/n%1*n;this._updatePositionInState(r+t[0]),u()},u=()=>e.onNextTick(s);return e.onThisOrNextTick(s),{stop:()=>{o.stop(),o.disconnect(),e.offThisOrNextTick(s),e.offNextTick(s)}}}get _playing(){return this._state.getState().playing}set _playing(t){this._state.setIn(["playing"],t)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=li}gotoPosition(t){this._updatePositionInState(t)}_updatePositionInState(t){this._state.reduceState(["position"],(()=>t))}getCurrentPosition(){return this._state.getState().position}play(t,e,r,n){this._playing&&this.pause(),this._playing=!0;const o=this._ticker;let i=this.getCurrentPosition();const a=e[1]-e[0];if("normal"!==n)throw new ai(`Audio-controlled sequences can only be played in the "normal" direction. '${n}' given.`);(i<e[0]||i>e[1]||i===e[1])&&this._updatePositionInState(e[0]),i=this.getCurrentPosition();const s=ci(),u=this._audioContext.createBufferSource();u.buffer=this._decodedBuffer,u.connect(this._mainGain),u.playbackRate.value=r,t>1e3&&(vi.warning("Can't play sequences with audio more than 1000 times",`The sequence will still play, but only 1000 times. The \`iterationCount: ${t}\` provided to \`sequence.play()\`\nis too high for a sequence with audio.\n\nTo fix this, either set \`iterationCount\` to a lower value, or remove the audio from the sequence.`,[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),t=1e3),t>1&&(u.loop=!0,u.loopStart=e[0],u.loopEnd=e[1]);const c=o.time;let l=i-e[0];const f=a*t;u.start(0,i,f-l);const d=t=>{const n=Math.max(t-c,0)/1e3,o=Math.min(n*r+l,f);if(o!==f){let t=o/a%1*a;this._updatePositionInState(t+e[0]),p()}else this._updatePositionInState(e[1]),this._playing=!1,h(),s.resolve(!0)},h=()=>{u.stop(),u.disconnect()};this._stopPlayCallback=()=>{h(),o.offThisOrNextTick(d),o.offNextTick(d),this._playing&&s.resolve(!1)};const p=()=>o.onNextTick(d);return o.onThisOrNextTick(d),s.promise}}(Oe,n,e,o);return k(this).replacePlaybackController(i),{audioContext:e,destinationNode:r,decodedBuffer:n,gainNode:o}}get pointer(){return k(this).pointer}}(this),this._playbackControllerBox=new ui.Box(null!=o?o:new class{constructor(t){this._ticker=t,m(this,"_stopPlayCallback",li),m(this,"_state",new fi.Atom({position:0,playing:!1})),m(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=li}gotoPosition(t){this._updatePositionInState(t)}_updatePositionInState(t){this._state.reduceState(["position"],(()=>t))}getCurrentPosition(){return this._state.getState().position}get playing(){return this._state.getState().playing}set playing(t){this._state.setIn(["playing"],t)}play(t,e,r,n){this.playing&&this.pause(),this.playing=!0;const o=this._ticker,i=e[1]-e[0];{const t=this.getCurrentPosition();t<e[0]||t>e[1]?"normal"===n||"alternate"===n?this._updatePositionInState(e[0]):"reverse"!==n&&"alternateReverse"!==n||this._updatePositionInState(e[1]):"normal"===n||"alternate"===n?t===e[1]&&this._updatePositionInState(e[0]):t===e[0]&&this._updatePositionInState(e[1])}const a=ci(),s=o.time,u=i*t;let c=this.getCurrentPosition()-e[0];"reverse"!==n&&"alternateReverse"!==n||(c=e[1]-this.getCurrentPosition());const l=o=>{const l=Math.max(o-s,0)/1e3,d=Math.min(l*r+c,u);if(d!==u){const t=Math.floor(d/i);let r=d/i%1*i;if("normal"!==n)if("reverse"===n)r=i-r;else{const e=t%2===0;"alternate"===n?e||(r=i-r):e&&(r=i-r)}this._updatePositionInState(r+e[0]),f()}else{if("normal"===n)this._updatePositionInState(e[1]);else if("reverse"===n)this._updatePositionInState(e[0]);else{const r=(t-1)%2===0;"alternate"===n?r?this._updatePositionInState(e[1]):this._updatePositionInState(e[0]):r?this._updatePositionInState(e[0]):this._updatePositionInState(e[1])}this.playing=!1,a.resolve(!0)}};this._stopPlayCallback=()=>{o.offThisOrNextTick(l),o.offNextTick(l),this.playing&&a.resolve(!1)};const f=()=>o.onNextTick(l);return o.onThisOrNextTick(l),a.promise}playDynamicRange(t){this.playing&&this.pause(),this.playing=!0;const e=this._ticker,r=ci(),n=t.keepHot();r.promise.then(n,n);let o=e.time;const i=e=>{const r=Math.max(e-o,0);o=e;const n=r/1e3,i=this.getCurrentPosition(),s=t.getValue();if(i<s[0]||i>s[1])this.gotoPosition(s[0]);else{let t=i+n;t>s[1]&&(t=s[0]+(t-s[1])),this.gotoPosition(t)}a()};this._stopPlayCallback=()=>{e.offThisOrNextTick(i),e.offNextTick(i),r.resolve(!1)};const a=()=>e.onNextTick(i);return e.onThisOrNextTick(i),r.promise}}(Oe)),this._statePointerDerivation=this._playbackControllerBox.derivation.map((t=>t.statePointer)),this._positionD=this._statePointerDerivation.flatMap((t=>(0,ui.valueDerivation)(t.position))),this._positionFormatterD=this._subUnitsPerUnitD.map((t=>new gi(t)))}getIdentityDerivation(t){if(0===t.length)return(0,ui.prism)((()=>({length:(0,ui.val)(this.pointer.length),playing:(0,ui.val)(this.pointer.playing),position:(0,ui.val)(this.pointer.position)})));if(t.length>1)return(0,ui.prism)((()=>{}));const[e]=t;return"length"===e?this._lengthD:"position"===e?this._positionD:"playing"===e?(0,ui.prism)((()=>(0,ui.val)(this._statePointerDerivation.getValue().playing))):(0,ui.prism)((()=>{}))}get positionFormatter(){return this._positionFormatterD.getValue()}get derivationToStatePointer(){return this._statePointerDerivation}get length(){return this._lengthD.getValue()}get positionDerivation(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(t){let e=t;this.pause(),e>this.length&&(e=this.length);const r=this.length;this._playbackControllerBox.get().gotoPosition(e>r?r:e)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,ui.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,ui.prism)((()=>[0,(0,ui.val)(this._lengthD)]))}playDynamicRange(t){return this._playbackControllerBox.get().playDynamicRange(t)}async play(t){const e=this.length,r=t&&t.range?t.range:[0,e],n=t&&"number"===typeof t.iterationCount?t.iterationCount:1,o=t&&"undefined"!==typeof t.rate?t.rate:1,i=t&&t.direction?t.direction:"normal";return await this._play(n,[r[0],r[1]],o,i)}_play(t,e,r,n){return this._playbackControllerBox.get().play(t,e,r,n)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(t){this.pause();const e=this._playbackControllerBox.get();this._playbackControllerBox.set(t);const r=e.getCurrentPosition();e.destroy(),t.gotoPosition(r)}}(this.template.project,this,t,e)}return this._sequence}}(this,t),this._instances.setIn([t],e)),e}getObjectTemplate(t,e,r,n){let o=this._objectTemplates.getState()[t];return o||(o=new class{constructor(t,e,r,n,o){this.sheetTemplate=t,m(this,"address"),m(this,"type","Theatre_SheetObjectTemplate"),m(this,"_config"),m(this,"_actions"),m(this,"_cache",new ne),m(this,"project"),this.address=v(p({},t.address),{objectKey:e}),this._config=new oe.Atom(n),this._actions=new oe.Atom(o),this.project=t.project}get staticConfig(){return this._config.getState()}get configPointer(){return this._config.pointer}get staticActions(){return this._actions.getState()}get actionsPointer(){return this._actions.pointer}createInstance(t,e,r){return this._config.setState(r),new class{constructor(t,e,r){this.sheet=t,this.template=e,this.nativeObject=r,m(this,"$$isIdentityDerivationProvider",!0),m(this,"address"),m(this,"publicApi"),m(this,"_initialValue",new Pe.Atom({})),m(this,"_cache",new ne),m(this,"_logger"),m(this,"_internalUtilCtx"),this._logger=t._logger.named("SheetObject",e.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=v(p({},e.address),{sheetInstanceId:t.address.sheetInstanceId}),this.publicApi=new class{constructor(t){m(this,"_cache",new ne),m(this,"_keepHotUntapDebounce"),C(this,t)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return k(this).propsP}get sheet(){return k(this).sheet.publicApi}get project(){return k(this).sheet.project.publicApi}get address(){return p({},k(this).address)}_valuesDerivation(){return this._cache.get("onValuesChangeDerivation",(()=>{const t=k(this);return(0,Se.prism)((()=>(0,Se.val)(t.getValues().getValue())))}))}onValuesChange(t){return this._valuesDerivation().tapImmediate(Oe,t)}get value(){const t=this._valuesDerivation();if(!t.isHot){null!=this._keepHotUntapDebounce&&this._keepHotUntapDebounce.flush();const e=t.keepHot();this._keepHotUntapDebounce=so((()=>{e(),this._keepHotUntapDebounce=void 0}),5e3)}return this._keepHotUntapDebounce&&this._keepHotUntapDebounce(),t.getValue()}set initialValue(t){k(this).setInitialValue(t)}}(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",(()=>(0,Pe.prism)((()=>{const t=me((0,Pe.val)(this.template.getDefaultValues()),(0,Pe.val)(this._initialValue.pointer),Pe.prism.memo("withInitialCache",(()=>new WeakMap),[]));let e,r=me(t,(0,Pe.val)(this.template.getStaticValues()),Pe.prism.memo("withStatics",(()=>new WeakMap),[]));{const t=Pe.prism.memo("seq",(()=>this.getSequencedValues()),[]),n=Pe.prism.memo("withSeqsCache",(()=>new WeakMap),[]);e=(0,Pe.val)((0,Pe.val)(t)),r=me(r,e,n)}return((t,e)=>{const r=je.prism.memo(t,(()=>new je.Atom(e)),[]);return r.setState(e),r})("finalAtom",r).pointer}))))}getValueByPointer(t){const e=(0,Pe.val)(this.getValues()),{path:r}=(0,Pe.getPointerParts)(t);return(0,Pe.val)(we(e,r))}getIdentityDerivation(t){return(0,Pe.prism)((()=>{const e=(0,Pe.val)(this.getValues());return(0,Pe.val)(we(e,t))}))}getSequencedValues(){return(0,Pe.prism)((()=>{const t=Pe.prism.memo("tracksToProcess",(()=>this.template.getArrayOfValidSequenceTracks()),[]),e=(0,Pe.val)(t),r=new Pe.Atom({}),n=(0,Pe.val)(this.template.configPointer);return Pe.prism.effect("processTracks",(()=>{const t=[];for(const{trackId:o,pathToProp:i}of e){const e=this._trackIdToDerivation(o),a=xo(n,i),s=a.deserializeAndSanitize,u=a.interpolate,c=()=>{const t=e.getValue();if(!t)return r.setIn(i,void 0);const n=s(t.left),o=void 0===n?a.default:n;if(void 0===t.right)return r.setIn(i,o);const c=s(t.right),l=void 0===c?a.default:c;return r.setIn(i,u(o,l,t.progression))},l=e.changesWithoutValues().tap(c);c(),t.push(l)}return()=>{for(const e of t)e()}}),[n,...e]),r.pointer}))}_trackIdToDerivation(t){const e=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[t],r=this.sheet.getSequence().positionDerivation;return ye(this._internalUtilCtx,e,r)}get propsP(){return this._cache.get("propsP",(()=>(0,Pe.pointer)({root:this,path:[]})))}validateValue(t,e){}setInitialValue(t){this.validateValue(this.propsP,t),this._initialValue.setState(t)}}(t,this,e)}reconfigure(t){this._config.setState(t)}registerAction(t,e){this._actions.setIn([t],e)}getDefaultValues(){return this._cache.get("getDefaultValues()",(()=>(0,oe.prism)((()=>function(t){return pe(t)}((0,oe.val)(this.configPointer))))))}getStaticValues(){return this._cache.get("getDerivationOfStatics",(()=>(0,oe.prism)((()=>{var t;const e=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],r=null!=(t=(0,oe.val)(e.staticOverrides.byObject[this.address.objectKey]))?t:{};return(0,oe.val)(this.configPointer).deserializeAndSanitize(r)||{}}))))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",(()=>(0,oe.prism)((()=>{const t=this.project.pointers.historic.sheetsById[this.address.sheetId],e=(0,oe.val)(t.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!e)return x;const r=[];if(!e)return x;const n=(0,oe.val)(this.configPointer),o=Object.entries(e);for(const[a,s]of o){const t=ni(a);if(!t)continue;const e=xo(n,t);e&&!Co(e)&&r.push({pathToProp:t,trackId:s})}const i=function(t){const e=ti.get(t);if(e)return e;const r=new Map;return ti.set(t,r),ei([],t,r),r}(n);return r.sort(((t,e)=>{const r=t.pathToProp,n=e.pathToProp;return i.get(JSON.stringify(r))>i.get(JSON.stringify(n))?1:-1})),0===r.length?x:r}))))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",(()=>this.getArrayOfValidSequenceTracks().map((t=>{let e={};for(const{pathToProp:r,trackId:n}of t)de(e,r,n);return e}))))}getDefaultsAtPointer(t){const{path:e}=(0,oe.getPointerParts)(t),r=function(t,e){return 0===e.length?t:re(t,e)}(this.getDefaultValues().getValue(),e);return r}}(this,t,e,r,n),this._objectTemplates.setIn([t],o)),o}}(this,t),this._sheetTemplates.setIn([t],r)),r.getInstance(e)}}(t,e,this))}get ready(){return k(this).ready}get isReady(){return k(this).isReady()}get address(){return p({},k(this).address)}getAssetUrl(t){return t.id?k(this).assetStorage.getAssetUrl(t.id):void 0}sheet(t,e="default"){const r=Ki(t);return k(this).getOrCreateSheet(r,e).publicApi}}(t,e)}var rs=(t,e)=>{((t,e)=>{if(Array.isArray(e)||null==e||e.definitionVersion!==Ja.currentProjectStateDefinitionVersion)throw new ai(`Error validating conf.state in Theatre.getProject(${JSON.stringify(t)}, conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state`)})(t,e)};function ns(t,e){if((0,Za.isPointer)(t)){return(0,ts.valueDerivation)(t).tapImmediate(Oe,e)}if((0,ts.isDerivation)(t))return t.tapImmediate(Oe,e);throw new Error("Called onChange(p) where p is neither a pointer nor a derivation.")}function os(t){if((0,Za.isPointer)(t))return(0,ts.valueDerivation)(t).getValue();throw new Error("Called val(p) where p is not a pointer.")}!function(){if("undefined"==typeof window)return;const t=window[hi];if("undefined"!==typeof t)throw"object"===typeof t&&t&&"string"===typeof t.version?new Error("It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:\n1. You might have two separate versions of Theatre.js in node_modules.\n2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.\n\nNote that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module."):new Error(`The variable window.${hi} seems to be already set by a module other than @theatre/core.`);const e=new class{constructor(){m(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.6.0-dev.3"}getBitsForStudio(t,e){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=t,e({projectsP:D.atom.pointer.projects,privateAPI:k,coreExports:S})}};window[hi]=e;const r=window.__TheatreJS_StudioBundle;r&&null!==r&&"Theatre_StudioBundle"===r.type&&r.registerCoreBundle(e)}()}}]);