"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4821],{74821:function(e,t,n){n.r(t),n.d(t,{default:function(){return qa}});var i=n(98788),a=n(5163),r=n(52322),o=n(2784),s=n(64033),l=n(36472),u=n(18815),c=n(90581),d=n(11389),h=n(34067),m=n(64297),p=n(39309),f=n(51502),v=n(96995),g=n(21395);function _(e){return new Promise((function(t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.overrideMimeType("application/json"),n.responseType="arraybuffer",n.onreadystatechange=function(){var e=n.DONE||4;n.readyState===e&&200===n.status&&t(n.response)},n.send()}))}var y=n(23766);function x(e){return _(e).then((function(e){return(0,g.MN)(new DataView(e))}))}function b(e,t){y.o.init(u.yO.renderer);var n=y.o.HALF_FLOAT_TEXTURES?v.cLu:v.VzW,i=n===v.cLu?function(e){for(var t=e.length,n=new Uint16Array(t),i=new Int32Array(e.buffer),a=0;a<t;++a){var r=i[a],o=r>>16&32768,s=r>>12&2047,l=r>>23&255;l<103||(l>142?(o|=31744,o|=(255==l?0:1)&&8388607&r):l<113?o|=((s|=2048)>>114-l)+(s>>113-l&1):(o|=l-112<<10|s>>1,o+=1&s)),n[a]=o}return n}(e):e,a=new v.IEO(i,t.width,t.height,v.wk1,n);return a.encoding=v.rnI,a.flipY=!1,a.needsUpdate=!0,a.wrapS=v.uWy,a.wrapT=v.uWy,a}var S=n(88970);function w(e){return(new v.dpR).loadAsync(e).then((function(e){return t=u.yO.renderer,(n=e).generateMipmaps=!0,new v.anP(t).fromEquirectangular(n).texture;var t,n}))}var T=new(n(556)._);T.setDecoderPath("/libs/draco/");var P=new S.E;function C(e){return new Promise((function(t,n){P.loadAsync(e,null).then((function(e){t(e)})).catch(n)}))}P.setDRACOLoader(T);var R=[{type:"texture",file:"/textures/earth/earth_***/earth_albedo.jpg",name:"earth_albedo"},{type:"texture",file:"/textures/earth/earth_***/earth_clouds.jpg",name:"earth_clouds"},{type:"texture",file:"/textures/earth/earth_***/earth_emissive.jpg",name:"earth_emissive"},{type:"texture",file:"/textures/earth/earth_***/earth_normals_spec.jpg",name:"earth_normals_spec"},{type:"texture",file:"/textures/perlin.jpg",name:"perlin-noise"},{type:"texture",file:"/textures/noise.jpg",name:"noise"},{type:"custom",file:"/textures/atmosphere/transmittance.raw",name:"atmosphere-transmittance",load:function(e,t,n){return function(i){return _(i).then((function(i){for(var a=new DataView(i),r=e*t,o=new Float32Array(4*r),s=0,l=0,u=0;u<r;++u){for(var c=0;c<n;++c)o[l++]=a.getFloat32(s++*Float32Array.BYTES_PER_ELEMENT,!0);for(var d=n;d<4;++d)o[l++]=1}var h=new v.IEO(o,e,t,v.wk1,v.VzW);return h.encoding=v.rnI,h.flipY=!1,h.needsUpdate=!0,h.wrapS=v.uWy,h.wrapT=v.uWy,h}))}}(256,64,3)},{type:"custom",file:"/textures/atmosphere/irradiance.hdr",name:"atmosphere-irradiance",load:function(e){return x(e).then((function(e){for(var t=new Float32Array(e.width*e.height*4),n=0,i=0,a=t.length;n<a;n+=4,i+=3)t[n]=e.data[i],t[n+1]=e.data[i+1],t[n+2]=e.data[i+2],t[n+3]=1;return b(t,e)}))}},{type:"custom",file:"/textures/atmosphere/scattering.hdr",name:"atmosphere-scattering",load:function(e){var t;return x(e).then((function(n){t=n;var i=e.indexOf(".hdr");return x(e=e.substr(0,i)+"_alpha"+e.substr(i))})).then((function(e){for(var n=new Float32Array(t.width*t.height*4),i=0,a=0,r=n.length;i<r;i+=4,a+=3)n[i]=t.data[a],n[i+1]=t.data[a+1],n[i+2]=t.data[a+2],n[i+3]=e.data[a];return b(n,t)}))}}],M=R.concat([{type:"texture",file:"/textures/lensFlare/halo.jpg",name:"lensflare-halo"},{type:"texture",file:"/textures/lensFlare/center-flare.jpg",name:"lensflare-center"},{type:"texture",file:"/textures/lensFlare/main.jpg",name:"lensflare-main"},{type:"texture",file:"/textures/lensFlare/bokeh-atlas.jpg",name:"lensflare-bokeh-atlas"},{type:"texture",file:"/textures/starfield.jpg",name:"starfield"},{type:"custom",load:C,file:"/models/satellite_gps3.glb",name:"satellite_gps3"},{type:"texture",file:"/textures/inner-clouds.png",name:"inner-clouds"},{type:"texture",file:"/textures/horizon-clouds.jpg",name:"horizon-clouds"},{type:"texture",file:"/textures/lobby-lut.jpg",name:"lobby-lut"},{type:"texture",file:"/textures/fire-atlas.png",name:"fire-atlas"},{type:"texture",file:"/textures/exhaust-sheet.jpg",name:"exhaust-sheet"},{type:"texture",file:"/textures/heatwave.jpg",name:"heatwave"},{type:"custom",file:"/hdri/the_sky_is_on_fire_1k_sh_irrad.ash",name:"groundLightProbe",load:function(e){return new Promise((function(t,n){(new v.hH6).load(e,(function(n){var i=function(e){var t=new v.lDi,n=0;return e.split("\n").forEach((function(e){if(0!==(e=e.trim()).length&&"#"!==e.charAt(0)){var i=e.split(/\s+/),a=i[0].split("=");switch(a[0]){case"l":n=parseInt(a[1]);break;case"m":var r=parseInt(a[1]),o=n*n+r+n;t.coefficients[o]=new v.Pa4(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]));break;default:return}}})),t}(n),a=new v.lk7(i,1/Math.PI);a.userData={url:e},t(a)}),null,n)}))}},{type:"custom",load:C,file:"/models/spaceForce_scene_v28_ai_fixedEdgeNormals.glb",name:"launchScene"},{type:"custom",load:C,file:"/models/launchSequence.glb",name:"launchSequence"},{type:"texture",file:"/textures/sceneBaked***.jpg",name:"sceneLightMap"},{type:"texture",file:"/textures/terrainBaked.jpg",name:"terrainLightMap"},{type:"custom",load:C,file:"/models/spaceForce_rocket_v18_separated_darkenedDiffuse.gltf",name:"rocket"},{type:"texture",file:"/textures/rocketAO.jpg",name:"rocketAO"},{type:"texture",file:"/textures/cloud-rush.jpg",name:"cloud-rush"},{type:"texture",file:"/textures/birdsFlying.png",name:"birdsFlying"},{type:"texture",file:"/textures/birdsFlying2.png",name:"birdsFlying2"},{type:"texture",file:"/textures/terrain/T_DirtGrass_C.jpg",name:"terrain_dirt_grass"},{type:"texture",file:"/textures/terrain/T_DirtTile_C.jpg",name:"terrain_dirt"},{type:"texture",file:"/textures/terrain/T_GrassTile_C.jpg",name:"terrain_grass"},{type:"texture",file:"/textures/rocketAlpha.jpg",name:"rocketAlpha"},{type:"custom",file:"/hdri/space-env-map-blue.jpg",name:"spaceEnvMapBlue",load:w}]),k=R.concat([{type:"custom",load:C,file:"/models/satellite_gps3.glb",name:"satellite_gps3"},{type:"custom",load:C,file:"/models/AEHF_Satellite_v03_ai_adjusted_panels_roughness_jpegs.glb",name:"satellite_aehf"},{type:"texture",file:"/textures/fire-atlas.png",name:"fire-atlas"},{type:"custom",load:C,file:"/models/spaceForce_debris_v02_ai.glb",name:"debrisModel"},{type:"custom",load:C,file:"/models/falconHeavy_v06_ai_explodedView_combinedWithSatellite_jpegs.gltf",name:"falconHeavyBreakoutModel"},{type:"custom",load:C,file:"/models/Vulcan_Anim_v02_ai_jpegs.glb",name:"vulcanBreakoutModel"},{type:"custom",load:C,file:"/models/GPS_III_static_v03_ai_adjusted panels_roughness_jpegs.glb",name:"gps3AnimationModel"},{type:"texture",file:"/textures/curvelines.png",name:"curveLines"},{type:"texture",file:"/hdri/nebulabg.jpg",name:"nebulaSkyBox"},{type:"custom",file:"/hdri/space-env-map.jpg",name:"spaceEnvMap",load:w},{type:"custom",file:"/hdri/space-env-map-blue.jpg",name:"spaceEnvMapBlue",load:w}]),E=R.concat([]),A=R.concat([{type:"texture",file:"/textures/starfield.jpg",name:"starfield"},{type:"texture",file:"/textures/earth/night-detail.jpg",name:"earth-night-detail"},{type:"texture",file:"/textures/curvelines.png",name:"curveLines"},{type:"texture",file:"/hdri/nebulabg.jpg",name:"nebulaSkyBox"}]);var L=n(34382),D=n(45359),I=n(46414),O=n(33422),N=n(28575),U=n(88578),Z=function(){};function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(n,i){var a=u.Ll.models.get(t);t.length>0&&void 0!==a?n(a):(new I.y).load(e,(function(e){t.length>0&&u.Ll.models.set(t,e),n(e)}),Z,(function(){i()}))}))}var B=new S.E;function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(n,i){var a=u.Ll.models.get(t);t.length>0&&void 0!==a?n(a):B.loadAsync(e,Z).then((function(e){t.length>0&&u.Ll.models.set(t,e),n(e)})).catch(i)}))}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(n,i){var a=u.Ll.models.get(t);t.length>0&&void 0!==a?n(a):(new N.L).load(e,(function(e){t.length>0&&u.Ll.models.set(t,e),n(e)}),Z,(function(){i()}))}))}var G=new v.dpR;function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(n,i){if(e.search(".ktx")>-1){var a=new O.a;a.setTranscoderPath("libs/"),a.detectSupport(u.yO.renderer),a.loadAsync(e,Z).then((function(e){e.needsUpdate=!0,t.length>0&&u.Ll.textures.set(t,e),n(e)})).catch(i)}else G.loadAsync(e,Z).then((function(e){e.needsUpdate=!0,t.length>0&&u.Ll.textures.set(t,e),n(e)})).catch(i)}))}var W=new v.cBK;function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(n,i){W.setPath(e[0]);var a=e[1],r=["px.".concat(a),"nx.".concat(a),"py.".concat(a),"ny.".concat(a),"pz.".concat(a),"nz.".concat(a)];W.load(r,(function(e){e.encoding=v.knz,e.needsUpdate=!0,t.length>0&&u.Ll.cubeTextures.set(t,e),n(e)}),Z,(function(){i()}))}))}var K=new U.x,q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(n,i){K.loadAsync(e,Z).then((function(e){var i=new v.anP(u.yO.renderer);i.compileEquirectangularShader();var a=i.fromEquirectangular(e).texture;i.dispose();var r=a;t.length>0&&u.Ll.cubeTextures.set(t,r),n(r)})).catch(i)}))},Y=function(){function e(){(0,c.Z)(this,e),this.supportsBlob=!1,this.debugProgress=!1;try{this.supportsBlob=!!new Blob}catch(t){this.supportsBlob=!1}}var t=e.prototype;return t.loadXHR=function(e,t,n){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(i){return[2,new Promise((function(i,a){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType=t,r.addEventListener("progress",(function(e){var t=e.loaded/e.total;n(t)}),!1),r.addEventListener("load",(function(){i(r)}),!1),r.addEventListener("error",(function(){a()}),!1),r.send()}))]}))}))()},t.loadImage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(i){return r.supportsBlob?[2,r.loadImageBlob(e,t,n)]:[2,r.loadImageElement(e,n)]}))}))()},t.loadImageBlob=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(i){return[2,new Promise((function(i,a){var o=u.Ll.images.get(n);n.length>0&&void 0!==o?i(o):r.loadXHR(e,"blob",t).then((function(e){var t=new Image;window.URL.revokeObjectURL(e.response),t.src=window.URL.createObjectURL(e.response),n.length>0&&u.Ll.images.set(n,t),i(t)})).catch(a)}))]}))}))()},t.loadImageElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){return[2,new Promise((function(n,i){var a=u.Ll.images.get(t);if(t.length>0&&void 0!==a)n(a);else{var r=new Image;r.addEventListener("error",(function(){i()}),!1),r.addEventListener("load",(function(){t.length>0&&u.Ll.images.set(t,r),n(r)}),!1),r.src=e}}))]}))}))()},t.loadImages=function(e,t,n){var r=this;return(0,i.Z)((function(){var i,o,s,l,u;return(0,a.__generator)(this,(function(a){return i=[],r.supportsBlob?(o={},s=function(){var e=0,t=0;Object.keys(o).forEach((function(n){t++,e+=o[n]})),n(e/t)},t.forEach((function(t){o[t]=0,i.push(r.loadImageBlob(e+t,(function(e){o[t]=e,s()})))}))):(l=0,u=t.length,t.forEach((function(t){i.push(new Promise((function(i,a){r.loadImageElement(e+t).then((function(e){++l,n(l/u),i(e)})).catch(a)})))}))),[2,Promise.all(i)]}))}))()},t.loadJSON=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(i){return[2,new Promise((function(i,a){var o=u.Ll.json.get(n);n.length>0&&void 0!==o?i(o):r.loadXHR(e,"json",t).then((function(e){var t=e.response;"string"===typeof t&&(t=JSON.parse(t)),n.length>0&&u.Ll.json.set(n,t),i(t)})).catch(a)}))]}))}))()},t.loadAudioElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){return[2,new Promise((function(n,i){var a=u.Ll.audio.get(t);if(t.length>0&&void 0!==a)n(a);else{var r=document.createElement("audio");r.setAttribute("crossOrigin","anonymous"),r.autoplay=!1,r.src=e,r.addEventListener("error",(function(){i()}),!1),r.addEventListener("canplaythrough",(function(){t.length>0&&u.Ll.audio.set(t,r),n(r)}),!1),r.load()}}))]}))}))()},t.loadFBX=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){return[2,z(e,t)]}))}))()},t.loadGLTF=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){return[2,F(e,t)]}))}))()},t.loadOBJ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){return[2,H(e,t)]}))}))()},t.loadVideoElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){return[2,new Promise((function(n,i){var a=u.Ll.videos.get(t);if(t.length>0&&void 0!==a)n(a);else{var r=document.createElement("video");r.setAttribute("crossOrigin","anonymous"),r.playsInline=!0,r.autoplay=!1,r.src=e,r.addEventListener("error",(function(){i()}),!1),r.addEventListener("canplaythrough",(function(){t.length>0&&u.Ll.videos.set(t,r),n(r)}),!1),r.load()}}))]}))}))()},t.loadAssets=function(e,t,n){var r=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(i){return[2,new Promise((function(i,a){var o=0,s=e.length,l={},c=function(){t(1),i(u.Ll)};if(s<1)c();else{e.sort((function(e,t){return e.type<t.type?-1:e.type>t.type?1:0}));var d=function(){++o>=s?c():(t((0,u.uZ)(0,1,o/s)),n&&h())},h=function(){var t=e[o],n=t.type,i=t.file,s=t.name;switch(l[s]=i,n){case"audio":r.loadAudioElement(i,s).then((function(){delete l[s],d()})).catch((function(){a("Error loading: ".concat(i))}));break;case"custom":t.load(i).then((function(e){u.Ll.custom.set(s,e),delete l[s],d()})).catch((function(){a("Error loading: ".concat(i))}));break;default:case"image":r.loadImageElement(i,s).then((function(){delete l[s],d()})).catch((function(){a("Error loading: ".concat(i))}));break;case"json":r.loadJSON(i,Z,s).then((function(){delete l[s],d()})).catch((function(){a("Error loading: ".concat(i))}));break;case"video":r.loadVideoElement(i,s).then((function(){delete l[s],d()})).catch((function(){a("Error loading: ".concat(i))}));break;case"cubeTexture":V(i,s).then((function(){delete l[s],d()})).catch((function(){a("Error loading: ".concat(i))}));break;case"texture":j(i,s).then((function(){delete l[s],d()})).catch((function(){a("Error loading: ".concat(i))}));break;case"gltf":r.loadGLTF(i,s).then((function(){delete l[s],d()})).catch((function(){a("Error loading: ".concat(i))}));break;case"fbx":r.loadFBX(i,s).then((function(){delete l[s],d()})).catch((function(){a("Error loading: ".concat(i))}));break;case"obj":r.loadOBJ(i,s).then((function(){delete l[s],d()})).catch((function(){a("Error loading: ".concat(i))}));break;case"hdri":q(i,s).then((function(){delete l[s],d()})).catch((function(){a("Error loading: ".concat(i))}))}};n?h():e.forEach((function(e){var t=e.type,n=e.file,i=e.name;switch(l[i]=n,t){case"audio":r.loadAudioElement(n,i).then((function(){delete l[i],d()})).catch((function(){a("Error loading: ".concat(n))}));break;case"custom":e.load(n).then((function(e){u.Ll.custom.set(i,e),delete l[i],d()})).catch((function(){a("Error loading: ".concat(n))}));break;default:case"image":r.loadImageElement(n,i).then((function(){delete l[i],d()})).catch((function(){a("Error loading: ".concat(n))}));break;case"json":r.loadJSON(n,Z,i).then((function(){delete l[i],d()})).catch((function(){a("Error loading: ".concat(n))}));break;case"video":r.loadVideoElement(n,i).then((function(){delete l[i],d()})).catch((function(){a("Error loading: ".concat(n))}));break;case"cubeTexture":V(n,i).then((function(){delete l[i],d()})).catch((function(){a("Error loading: ".concat(n))}));break;case"texture":j(n,i).then((function(){delete l[i],d()})).catch((function(){a("Error loading: ".concat(n))}));break;case"gltf":r.loadGLTF(n,i).then((function(){delete l[i],d()})).catch((function(){a("Error loading: ".concat(n))}));break;case"fbx":r.loadFBX(n,i).then((function(){delete l[i],d()})).catch((function(){a("Error loading: ".concat(n))}));break;case"obj":r.loadOBJ(n,i).then((function(){delete l[i],d()})).catch((function(){a("Error loading: ".concat(n))}));break;case"hdri":q(n,i).then((function(){delete l[i],d()})).catch((function(){a("Error loading: ".concat(n))}))}}))}}))]}))}))()},e}(),X=new Y,Q=n(13706),J=n(27805),$=n(50930),ee=function(){function e(t){var n=this;(0,c.Z)(this,e),this.position=new v.FM8,this.normal=new v.FM8,this.dragDelta=new v.FM8,this.dragDeltaNormal=new v.FM8,this.DRAG_MIN=6,this.onMouseMove=function(e){var t=e.clientX,i=e.clientY;n.position.set(t,i),n.normal.set(t/u.yO.width,i/u.yO.height),n.isMouseDown&&(Math.abs(t-n.dragStartX)>n.DRAG_MIN||Math.abs(i-n.dragStartY)>n.DRAG_MIN)&&(n.isDragging||(n.isDragging=!0,n._dragStartHandler&&n._dragStartHandler()),n.dragDelta.set(t-n.dragStartX,i-n.dragStartY),n.dragDeltaNormal.set(n.dragDelta.x/u.yO.width,n.dragDelta.y/u.yO.height))},this.onTouchDrag=function(e){var t=e.touches[0],i=t.clientX,a=t.clientY;n.position.set(i,a),n.normal.set(i/u.yO.width,a/u.yO.height)},this.onMouseDown=function(e){n.dragStartX=e.clientX,n.dragStartY=e.clientY,n.isMouseDown=!0,n.isDragging=!1,n.dragDelta.set(0,0)},this.onMouseUp=function(){n.isMouseDown=!1,n.isDragging&&(n.isDragging=!1,n._dragEndHandler&&n._dragEndHandler()),n.dragDelta.set(0,0)},this.target=(null===t||void 0===t?void 0:t.target)?t.target:document.body,this._dragStartHandler=(null===t||void 0===t?void 0:t.onDragStart)?t.onDragStart:null,this._dragEndHandler=(null===t||void 0===t?void 0:t.onDragEnd)?t.onDragEnd:null}var t=e.prototype;return t.enable=function(){y.o.isMobile()?this.target.addEventListener("touchmove",this.onTouchDrag,!1):(this.target.addEventListener("mousemove",this.onMouseMove,!1),this.target.addEventListener("mousedown",this.onMouseDown,!1),this.target.addEventListener("mouseup",this.onMouseUp,!1),this.target.addEventListener("mouseleave",this.onMouseUp,!1))},t.disable=function(){y.o.isMobile()?this.target.removeEventListener("touchmove",this.onTouchDrag):(this.target.removeEventListener("mousemove",this.onMouseMove),this.target.removeEventListener("mousedown",this.onMouseDown),this.target.removeEventListener("mouseup",this.onMouseUp),this.target.removeEventListener("mouseleave",this.onMouseUp))},e}(),te=new ee,ne=n(52001),ie=n(64770),ae=n(70865),re=n(96670),oe=new v.$V,se=function(){function e(t,n){(0,c.Z)(this,e),this.duration=n,this.scene=t,this.tl=ne.ZP.timeline({repeat:0}),this.tl.pause()}var t=e.prototype;return t.play=function(){var e=this;return new Promise((function(t){e.tl.eventCallback("onComplete",t),e.tl.play()}))},t.addCamTarget=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0;return this.tl.to(this.scene.camTarget,{x:e,y:t,z:n,duration:null!==a&&void 0!==a?a:this.duration,ease:ie.lD.easeInOut},i),this},t.addCamPosition=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0;return this.tl.to(this.scene.camContainer.position,{x:e,y:t,z:n,duration:null!==a&&void 0!==a?a:this.duration,ease:ie.lD.easeInOut},i),this},t.addSunIntensity=function(e){var t=this.scene.sun;return this.tl.to(t,{intensity:e,duration:this.duration,ease:ie.lD.easeInOut},0),this},t.addProbeIntensity=function(e){var t=this.scene.sun;return this.tl.to(t,{intensity:e,duration:this.duration,ease:ie.lD.easeInOut},0),this},t.addSunPosition=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,a=this.scene.sun;return this.tl.to(oe,{phi:e,theta:t,duration:null!==i&&void 0!==i?i:this.duration,ease:ie.lD.easeInOut,onUpdate:function(){return a.position.setFromSphericalCoords(oe.radius,oe.phi,oe.theta)}},n),this},t.addPointIntensity=function(e){var t=this.scene.pointLight;return this.tl.to(t,{intensity:e,duration:this.duration,ease:ie.lD.easeInOut},0),this},t.addPointPosition=function(e,t,n){var i=this.scene.pointLight;return this.tl.to(i.position,{x:e,y:t,z:n,duration:this.duration,ease:ie.lD.easeInOut},0),this},t.addEarthRotation=function(e,t,n){var i=this,a=this.scene.earth.quaternion.clone(),r=(new v._fP).setFromEuler(new v.USm(e,t,n));return this.t=0,this.tl.to(this,{t:1,duration:this.duration,ease:ie.lD.easeInOut,onUpdate:function(){return i.scene.earth.quaternion.slerpQuaternions(a,r,i.t)}},0),this},t.to=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;return i=null!==i&&void 0!==i?i:n+this.duration,this.tl.to(e,(0,re.Z)((0,ae.Z)({},t),{duration:i-n,ease:ie.lD.easeInOut}),n),this},t.seek=function(e){this.tl.seek(e,!1)},e}();function le(e,t,n,i){n=null!==n&&void 0!==n?n:new v.Pa4,i?n.copy(i):(e.updateMatrixWorld(),e.getWorldPosition(n)),n.project(t);var a=window.innerWidth/2,r=window.innerHeight/2;return n.x=n.x*a+a,n.y=-n.y*r+r,n}var ue=function(){function e(t){(0,c.Z)(this,e),this.targetScroll=0,this.scroll=0,this.hotspots=[],this.onSetScroll=this.onSetScroll.bind(this),this.onHotspotOpen=this.onHotspotOpen.bind(this),this.onHotspotClose=this.onHotspotClose.bind(this),this.scene=t}var t=e.prototype;return t.createTransition=function(e){return new se(this.scene,e)},t.createScrollTransition=function(){return this.scrollTransition=new se(this.scene,this.maxScrollValue),this.scrollTransition},t.resize=function(e,t){},t.show=function(e){var t=this;return this.scrollValues=e,this.maxScrollValue=function(e){var t=Number.NEGATIVE_INFINITY;for(var n in e){var i=e[n];"hotspots"===n||(t="buttons"===n?Math.max(i.end,t):Math.max(i,t))}return t+200}(e),this.targetScroll=0,this.scroll=0,this.scene.blurAmount=0,this.initHotspots(),L.Z.addEventListener(D.zW.CAPABILITIES_SET_SCROLL,this.onSetScroll),y.o.isMobile()&&(L.Z.addEventListener(D.zW.HOTSPOT_OPEN,this.onHotspotOpen),L.Z.addEventListener(D.zW.HOTSPOT_CLOSE,this.onHotspotClose)),this.readyToTween=!1,this.onShow().then((function(){var e;t.scrollValues.hideScene&&(t.scrollTransition=null!==(e=t.scrollTransition)&&void 0!==e?e:t.createScrollTransition(),t.scrollTransition.to(t.scene,{blurAmount:1},t.scrollValues.hideScene-200,t.scrollValues.hideScene+200),t.readyToTween=!0)}))},t.hide=function(){return this.hotspots.forEach((function(e){var t;e.active=!1,null===(t=e.object3D.parent)||void 0===t||t.remove(e.object3D)})),L.Z.removeEventListener(D.zW.CAPABILITIES_SET_SCROLL,this.onSetScroll),y.o.isMobile()&&(L.Z.removeEventListener(D.zW.HOTSPOT_OPEN,this.onHotspotOpen),L.Z.removeEventListener(D.zW.HOTSPOT_CLOSE,this.onHotspotClose)),this.onHide()},t.initMesh=function(){return Promise.resolve()},t.initLights=function(){return Promise.resolve()},t.initDebug=function(){return Promise.resolve()},t.hideTransparents=function(){},t.showTransparents=function(){},t.update=function(e,t){var n;this.readyToTween&&(this.scroll=v.M8C.lerp(this.scroll,this.targetScroll,.05),null===(n=this.scrollTransition)||void 0===n||n.seek(this.scroll),this.updateHotspots())},t.getHotspotObject3D=function(e){for(var t=0,n=this.hotspots.length;t<n;++t){var i;if(this.hotspots[t].name===e)return null===(i=this.hotspots[t])||void 0===i?void 0:i.object3D}},t.onSetScroll=function(e){this.targetScroll=e.scrollValue},t.initHotspots=function(){var e,t,n=this;this.hotspots=[],null===(e=this.hotspotGroups)||void 0===e||e.forEach((function(e){return e.removeFromParent()})),this.hotspotGroups=new Map,null===(t=this.scrollValues.hotspots)||void 0===t||t.forEach((function(e){return n.addHotspot(e)}))},t.addHotspot=function(e){var t=e.name,n=e.group,i=new v.Tme;i.visible=!1,i.name=t;var a=this.hotspotGroups.get(n);a||((a=new v.ZAu).name=n,this.hotspotGroups.set(n,a),this.linkHotspotGroup(a)),a.add(i);var r={start:0,end:0,object3D:i,active:!1,name:t,vec3:new v.Pa4};this.hotspots.push(r),this.linkHotspot(r)},t.updateHotspots=function(){var e,t,n=this;this.hotspots.forEach((function(i){var a=n.scroll>=i.start&&n.scroll<=i.end;a&&!i.active?n.activateHotspot(i):!a&&i.active&&((t=null!==t&&void 0!==t?t:[]).push(i),n.deactivateHotspot(i)),i.active&&(e=null!==e&&void 0!==e?e:[]).push(n.updateHotspot(i))})),e&&L.Z.dispatchEvent({type:D.zW.HOTSPOT_UPDATE,value:e}),t&&L.Z.dispatchEvent({type:D.zW.HOTSPOTS_HIDE,value:t})},t.activateHotspot=function(e){e.active=!0,e.object3D.visible=!0},t.deactivateHotspot=function(e){e.active=!1,e.object3D.visible=!1,this.scene.activeHotspotName===e.name&&this.scene.closeHotspot(),L.Z.dispatchEvent({type:D.zW.HOTSPOT_HIDE,hotspot:e})},t.updateHotspot=function(e){var t=e.object3D.userData.holdPosition,n=le(e.object3D,this.scene.camera,e.vec3,t);return n.x=Math.round(n.x),n.y=Math.round(n.y),{point:n,name:e.object3D.name}},t.addForCompilation=function(e,t){this.scene.frustumDisabler.add(e,t)},t.onHotspotOpen=function(e){var t=this.getHotspotByName(e.name);t.object3D.userData.holdPosition=t.object3D.getWorldPosition(new v.Pa4)},t.onHotspotClose=function(e){delete this.getHotspotByName(e.name).object3D.userData.holdPosition},t.getHotspotByName=function(e){for(var t=0;t<this.hotspots.length;++t)if(this.hotspots[t].name===e)return this.hotspots[t];return null},(0,J.Z)(e,[{key:"heroDuration",get:function(){return this.scrollValues.heroEnd}}]),e}();var ce=n(42838),de=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;(0,c.Z)(this,n);var a,r=v.rDY.merge([e.uniforms,v.Vj0.standard.uniforms]);for(var o in e.uniforms)r[o].value=e.uniforms[o].value;return e.uniforms=r,e.lights=!0,void 0===e.type&&(e.type="CustomStandardMaterial"),(i=t.call(this)).uniforms=e.uniforms,i.defines=null!==(a=e.defines)&&void 0!==a?a:{},i.setValues(e),i.normalMapType=v.IOt,i.opacity=1,i.normalScale=new v.FM8(1,1),i._morphTargets=!1,i._morphNormals=!1,i._useInstancing=!1,i}return n.prototype.fromStandardMaterial=function(e){this.map=e.map,this.color=e.color,this.metalness=e.metalness,this.roughness=e.roughness,this.opacity=e.opacity,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive=e.emissive,this.emissiveMap=e.emissiveMap,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale=e.normalScale,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.transparent=e.transparent,this.blending=e.blending,this.vertexColors=e.vertexColors},(0,J.Z)(n,[{key:"color",get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value.set(e)}},{key:"metalness",get:function(){return this.uniforms.metalness.value},set:function(e){this.uniforms.metalness.value=e}},{key:"roughness",get:function(){return this.uniforms.roughness.value},set:function(e){this.uniforms.roughness.value=e}},{key:"opacity",get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms&&(this.uniforms.opacity.value=e)}},{key:"map",get:function(){return this.uniforms.map.value},set:function(e){this.needsUpdate=!!this.uniforms.map.value!==!!e,this.uniforms.map.value=e}},{key:"lightMap",get:function(){return this.uniforms.lightMap.value},set:function(e){this.needsUpdate=!!this.uniforms.lightMap.value!==!!e,this.uniforms.lightMap.value=e}},{key:"lightMapIntensity",get:function(){return this.uniforms.lightMapIntensity.value},set:function(e){this.uniforms.lightMapIntensity.value=e}},{key:"aoMap",get:function(){return this.uniforms.aoMap.value},set:function(e){this.needsUpdate=!!this.uniforms.aoMap.value!==!!e,this.uniforms.aoMap.value=e}},{key:"aoMapIntensity",get:function(){return this.uniforms.aoMapIntensity.value},set:function(e){this.uniforms.aoMapIntensity.value=e}},{key:"emissive",get:function(){return this.uniforms.emissive.value},set:function(e){this.uniforms.emissive.value.set(e)}},{key:"emissiveMap",get:function(){return this.uniforms.emissiveMap.value},set:function(e){this.needsUpdate=!!this.uniforms.emissiveMap.value!==!!e,this.uniforms.emissiveMap.value=e}},{key:"bumpMap",get:function(){return this.uniforms.bumpMap.value},set:function(e){this.needsUpdate=!!this.uniforms.bumpMap.value!==!!e,this.uniforms.bumpMap.value=e}},{key:"bumpScale",get:function(){return this.uniforms.bumpScale.value},set:function(e){this.uniforms.bumpScale.value=e}},{key:"normalMap",get:function(){return this.uniforms.normalMap.value},set:function(e){this.needsUpdate=!!this.uniforms.normalMap.value!==!!e,this.uniforms.normalMap.value=e}},{key:"normalMapType",get:function(){return this._normalMapType},set:function(e){this.needsUpdate=this._normalMapType!==e,this._normalMapType=e}},{key:"normalScale",get:function(){return this.uniforms.normalScale.value},set:function(e){this.uniforms.normalScale.value=e}},{key:"displacementMap",get:function(){return this.uniforms.displacementMap.value},set:function(e){this.needsUpdate=!!this.uniforms.displacementMap.value!==!!e,this.uniforms.displacementMap.value=e}},{key:"displacementScale",get:function(){return this.uniforms.displacementScale.value},set:function(e){this.uniforms.displacementScale.value=e}},{key:"displacementBias",get:function(){return this.uniforms.displacementBias.value},set:function(e){this.uniforms.displacementBias.value=e}},{key:"roughnessMap",get:function(){return this.uniforms.roughnessMap.value},set:function(e){this.needsUpdate=!!this.uniforms.roughnessMap.value!==!!e,this.uniforms.roughnessMap.value=e}},{key:"metalnessMap",get:function(){return this.uniforms.metalnessMap.value},set:function(e){this.needsUpdate=!!this.uniforms.metalnessMap.value!==!!e,this.uniforms.metalnessMap.value=e}},{key:"alphaMap",get:function(){return this.uniforms.alphaMap.value},set:function(e){this.needsUpdate=!!this.uniforms.alphaMap.value!==!!e,this.uniforms.alphaMap.value=e}},{key:"envMap",get:function(){return this.uniforms.envMap.value},set:function(e){this.needsUpdate=!!this.uniforms.envMap.value!==!!e,this.uniforms.envMap.value=e}},{key:"envMapIntensity",get:function(){return this.uniforms.envMapIntensity.value},set:function(e){this.uniforms.envMapIntensity.value=e}},{key:"refractionRatio",get:function(){return this.uniforms.refractionRatio.value},set:function(e){this.uniforms.refractionRatio.value=e}},{key:"skinning",get:function(){return this._skinning},set:function(e){this._skinning!==e&&(this.needsUpdate=!0),this._skinning=e}},{key:"morphTargets",get:function(){return this._morphTargets},set:function(e){this._morphTargets!==e&&(this.needsUpdate=!0),this._morphTargets=e}},{key:"morphNormals",get:function(){return this._morphNormals},set:function(e){this._morphNormals!==e&&(this.needsUpdate=!0),this._morphNormals=e}}]),n}(v.jyz),he=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i){var a;return(0,c.Z)(this,n),(a=t.call(this,{vertexShader:"#define GLSLIFY 1\n#define STANDARD\n\nvarying vec3 vViewPosition;\nvarying vec3 vWorldPosition;\nvarying vec3 vEnvMapCenterPos;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <morphcolor_vertex>\n\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n    #include <normal_vertex>\n\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n\n    vViewPosition = - mvPosition.xyz;\n\n    #include <worldpos_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n\n    vWorldPosition = worldPosition.xyz;\n\n    vEnvMapCenterPos = modelMatrix[3].xyz;\n}",fragmentShader:"#define GLSLIFY 1\n#define STANDARD\n\n#ifdef PHYSICAL\n#define IOR\n#define SPECULAR\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef IOR\nuniform float ior;\n#endif\n\n#ifdef SPECULAR\nuniform float specularIntensity;\nuniform vec3 specularColor;\n\n#ifdef USE_SPECULARINTENSITYMAP\nuniform sampler2D specularIntensityMap;\n#endif\n\n#ifdef USE_SPECULARCOLORMAP\nuniform sampler2D specularColorMap;\n#endif\n#endif\n\n#ifdef USE_CLEARCOAT\nuniform float clearcoat;\nuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_IRIDESCENCE\nuniform float iridescence;\nuniform float iridescenceIOR;\nuniform float iridescenceThicknessMinimum;\nuniform float iridescenceThicknessMaximum;\n#endif\n\n#ifdef USE_SHEEN\nuniform vec3 sheenColor;\nuniform float sheenRoughness;\n\n#ifdef USE_SHEENCOLORMAP\nuniform sampler2D sheenColorMap;\n#endif\n\n#ifdef USE_SHEENROUGHNESSMAP\nuniform sampler2D sheenRoughnessMap;\n#endif\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vEnvMapCenterPos;\n\nuniform float envMapSize;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n\nvec3 intersectCubeMap(vec3 rayOrigin, vec3 rayDir, vec3 cubeCenter, float cubeSize)\n{\n    vec3 relPos = rayOrigin - cubeCenter;\n    vec3 t = (cubeSize * sign(rayDir) - relPos) / rayDir;\n    float minT = min(min(t.x, t.y), t.z);\n    return normalize(relPos + minT * rayDir);\n}\n\n#ifndef USE_TRANSMISSION\nvarying vec3 vWorldPosition;\n#endif\n\n#if defined( USE_ENVMAP )\n    vec3 getIBLIrradiance( const in vec3 normal ) {\n        #if defined( ENVMAP_TYPE_CUBE_UV )\n        vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n        vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n        return PI * envMapColor.rgb * envMapIntensity;\n        #else\n        return vec3( 0.0 );\n        #endif\n\n    }\n\n    vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n        #if defined( ENVMAP_TYPE_CUBE_UV )\n        vec3 reflectVec = reflect( - viewDir, normal );\n        // Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n        reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n        reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n        reflectVec = intersectCubeMap(vWorldPosition, reflectVec, vEnvMapCenterPos, envMapSize);\n        vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n        return envMapColor.rgb * envMapIntensity;\n        #else\n        return vec3( 0.0 );\n        #endif\n    }\n#endif\n\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n    #include <clipping_planes_fragment>\n\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <roughnessmap_fragment>\n    #include <metalnessmap_fragment>\n    #include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n    #include <emissivemap_fragment>\n\n    // accumulation\n    #include <lights_physical_fragment>\n    #include <lights_fragment_begin>\n    #include <lights_fragment_maps>\n    #include <lights_fragment_end>\n\n    // modulation\n    #include <aomap_fragment>\n\n    vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n    vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\n    #include <transmission_fragment>\n\n    vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\n    #ifdef USE_SHEEN\n\n    // Sheen energy compensation approximation calculation can be found at the end of\n    // https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\n    float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\n    outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\n    #endif\n\n    #ifdef USE_CLEARCOAT\n\n    float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n    vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\n    outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\n    #endif\n\n    #include <output_fragment>\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n\n}",uniforms:{envMapSize:{value:i}},type:"SizedEnvMapMaterial"})).fromStandardMaterial(e),a}return n}(de);function me(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;e.traverse((function(e){(0,ce.Z)(e,v.Kj0)&&((0,ce.Z)(e.material,v.EJi)||(0,ce.Z)(e.material,v.Wid))&&(e.name=e.material.name,null!==t&&(e.material.envMap=t),e.material.envMapIntensity=n,i&&(e.material=new he(e.material,i)),void 0!==a&&(e.material.roughness*=a))}))}function pe(e,t){return e+(t-e)*Math.random()}function fe(e,t){return Math.floor(e+(t-e)*Math.random())}var ve=2*Math.PI,ge=new v.yGw,_e=new v._fP,ye=function e(){(0,c.Z)(this,e),this.meshes=[],this.transforms=[]},xe=function e(){(0,c.Z)(this,e),this.pos=new v.Pa4,this.rot=new v._fP,this.speed=new v._fP},be=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a,r){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;(0,c.Z)(this,n),(o=t.call(this)).items=[],o.rotateSpeed=.2;var d=u.Ll.custom.get("debrisModel");return d.scene.scale.setScalar(100),d.scene.updateMatrixWorld(!0),d.scene.children.forEach((function(t){return o.initInstanced(t,r,e,i,a,s,l)})),o}var i=n.prototype;return i.initInstanced=function(e,t,n,i,a,r,o){for(var s=new ye,l=new v.USm,u=0;u<t;++u){var c=new xe,d=n+pe(-i,i),h=pe(r,o);l.set(0,h,pe(-a,a)),c.pos.set(d,0,0),c.pos.applyEuler(l),l.x=pe(0,ve),l.y=pe(0,ve),l.z=pe(0,ve),c.rot.setFromEuler(l),l.x=pe(-1,1),l.y=pe(-1,1),l.z=pe(-1,1),c.speed.setFromEuler(l),s.transforms.push(c)}this.convertMeshes(e,s,t),this.items.push(s)},i.update=function(e){var t=this;this.items.forEach((function(n){Se(n,e*t.rotateSpeed)}))},i.convertMeshes=function(e,t,n){var i=this;e.traverse((function(e){if((0,ce.Z)(e,v.Kj0)){var a=e.geometry.clone();e.updateMatrixWorld(!0),a.applyMatrix4(e.matrixWorld);var r=new v.SPe(a,e.material,n);r.instanceMatrix.needsUpdate=!0,r.count=n,i.add(r),t.meshes.push(r)}})),Se(t,0)},n}(v.ZAu);function Se(e,t){for(var n=e.transforms,i=0,a=n.length;i<a;++i){var r=n[i];t>0&&we(r,t),ge.makeRotationFromQuaternion(r.rot),ge.setPosition(r.pos);for(var o=0,s=e.meshes.length;o<s;++o){var l=e.meshes[o];l.setMatrixAt(i,ge),l.instanceMatrix.needsUpdate=!0}}}function we(e,t){_e.multiplyQuaternions(e.speed,e.rot),e.rot.slerp(_e,t)}function Te(e,t){e.traverse((function(e){(0,ce.Z)(e,v.Kj0)&&e.material.name.indexOf("SolarPanels")>=0&&(e.material.roughness=.2)})),me(e,u.Ll.custom.get("spaceEnvMapBlue"),1,t)}var Pe=new v._fP,Ce=new v._fP,Re=new v._fP,Me=new v.Pa4,ke=new v.yGw,Ee=function(){function e(t){(0,c.Z)(this,e),this.amount=.2,this.smoothing=.95,this.pivot=new v.Pa4,this.target=t;var n=new v.ZzF;n.setFromObject(t),t.parent&&(ke.copy(t.parent.matrixWorld).invert(),n.applyMatrix4(ke)),n.getCenter(this.pivot)}return e.prototype.update=function(){var e=(te.normal.y-.5)*this.amount,t=-(te.normal.x-.5)*this.amount;this.target.parent.getWorldQuaternion(Pe).invert(),Me.set(1,0,0).applyQuaternion(Pe),Ce.setFromAxisAngle(Me,e),Me.set(0,1,0).applyQuaternion(Pe),Re.setFromAxisAngle(Me,t),Pe.multiplyQuaternions(Ce,Re),this.target.quaternion.slerp(Pe,1-this.smoothing),Me.copy(this.pivot).negate().applyQuaternion(this.target.quaternion).add(this.pivot),this.target.position.copy(Me)},e}();function Ae(e,t,n){return v.M8C.lerp(n,e,De(t))}function Le(e,t,n,i){var a=window.innerWidth/window.innerHeight;return v.M8C.mapLinear(a,e,n,t,i)}function De(e){var t=window.innerWidth/window.innerHeight;return Math.min((t-e)/(1-e),1)}function Ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}var Oe=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,e)}var i=n.prototype;return i.initMesh=function(){this.satelliteContainer=new v.ZAu,this.satelliteContainer.name="Protecting Satellite Container",this.satelliteContainer.rotation.set(1.05,.2,.4),this.satelliteContainer.scale.setScalar(1e3);var e=u.Ll.custom.get("satellite_aehf");return this.satellite=e.scene.clone(),this.satelliteContainer.add(this.satellite),this.controller=new Ee(this.satellite),this.debrisBelt=new be(450,20,.3,10,.3*Math.PI,.3*-Math.PI),this.debrisBelt.name="debrisBelt",me(this.debrisBelt,u.Ll.custom.get("spaceEnvMapBlue"),5e3),Te(this.satellite,100),Ie()},i.preCompile=function(){this.addForCompilation(this.satelliteContainer),this.addForCompilation(this.debrisBelt)},i.update=function(e,t){(0,d.Z)((0,h.Z)(n.prototype),"update",this).call(this,e,t),this.debrisBelt.update(e),this.controller.update()},i.onShow=function(){var e=this.scene,t=e.earth,n=e.world,i=e.pointLight;t.visible=!0,me(this.debrisBelt,u.Ll.custom.get("spaceEnvMap"),2),Te(this.satellite,100);var a=Ae(375,.72,300),r=Ae(600,.72,400);this.satelliteContainer.position.set(800,400,r),this.debrisBelt.position.set(0,-100,0),this.debrisBelt.rotation.set(0,2,0),this.debrisBelt.scale.setScalar(1),n.add(this.satelliteContainer),n.add(this.debrisBelt),i.distance=300,i.position.set(500,200,800);var o=Ae(400,.72,300),s=o-Le(1,130,1.63,200),l=this.heroDuration,c=this.debrisEnd;return this.createScrollTransition().addCamPosition(o,300,800,0,l).addCamTarget(o,300,600,0,l).to(this.debrisBelt.rotation,{y:0,z:.7},0,c).to(this.debrisBelt.position,{y:0},0,c).addSunPosition(-.9,-.0977295481606,0,.6*l).to(this.debrisBelt.rotation,{z:1.2},.75*l,l).to(this.debrisBelt.position,{x:-400,z:800},.75*l,l).to(this.satelliteContainer.position,{x:a,y:290,z:r},.15*l,l).to(this.satelliteContainer.position,{x:a-30,y:290,z:r},l,2*l),this.createTransition(2).addCamPosition(s,300,800).addCamTarget(s,300,600).addSunPosition(-1.3,.5977295481606).addPointIntensity(100).addEarthRotation(-.4,.9,.3).play()},i.onHide=function(){var e=this,t=this.scene,n=t.earth,i=t.world;return this.debrisBelt.rotation.set(0,0,0),this.debrisBelt.position.set(0,0,0),this.createTransition(.75).to(this.satelliteContainer.position,{x:0,y:290,z:600}).to(this.debrisBelt.position,{y:200}).to(this.debrisBelt.rotation,{z:1.2}).to(this.debrisBelt.scale,{x:2,y:2,z:2}).addPointIntensity(0).play().then((function(){n.visible=!1,i.remove(e.satelliteContainer),i.remove(e.debrisBelt)}))},i.linkHotspotGroup=function(e){switch(e.name){case"space-debris":this.debrisBelt.add(e);break;case"aehf":this.satellite.add(e)}},i.linkHotspot=function(e){var t,n,i,a,r=e.object3D,o=this.heroDuration,s=o;switch(e.name){case"space-debris-1":e.start=.3*o,e.end=s;var l=(t=new v.Pa4(420,-50,0),n=.72,i=new v.Pa4(380,30,0),(a=null!==a&&void 0!==a?a:new v.Pa4).lerpVectors(i,t,De(n)));r.position.set(l.x,l.y,l.z);break;case"space-debris-2":e.start=.3*o,e.end=s,r.position.set(420,70,0);break;case"space-debris-3":e.start=.3*o,e.end=s,r.position.set(310,60,0);break;case"aehf-1":e.start=.5*o,e.end=o,r.position.set(.015,0,-.025);break;case"aehf-2":e.start=.5*o,e.end=o,r.position.set(.018,0,.014);break;case"aehf-3":e.start=.5*o,e.end=o,r.position.set(-.05,0,-.02)}},(0,J.Z)(n,[{key:"debrisEnd",get:function(){var e=this.heroDuration;return Ae(.5*e,.56,.35*e)}}]),n}(ue),Ne=n(66383),Ue=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,{vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform float size;\nuniform float aspect;\n\nvoid main() {\n    vec4 mvPosition = modelViewMatrix[3];\n    gl_Position = projectionMatrix * mvPosition;\n    vec2 offset = position.xy * size * gl_Position.w;\n    offset.x *= aspect;\n    gl_Position.xy += offset;\n    gl_Position.z = gl_Position.w;\n\n    vUv = uv * 2.0 - 1.0;\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform vec3 color;\nuniform float numSlices;\nuniform float opacity;\n\nvoid main() {\n    float dist = pow(length(vUv), 0.75);\n    float slice = floor(dist * numSlices);\n    float alpha = max(1.0 - slice / numSlices, 0.0);\n    gl_FragColor = vec4(color, alpha * opacity);\n}",uniforms:{color:{value:new v.Ilk(13648154)},numSlices:{value:3},size:{value:1},aspect:{value:1},opacity:{value:.5}},depthWrite:!1,transparent:!0,type:"BullsEyeMaterial"})}return(0,J.Z)(n,[{key:"size",get:function(){return this.uniforms.size.value},set:function(e){this.uniforms.size.value=e}},{key:"aspect",get:function(){return this.uniforms.aspect.value},set:function(e){this.uniforms.aspect.value=e}}]),n}(v.jyz),Ze=n(78863),ze=function(){function e(t,n){(0,c.Z)(this,e),this.name="GLTFPlayer",this.time=0,this.duration=-1,this.animations=[],this.cameras=[],this.name=t,n&&(this.animations=n.animations,this.cameras=n.cameras,this.mixer=new v.Xcj(n.scene))}var t=e.prototype;return t.setGLTF=function(e,t){this.animations=e.animations,this.cameras=e.cameras,this.mixer=new v.Xcj(t)},t.play=function(e){this.currentClip=v.m7l.findByName(this.animations,e),null!==this.currentClip?(this.duration=this.currentClip.duration,this.currentAction=this.mixer.clipAction(this.currentClip),this.currentAction.play()):console.log(">>> cant find animation in GLTF: ".concat(e,", ").concat(this.name,":"),this.animations)},t.update=function(e){this.duration>0&&(this.currentAction.time=this.time,this.mixer.update(e))},t.initDebug=function(e){var t=this,n=(0,u.Ae)("".concat(this.name," Player"));this.animations.forEach((function(e){var i=t.mixer.clipAction(e);(0,u.V6)(n,"Play ".concat(e.name),(function(){t.play(e.name)})),(0,u.V6)(n,"Pause",(function(){i.paused=!0}))}))},t.resize=function(e,t){var n=e/t;this.cameras.forEach((function(e){(0,ce.Z)(e,v.cPb)&&(e.aspect=n,e.updateProjectionMatrix())}))},t.getAnimation=function(e){for(var t=this.animations.length,n=0;n<t;n++){var i=this.animations[n];if(i.name===e)return i}return null},t.getCamera=function(e){for(var t=this.cameras.length,n=0;n<t;n++){var i=this.cameras[n];if(i.name===e)return i}return null},(0,J.Z)(e,[{key:"percent",get:function(){return this.duration>0?this.time/this.duration:0},set:function(e){this.time=this.duration>0?e/this.duration:e}},{key:"position",get:function(){return this.mixer.time},set:function(e){this.mixer.time=0,this.update(e)}}]),e}(),Be=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a){var r;return(0,c.Z)(this,n),r=t.call(this,{vertexShader:"#define GLSLIFY 1\nattribute float instanceID;\n\nuniform float size1;\nuniform float size2;\nuniform float time;\nuniform float speed;\nuniform float alpha;\nuniform float rotationSpeed;\nuniform float length;\nuniform vec3 anchorPosition;\nuniform vec3 launchDir;\nuniform vec3 direction;\n\nvarying vec2 vUv;\nvarying float vAlpha;\n\n#ifdef USE_DEPTH_TEX\nvarying vec4 vProj;\n#endif\n\nfloat rand(float t){\n    return fract(sin(t * 12.9898) * 43758.5453);\n}\n\nvoid main() {\n    // every time travel wraps, the true index is decreased. This maps the sprite and init rotation choice based on the\n    // position in the curve rather than the instance ID\n    float travel = speed * time;\n    float trueID = instanceID - floor(travel);\n\n    float t = (instanceID + fract(travel)) / float(NUM_SPRITES);\n    t = pow(t, 3.0);\n\n    float size = mix(size1, size2, t);\n    float angle = rand(trueID) + time * mix(rotationSpeed * .75, rotationSpeed * 1.25, rand(trueID * 5.0));\n    float c = cos(angle);\n    float s = sin(angle);\n    mat2 rot = mat2(c, s, -s, c);\n    vec3 dir = normalize(mix(direction, launchDir, t));\n\n    vec3 offset = anchorPosition + dir * t * length;\n    gl_Position = modelViewMatrix * vec4(offset, 1.0);\n    gl_Position.xy += rot * position.xy * size;\n    gl_Position = projectionMatrix * gl_Position;\n\n    float fadeOut = 1.0 - t;\n    float fadeIn = min(t * 2000.0, 1.0);\n    vAlpha = pow(fadeOut, 2.0) * fadeIn * alpha;\n\n    vUv = uv;\n    float sprite = floor(rand(trueID) * 2.0);\n    vUv.x = (vUv.x + sprite) * float(RCP_NUM_ATLAS_SPRITES);\n\n    #ifdef USE_DEPTH_TEX\n    vProj = gl_Position;\n    #endif\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying float vAlpha;\n\nuniform sampler2D atlas;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float brightness;\n\n#ifdef USE_DEPTH_TEX\nvarying vec4 vProj;\nuniform sampler2D depthTex;\nuniform float camNear;\nuniform float rcpCamRange;\n#endif\n\nfloat RGBA8ToFloat(vec4 rgba)\n{\n    return dot(rgba, vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/16581375.0));\n}\n\nvoid main() {\n    vec4 data = texture2D(atlas, vUv);\n    gl_FragColor = vec4(mix(color1, color2, data.a), data.a);\n    gl_FragColor *= brightness;\n    gl_FragColor.a *= vAlpha;\n\n    #ifdef USE_DEPTH_TEX\n    vec3 screenUV = vProj.xyz / vProj.w * .5 + .5;\n    vec4 depthBA = texture2D(depthTex, screenUV.xy);\n    float depth = (vProj.w - camNear) * rcpCamRange;\n    float backDepth = RGBA8ToFloat(depthBA);\n    float diff = clamp((backDepth - depth) * 50000.0, 0.0, 1.0);\n    gl_FragColor.a *= diff;\n    #endif\n}\n",uniforms:{size1:{value:.02},size2:{value:.1},time:{value:0},atlas:{value:e},anchorPosition:{value:new v.Pa4},launchDir:{value:new v.Pa4},length:{value:10},speed:{value:10},direction:{value:new v.Pa4(0,1,0)},rotationSpeed:{value:1},color1:{value:new v.Ilk(.75,.75,.75)},color2:{value:new v.Ilk(1,1,1)},brightness:{value:1},alpha:{value:1},depthTex:{value:a},camNear:{value:0},rcpCamRange:{value:0}},defines:{RCP_NUM_ATLAS_SPRITES:e.image.naturalHeight/e.image.naturalWidth,NUM_SPRITES:i},depthWrite:!1,transparent:!0,type:"ContrailMaterial"}),a&&(r.defines.USE_DEPTH_TEX=""),r}return n.prototype.updateCamera=function(e){this.uniforms.camNear.value=e.near,this.uniforms.rcpCamRange.value=1/(e.far-e.near)},n}(v.jyz),Fe=n(19571),He=256;var Ge=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a,r){var o;(0,c.Z)(this,n),o=t.call(this,function(){var e=new v.L5s;e.copy(new v.BKK(1,1));var t=new Float32Array((0,Fe.Ef)(He,(function(e){return e})));return e.setAttribute("instanceID",new v.lb7(t,t.length/He)),e}(),new Be(i,He,a)),o.spacing=10,o.length=2e3,o.alpha=1,o.time=0,o.rocket=e,o.frustumCulled=!1,o.offset=null!==r&&void 0!==r?r:new v.Pa4,o.material.depthTest=!1,o.material.blending=v.WMw;var s=o.material.uniforms;return s.size1.value=15,s.brightness.value=.18,s.size2.value=50,o}return n.prototype.update=function(e,t){var n=this.material;this.time+=e;var i=n.uniforms;i.time.value=this.time;var a=i.direction.value,r=i.anchorPosition.value;a.set(0,-1,0).applyQuaternion(this.rocket.quaternion),r.copy(this.offset).applyMatrix4(this.rocket.matrixWorld),i.launchDir.value.copy(r).normalize(),i.length.value=this.length,i.alpha.value=this.alpha,this.geometry.instanceCount=Math.min(Math.ceil(this.length/this.spacing),He),n.updateCamera(t)},n}(v.Kj0),je=new v.Pa4,We=new v.Pa4,Ve=new v._fP,Ke=new v.Pa4(0,1,0),qe=new v.Pa4(-120,100,380),Ye=new v.Pa4(-22,220,380),Xe=new v.Pa4(152,302,791),Qe=new v.Pa4(0,200,500),Je=new v.Pa4(90,400,0),$e=new v.Pa4(-100,100,500),et=new v.Pa4(-1,237,413),tt=new v.Pa4,nt=new v.Pa4;et.sub($e).multiplyScalar(10).add($e);var it=new v.yGw;it.lookAt(Qe,Je,Ke),tt.setFromMatrixColumn(it,0).normalize(),nt.setFromMatrixColumn(it,1).normalize();var at=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).buttonVisibility=0,i.buttonActive=!1,i.boneLinks=[],i.onSetRocketType=i.onSetRocketType.bind((0,Q.Z)(i)),i}var i=n.prototype;return i.initMesh=function(){this.controllers=[];var e=(0,Ne.Z)(this.initModel("falconHeavyBreakoutModel","Animation",!0),2),t=e[0],n=e[1],i=(0,Ne.Z)(this.initModel("vulcanBreakoutModel","Animation",!0),2),a=i[0],r=i[1];this.falconHeavy=t,this.falconHeavy.name="FalconHeavy",this.falconPlayer=n,this.ula=a,this.ula.name="ULA",this.ulaPlayer=r,this.activeModel=this.falconHeavy;var o=new v.ZzF;o.setFromObject(this.falconHeavy);var s=this.falconHeavy.matrixWorld.clone().invert();this.rocketCenter=o.getCenter(new v.Pa4).applyMatrix4(s);var l=new v.BKK(1,1);this.bullsEye=new v.Kj0(l,new Ue),this.bullsEye.name="Bull's eye";var c=u.Ll.textures.get("fire-atlas");return c.wrapS=v.rpg,c.wrapT=v.rpg,this.contrails=new Ge(this.falconHeavy,c,this.scene.depthTexture,new v.Pa4(0,0,0)),Ie()},i.preCompile=function(){this.addForCompilation(this.falconHeavy),this.addForCompilation(this.ula),this.addForCompilation(this.bullsEye),this.addForCompilation(this.contrails)},i.onShow=function(){var e=this,t=this.scene,n=t.earth,i=t.world,a=t.postRenderPass;n.visible=!0,me(this.falconHeavy,u.Ll.custom.get("spaceEnvMap"),1.5),me(this.ula,u.Ll.custom.get("spaceEnvMap"),1.5);var r=new v.Pa4(2,1,15).normalize();this.shown=!1,this.activeModel=this.falconHeavy,this.activePlayer=this.falconPlayer,this.activeModel.position.copy(qe),Ve.setFromUnitVectors(Ke,r),this.falconHeavy.quaternion.copy(Ve),this.ula.quaternion.copy(Ve),this.falconPlayer.position=0,this.ulaPlayer.position=0,i.add(this.falconHeavy),i.add(this.bullsEye),i.add(this.contrails),a.add(this.contrails),L.Z.addEventListener(D.zW.CAPABILITIES_SET_ROCKET_TYPE,this.onSetRocketType);var o=this.scrollValues.buttons,s=o.start,l=o.end,c=.5*(s+l);return this.createScrollTransition().to(this,{buttonVisibility:1},s,c).to(this,{buttonVisibility:0},c,l),je.copy(tt).multiplyScalar(this.getCamXOffset(0)),je.addScaledVector(nt,this.getCamYOffset(0)),this.createTransition(2).addCamPosition(Qe.x+je.x,Qe.y+je.y,Qe.z+je.z).addCamTarget(Je.x+je.x,Je.y+je.y,Je.z+je.z).addSunPosition(-1.5,1.74).addSunIntensity(1).addEarthRotation(-.2,.3,0).to(this.activeModel.position,{x:Ye.x,y:Ye.y,z:Ye.z}).play().then((function(){e.shown=!0}))},i.onHide=function(){var e=this,t=this.scene,n=t.earth,i=t.world,a=t.postRenderPass;return L.Z.removeEventListener(D.zW.CAPABILITIES_SET_ROCKET_TYPE,this.onSetRocketType),this.shown=!1,this.createTransition(.75).addSunIntensity(3).to(this.activeModel.position,{x:Xe.x,y:Xe.y,z:Xe.z}).to(this.bullsEye.material,{size:0}).play().then((function(){n.visible=!1,i.remove(e.falconHeavy),i.remove(e.bullsEye),i.remove(e.contrails),a.remove(e.contrails)}))},i.update=function(e,t){var i=this;if((0,d.Z)((0,h.Z)(n.prototype),"update",this).call(this,e,t),this.contrails.update(e,t),this.shown){var a=this.heroDuration,r=v.M8C.smoothstep(this.scroll,0,a),o=Math.min(r,.999),s=Ae(85,.72,v.M8C.lerp(70,60,o));this.activeModel.scale.setScalar(s),this.contrails.alpha=1-v.M8C.smoothstep(this.scroll,0,.5*a),this.activePlayer.position=o*this.activePlayer.duration,je.setFromMatrixColumn(t.matrixWorld,0).multiplyScalar(this.getCamXOffset(o)),We.setFromMatrixColumn(t.matrixWorld,1).multiplyScalar(this.getCamYOffset(o)),je.add(We);var l=this.scene,u=l.camContainer,c=l.camTarget;u.position.lerpVectors(Qe,$e,o).add(je),c.lerpVectors(Je,et,o).add(je),this.bullsEye.position.copy(this.rocketCenter).applyMatrix4(this.activeModel.matrixWorld),this.bullsEye.material.size=2*o,t.getWorldPosition(je),this.bullsEye.lookAt(je),this.controllers.forEach((function(e){return e.update()})),this.falconHeavy.userData.matrixWorldInverse.copy(this.falconHeavy.matrixWorld).invert(),this.ula.userData.matrixWorldInverse.copy(this.ula.matrixWorld).invert(),this.boneLinks.forEach((function(e){return i.updateBoneLink(e)})),this.updateButtons()}},i.resize=function(e,t){this.bullsEye.material.aspect=t/e},i.onSetRocketType=function(e){var t,n,i=this;if(e.value===Ze.D.SPACE_X?(t=this.falconHeavy,n=this.falconPlayer):(t=this.ula,n=this.ulaPlayer),this.activeModel!==t){var a=this.activeModel;this.activeModel=t,this.activePlayer=n,this.contrails.rocket=t,t.position.copy(qe),this.scene.world.add(t),this.createTransition(1).to(a.position,{x:Xe.x,y:Xe.y,z:Xe.z}).to(t.position,{x:Ye.x,y:Ye.y,z:Ye.z}).play().then((function(){i.scene.world.remove(a)}))}},i.initModel=function(e,t,n){var i=u.Ll.custom.get(e),a=i.scene;if(n){var r=new v.Tme;r.add(a);var o=new Ee(a);this.controllers.push(o),a=r}var s=new ze(e,i);return s.play(t),a.userData.matrixWorldInverse=new v.yGw,me(a,u.Ll.custom.get("spaceEnvMap"),1.5),[a,s]},i.linkHotspotGroup=function(e){switch(e.name){case"space-x-falcon":this.falconHeavy.add(e);break;case"ula-vulcan":this.ula.add(e)}},i.linkHotspot=function(e){var t=e.object3D,n=this.heroDuration;switch(e.start=.5*n,e.end=n,e.name){case"merlin-engine":this.linkToBone(t,this.falconHeavy,"booster_left",new v.Pa4(-.05,.12,0));break;case"payload-fairing":this.linkToBone(t,this.falconHeavy,"fairing_right",new v.Pa4(-.05,-.05,0));break;case"interstage":this.linkToBone(t,this.falconHeavy,"Stage_Sep",new v.Pa4(-.05,-.02,0));break;case"payload":this.linkToBone(t,this.ula,"PayloadMount",new v.Pa4(-.05,.1,0));break;case"multi-manifest":this.linkToBone(t,this.ula,"Fairing_Left",new v.Pa4(.05,0,0));break;case"gem-63xl":this.linkToBone(t,this.ula,"Booster_side_left",new v.Pa4(-.05,0,0))}},i.updateButtons=function(){var e=!!this.buttonVisibility;e!==this.buttonActive&&(this.buttonActive=e,L.Z.dispatchEvent({type:e?D.zW.CAPABILITIES_ROCKET_BUTTONS_SHOW:D.zW.CAPABILITIES_ROCKET_BUTTONS_HIDE}))},i.getCamXOffset=function(e){if(window.innerWidth<window.innerHeight)return v.M8C.lerp(-35,-20,e);var t=Le(1,-60,1.6,-50);return v.M8C.lerp(t,-5,e)},i.getCamYOffset=function(e){return Ae(2*(1-e)+v.M8C.clamp(Le(1,10,1.6,0),1.269,3.0515),.75,v.M8C.lerp(7,-8,e))},i.linkToBone=function(e,t,n,i){var a=t.getObjectByName(n);this.boneLinks.push({bone:a,hotspot:e,model:t,offset:i})},i.updateBoneLink=function(e){var t=e.bone,n=e.hotspot,i=e.model,a=e.offset;je.copy(a).applyMatrix4(t.matrixWorld).applyMatrix4(i.userData.matrixWorldInverse),n.position.copy(je)},n}(ue),rt=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a,r){var o;(0,c.Z)(this,n),o=t.call(this),(!i||i<1)&&(i=1),(!a||a<3)&&(a=3);for(var s=i+1,l=a+1,u=s*l,d=new Float32Array(2*u),h=new Float32Array(3*u),m=new Float32Array(3*u),p=new Float32Array(u),f=[],g=0,_=0,y=0,x=e.getPoints(l),b=new v.Pa4,S=new v.Pa4,w=new v.Pa4,T=x[0],P=0;P<l;++P){var C=P/(l-1),R=x[P],M=Math.sin(C*Math.PI);b.copy(R).normalize(),w.subVectors(R,T).normalize(),S.crossVectors(b,w).normalize(),T=R;for(var k=0;k<s;++k){var E=k/(s-1),A=(E-.5)*r*M;if(h[y]=R.x,h[y+1]=R.y,h[y+2]=R.z,m[y]=S.x,m[y+1]=S.y,m[y+2]=S.z,d[_]=E,d[_+1]=C,p[g++]=A,_+=2,y+=3,k<i&&P<a){var L=k+P*s,D=L+1,I=L+s,O=D+s;f.push(L,I,O),f.push(L,O,D)}}}return o.setIndex(f),o.setAttribute("position",new v.a$l(h,3)),o.setAttribute("tangent",new v.a$l(m,3,!0)),o.setAttribute("uv",new v.a$l(d,2)),o.setAttribute("width",new v.a$l(p,1)),o}return n}(v.u9r),ot=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;(0,c.Z)(this,n),i=t.call(this);var a=v.rDY.merge([e.uniforms,v.Vj0.basic.uniforms]);for(var r in e.uniforms)a[r].value=e.uniforms[r].value;return e.uniforms=a,void 0===e.type&&(e.type="CustomBasicMaterial"),(i=t.call(this)).uniforms=e.uniforms,i.defines=e.defines,i.setValues(e),i._morphTargets=!1,i._morphNormals=!1,i._useInstancing=!1,i}return n.prototype.fromBasicMaterial=function(e){this.map=e.map,this.color=e.color,this.opacity=e.opacity,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.refractionRatio=e.refractionRatio,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.transparent=e.transparent,this.blending=e.blending,this.vertexColors=e.vertexColors},(0,J.Z)(n,[{key:"color",get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value.set(e)}},{key:"opacity",get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms&&(this.uniforms.opacity.value=e)}},{key:"map",get:function(){return this.uniforms.map.value},set:function(e){this.needsUpdate=!!this.uniforms.map.value!==!!e,this.uniforms.map.value=e}},{key:"lightMap",get:function(){return this.uniforms.lightMap.value},set:function(e){this.needsUpdate=!!this.uniforms.lightMap.value!==!!e,this.uniforms.lightMap.value=e}},{key:"lightMapIntensity",get:function(){return this.uniforms.lightMapIntensity.value},set:function(e){this.uniforms.lightMapIntensity.value=e}},{key:"aoMap",get:function(){return this.uniforms.aoMap.value},set:function(e){this.needsUpdate=!!this.uniforms.aoMap.value!==!!e,this.uniforms.aoMap.value=e}},{key:"aoMapIntensity",get:function(){return this.uniforms.aoMapIntensity.value},set:function(e){this.uniforms.aoMapIntensity.value=e}},{key:"alphaMap",get:function(){return this.uniforms.alphaMap.value},set:function(e){this.needsUpdate=!!this.uniforms.alphaMap.value!==!!e,this.uniforms.alphaMap.value=e}},{key:"envMap",get:function(){return this.uniforms.envMap.value},set:function(e){if(this.needsUpdate=!!this.uniforms.envMap.value!==!!e,this.uniforms.envMap.value=e,e)if(Array.isArray(e.image)){var t=e.image[0].naturalWidth,n=e.image[0].naturalHeight;this.uniforms.maxMipLevel.value=Math.log2(Math.max(t,n))}else{var i=e.image.width,a=e.image.height;this.uniforms.maxMipLevel.value=Math.log2(Math.max(i,a))}}},{key:"envMapIntensity",get:function(){return this.uniforms.envMapIntensity.value},set:function(e){this.uniforms.envMapIntensity.value=e}},{key:"refractionRatio",get:function(){return this.uniforms.refractionRatio.value},set:function(e){this.uniforms.refractionRatio.value=e}},{key:"skinning",get:function(){return this._skinning},set:function(e){this._skinning!==e&&(this.needsUpdate=!0),this._skinning=e}},{key:"morphTargets",get:function(){return this._morphTargets},set:function(e){this._morphTargets!==e&&(this.needsUpdate=!0),this._morphTargets=e}},{key:"morphNormals",get:function(){return this._morphNormals},set:function(e){this._morphNormals!==e&&(this.needsUpdate=!0),this._morphNormals=e}}]),n}(v.jyz),st="#define GLSLIFY 1\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n#ifdef IS_CURVE\nattribute vec3 tangent;\nattribute float width;\nuniform vec2 uvScale;\nvarying vec3 vCenter;\n#endif\n\nvarying vec3 vPos;\n\n#ifdef USE_DEPTH_TEX\nvarying vec4 vProj;\n#endif\n\nvoid main() {\n\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <morphcolor_vertex>\n\n    // TODO:\n    //  1) Add radial displacement for variation?\n    //  2) Bend torus along sphere somehow?\n\n    #if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\n    #include <beginnormal_vertex>\n\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n\n    #endif\n\n    #include <begin_vertex>\n\n    #ifdef IS_CURVE\n    transformed += tangent * width;\n    transformed = normalize(transformed) * length(position);\n    vUv *= uvScale;\n//    vCenter = position;\n    #endif\n\n    vPos = transformed;\n\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <fog_vertex>\n\n    #ifdef USE_DEPTH_TEX\n    vProj = gl_Position;\n    #endif\n}",lt="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform float opacity;\n\nvarying float vWidth;\n\n#ifndef FLAT_SHADED\n\nvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\n#ifdef USE_DEPTH_TEX\nvarying vec4 vProj;\nuniform float rcpCamRange;\nuniform float camNear;\nuniform sampler2D depthTex;\n#endif\n\nuniform vec2 uvScale;\n\nvarying vec3 vPos;\n\n#ifdef IS_CURVE\nvarying vec3 vCenter;\n#endif\n\nuniform float highlight;\nuniform float highlightSize;\nuniform float phase;\nuniform float endPhase;\nuniform float startPhase;\n\nfloat RGBA8ToFloat(vec4 rgba)\n{\n    return dot(rgba, vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/16581375.0));\n}\n\nvoid main() {\n\n    #include <clipping_planes_fragment>\n\n    vec4 diffuseColor = vec4( diffuse, opacity );\n\n    #include <logdepthbuf_fragment>\n\n    #ifdef IS_CURVE\n//    vec2 uv = vec2(distance(vPos, vCenter) , 0.5) * uvScale;\n    float tex = texture2D( map, vUv ).x;\n    float dist = (1.0 - tex * tex);\n    float t = smoothstep(0.95, 0.0, dist);\n    // y causes some fading at the top\n    float y = abs(vUv.y * 2.0 - 1.0);\n    diffuseColor *= t * mix(0.4, 1.0, y * y);\n    #else\n    vec2 uv = vec2(atan(vPos.y, vPos.x), .5) * uvScale;\n    float tex = texture2D( map, uv ).x;\n    float dist = (1.0 - tex * tex);\n    float t = smoothstep(0.2, 0.0, dist);\n    float z = max(vPos.z, 0.0);\n    diffuseColor *= t * mix(1.0, 0.2, z * z);\n    float distToCenter = length(vPos.xy);\n    diffuseColor *= mix(1.0, 0.7, distToCenter * distToCenter);\n    #endif\n\n    float distToHighlight = abs(vUv.y - phase);\n    diffuseColor *= 1.0 + smoothstep(highlightSize, 0.0, distToHighlight) * highlight;\n    diffuseColor *= float(vUv.y >= startPhase && vUv.y <= endPhase);\n\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n    // accumulation (baked indirect lighting only)\n    #ifdef USE_LIGHTMAP\n\n    vec4 lightMapTexel = texture2D( lightMap, vUv2 );\n    reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\n    #else\n\n    reflectedLight.indirectDiffuse += vec3( 1.0 );\n\n    #endif\n\n    // modulation\n    #include <aomap_fragment>\n\n    reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n    vec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n    #include <envmap_fragment>\n\n    #include <output_fragment>\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n\n    #ifdef USE_DEPTH_TEX\n    vec3 screenUV = vProj.xyz / vProj.w * .5 + .5;\n    vec4 depthBA = texture2D(depthTex, screenUV.xy);\n    float depth = (vProj.w - camNear) * rcpCamRange;\n    float backDepth = RGBA8ToFloat(depthBA);\n    gl_FragColor *= float(backDepth > depth);\n    #endif\n}",ut=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;(0,c.Z)(this,n);var o=u.Ll.textures.get("curveLines");return o.wrapS=v.rpg,o.wrapT=v.rpg,o.minFilter=v.wem,o.magFilter=v.wem,i=t.call(this,{vertexShader:st,fragmentShader:lt,side:v.ehD,transparent:!0,blending:v.WMw,color:new v.Ilk(14180409).multiplyScalar(1),depthWrite:!1,depthTest:!1,uniforms:{phase:{value:-.2},endPhase:{value:1},startPhase:{value:0},highlightSize:{value:.2},highlight:{value:2},uvScale:{value:new v.FM8(r,1)},depthTex:{value:e},camNear:{value:1},rcpCamRange:{value:1}},defines:{},map:o,type:"GlobeCurveMaterial"}),e&&(i.defines.USE_DEPTH_TEX=""),a&&(i.defines.IS_CURVE=""),i._phase=0,i}return(0,J.Z)(n,[{key:"phase",get:function(){return this._phase},set:function(e){this._phase=e;var t=1+this.uniforms.highlightSize.value;this.uniforms.phase.value=v.M8C.lerp(-t,+t,e)}},{key:"endPhase",get:function(){return this.uniforms.endPhase.value},set:function(e){this.uniforms.endPhase.value=e}},{key:"startPhase",get:function(){return this.uniforms.startPhase.value},set:function(e){this.uniforms.startPhase.value=e}}]),n}(ot);function ct(e,t,n,i){return(null!==i&&void 0!==i?i:new v.Pa4).setFromSphericalCoords(n,(90-e)*v.M8C.DEG2RAD,(90+t)*v.M8C.DEG2RAD)}var dt=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a,r,o,s,l,u){(0,c.Z)(this,n);var d=new ut(u,!0,l/3e3),h=ct(e,i,o),m=ct(a,r,o),p=(new v.Pa4).lerpVectors(h,m,.35).normalize().multiplyScalar(s),f=(new v.Pa4).lerpVectors(h,m,.65).normalize().multiplyScalar(s),g=new v.YT8([h,p,f,m]);return t.call(this,new rt(g,2,Math.ceil(.01*m.distanceTo(p)),l),d)}var i=n.prototype;return i.playAnim=function(e,t){var n=this;return this.material.phase=e?1:0,this._animating=!0,new Promise((function(i){ne.ZP.to(n.material,{duration:t,phase:e?0:1,ease:ie.lD.easeInOut,onComplete:function(){n._animating=!1,i()}})}))},i.stopAnim=function(){this.material.phase=0,ne.ZP.killTweensOf(this.material)},(0,J.Z)(n,[{key:"animating",get:function(){return this._animating}}]),n}(v.Kj0),ht=new v.Cne(1,.95,50,5);ht.scale(1,1,1);var mt,pt=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a){var r;return(0,c.Z)(this,n),(r=t.call(this)).curves=[],r.nexi=[],r.rcpCamRange={value:1},r.camNear={value:1},r._endPhase=1,r._startPhase=0,r.radiusBottom=e.planetRadius+15,r.radiusTop=r.radiusBottom+i,r.depthTex=a,r}var i=n.prototype;return i.update=function(e){this.rcpCamRange.value=1/(e.far-e.near),this.camNear.value=e.near},i.addCurve=function(e,t,n,i){for(var a=i-t,r=n-e;a<-180;)a+=360;for(;a>180;)a-=360;var o=Math.sqrt(a*a+r*r),s=new dt(e,t,n,i,this.radiusBottom,this.radiusTop,10*o,this.depthTex),l=s.material;return l.uniforms.camNear=this.camNear,l.uniforms.rcpCamRange=this.rcpCamRange,this.curves.push(s),this.add(s),s},i.addNexus=function(e,t,n,i){var a=new ut(this.depthTex),r=new v.Kj0(ht,a);a.uniforms.camNear=this.camNear,a.uniforms.rcpCamRange=this.rcpCamRange,ct(e,t,this.radiusBottom,r.position),r.lookAt(0,0,0),r.scale.set(n,n,i),this.nexi.push(r),this.add(r)},i.stopAnims=function(){this.curves.forEach((function(e){return e.stopAnim()}))},(0,J.Z)(n,[{key:"endPhase",get:function(){return this._endPhase},set:function(e){this._endPhase=e,this.curves.forEach((function(t){return t.material.endPhase=e}))}},{key:"startPhase",get:function(){return this._startPhase},set:function(e){this._startPhase=e,this.curves.forEach((function(t){return t.material.startPhase=e}))}}]),n}(v.ZAu),ft=30.3079827,vt=-97.8958264,gt={Bloemfontein:{lat:-29.087217,long:26.154898},Berlin:{lat:52.520008,long:13.404954},Brasilia:{lat:-15.793889,long:-47.882778},Brussels:{lat:50.85,long:4.35},Honolulu:{lat:21.315603,long:-157.858093},Kinshasa:{lat:-4.322447,long:15.307045},LosAngeles:{lat:34.052235,long:-118.243683},Miami:{lat:25.76,long:-80.19},NewYork:{lat:40.73061,long:-73.935242},Seattle:{lat:47.608013,long:-122.335167},Tokyo:{lat:35.652832,long:139.839478},Warsaw:{lat:52.196217,long:21.178225}},_t=function(){function e(){(0,c.Z)(this,e),this.lookUp=new Map}var t=e.prototype;return t.has=function(e,t){var n;return!!(null===(n=this.lookUp.get(e))||void 0===n?void 0:n.get(t))},t.add=function(e,t,n){this._add(e,t,n,!1),this._add(t,e,n,!0)},t.get=function(e,t){var n;return null===(n=this.lookUp.get(t))||void 0===n?void 0:n.get(e)},t.pickRandomDestination=function(e){var t,n=Array.from(this.lookUp.get(e).keys());do{t=n[fe(0,n.length)]}while(this.get(e,t).curve.animating);return t},t._add=function(e,t,n,i){this.lookUp.get(e)||this.lookUp.set(e,new Map),this.lookUp.get(e).set(t,{curve:n,inverted:i})},e}(),yt=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).connections=new _t,i}var i=n.prototype;return i.initMesh=function(){return this.initSatellites(),this.initCurves(),Ie()},i.preCompile=function(){this.addForCompilation(this.curves,this.scene.earth),this.addForCompilation(this.satelliteContainer)},i.update=function(e,t){(0,d.Z)((0,h.Z)(n.prototype),"update",this).call(this,e,t),this.curves.update(t),this.controllers.forEach((function(e){return e.update()})),this.satelliteContainer.rotation.y=this.scene.earth.rotation.y},i.initSatellites=function(){this.satelliteContainer=new v.ZAu,this.satelliteContainer.name="Ops Satellite Container",this.satelliteContainer.rotation.z=Ae(0,.72,-.2),this.satelliteContainer.rotation.y=-.2,this.controllers=[],this.addSatellite("satellite_aehf",0,400,0,1,-.4),this.addSatellite("satellite_gps3",50,370,-150,.5,.4),this.addSatellite("satellite_aehf",100,330,-300,.2,-.3),this.addSatellite("satellite_gps3",-250,370,-250,.3,-.6)},i.initCurves=function(){for(var e in this.curves=new pt(this.scene.atmosphere,1e3,this.scene.depthTexture),gt){var t=gt[e];for(var n in gt){var i=gt[n];if(t!==i&&!this.connections.has(t,i)){var a=this.curves.addCurve(t.lat,t.long,i.lat,i.long);this.connections.add(t,i,a)}}}},i.onShow=function(){var e=this.scene,t=e.earth,n=e.world,i=e.postRenderPass,a=e.pointLight;t.visible=!0,t.add(this.curves),i.add(this.curves),n.add(this.satelliteContainer),this.satelliteContainer.rotation.x=-1,this.satelliteContainer.scale.setScalar(1),this.curves.endPhase=0,this.curves.startPhase=0,this.showCurveAnim(gt.NewYork),this.showCurveAnim(gt.LosAngeles),this.showCurveAnim(gt.Tokyo),this.showCurveAnim(gt.Brussels),this.showCurveAnim(gt.Brasilia),a.distance=3e4,a.position.set(500,600,800);var r=Ae(200,.72,100),o=r-Le(1,130,1.63,200),s=this.heroDuration;return this.createScrollTransition().addCamPosition(r,350,800,0,1.3*s).addCamTarget(r,350,600,0,1.3*s).to(this.curves,{endPhase:1},0,.7*s).addSunPosition(-1.3,0,0,s).to(this.satelliteContainer.rotation,{x:0},0,s).to(this.satelliteContainer.rotation,{x:.5},s,2*s),this.createTransition(2).addPointIntensity(3).addCamPosition(o,350,800).addCamTarget(o,350,600).addSunPosition(-1.6,1.5).addEarthRotation(-.2,.1,0).to(t,{spinSpeed:10}).play()},i.onHide=function(){var e=this,t=this.scene,n=t.earth,i=t.world,a=t.postRenderPass;return this.createTransition(.75).addPointIntensity(0).to(this.satelliteContainer.scale,{x:3,y:3,z:3}).to(this.satelliteContainer.rotation,{x:2}).to(this.curves,{startPhase:1}).to(n,{spinSpeed:0}).play().then((function(){e.curves.stopAnims(),n.visible=!1,n.remove(e.curves),a.remove(e.curves),i.remove(e.satelliteContainer)}))},i.addSatellite=function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.4,o=u.Ll.custom.get(e),s=new v.ZAu,l=o.scene.clone();s.rotation.set(.9,-.2,r),s.position.set(t,n,i),s.add(l),s.name=e;var c=new Ee(l);this.controllers.push(c),l.scale.setScalar(1e3*a),Te(l,100*a),this.satelliteContainer.add(s)},i.showCurveAnim=function(e){var t=this,n=this.connections.pickRandomDestination(e),i=this.connections.get(e,n),a=i.curve,r=i.inverted;a.playAnim(r,2+Math.random()).then((function(){t.showCurveAnim(n)}))},i.linkHotspotGroup=function(e){this.satelliteContainer.add(e)},i.linkHotspot=function(e){var t=e.object3D,n=this.heroDuration;switch(e.name){case"aehf":e.start=.5*n,e.end=n,this.setPosForHotspot(t,this.satelliteContainer.children[0],new v.Pa4(50,0,-25));break;case"gps-III":e.start=.6*n,e.end=n,this.setPosForHotspot(t,this.satelliteContainer.children[1],new v.Pa4(-50,-10,-35));break;case"sbirs":e.start=.5*n,e.end=n,t.position.set(210,310,25)}},i.setPosForHotspot=function(e,t,n){e.position.copy(n.applyMatrix4(t.matrix))},n}(ue);!function(e){e[e.FlareOccluder=1]="FlareOccluder",e[e.CustomParticlePass=2]="CustomParticlePass"}(mt||(mt={}));var xt,bt,St,wt,Tt="#define GLSLIFY 1\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvarying float vDepth;\n\n#ifdef RENDER_NORMALS\nvarying vec3 vNormal;\n#endif\n\nuniform float cameraNear;\nuniform float rcpCameraRange;\n\nvoid main() {\n\n    #include <uv_vertex>\n\n    #include <skinbase_vertex>\n\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinnormal_vertex>\n\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n\n    vDepth = (gl_Position.w - cameraNear) * rcpCameraRange;\n\n    #ifdef RENDER_NORMALS\n    vNormal = normalMatrix * objectNormal;\n    #endif\n}",Pt="#define GLSLIFY 1\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying float vDepth;\n\n#ifdef RENDER_NORMALS\nvarying vec3 vNormal;\n#endif\n\nvec2 encodeNormal(vec3 normal)\n{\n    vec2 data;\n    float p = sqrt(-normal.y * 8.0 + 8.0);\n    data = normal.xz / p + .5;\n    return data;\n}\n\nvec2 floatToRG8(float value)\n{\n    vec2 enc = vec2(1.0, 255.0) * value;\n    enc.y = fract(enc.y);\n    enc.x -= enc.y / 255.0;\n    return enc;\n}\n\n// Only for 0 - 1\nvec4 floatToRGBA8(float value)\n{\n    vec4 enc = value * vec4(1.0, 255.0, 65025.0, 16581375.0);\n    // cannot fract first value or 1 would not be encodable\n    enc.yzw = fract(enc.yzw);\n    return enc - enc.yzww * vec4(1.0/255.0, 1.0/255.0, 1.0/255.0, 0.0);\n}\n\nvoid main() {\n\n    #include <clipping_planes_fragment>\n\n    vec4 diffuseColor = vec4( 1.0 );\n\n    #include <map_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n\n    #include <logdepthbuf_fragment>\n\n    #ifdef RENDER_NORMALS\n    gl_FragColor.xy = encodeNormal(normalize(vNormal));\n    gl_FragColor.zw = floatToRG8(vDepth);\n    #else\n    gl_FragColor = floatToRGBA8(vDepth);\n    #endif\n}",Ct=new v.Ilk,Rt=function(){function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,c.Z)(this,e),this._renderer=t,this._material=new v.jyz({vertexShader:Tt,fragmentShader:Pt,uniforms:{cameraNear:{value:0},rcpCameraRange:{value:0}},type:"NormalDepthPass"}),i&&(this._material.defines.RENDER_NORMALS=""),this._renderTarget=new v.dd2(1,1,{depthBuffer:!0,stencilBuffer:!1,magFilter:v.TyD,minFilter:v.TyD}),this._camera=n,this._clearColor=i?new v.Ilk(.5,.5,1):new v.Ilk(1,1,1)}var t=e.prototype;return t.updateCamera=function(e){this._camera=e},t.resize=function(e,t){e=Math.floor(e),t=Math.floor(t),this._renderTarget.width===e&&this._renderTarget.height===t||this._renderTarget.setSize(e,t)},t.render=function(e){e.overrideMaterial=this._material;var t=this._material.uniforms,n=this._renderer.autoClear,i=this._renderer.getClearAlpha(),a=this._camera;t.cameraNear.value=a.near,t.rcpCameraRange.value=1/(a.far-a.near),this._renderer.getClearColor(Ct),this._renderer.autoClear=!0,this._renderer.setClearColor(this._clearColor),this._renderer.setClearAlpha(1),this._renderer.setRenderTarget(this._renderTarget),this._renderer.render(e,a),this._renderer.setRenderTarget(null),this._renderer.autoClear=n,this._renderer.setClearColor(Ct),this._renderer.setClearAlpha(i),e.overrideMaterial=null},(0,J.Z)(e,[{key:"texture",get:function(){return this._renderTarget.texture}}]),e}(),Mt=n(69019),kt="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vViewDir;\nvarying vec3 vWorldDir;\n\nuniform mat4 unproject;\nuniform mat4 toLocal;\n\nuniform vec2 rcpScreenSize;\n\nvec3 getFrustumVector(vec2 position, mat4 unprojectionMatrix)\n{\n    vec4 unprojNear = unprojectionMatrix * vec4(position, -1.0, 1.0);\n    vec4 unprojFar = unprojectionMatrix * vec4(position, 1.0, 1.0);\n    vec3 dir = unprojFar.xyz/unprojFar.w - unprojNear.xyz/unprojNear.w;\n    return -dir / dir.z;\n}\n\nvoid main()\n{\n    vec4 viewPos = modelViewMatrix * vec4(position, 1.0);\n    gl_Position = projectionMatrix * viewPos;\n    gl_Position /= gl_Position.w;\n    vUv = gl_Position.xy * .5 + .5;\n    vViewDir = mat3(toLocal) * getFrustumVector(gl_Position.xy, unproject);\n}",Et="#define GLSLIFY 1\n#include <packing>\n\nvarying vec2 vUv;\nvarying vec3 vViewDir;\n\nuniform sampler2D tDepth;\nuniform sampler2D tDiffuse;\n\nuniform vec3 cameraPos;\nuniform vec3 planetPos;\nuniform vec3 sunDir;\nuniform float sunIntensity;\nuniform float scaledAtmosTopRadius;\nuniform float atmosScale;\nuniform vec2 sunSize;\nuniform vec2 cameraRange;\nuniform vec2 rcpScreenSize;\nuniform mat4 unproject;\nuniform bool inside;\n\nvec3 decodeNormal(vec2 data)\n{\n    vec3 normal;\n    data.xy = data * 4.0 - 2.0;\n    float f = dot(data, data);\n    float g = sqrt(1.0 - f * .25);\n    normal.xz = data * g;\n    normal.y = -(1.0 - f * .5);\n    return normal;\n}\n\nvec3 getFrustumVector()\n{\n    vec2 position = (gl_FragCoord.xy) * rcpScreenSize * 2.0 - 1.0;\n    vec4 unprojNear = unproject * vec4(position, -1.0, 1.0);\n    vec4 unprojFar = unproject * vec4(position, 1.0, 1.0);\n    return unprojFar.xyz/unprojFar.w - unprojNear.xyz/unprojNear.w;\n}\n\nfloat intersectSphere(vec3 C, float r, vec3 O, vec3 D)\n{\n    float a = 1.0;\n    vec3 OminC = O - C;\n    float b = 2.0 * dot(D, OminC);\n    float c = dot(OminC, OminC) - r * r;\n    float det = b * b - 4.0 * a * c;\n    if (det < 0.0) return -1.0;\n    float t1 = (-b + sqrt(det)) / (2.0 * a);\n    float t2 = (-b - sqrt(det)) / (2.0 * a);\n    // return the closest intersection\n    return max(min(t1, t2), 0.0);\n}\n\nfloat linearStep(float a, float b, float t)\n{\n    return clamp((t - a) / (b - a), 0.0, 1.0);\n}\n\nfloat linearStep2(float a, float range, float t)\n{\n    return clamp((t - a) / range, 0.0, 1.0);\n}\n\nvec3 getScattering(vec4 albedo, vec3 cameraPos, vec3 localPos, vec3 viewDir, float depth)\n{\n    vec3 transmittance;\n    vec3 inScatter = GetSkyRadianceToPoint(cameraPos, localPos, sunDir, transmittance);\n    vec3 radiance = albedo.rgb * transmittance + inScatter * sunIntensity;\n    float sun = smoothstep(sunSize.y * .99999, sunSize.y, dot(viewDir, sunDir)) * float(depth > 0.99);\n    radiance += transmittance * sun * GetSolarRadiance();\n    return radiance;\n}\n\nfloat RGBA8ToFloat(vec4 rgba)\n{\n    return dot(rgba, vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/16581375.0));\n}\n\nvec3 calculateLocalPos(in vec3 O, in vec3 D, in float z, out vec3 viewDir)\n{\n    // keep original view dir length\n    float len = length(D) * z;\n    D = normalize(D);\n    // calculate the point on the view ray closest to the earth (ie: find the distance to the earth)\n    float OdotD = dot(-O, D);   // actually 0 - O, since earth pos is 0\n\n    bool isBehind = OdotD < 0.0;\n    // if intersection is behind camera, just keep the original position\n    float t = isBehind? len : OdotD;\n\n    vec3 closestP = O + D * t;\n\n    float origLen = length(closestP);\n    float d = origLen - atmosBottomRadius;\n    // rescale the distance to the earth to create a new view vector for scattering\n    float newLen = d > 0.0? d / atmosScale + atmosBottomRadius : origLen;\n    // bring it closer to the earth surface\n    closestP *= newLen / origLen;\n    viewDir = normalize(closestP - O);\n    return O + viewDir * len;\n}\n\nvoid main()\n{\n    vec4 color = texture2D(tDiffuse, vUv);\n    color.rgb = pow(color.rgb, vec3(2.2));\n\n    vec4 normalDepth = texture2D(tDepth, vUv);\n    float depth = RGBA8ToFloat(normalDepth);\n\n    // if depth is maximum and alpha is not 0, this must be something blended against the bg\n    // it looks like all real foreground elements are below this depth:\n    float isBlended = linearStep(0.99, 1.0, depth);\n    isBlended *= linearStep(0.001, 0.01, color.a);\n\n    float z = depth * cameraRange.y + cameraRange.x;\n\n    vec3 viewDir;\n    vec3 localPos = calculateLocalPos(cameraPos, vViewDir, z, viewDir);\n    float len = length(localPos);\n\n    vec3 radiance = getScattering(color, cameraPos, localPos, viewDir, depth);\n    float intersectT = intersectSphere(vec3(0.0), scaledAtmosTopRadius, cameraPos, normalize(vViewDir));\n    float intersectsEarth = float(intersectT >= 0.0 && intersectT < length(vViewDir) * z);\n\n    #ifdef MOBILE\n    float distance = distance(cameraPos, localPos);\n    // do not apply scattering closeby (results in artifacts)\n    intersectsEarth *= smoothstep(5.0, 10.0, distance);\n    #endif\n\n    vec3 orig = color.rgb;\n    color.rgb = radiance;\n    color.rgb = mix(orig, radiance, intersectsEarth);\n    color.rgb = mix(color.rgb, orig * color.a, isBlended * color.a);\n\n    color.a = 1.0;\n\n    gl_FragColor = color;\n    gl_FragColor.rgb = pow(gl_FragColor.rgb, vec3(1.0/2.2));\n}\n",At="#define GLSLIFY 1\nuniform sampler2D transmittanceTexture;\nuniform sampler2D scatteringTexture;\nuniform sampler2D scatteringDensityTexture;\nuniform sampler2D singleRayleighScatteringTexture;\nuniform sampler2D multipleScatteringTexture;\nuniform sampler2D irradianceTexture;\n\nuniform float scatterCurve;\nuniform mat4 colorMatrix;\n\n#ifndef _PI\n#define _PI 3.14159265359\n#endif\n\nconst vec2 IRRADIANCE_TEXTURE_SIZE = vec2(IRRADIANCE_TEXTURE_WIDTH, IRRADIANCE_TEXTURE_HEIGHT);\nconst vec3 SCATTERING_TEXTURE_DIM = vec3(SCATTERING_TEXTURE_WIDTH, SCATTERING_TEXTURE_HEIGHT, SCATTERING_TEXTURE_DEPTH);\n\nstruct DensityProfileLayer {\n    float width;\n    float expTerm;\n    float expScale;\n    float linearTerm;\n    float constantTerm;\n};\n\nstruct DensityProfile {\n    DensityProfileLayer layers[2];\n};\n\nuniform float atmosBottomRadius;\nuniform float atmosTopRadius;\n\nstruct AtmosphereParameters {\n    vec3 solarIrradiance;\n    float sunAngularRadius;\n    DensityProfile rayleighDensity;\n    vec3 rayleighScattering;\n    DensityProfile mieDensity;\n    vec3 mieScattering;\n    vec3 mieExtinction;\n    float miePhaseFunctionG;\n    DensityProfile absorptionDensity;\n    vec3 absorptionExtinction;\n    vec3 groundAlbedo;\n    float mu_s_min;\n};\n\n// TODO: Allow uploading params?\nconst AtmosphereParameters ATMOSPHERE = AtmosphereParameters(\n    vec3(1.474000, 1.850400, 1.911980),\n    0.004675,\n    DensityProfile(DensityProfileLayer[2](DensityProfileLayer(0.000000, 0.000000, 0.000000, 0.000000, 0.000000), DensityProfileLayer(0.000000, 1.000000, -0.125000, 0.000000, 0.000000))),\n    vec3(0.005802, 0.013558, 0.033100),\n    DensityProfile(DensityProfileLayer[2](DensityProfileLayer(0.000000, 0.000000, 0.000000, 0.000000, 0.000000), DensityProfileLayer(0.000000, 1.000000, -0.833333, 0.000000, 0.000000))),\n    vec3(0.003996, 0.003996, 0.003996),\n    vec3(0.004440, 0.004440, 0.004440),\n    0.800000,\n    DensityProfile(DensityProfileLayer[2](DensityProfileLayer(25.000000, 0.000000, 0.000000, 0.066667, -0.666667), DensityProfileLayer(0.000000, 0.000000, 0.000000, -0.066667, 2.666667))),\n    vec3(0.000650, 0.001881, 0.000085),\n    vec3(0.100000, 0.100000, 0.100000),\n    -0.207912\n);\n\nvec4 texture3D(sampler2D sampler, vec3 uvw, vec3 dim)\n{\n    float tex_coord_z = uvw.z * (dim.z - 1.0);\n    float tex_z = floor(tex_coord_z);\n    float lerp = tex_coord_z - tex_z;\n    vec2 uv = vec2(uvw.x, (tex_z + uvw.y) / dim.z);\n    vec4 a = texture2D(sampler, uv);\n    uv.y += 1.0 / dim.z;\n    vec4 b = texture2D(sampler, uv);\n    vec4 col = mix(a, b, lerp);\n    return col;\n}\n\nfloat RayleighPhaseFunction(float nu) {\n    float k = 3.0 / (16.0 * _PI);\n    return k * (1.0 + nu * nu);\n}\n\nfloat MiePhaseFunction(float g, float nu) {\n    float k = 3.0 / (8.0 * _PI) * (1.0 - g * g) / (2.0 + g * g);\n    return k * (1.0 + nu * nu) / pow(1.0 + g * g - 2.0 * g * nu, 1.5);\n}\n\nfloat ClampCosine(float mu) {\n    return clamp(mu, -1.0, 1.0);\n}\nfloat ClampDistance(float d) {\n    return max(d, 0.0);\n}\n\nfloat SafeSqrt(float a) {\n    return sqrt(max(a, 0.0));\n}\n\nfloat ClampRadius(float r) {\n    return clamp(r, atmosBottomRadius, atmosTopRadius);\n}\n\nfloat GetTextureCoordFromUnitRange(float x, int texture_size) {\n    return 0.5 / float(texture_size) + x * (1.0 - 1.0 / float(texture_size));\n}\n\nfloat GetUnitRangeFromTextureCoord(float u, int texture_size) {\n    return (u - 0.5 / float(texture_size)) / (1.0 - 1.0 / float(texture_size));\n}\n\nfloat DistanceToTopAtmosphereBoundary(float r, float mu) {\n    float discriminant = r * r * (mu * mu - 1.0) + atmosTopRadius * atmosTopRadius;\n    return ClampDistance(-r * mu + SafeSqrt(discriminant));\n}\n\nvec4 GetScatteringTextureUvwzFromRMuMuSNu(float r, float mu, float mu_s, float nu, bool ray_r_mu_intersects_ground) {\n    float H = sqrt(atmosTopRadius * atmosTopRadius - atmosBottomRadius * atmosBottomRadius);\n    float rho = SafeSqrt(r * r - atmosBottomRadius * atmosBottomRadius);\n    float u_r = GetTextureCoordFromUnitRange(rho / H, SCATTERING_TEXTURE_R_SIZE);\n    float r_mu = r * mu;\n    float discriminant = r_mu * r_mu - r * r + atmosBottomRadius * atmosBottomRadius;\n\n    float u_mu;\n    if (ray_r_mu_intersects_ground) {\n        float d = -r_mu - SafeSqrt(discriminant);\n        float d_min = r - atmosBottomRadius;\n        float d_max = rho;\n        u_mu = 0.5 - 0.5 * GetTextureCoordFromUnitRange(d_max == d_min ? 0.0 : (d - d_min) / (d_max - d_min), SCATTERING_TEXTURE_MU_SIZE / 2);\n    } else {\n        float d = -r_mu + SafeSqrt(discriminant + H * H);\n        float d_min = atmosTopRadius - r;\n        float d_max = rho + H;\n        u_mu = 0.5 + 0.5 * GetTextureCoordFromUnitRange((d - d_min) / (d_max - d_min), SCATTERING_TEXTURE_MU_SIZE / 2);\n    }\n    float d = DistanceToTopAtmosphereBoundary(atmosBottomRadius, mu_s);\n\n    float d_min = atmosTopRadius - atmosBottomRadius;\n    float d_max = H;\n    float a = (d - d_min) / (d_max - d_min);\n    float D = DistanceToTopAtmosphereBoundary(atmosBottomRadius, ATMOSPHERE.mu_s_min);\n    float A = (D - d_min) / (d_max - d_min);\n    float u_mu_s = GetTextureCoordFromUnitRange(max(1.0 - a / A, 0.0) / (1.0 + a), SCATTERING_TEXTURE_MU_S_SIZE);\n    float u_nu = (nu + 1.0) / 2.0;\n    return vec4(u_nu, u_mu_s, u_mu, u_r);\n}\n\nvec3 GetSolarRadiance() {\n    return ATMOSPHERE.solarIrradiance / (_PI * ATMOSPHERE.sunAngularRadius * ATMOSPHERE.sunAngularRadius);\n}\n\nvec2 GetTransmittanceTextureUvFromRMu(float r, float mu) {\n    float H = sqrt(atmosTopRadius * atmosTopRadius - atmosBottomRadius * atmosBottomRadius);\n    float rho = SafeSqrt(r * r - atmosBottomRadius * atmosBottomRadius);\n    float d = DistanceToTopAtmosphereBoundary(r, mu);\n    float d_min = atmosTopRadius - r;\n    float d_max = rho + H;\n    float x_mu = (d - d_min) / (d_max - d_min);\n    float x_r = rho / H;\n    return vec2(GetTextureCoordFromUnitRange(x_mu, TRANSMITTANCE_TEXTURE_WIDTH), GetTextureCoordFromUnitRange(x_r, TRANSMITTANCE_TEXTURE_HEIGHT));\n}\n\nvec3 GetTransmittanceToTopAtmosphereBoundary(float r, float mu) {\n    vec2 uv = GetTransmittanceTextureUvFromRMu(r, mu);\n    return texture2D(transmittanceTexture, uv).rgb;\n}\n\nbool RayIntersectsGround(float r, float mu) {\n    return mu < 0.0 && r * r * (mu * mu - 1.0) + atmosBottomRadius * atmosBottomRadius >= 0.0;\n}\n\nvec3 GetExtrapolatedSingleMieScattering(vec4 scattering) {\n    if (scattering.r <= 0.0)\n        return vec3(0.0);\n\n    return scattering.rgb * scattering.a / scattering.r *\n        (ATMOSPHERE.rayleighScattering.r / ATMOSPHERE.mieScattering.r) *\n        (ATMOSPHERE.mieScattering / ATMOSPHERE.rayleighScattering);\n}\n\nvec3 GetCombinedScattering(in float r, in float mu, in float mu_s, in float nu, in bool ray_r_mu_intersects_ground, out vec3 single_mie_scattering) {\n    vec4 uvwz = GetScatteringTextureUvwzFromRMuMuSNu(r, mu, mu_s, nu, ray_r_mu_intersects_ground);\n    float tex_coord_x = uvwz.x * float(SCATTERING_TEXTURE_NU_SIZE - 1);\n    float tex_x = floor(tex_coord_x);\n    float lerp = tex_coord_x - tex_x;\n    vec3 uvw0 = vec3((tex_x + uvwz.y) / float(SCATTERING_TEXTURE_NU_SIZE), uvwz.z, uvwz.w);\n    vec3 uvw1 = vec3((tex_x + 1.0 + uvwz.y) / float(SCATTERING_TEXTURE_NU_SIZE), uvwz.z, uvwz.w);\n\n    vec4 combined_scattering = mix(\n        texture3D(scatteringTexture, uvw0, SCATTERING_TEXTURE_DIM),\n        texture3D(scatteringTexture, uvw1, SCATTERING_TEXTURE_DIM),\n        lerp\n    );\n\n    vec3 scattering = combined_scattering.rgb;\n    single_mie_scattering = GetExtrapolatedSingleMieScattering(combined_scattering);\n    return scattering;\n}\n\nvec3 GetTransmittance(float r, float mu, float d, bool ray_r_mu_intersects_ground) {\n    float r_d = ClampRadius(sqrt(d * d + 2.0 * r * mu * d + r * r));\n    float mu_d = ClampCosine((r * mu + d) / r_d);\n\n    if (ray_r_mu_intersects_ground) {\n        return min(\n            GetTransmittanceToTopAtmosphereBoundary(r_d, -mu_d) /\n            GetTransmittanceToTopAtmosphereBoundary(r, -mu),\n            vec3(1.0)\n        );\n    } else {\n        return min(\n            GetTransmittanceToTopAtmosphereBoundary(r, mu) /\n            GetTransmittanceToTopAtmosphereBoundary(r_d, mu_d),\n            vec3(1.0)\n        );\n    }\n}\n\nvec3 GetTransmittanceToSun(float r, float mu_s) {\n    float sin_theta_h = atmosBottomRadius / r;\n    float cos_theta_h = -sqrt(max(1.0 - sin_theta_h * sin_theta_h, 0.0));\n    return GetTransmittanceToTopAtmosphereBoundary(r, mu_s) *\n        smoothstep(-sin_theta_h * ATMOSPHERE.sunAngularRadius, sin_theta_h * ATMOSPHERE.sunAngularRadius, mu_s - cos_theta_h);\n}\n\nvec3 GetSkyRadianceToPoint(\n    in vec3 camera, in vec3 point,\n    in vec3 sun_direction, out vec3 transmittance\n) {\n    vec3 view_ray = normalize(point - camera);\n    float r = length(camera);\n    float rmu = dot(camera, view_ray);\n    float distance_to_top_atmosphere_boundary = -rmu - sqrt(rmu * rmu - r * r + atmosTopRadius * atmosTopRadius);\n    if (distance_to_top_atmosphere_boundary > 0.0) {\n        camera = camera + view_ray * distance_to_top_atmosphere_boundary;\n        r = atmosTopRadius;\n        rmu += distance_to_top_atmosphere_boundary;\n    }\n    float mu = rmu / r;\n    float mu_s = dot(camera, sun_direction) / r;\n    float nu = dot(view_ray, sun_direction);\n    float d = length(point - camera);\n    bool ray_r_mu_intersects_ground = RayIntersectsGround(r, mu);\n    transmittance = GetTransmittance(r, mu, d, ray_r_mu_intersects_ground);\n    vec3 single_mie_scattering;\n    vec3 scattering = GetCombinedScattering(r, mu, mu_s, nu, ray_r_mu_intersects_ground, single_mie_scattering);\n    float r_p = ClampRadius(sqrt(d * d + 2.0 * r * mu * d + r * r));\n    float mu_p = (r * mu + d) / r_p;\n    float mu_s_p = (r * mu_s + d * nu) / r_p;\n    vec3 single_mie_scattering_p;\n    vec3 scattering_p = GetCombinedScattering(r_p, mu_p, mu_s_p, nu, ray_r_mu_intersects_ground, single_mie_scattering_p);\n    vec3 shadow_transmittance = transmittance;\n    scattering = scattering - shadow_transmittance * scattering_p;\n    single_mie_scattering = single_mie_scattering - shadow_transmittance * single_mie_scattering_p;\n    single_mie_scattering = GetExtrapolatedSingleMieScattering(vec4(scattering, single_mie_scattering.r));\n    single_mie_scattering = single_mie_scattering * smoothstep(0.0, 0.01, mu_s);\n    vec3 val = scattering * RayleighPhaseFunction(nu) + single_mie_scattering * MiePhaseFunction(ATMOSPHERE.miePhaseFunctionG, nu);\n    val = clamp(val, 0.0, 1.0);\n    val = pow((colorMatrix * vec4(val, 1.0)).xyz, vec3(scatterCurve));\n    return val;\n}\n",Lt=new v.Vkp,Dt=new v.yGw,It=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a,r){var o,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,c.Z)(this,n);var l=new v.jyz({vertexShader:kt,fragmentShader:At+"\n\n"+Et,uniforms:(0,re.Z)((0,ae.Z)({},e.uniforms),{tDepth:{value:r},tDiffuse:{value:null},unproject:{value:new v.yGw},toLocal:{value:new v.yGw},rcpScreenSize:{value:new v.FM8},cameraRange:{value:new v.FM8},outerRadius:{value:e.outerRadius},innerRadius:{value:e.planetRadius},inside:{value:!0}}),defines:(0,re.Z)((0,ae.Z)({},e.defines),{POST:""}),depthTest:!1,depthWrite:!1,extensions:{derivatives:!0},type:"AtmospherePostPass"});return(o=t.call(this,l))._atmosphere=e,o._earth=i,o._camera=a,o._material=l,o.needsSwap=!0,y.o.isMobile()&&s&&(l.defines.MOBILE=""),o}var i=n.prototype;return i.updateCamera=function(e){this._camera=e},i.render=function(e,t,i,a,r){var o=this._material.uniforms,s=this._atmosphere.sun,l=this._camera;o.tDiffuse.value=t.texture,o.rcpScreenSize.value.set(1/i.width,1/i.height),o.cameraRange.value.set(l.near,l.far-l.near),o.sunIntensity.value=6.283,Dt.copy(this._earth.matrixWorld).invert(),o.unproject.value.copy(l.projectionMatrixInverse),o.toLocal.value.multiplyMatrices(Dt,l.matrixWorld),s.getWorldPosition(o.sunDir.value).applyMatrix3(Lt.setFromMatrix4(Dt)).normalize(),l.getWorldPosition(o.cameraPos.value).applyMatrix4(Dt),o.inside.value=!0,(0,d.Z)((0,h.Z)(n.prototype),"render",this).call(this,e,t,i,a,r)},n}(Mt.Cw),Ot="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    gl_Position = vec4(position, 1.0);\n    vUv = uv;\n}\n",Nt=n(79199);function Ut(){return St||(St=new v.iKG(-1,1,1,-1)).position.set(0,0,1),St}function Zt(){return xt||(bt=new v.BKK(2,2),xt=new v.Kj0(bt,null)),xt}function zt(){return wt||(wt=new v.jyz((0,re.Z)((0,ae.Z)({},Nt.C),{depthWrite:!1,depthTest:!1,type:"copyMaterial"}))),wt}function Bt(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Ut(),r=u.yO.renderer,o=r.getRenderTarget(),s=n||zt(),l=Zt();e&&(s.uniforms.tDiffuse.value=e),l.material=s;var c=r.autoClear;r.autoClear=void 0===i||i,r.setRenderTarget(t),r.render(l,a),r.setRenderTarget(o),r.autoClear=c}var Ft,Ht,Gt,jt=new v.Ilk;function Wt(){return Gt||(Gt=new v.iKG(-1,1,1,-1)).position.set(0,0,1),Gt}function Vt(){return Ft||(Ht=new v.BKK(2,2),Ft=new v.Kj0(Ht,null)),Ft}function Kt(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Wt(),r=u.yO.renderer,o=r.getRenderTarget(),s=Vt(),l=r.autoClear;s.material=t,r.setRenderTarget(e),r.autoClear=!1;for(var c=e.height/n,d=0;d<n;++d)t.uniforms.layer.value=d-.5,0===d&&i&&r.clear(),r.setViewport(0,c*d,e.width,c),r.render(s,a);r.autoClear=l,r.setRenderTarget(o)}function qt(e,t,n,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=t.blending;e.forEach((function(e,r){i&&(t.blending=i[r]),t.uniforms.fakeMRTTarget.value=r,Kt(e,t,n,a)})),t.blending=r}var Yt=n(19327),Xt=new v.Ilk(0,0,0),Qt=new v.Pa4(1,0,0),Jt=new v.Pa4(0,1,0),$t=new v.Pa4(0,0,1),en=new v.Pa4(0,0,0),tn=256,nn=32,an={TRANSMITTANCE_TEXTURE_WIDTH:256,TRANSMITTANCE_TEXTURE_HEIGHT:64,IRRADIANCE_TEXTURE_WIDTH:64,IRRADIANCE_TEXTURE_HEIGHT:16,SCATTERING_TEXTURE_WIDTH:tn,SCATTERING_TEXTURE_HEIGHT:64,SCATTERING_TEXTURE_DEPTH:nn,SCATTERING_TEXTURE_R_SIZE:32,SCATTERING_TEXTURE_MU_SIZE:64,SCATTERING_TEXTURE_MU_S_SIZE:32,SCATTERING_TEXTURE_NU_SIZE:8},rn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6360,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.004675;(0,c.Z)(this,e),this._colorMatrixR=new v.Pa4(.5,0,0),this._colorMatrixG=new v.Pa4(0,.7,.8),this._colorMatrixB=new v.Pa4(0,0,1),this._colorMatrixO=new v.Pa4(0,0,0),this._colorMatrixAmount=1;var a=5;this._uniforms={atmosBottomRadius:{value:t},atmosTopRadius:{value:t+n},scatterCurve:{value:1},atmosScale:{value:a},scaledAtmosTopRadius:{value:t+n*a},luminanceFromRadiance:{value:(new v.Vkp).identity()},transmittanceTexture:{value:null},irradianceTexture:{value:null},delta_irradiance_texture:{value:null},singleRayleighScatteringTexture:{value:null},singleMieScatteringTexture:{value:null},multipleScatteringTexture:{value:null},scatteringDensityTexture:{value:null},scatteringTexture:{value:null},colorMatrix:{value:new v.yGw},cameraPos:{value:new v.Pa4},sunIntensity:{value:1},sunDir:{value:new v.Pa4},sunSize:{value:new v.FM8(Math.tan(i),Math.cos(i))}},y.o.init(u.yO.renderer),this._planetRadius=t,this._atmosThickness=n,this.updateColorMatrix()}var t=e.prototype;return t.initAsync=function(){var e=this,t=this,n=function(){var e=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return t._initMaterials(),[4,sn()];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return n().then((function(){return e._initTextures()})).then((function(){return e._updatePrecompute()}))},t._initMaterials=function(){this._transmissionMaterial=this._createPrecompShader("transmissionMaterial","#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    vec3 transmittance = ComputeTransmittanceToTopAtmosphereBoundaryTexture(ATMOSPHERE, gl_FragCoord.xy);\n    gl_FragColor = vec4(transmittance, 1.0);\n}\n"),this._directIrradianceMaterial=this._createPrecompShader("directIrradianceMaterial","#define GLSLIFY 1\nvec3 ComputeDirectIrradiance(float r, float mu_s) {\n    float alpha_s = ATMOSPHERE.sunAngularRadius;\n    float average_cosine_factor = mu_s < -alpha_s ? 0.0 : (mu_s > alpha_s ? mu_s : (mu_s + alpha_s) * (mu_s + alpha_s) / (4.0 * alpha_s));\n    return ATMOSPHERE.solarIrradiance * GetTransmittanceToTopAtmosphereBoundary(r, mu_s) * average_cosine_factor;\n}\n\nvec3 ComputeDirectIrradianceTexture(vec2 frag_coord) {\n    float r;\n    float mu_s;\n    GetRMuSFromIrradianceTextureUv(frag_coord / IRRADIANCE_TEXTURE_SIZE, r, mu_s);\n    return ComputeDirectIrradiance(r, mu_s);\n}\n\nvoid main() {\n    vec3 delta_irradiance = ComputeDirectIrradianceTexture(gl_FragCoord.xy);\n    gl_FragColor = vec4(delta_irradiance, 1.0);\n}\n"),this._singleScatteringMaterial=this._createPrecompShader("singleScatteringMaterial","#define GLSLIFY 1\nuniform mat3 luminanceFromRadiance;\nuniform int layer;\nuniform int fakeMRTTarget;\n\nvoid ComputeSingleScatteringIntegrand(in float r, in float mu, in float mu_s, in float nu, in float d, in bool ray_r_mu_intersects_ground, out vec3 rayleigh, out vec3 mie) {\n    float r_d = ClampRadius(ATMOSPHERE, sqrt(d * d + 2.0 * r * mu * d + r * r));\n    float mu_s_d = clamp((r * mu_s + d * nu) / r_d, -1.0, 1.0);\n    vec3 transmittance =\n        GetTransmittance(r, mu, d, ray_r_mu_intersects_ground) *\n        GetTransmittanceToSun(r_d, mu_s_d);\n    rayleigh = transmittance * GetProfileDensity(ATMOSPHERE.rayleighDensity, r_d - atmosBottomRadius);\n    mie = transmittance * GetProfileDensity(ATMOSPHERE.mieDensity, r_d - atmosBottomRadius);\n}\n\nvoid ComputeSingleScattering(in float r, in float mu, in float mu_s, in float nu, in bool ray_r_mu_intersects_ground, out vec3 rayleigh, out vec3 mie) {\n    const int SAMPLE_COUNT = 50;\n    float dx = DistanceToNearestAtmosphereBoundary(r, mu, ray_r_mu_intersects_ground) / float(SAMPLE_COUNT);\n    vec3 rayleigh_sum = vec3(0.0);\n    vec3 mie_sum = vec3(0.0);\n    for (int i = 0; i <= SAMPLE_COUNT; ++i) {\n        float d_i = float(i) * dx;\n        vec3 rayleigh_i = vec3(0.0);\n        vec3 mie_i = vec3(0.0);\n        ComputeSingleScatteringIntegrand(r, mu, mu_s, nu, d_i, ray_r_mu_intersects_ground, rayleigh_i, mie_i);\n        float weight_i = (i == 0 || i == SAMPLE_COUNT) ? 0.5 : 1.0;\n        rayleigh_sum += rayleigh_i * weight_i;\n        mie_sum += mie_i * weight_i;\n    }\n    rayleigh = rayleigh_sum * dx * ATMOSPHERE.solarIrradiance * ATMOSPHERE.rayleighScattering;\n    mie = mie_sum * dx * ATMOSPHERE.solarIrradiance * ATMOSPHERE.mieScattering;\n}\n\nvoid ComputeSingleScatteringTexture(in vec3 frag_coord, out vec3 rayleigh, out vec3 mie) {\n    float r;\n    float mu;\n    float mu_s;\n    float nu;\n    bool ray_r_mu_intersects_ground;\n    GetRMuMuSNuFromScatteringTextureFragCoord(frag_coord, r, mu, mu_s, nu, ray_r_mu_intersects_ground);\n    ComputeSingleScattering(r, mu, mu_s, nu, ray_r_mu_intersects_ground, rayleigh, mie);\n}\n\nvoid main() {\n    vec3 delta_rayleigh = vec3(0.0);\n    vec3 delta_mie = vec3(0.0);\n    vec4 scattering = vec4(0.0);\n\n    ComputeSingleScatteringTexture(vec3(gl_FragCoord.xy + .5, float(layer) + 0.5), delta_rayleigh, delta_mie);\n    scattering = vec4(luminanceFromRadiance * delta_rayleigh.rgb, (luminanceFromRadiance * delta_mie).r);\n\n    if (fakeMRTTarget == 0)\n        gl_FragColor = vec4(delta_rayleigh, 1.0);\n    else if (fakeMRTTarget == 1)\n        gl_FragColor = vec4(delta_mie, 1.0);\n    else if (fakeMRTTarget == 2)\n        gl_FragColor = scattering;\n}\n",{fakeMRTTarget:{value:0},layer:{value:0}}),this._scatteringDensityMaterial=this._createPrecompShader("scatteringDensityMaterial","#define GLSLIFY 1\nuniform int layer;\nuniform int scattering_order;\n\nvec3 ComputeScatteringDensity(float r, float mu, float mu_s, float nu, int scattering_order)\n{\n    vec3 zenith_direction = vec3(0.0, 0.0, 1.0);\n    vec3 omega = vec3(sqrt(1.0 - mu * mu), 0.0, mu);\n    float sun_dir_x = omega.x == 0.0 ? 0.0 : (nu - mu * mu_s) / omega.x;\n    float sun_dir_y = sqrt(max(1.0 - sun_dir_x * sun_dir_x - mu_s * mu_s, 0.0));\n    vec3 omega_s = vec3(sun_dir_x, sun_dir_y, mu_s);\n    const int SAMPLE_COUNT = 16;\n    const float dphi = _PI / float(SAMPLE_COUNT);\n    const float dtheta = _PI / float(SAMPLE_COUNT);\n    vec3 rayleigh_mie = vec3(0.0);\n    for (int l = 0; l < SAMPLE_COUNT; ++l) {\n        float theta = (float(l) + 0.5) * dtheta;\n        float cos_theta = cos(theta);\n        float sin_theta = sin(theta);\n        bool ray_r_theta_intersects_ground = RayIntersectsGround(r, cos_theta);\n        float distance_to_ground = 0.0;\n        vec3 transmittance_to_ground = vec3(0.0);\n        vec3 groundAlbedo = vec3(0.0);\n        if (ray_r_theta_intersects_ground) {\n            distance_to_ground = DistanceToBottomAtmosphereBoundary(r, cos_theta);\n            transmittance_to_ground = GetTransmittance(r, cos_theta, distance_to_ground, true /* ray_intersects_ground */);\n            groundAlbedo = ATMOSPHERE.groundAlbedo;\n        }\n        for (int m = 0; m < 2 * SAMPLE_COUNT; ++m) {\n            float phi = (float(m) + 0.5) * dphi;\n            vec3 omega_i = vec3(cos(phi) * sin_theta, sin(phi) * sin_theta, cos_theta);\n            float domega_i = dtheta * dphi * sin(theta);\n            float nu1 = dot(omega_s, omega_i);\n            vec3 incident_radiance = GetScattering(\n                r, omega_i.z, mu_s, nu1, ray_r_theta_intersects_ground, scattering_order - 1\n            );\n            vec3 ground_normal = normalize(zenith_direction * r + omega_i * distance_to_ground);\n            vec3 ground_irradiance = GetIrradiance(atmosBottomRadius, dot(ground_normal, omega_s));\n            incident_radiance += transmittance_to_ground * groundAlbedo * (1.0 / _PI) * ground_irradiance;\n            float nu2 = dot(omega, omega_i);\n            float rayleighDensity = GetProfileDensity(ATMOSPHERE.rayleighDensity, r - atmosBottomRadius);\n            float mieDensity = GetProfileDensity(ATMOSPHERE.mieDensity, r - atmosBottomRadius);\n            rayleigh_mie += incident_radiance * (ATMOSPHERE.rayleighScattering * rayleighDensity * RayleighPhaseFunction(nu2) + ATMOSPHERE.mieScattering * mieDensity * MiePhaseFunction(ATMOSPHERE.miePhaseFunctionG, nu2)) * domega_i;\n        }\n    }\n    return rayleigh_mie;\n}\n\nvec3 ComputeScatteringDensityTexture(vec3 frag_coord, int scattering_order)\n{\n    float r;\n    float mu;\n    float mu_s;\n    float nu;\n    bool ray_r_mu_intersects_ground;\n    GetRMuMuSNuFromScatteringTextureFragCoord(frag_coord, r, mu, mu_s, nu, ray_r_mu_intersects_ground);\n    return ComputeScatteringDensity(r, mu, mu_s, nu, scattering_order);\n}\n\nvoid main() {\n    vec3 scattering_density = ComputeScatteringDensityTexture(vec3(gl_FragCoord.xy, float(layer) + 0.5), scattering_order);\n    gl_FragColor = vec4(scattering_density, 1.0);\n}\n",{layer:{value:0},scattering_order:{value:0}}),this._indirectIrradianceMaterial=this._createPrecompShader("indirectIrradianceMaterial","#define GLSLIFY 1\nuniform mat3 luminanceFromRadiance;\nuniform int scattering_order;\nuniform int fakeMRTTarget;\n\nvec3 ComputeIndirectIrradiance(float r, float mu_s, int scattering_order) {\n    const int SAMPLE_COUNT = 32;\n    const float dphi = _PI / float(SAMPLE_COUNT);\n    const float dtheta = _PI / float(SAMPLE_COUNT);\n    vec3 result = vec3(0.0);\n    vec3 omega_s = vec3(sqrt(1.0 - mu_s * mu_s), 0.0, mu_s);\n\n    for (int j = 0; j < SAMPLE_COUNT / 2; ++j) {\n        float theta = (float(j) + 0.5) * dtheta;\n        for (int i = 0; i < 2 * SAMPLE_COUNT; ++i) {\n            float phi = (float(i) + 0.5) * dphi;\n            vec3 omega =\n            vec3(cos(phi) * sin(theta), sin(phi) * sin(theta), cos(theta));\n            float domega = dtheta * dphi * sin(theta);\n            float nu = dot(omega, omega_s);\n            result += GetScattering(r, omega.z, mu_s, nu, false /* ray_r_theta_intersects_ground */, scattering_order) * omega.z * domega;\n        }\n    }\n    return result;\n}\n\nvec3 ComputeIndirectIrradianceTexture(vec2 frag_coord, int scattering_order) {\n    float r;\n    float mu_s;\n    GetRMuSFromIrradianceTextureUv(frag_coord / IRRADIANCE_TEXTURE_SIZE, r, mu_s);\n    return ComputeIndirectIrradiance(r, mu_s, scattering_order);\n}\n\nvoid main() {\n    vec3 delta_irradiance = ComputeIndirectIrradianceTexture(gl_FragCoord.xy, scattering_order);\n    vec3 irradiance = luminanceFromRadiance * delta_irradiance;\n\n    if (fakeMRTTarget == 0)\n        gl_FragColor = vec4(delta_irradiance, 1.0);\n    else\n        gl_FragColor = vec4(irradiance, 1.0);\n}\n",{fakeMRTTarget:{value:0},scattering_order:{value:0}}),this._multiScatteringMaterial=this._createPrecompShader("multiScatteringMaterial","#define GLSLIFY 1\nuniform mat3 luminanceFromRadiance;\nuniform int layer;\nuniform int fakeMRTTarget;\n\nvec3 ComputeMultipleScattering(\n    float r, float mu, float mu_s, float nu,\n    bool ray_r_mu_intersects_ground\n) {\n    const int SAMPLE_COUNT = 50;\n    float dx = DistanceToNearestAtmosphereBoundary(r, mu, ray_r_mu_intersects_ground) / float(SAMPLE_COUNT);\n    vec3 rayleigh_mie_sum = vec3(0.0);\n    for (int i = 0; i <= SAMPLE_COUNT; ++i) {\n        float d_i = float(i) * dx;\n        float r_i = ClampRadius(sqrt(d_i * d_i + 2.0 * r * mu * d_i + r * r));\n        float mu_i = clamp((r * mu + d_i) / r_i, -1.0, 1.0);\n        float mu_s_i = clamp((r * mu_s + d_i * nu) / r_i, -1.0, 1.0);\n        vec3 rayleigh_mie_i = GetScattering(r_i, mu_i, mu_s_i, nu, ray_r_mu_intersects_ground) *\n                              GetTransmittance(r, mu, d_i, ray_r_mu_intersects_ground) *\n                              dx;\n        float weight_i = (i == 0 || i == SAMPLE_COUNT) ? 0.5 : 1.0;\n        rayleigh_mie_sum += rayleigh_mie_i * weight_i;\n    }\n    return rayleigh_mie_sum;\n}\n\nvec3 ComputeMultipleScatteringTexture(vec3 frag_coord, out float nu) {\n    float r;\n    float mu;\n    float mu_s;\n    bool ray_r_mu_intersects_ground;\n    GetRMuMuSNuFromScatteringTextureFragCoord(frag_coord, r, mu, mu_s, nu, ray_r_mu_intersects_ground);\n    return ComputeMultipleScattering(r, mu, mu_s, nu, ray_r_mu_intersects_ground);\n}\n\nvoid main() {\n    float nu;\n    vec3 delta_multiple_scattering = ComputeMultipleScatteringTexture(vec3(gl_FragCoord.xy, float(layer) + 0.5), nu);\n    vec4 scattering = vec4(luminanceFromRadiance * delta_multiple_scattering.rgb / RayleighPhaseFunction(nu), 0.0);\n\n    if (fakeMRTTarget == 0)\n        gl_FragColor = vec4(delta_multiple_scattering, 1.0);\n    else\n        gl_FragColor = scattering;\n}\n",{layer:{value:0},fakeMRTTarget:{value:0}})},t.updateColorMatrix=function(){var e=this.uniforms.colorMatrix.value;Qt.set(1,0,0).lerp(this._colorMatrixR,this._colorMatrixAmount),Jt.set(0,1,0).lerp(this._colorMatrixG,this._colorMatrixAmount),$t.set(0,0,1).lerp(this._colorMatrixB,this._colorMatrixAmount),en.set(0,0,0).lerp(this._colorMatrixO,this._colorMatrixAmount),e.makeBasis(Qt,Jt,$t),e.setPosition(en)},t._updatePrecompute=function(){for(var e=function(e){i=un([function(){n.irradianceTexture.value=t._deltaIrradianceTex.texture,t._scatteringDensityMaterial.uniforms.scattering_order.value=e,Kt(t._deltaScatteringDensityTex,t._scatteringDensityMaterial,nn),n.irradianceTexture.value=t._irradianceTex.texture},function(){t._indirectIrradianceMaterial.uniforms.scattering_order.value=e-1,function(e,t,n){var i=t.blending;e.forEach((function(e,i){n&&(t.blending=n[i]),t.uniforms.fakeMRTTarget.value=i,Bt(void 0,e,t)})),t.blending=i}([t._deltaIrradianceTex,t._irradianceTex],t._indirectIrradianceMaterial,[v.jFi,v.Xaj])},function(){qt([t._deltaMultiScatteringTex,t._scatteringTex],t._multiScatteringMaterial,nn,[v.jFi,v.Xaj],!1)}])},t=this,n=this._uniforms,i=un([function(){return Bt(null,t._transmittanceTex,t._transmissionMaterial)},function(){Bt(null,t._deltaIrradianceTex,t._directIrradianceMaterial),function(e,t){var n=u.yO.renderer,i=n.getRenderTarget();n.getClearColor(jt),n.setClearColor(t),n.setRenderTarget(e),n.clear(),n.setRenderTarget(i),n.setClearColor(jt)}(t._irradianceTex,Xt)},function(){qt([t._deltaRayleighScatteringTex,t._deltaMieScatteringTex,t._scatteringTex],t._singleScatteringMaterial,nn)}]),a=2;a<=5;++a)e(a);return i},t._initTextures=function(){var e={depthBuffer:!1,stencilBuffer:!1,type:y.o.getTexTypeHalfOrFloatOrAny()};this._transmittanceTex=new v.dd2(256,64,e),this._deltaIrradianceTex=new v.dd2(64,16,e),this._irradianceTex=new v.dd2(64,16,e),this._deltaRayleighScatteringTex=new v.dd2(tn,2048,e),this._deltaMieScatteringTex=new v.dd2(tn,2048,e),this._scatteringTex=new v.dd2(tn,2048,e),this._deltaScatteringDensityTex=new v.dd2(tn,2048,e),this._deltaMultiScatteringTex=this._deltaRayleighScatteringTex;var t=this._uniforms;return t.transmittanceTexture.value=this._transmittanceTex.texture,t.singleRayleighScatteringTexture.value=this._deltaRayleighScatteringTex.texture,t.singleMieScatteringTexture.value=this._deltaMieScatteringTex.texture,t.multipleScatteringTexture.value=this._deltaMultiScatteringTex.texture,t.scatteringDensityTexture.value=this._deltaScatteringDensityTex.texture,t.scatteringTexture.value=this._scatteringTex.texture,sn()},t._createPrecompShader=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,ae.Z)({},this._uniforms,n);return new v.jyz({vertexShader:Ot,fragmentShader:At+"\n\n"+t,uniforms:i,blending:v.jFi,transparent:!0,blendEquation:Yt.bGH,blendEquationAlpha:Yt.bGH,blendSrc:Yt.ghN,blendSrcAlpha:Yt.ghN,blendDst:Yt.ghN,blendDstAlpha:Yt.ghN,defines:an,type:e})},t.initFromTextures=function(){this._initMaterials();var e=this._uniforms;e.irradianceTexture.value=on("atmosphere-irradiance"),e.transmittanceTexture.value=on("atmosphere-transmittance"),e.scatteringTexture.value=on("atmosphere-scattering"),e.singleMieScatteringTexture.value=e.scatteringTexture.value},e.init=function(t){var n=new e(t.planetRadius,t.atmosThickness,t.sunAngularRadius);return n.initAsync().then((function(){return n}))},(0,J.Z)(e,[{key:"scatterCurve",get:function(){return this._uniforms.scatterCurve.value},set:function(e){this._uniforms.scatterCurve.value=e}},{key:"colorMatrix",get:function(){return this._uniforms.colorMatrix.value}},{key:"colorMatrixR",get:function(){return this._colorMatrixR}},{key:"colorMatrixAmount",get:function(){return this._colorMatrixAmount},set:function(e){this._colorMatrixAmount=e}},{key:"colorMatrixG",get:function(){return this._colorMatrixG}},{key:"colorMatrixB",get:function(){return this._colorMatrixB}},{key:"colorMatrixO",get:function(){return this._colorMatrixO}},{key:"sun",get:function(){return this._sun},set:function(e){this._sun=e}},{key:"defines",get:function(){return an}},{key:"uniforms",get:function(){return this._uniforms}},{key:"planetRadius",get:function(){return this._planetRadius}},{key:"atmosThickness",get:function(){return this._atmosThickness},set:function(e){this._atmosThickness=e,this._uniforms.atmosTopRadius.value=this._planetRadius+e}},{key:"atmosScale",get:function(){return this._uniforms.atmosScale.value},set:function(e){this._uniforms.atmosScale.value=e,this._uniforms.scaledAtmosTopRadius.value=this._planetRadius+this._atmosThickness*e}},{key:"outerRadius",get:function(){return this._planetRadius+this._atmosThickness}}]),e}();function on(e){var t=u.Ll.textures.get(e)||u.Ll.custom.get(e);return t.magFilter=v.wem,t.minFilter=v.wem,t.generateMipmaps=!1,t.encoding=v.rnI,t.flipY=!1,t}function sn(){return new Promise((function(e){return setTimeout(e,0)}))}function ln(e){return e(),sn()}function un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Promise.resolve();return e.forEach((function(e){return t=t.then((function(){return ln(e)}))})),t}var cn="#define GLSLIFY 1\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifdef USE_TRANSMISSION\n\nvarying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vLocalPos;\n\n#include <common>\nvarying vec2 vUv;\nattribute vec2 uv2;\nvarying vec2 vUv2;\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nuniform mat3 uv2Transform;\nuniform float uvScale;\nuniform vec2 uvOffset;\n\nvoid main() {\n    vUv = uv * uvScale + uvOffset;\n    vUv2 = uv;\n    vUv2.y = 1.0 - vUv2.y;\n    vUv2 = (uv2Transform * vec3(vUv2, 1.0)).xy;\n    vUv2.y = 1.0 - vUv2.y;\n\n    #include <color_vertex>\n    #include <morphcolor_vertex>\n\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n    #include <normal_vertex>\n\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n\n    vLocalPos = transformed.xyz;\n\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n\n    vViewPosition = - mvPosition.xyz;\n\n    #include <worldpos_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n\n    #ifdef USE_TRANSMISSION\n\n    vWorldPosition = worldPosition.xyz;\n\n    #endif\n\n    #ifdef ADD_NIGHT_DETAIL\n    vDetailUv = uv * 30.0;\n    #endif\n}",dn="#define GLSLIFY 1\n#define STANDARD\n\n#ifdef PHYSICAL\n#define IOR\n#define SPECULAR\n#endif\n\nuniform vec3 cameraPos;\nuniform vec3 sunDir;\nuniform float sunIntensity;\nuniform vec2 sunSize;\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef USE_AMBIENT\nuniform vec3 ambientDir;\nuniform vec3 ambientColor;\n#endif\n\nvarying vec3 vLocalPos;\n\n#ifdef IOR\nuniform float ior;\n#endif\n\n#ifdef SPECULAR\nuniform float specularIntensity;\nuniform vec3 specularColor;\n\n#ifdef USE_SPECULARINTENSITYMAP\nuniform sampler2D specularIntensityMap;\n#endif\n\n#ifdef USE_SPECULARCOLORMAP\nuniform sampler2D specularColorMap;\n#endif\n#endif\n\n#ifdef USE_CLEARCOAT\nuniform float clearcoat;\nuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_IRIDESCENCE\nuniform float iridescence;\nuniform float iridescenceIOR;\nuniform float iridescenceThicknessMinimum;\nuniform float iridescenceThicknessMaximum;\n#endif\n\n#ifdef USE_SHEEN\nuniform vec3 sheenColor;\nuniform float sheenRoughness;\n\n#ifdef USE_SHEENCOLORMAP\nuniform sampler2D sheenColorMap;\n#endif\n\n#ifdef USE_SHEENROUGHNESSMAP\nuniform sampler2D sheenRoughnessMap;\n#endif\n#endif\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\nvarying vec2 vUv;\nvarying vec2 vUv2;\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n\nuniform sampler2D normalSpecMap;\n\nuniform vec2 normalScale;\n\n// Normal Mapping Without Precomputed Tangents\n// http://www.thetenthplanet.de/archives/1180\n\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\n    vec3 q0 = dFdx( eye_pos.xyz );\n    vec3 q1 = dFdy( eye_pos.xyz );\n    vec2 st0 = dFdx( vUv.st );\n    vec2 st1 = dFdy( vUv.st );\n\n    vec3 N = surf_norm; // normalized\n\n    vec3 q1perp = cross( q1, N );\n    vec3 q0perp = cross( N, q0 );\n\n    vec3 T = q1perp * st0.x + q0perp * st1.x;\n    vec3 B = q1perp * st0.y + q0perp * st1.y;\n\n    float det = max( dot( T, T ), dot( B, B ) );\n    float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\n    return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\n}\n\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\n#ifdef ADD_NIGHT_DETAIL\nuniform sampler2D detailMap;\nuniform sampler2D detailMask;\nvarying vec2 vDetailUv;\n#endif\n\nvoid main() {\n\n    #include <clipping_planes_fragment>\n\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n\n    vec4 normalSpec = texture2D(normalSpecMap, NORMAL_MAP_UV);\n\n    #include <logdepthbuf_fragment>\n    vec4 sampledDiffuseColor = texture2D( map, MAP_UV );\n    diffuseColor *= sampledDiffuseColor;\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <roughnessmap_fragment>\n\n    roughnessFactor *= mix(1.0, 0.52, normalSpec.z);\n\n    #include <metalnessmap_fragment>\n    #include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n\n    vec3 mapN;\n    mapN.xy = normalSpec.xy * 2.0 - 1.0;\n    mapN.z = sqrt(1.0 - dot(mapN.xy, mapN.xy));\n    mapN.xy *= normalScale;\n\n    #ifdef USE_TANGENT\n\n    normal = normalize( vTBN * mapN );\n\n    #else\n\n    normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\n    #endif\n\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n\n    #ifdef USE_EMISSIVEMAP\n    vec4 emissiveColor = texture2D( emissiveMap, EMISSIVE_UV );\n    totalEmissiveRadiance *= emissiveColor.rgb;\n    #endif\n\n    #ifdef ADD_NIGHT_DETAIL\n    vec4 detail = texture2D(detailMap, vDetailUv);\n    float mask = smoothstep(0.0, 0.25, texture2D(detailMask, NIGHT_DETAIL_UV).x);\n    totalEmissiveRadiance = mix(totalEmissiveRadiance, detail.rgb * emissive, mask);\n    #endif\n\n    float nDotL = dot(sunDir, normal);\n    totalEmissiveRadiance *= smoothstep(0.1, -0.1, nDotL);\n\n    #undef RE_IndirectDiffuse\n    #undef RE_IndirectSpecular\n\n    // accumulation\n    #include <lights_physical_fragment>\n\n    GeometricContext geometry;\n\n    geometry.position = - vViewPosition;\n    geometry.normal = normal;\n    geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n    IncidentLight directLight;\n\n    #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n    DirectionalLight directionalLight;\n    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n    DirectionalLightShadow directionalLightShadow;\n    #endif\n\n    #pragma unroll_loop_start\n    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n        directionalLight = directionalLights[ i ];\n\n        getDirectionalLightInfo( directionalLight, geometry, directLight );\n\n        #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n        directionalLightShadow = directionalLightShadows[ i ];\n        directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n        #endif\n\n        RE_Direct( directLight, geometry, material, reflectedLight );\n\n    }\n    #pragma unroll_loop_end\n\n    #endif\n\n    #include <lights_fragment_maps>\n    #include <lights_fragment_end>\n\n    // modulation\n    #include <aomap_fragment>\n\n    vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n    vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\n    #ifdef USE_AMBIENT\n    float d = max(dot(ambientDir, normal), 0.1);\n    totalDiffuse += ambientColor * d;\n    #endif\n\n    #include <transmission_fragment>\n\n    vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\n    #ifdef USE_SHEEN\n\n    // Sheen energy compensation approximation calculation can be found at the end of\n    // https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\n    float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\n    outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\n    #endif\n\n    #ifdef USE_CLEARCOAT\n\n    float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n    vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\n    outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\n    #endif\n\n    #ifdef USE_SCATTERING\n    vec3 transmittance;\n    vec3 sky_irradiance;\n    vec3 sun_irradiance = GetSunAndSkyIrradiance(vLocalPos, normal, sunDir, sky_irradiance);\n    float mu = 0.0;\n    vec3 in_scatter = GetSkyRadianceToPoint(cameraPos, vLocalPos, sunDir, transmittance, mu);\n\n    outgoingLight = outgoingLight * transmittance + in_scatter * sunIntensity;\n    #endif\n\n    #include <output_fragment>\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}",hn=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,c.Z)(this,n);var o=a?(0,ae.Z)({},e.uniforms):{},s=a?(0,re.Z)((0,ae.Z)({},e.defines),{USE_SCATTERING:""}):{},l=a?At+"\n\n"+dn:dn,d=u.Ll.textures.get("earth_albedo"),h=u.Ll.textures.get("earth_normals_spec");if(h.wrapS=d.wrapS=v.rpg,h.wrapT=d.wrapT=v.rpg,i=t.call(this,{vertexShader:cn,fragmentShader:l,uniforms:(0,re.Z)((0,ae.Z)({},o),{sunDir:{value:new v.Pa4},normalSpecMap:{value:h},uv2Transform:{value:new v.Vkp},ambientColor:{value:new v.Ilk},ambientDir:{value:new v.Pa4},uvScale:{value:1},uvOffset:{value:new v.FM8}}),defines:(0,re.Z)((0,ae.Z)({},s),{MAP_UV:"vUv",NORMAL_MAP_UV:"vUv",NIGHT_DETAIL_UV:"vUv",EMISSIVE_UV:"vUv"}),color:16777215,map:d,emissive:16777215,emissiveMap:r?u.Ll.textures.get("earth-night-detail"):u.Ll.textures.get("earth_emissive"),type:"EarthMaterial"}),r){var m=16384,p=8192,f=3978,g=2730,_=(new v.Vkp).set(f/m,0,1993/m,0,g/p,1134/p,0,0,1).invert();i.uniforms.uv2Transform.value=_,i.setCroppedEmissiveMap(!0)}return i}var i=n.prototype;return i.setCroppedMap=function(e){this._assignDetailedMap("MAP_UV",e)},i.setCroppedNormalMap=function(e){this._assignDetailedMap("NORMAL_MAP_UV",e)},i.setCroppedDetailMap=function(e){this._assignDetailedMap("NIGHT_DETAIL_UV",e)},i.setCroppedEmissiveMap=function(e){this._assignDetailedMap("EMISSIVE_UV",e)},i.setAmbient=function(e,t){this.defines.USE_AMBIENT="",this.uniforms.ambientColor.value=e,this.uniforms.ambientDir.value.copy(t).normalize()},i._assignDetailedMap=function(e,t){this.defines[e]=t?"vUv2":"vUv"},n}(de),mn=new v.Vkp,pn=new v.yGw,fn=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,new v.xo$(1.05*e.outerRadius),new v.jyz({vertexShader:"#define GLSLIFY 1\nvarying vec3 vLocalPos;\n\nvarying vec4 vProj;\nvoid main()\n{\n    vLocalPos = position;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    // force drawing\n    gl_Position.z = gl_Position.w;\n\n    vProj = gl_Position;\n}\n",fragmentShader:At+"\n\n#define GLSLIFY 1\nuniform vec3 cameraPos;\nuniform vec3 sunDir;\nuniform vec2 sunSize;\nuniform float sunIntensity;\n\nvarying vec3 vLocalPos;\nvarying vec4 vProj;\n\nvec3 GetSkyRadiance(in vec3 camera, in vec3 view_ray, in vec3 sun_direction, out vec3 transmittance) {\n    float r = length(camera);\n    float rmu = dot(camera, view_ray);\n    float distance_to_top_atmosphere_boundary = -rmu - sqrt(rmu * rmu - r * r + atmosTopRadius * atmosTopRadius);\n\n    if (distance_to_top_atmosphere_boundary > 0.0) {\n        camera = camera + view_ray * distance_to_top_atmosphere_boundary;\n        r = atmosTopRadius;\n        rmu += distance_to_top_atmosphere_boundary;\n    }\n    else if (r > atmosTopRadius) {\n        transmittance = vec3(1.0);\n        return vec3(0.0);\n    }\n\n    float mu = rmu / r;\n    float mu_s = dot(camera, sun_direction) / r;\n    float nu = dot(view_ray, sun_direction);\n\n    bool ray_r_mu_intersects_ground = RayIntersectsGround(r, mu);\n    transmittance = ray_r_mu_intersects_ground ? vec3(0.0) : GetTransmittanceToTopAtmosphereBoundary(r, mu);\n\n    vec3 single_mie_scattering;\n    vec3 scattering = GetCombinedScattering(r, mu, mu_s, nu, ray_r_mu_intersects_ground, single_mie_scattering);\n    return scattering * RayleighPhaseFunction(nu) + single_mie_scattering * MiePhaseFunction(ATMOSPHERE.miePhaseFunctionG, nu);\n}\n\nvoid main()\n{\n    vec3 viewDir = normalize(vLocalPos - cameraPos);\n    vec3 transmittance;\n    vec3 radiance = GetSkyRadiance(\n        cameraPos,\n        viewDir,\n        sunDir,\n        transmittance\n    );\n\n    if (dot(viewDir, sunDir) > sunSize.y) {\n        radiance += transmittance * GetSolarRadiance();\n    }\n\n    gl_FragColor = vec4(radiance * sunIntensity, 1.0);\n\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n//    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}\n",side:v._Li,transparent:!0,blending:v.WMw,depthWrite:!1,polygonOffset:!0,polygonOffsetUnits:1e5,uniforms:e.uniforms,defines:(0,re.Z)((0,ae.Z)({},e.defines),{FORCE_SKY:""}),type:"AtmosphereMesh"}))).onBeforeRender=function(e,t,n,a,r,o){var s=i.material;if(r===s){var l=s.uniforms;pn.copy(i.matrixWorld).invert(),mn.setFromMatrix4(pn),n.getWorldPosition(l.cameraPos.value).applyMatrix4(pn),i._atmosphere.sun.getWorldPosition(l.sunDir.value).applyMatrix3(mn).normalize(),l.sunIntensity.value=6.283}},i._atmosphere=e,i.name="AtmosphereMesh",i}return n}(v.Kj0),vn=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;(0,c.Z)(this,n),(e=t.call(this)).type="GlobeGeometry",a=Math.max(3,Math.floor(a)),r=Math.max(2,Math.floor(r));for(var o=new v.Pa4,s=new v.Pa4,l=[],u=[],d=[],h=[],m=0;m<=r;++m)for(var p=m/r,f=p*Math.PI,g=Math.sin(f),_=0;_<=a;++_){var y=_/a,x=y*Math.PI*2;s.x=-Math.cos(x)*g,s.y=Math.cos(f),s.z=Math.sin(x)*g,d.push(s.x,s.y,s.z),o.copy(s).multiplyScalar(i),u.push(o.x,o.y,o.z),h.push(y,1-p)}for(var b=0;b<r;++b)for(var S=0;S<a;++S){var w=a+1,T=S+b*w,P=T+1,C=T,R=T+w,M=T+w+1;l.push(P,C,M),l.push(C,R,M)}return e.setIndex(l),e.setAttribute("position",new v.a$l(u,3)),e.setAttribute("normal",new v.a$l(d,3)),e.setAttribute("uv",new v.a$l(h,2)),e}return n}(v.u9r),gn=new vn(1,64,48);function _n(){return gn}var yn="#define GLSLIFY 1\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifdef USE_TRANSMISSION\n\nvarying vec3 vWorldPosition;\n\n#endif\n\nuniform float planetRadius;\nuniform float uvScale;\nuniform vec3 cameraPos;\n\n#include <common>\nvarying vec2 vUv;\nvarying vec2 vPerlinUv;\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvarying float vAlpha;\nuniform vec2 tiling;\n\nvoid main() {\n\n    vUv = uv * tiling * uvScale;\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <morphcolor_vertex>\n\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n    #include <normal_vertex>\n\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n\n    vViewPosition = - mvPosition.xyz;\n\n    vec4 worldPosition = vec4( transformed, 1.0 );\n    worldPosition = modelMatrix * worldPosition;\n\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n\n    #ifdef USE_TRANSMISSION\n    vWorldPosition = worldPosition.xyz;\n    #endif\n\n    vAlpha = 1.0;\n\n    #ifdef FLATTEN\n        gl_Position.z = gl_Position.w;\n\n        /*vec3 O = cameraPos;\n        vec3 D = normalize(worldPosition.xyz - O);\n        vec3 C = modelMatrix[3].xyz;\n\n        vec3 diff = O - C;\n        float b = 2.0 * dot(D, diff);\n        float c = dot(diff, diff) - planetRadius * planetRadius;\n        float det = b * b - 4.0 * c;\n        float t = (-b + sqrt(det)) * .5;\n        if (t > 0.0)\n            vAlpha = 0.0;*/\n    #endif\n\n    vPerlinUv = vUv * 30.0;\n}",xn="#define GLSLIFY 1\n#define STANDARD\n\n#ifdef PHYSICAL\n#define IOR\n#define SPECULAR\n#endif\n\nuniform vec3 cameraPos;\nuniform vec3 sunDir;\nuniform float sunIntensity;\nuniform vec2 sunSize;\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef IOR\nuniform float ior;\n#endif\n\n#ifdef SPECULAR\nuniform float specularIntensity;\nuniform vec3 specularColor;\n\n#ifdef USE_SPECULARINTENSITYMAP\nuniform sampler2D specularIntensityMap;\n#endif\n\n#ifdef USE_SPECULARCOLORMAP\nuniform sampler2D specularColorMap;\n#endif\n#endif\n\n#ifdef USE_CLEARCOAT\nuniform float clearcoat;\nuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_IRIDESCENCE\nuniform float iridescence;\nuniform float iridescenceIOR;\nuniform float iridescenceThicknessMinimum;\nuniform float iridescenceThicknessMaximum;\n#endif\n\n#ifdef USE_SHEEN\nuniform vec3 sheenColor;\nuniform float sheenRoughness;\n\n#ifdef USE_SHEENCOLORMAP\nuniform sampler2D sheenColorMap;\n#endif\n\n#ifdef USE_SHEENROUGHNESSMAP\nuniform sampler2D sheenRoughnessMap;\n#endif\n#endif\n\nuniform sampler2D normalAlphaMap;\nuniform sampler2D perlin;\nuniform vec2 normalScale;\n\nvarying vec3 vViewPosition;\nvarying float vAlpha;\nvarying vec2 vPerlinUv;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\nvarying vec2 vUv;\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\n    vec3 q0 = dFdx( eye_pos.xyz );\n    vec3 q1 = dFdy( eye_pos.xyz );\n    vec2 st0 = dFdx( vUv.st );\n    vec2 st1 = dFdy( vUv.st );\n\n    vec3 N = surf_norm; // normalized\n\n    vec3 q1perp = cross( q1, N );\n    vec3 q0perp = cross( N, q0 );\n\n    vec3 T = q1perp * st0.x + q0perp * st1.x;\n    vec3 B = q1perp * st0.y + q0perp * st1.y;\n\n    float det = max( dot( T, T ), dot( B, B ) );\n    float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\n    return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\n}\n\nvarying vec3 vWorldNormal;\n\nvoid main() {\n\n    #include <clipping_planes_fragment>\n\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n\n    vec4 normalAlpha = texture2D(normalAlphaMap, vUv);\n    vec4 noise = texture2D(perlin, vPerlinUv);\n    normalAlpha.z *= 1.0 - noise.x * 0.5;\n\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    diffuseColor.a *= normalAlpha.z;\n    #include <alphatest_fragment>\n    #include <roughnessmap_fragment>\n    #include <metalnessmap_fragment>\n    #include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n\n    vec3 mapN;\n    mapN.xy = normalAlpha.xy * 2.0 - 1.0;\n    mapN.xy *= noise.yz;\n    mapN.z = sqrt(1.0 - dot(mapN.xy, mapN.xy));\n    mapN.xy *= normalScale;\n\n    #ifdef USE_TANGENT\n\n    normal = normalize( vTBN * mapN );\n\n    #else\n\n    normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\n    #endif\n\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n    #include <emissivemap_fragment>\n\n    // accumulation\n    #include <lights_physical_fragment>\n\n    GeometricContext geometry;\n\n    geometry.position = - vViewPosition;\n    geometry.normal = normal;\n    geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n    IncidentLight directLight;\n\n    #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n    DirectionalLight directionalLight;\n    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n    DirectionalLightShadow directionalLightShadow;\n    #endif\n\n    #pragma unroll_loop_start\n    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n        directionalLight = directionalLights[ i ];\n\n        getDirectionalLightInfo( directionalLight, geometry, directLight );\n\n        #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n        directionalLightShadow = directionalLightShadows[ i ];\n        directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n        #endif\n\n        RE_Direct( directLight, geometry, material, reflectedLight );\n\n    }\n    #pragma unroll_loop_end\n\n    #endif\n\n        #if defined( RE_IndirectDiffuse )\n\n    vec3 iblIrradiance = vec3( 0.0 );\n\n    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n    irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\n    #if ( NUM_HEMI_LIGHTS > 0 )\n\n    #pragma unroll_loop_start\n    for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n        irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\n    }\n        #pragma unroll_loop_end\n\n        #endif\n\n        #endif\n\n        #if defined( RE_IndirectSpecular )\n\n    vec3 radiance = vec3( 0.0 );\n    vec3 clearcoatRadiance = vec3( 0.0 );\n\n    #endif\n\n    #include <lights_fragment_maps>\n    #include <lights_fragment_end>\n\n    // modulation\n    #include <aomap_fragment>\n\n    vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n    vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\n    #include <transmission_fragment>\n\n    vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\n    #ifdef USE_SHEEN\n\n    // Sheen energy compensation approximation calculation can be found at the end of\n    // https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\n    float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\n    outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\n    #endif\n\n    #ifdef USE_CLEARCOAT\n\n    float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n    vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\n    outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\n    #endif\n\n    #ifdef USE_SCATTERING\n    vec3 transmittance;\n    vec3 sky_irradiance;\n    vec3 sun_irradiance = GetSunAndSkyIrradiance(vLocalPos, normal, sunDir, sky_irradiance);\n    vec3 in_scatter = GetSkyRadianceToPoint(cameraPos, vLocalPos, sunDir, transmittance);\n\n    outgoingLight = outgoingLight * transmittance + in_scatter * sunIntensity;\n    #endif\n\n    #include <output_fragment>\n\n    gl_FragColor.a *= vAlpha;\n\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}",bn=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v.Wl3;(0,c.Z)(this,n);var s=u.Ll.textures.get("perlin-noise");s.wrapS=v.rpg,s.wrapT=v.rpg;var l=r?(0,ae.Z)({},e.uniforms):{},d=r?(0,re.Z)((0,ae.Z)({},e.defines),{USE_SCATTERING:""}):{},h=r?At+"\n\n"+xn:xn;return a=t.call(this,{vertexShader:yn,fragmentShader:h,uniforms:(0,re.Z)((0,ae.Z)({},l),{planetRadius:{value:e.planetRadius},normalAlphaMap:{value:i},flatten:{value:!1},cameraPos:{value:new v.Pa4},tiling:{value:new v.FM8(1,1)},perlin:{value:s},uvScale:{value:1}}),defines:d,transparent:!0,depthWrite:!1,blending:v.Xaj,blendSrcAlpha:v.c8b,blendDstAlpha:v.c8b,side:o,polygonOffset:o===v.Wl3,polygonOffsetUnits:-10,type:"GlobalCloudMaterial"}),o===v._Li&&(a.defines.FLATTEN=""),a}return n.prototype.updateCam=function(e){e.getWorldPosition(this.uniforms.cameraPos.value)},(0,J.Z)(n,[{key:"tiling",get:function(){return this.uniforms.tiling.value}}]),n}(de),Sn=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;(0,c.Z)(this,n),(i=t.call(this,{vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vHorizonUv;\nvarying vec3 vViewDir;\nuniform vec2 tiling;\nuniform vec2 horizonTiling;\nuniform vec2 horizonOffset;\nuniform vec3 cameraPos;\n\nvoid main() {\n    vec4 proj = modelViewMatrix * vec4(position, 1.0);\n//    proj.w = 1.0;\n    gl_Position = projectionMatrix * proj;\n    gl_Position.z = gl_Position.w;\n\n    vec4 worldPos = modelMatrix * vec4(position, 1.0);\n    vViewDir = cameraPos - worldPos.xyz;\n\n    vUv = uv * tiling;\n    vHorizonUv = uv * horizonTiling + horizonOffset;\n}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vHorizonUv;\nvarying vec3 vViewDir;\n\nuniform sampler2D map;\nuniform sampler2D horizonMap;\nuniform float alpha;\nuniform float streakAlpha;\nuniform float absorption;\nuniform float backscattering;\nuniform vec3 mainColor;\nuniform vec3 topColor;\nuniform vec3 bottomColor;\nuniform vec3 streakColor;\nuniform vec3 horizonColor;\nuniform vec3 horizonHighlightColor;\nuniform vec3 sunDir;\n\nfloat hg(float g, float cosAngle)\n{\n    float g2 = g * g;\n    return 0.5 * (1.0 - g2) / pow(1.0 + g2 - 2.0 * g * cosAngle, 1.5);\n}\n\nvec4 blend(vec4 a, vec4 b)\n{\n    float invA = 1.0 - a.a;\n    vec4 c;\n    c.a = a.a + b.a * invA;\n    c.rgb = (a.rgb * a.a + b.rgb * b.a * invA) / max(c.a, 0.001);\n    return c;\n}\n\nvoid main() {\n    vec3 viewDir = normalize(vViewDir);\n    float vDotL = dot(viewDir, sunDir);\n    float hor = length(viewDir.xz);\n    hor = smoothstep(0.99, 1.0, hor);\n    vec4 map = texture2D(map, vUv);\n    vec4 horizon = texture2D(horizonMap, vHorizonUv);\n    map.g = map.g * 2.0 - 1.0;\n    float top = max(map.g, 0.0);\n    float bottom = max(-map.g, 0.0);\n    bottom = mix(bottom, 1.0, hor);\n    gl_FragColor.rgb = mix(mainColor, topColor, top);\n    gl_FragColor.rgb = mix(gl_FragColor.rgb, bottomColor, bottom);\n    gl_FragColor.a = map.b;\n\n    float horAmount = hg(backscattering, vDotL) * exp(-absorption * horizon.g);\n    vec3 horCol = mix(horizonColor, horizonHighlightColor, horAmount);\n\n    gl_FragColor = blend(gl_FragColor, vec4(streakColor, map.r * streakAlpha));\n    float alpha = smoothstep(0.0, 0.3, horizon.r);\n    gl_FragColor = blend(vec4(horCol, alpha), gl_FragColor);\n}",uniforms:{mainColor:{value:new v.Ilk(8467588)},topColor:{value:new v.Ilk(4924262)},bottomColor:{value:new v.Ilk(8926799)},streakColor:{value:new v.Ilk(16764159)},horizonColor:{value:new v.Ilk(1586294)},horizonHighlightColor:{value:new v.Ilk(8471652).multiplyScalar(1.5)},backscattering:{value:-.5},absorption:{value:3},streakAlpha:{value:.7},sunDir:{value:new v.Pa4},cameraPos:{value:new v.Pa4},map:{value:null},horizonMap:{value:null},tiling:{value:new v.FM8(1,1)},horizonTiling:{value:new v.FM8(2,2)},horizonOffset:{value:new v.FM8(0,.015)}},side:v._Li,depthWrite:!1,transparent:!0,type:"BackgroundCloudMaterial"}))._atmosphere=e,i._atmosphere.sun.getWorldPosition(i.uniforms.sunDir.value).normalize();var a=u.Ll.textures.get("inner-clouds");a.wrapS=v.rpg,a.wrapT=v.OoA,a.needsUpdate=!0,i.uniforms.map.value=a;var r=u.Ll.textures.get("horizon-clouds");return r.wrapS=v.rpg,r.wrapT=v.OoA,r.needsUpdate=!0,i.uniforms.horizonMap.value=r,i}return n.prototype.updateCamera=function(e){e.getWorldPosition(this.uniforms.cameraPos.value)},(0,J.Z)(n,[{key:"color",get:function(){return this.uniforms.color.value},set:function(e){this.uniforms.color.value.copy(e)}}]),n}(v.jyz),wn=new v.Vkp,Tn=new v.Pa4,Pn=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,c.Z)(this,n),(i=t.call(this)).spinSpeed=0,i.updateGround=!0,i._currentDir=new v.Pa4(0,0,0),i.name="Earth";var o=_n();return i._addScattering=a,i._ground=new v.Kj0(o,new hn(e,a,r)),i._ground.renderOrder=-5,i._atmosphere=e,i._ground.layers.set(mt.FlareOccluder),i._ground.name="ground",i._ground.scale.setScalar(e.planetRadius),i.add(i._ground),i._ground.onBeforeRender=function(t,n,a,r,o){var s=i._ground.material;if(o===s&&i.updateGround){var l=s.uniforms.sunDir.value;e.sun.getWorldPosition(l),wn.setFromMatrix4(a.matrixWorldInverse),l.applyMatrix3(wn).normalize()}},a&&(i._atmosMesh=new fn(e),i._atmosMesh.name="atmosphere",i.add(i._atmosMesh)),i}var i=n.prototype;return i.addClouds=function(){var e=this;if(!this._clouds){var t=_n(),n=u.Ll.textures.get("earth_clouds");return this._clouds=new v.Kj0(t,new bn(this._atmosphere,n,this._addScattering,v.Wl3)),this._clouds.scale.setScalar(this._atmosphere.planetRadius+12),this._clouds.onBeforeRender=function(t,n,i,a,r){r===e._clouds.material&&e._clouds.material.updateCam(i)},this._clouds.name="clouds",this._clouds.rotation.x=-1.2,this._clouds.rotation.y=2.6,this.add(this._clouds),this}},i.addBackgroundClouds=function(){if(!this._backgroundClouds)return this._backgroundClouds=new v.Kj0(new v.Aip(20,32,24,0,2*Math.PI,0,Math.PI/2),new Sn(this._atmosphere)),this._backgroundClouds.geometry.translate(0,this._atmosphere.planetRadius,0),this._backgroundClouds.renderOrder=-12e3,this._backgroundClouds.name="cloudsIn",this.add(this._backgroundClouds),this},i.alignToLatLong=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new v.Pa4(0,1,0),i=ct(e,t,1);this.quaternion.setFromUnitVectors(i,n),this._updateCloudTransform()},i.latLongToWorld=function(e,t,n){return ct(e,t,1,n).applyMatrix4(this._ground.matrixWorld)},i.latLongToScreen=function(e,t,n,i){var a=this.latLongToWorld(e,t,Tn);return a.applyMatrix4(n.matrixWorldInverse),a.applyMatrix4(n.projectionMatrix),(null!==i&&void 0!==i?i:new v.FM8).set(.5*a.x+.5,.5*-a.y+.5)},i.latLongToXYZ=function(e,t){return ct(e,t,this._atmosphere.planetRadius)},i.hideTransparents=function(){this._clouds&&(this._clouds.visible=!1),this._backgroundClouds&&(this._backgroundClouds.visible=!1)},i.showTransparents=function(){this._clouds&&(this._clouds.visible=!0),this._backgroundClouds&&(this._backgroundClouds.visible=!0)},i.restart=function(){this._clouds.rotation.y=0,this._backgroundClouds.rotation.y=0,this.alignToLatLong(-10,-75,new v.Pa4(.02,-.59,-.81).normalize())},i.update=function(e,t){this._clouds&&this._clouds.rotateY(4e-5*e),this._backgroundClouds&&(this._backgroundClouds.material.updateCamera(t),this._backgroundClouds.rotateY(6e-5*e)),this.spinSpeed>0&&this.rotateY(v.M8C.degToRad(e*this.spinSpeed*.25))},i.initDebug=function(e){var t=(0,u.Ae)("Earth",e);(0,u.Zp)(t,this,"position"),(0,u.Zp)(t,this,"spinSpeed",{min:0,max:10}),(0,u.Zp)(t,this,"updateGround"),this._clouds&&(0,u.ZO)(t,this._clouds),this._backgroundClouds&&(0,u.ZO)(t,this._backgroundClouds),(0,u.ZO)(t,this._ground)},i._updateCloudTransform=function(){this._backgroundClouds&&this._backgroundClouds.quaternion.copy(this.quaternion).invert(),this._clouds&&(this._clouds.quaternion.copy(this.quaternion).invert(),this._clouds.rotateX(.5*Math.PI))},(0,J.Z)(n,[{key:"earthMaterial",get:function(){return this._ground.material}},{key:"uvScale",get:function(){return this.earthMaterial.uniforms.uvScale.value},set:function(e){this.earthMaterial.uniforms.uvScale.value=e,this._clouds&&(this._clouds.material.uniforms.uvScale.value=e)}},{key:"uvOffset",get:function(){return this.earthMaterial.uniforms.uvOffset.value}}]),n}(v.ZAu),Cn="#define GLSLIFY 1\n#ifdef USE_PANO\nvarying vec3 vUvw;\n#else\nvarying vec2 vUv;\nuniform float tiling;\n#endif\n\nvoid main() {\n    vec4 proj = modelViewMatrix * vec4( position, 0.0 );\n    proj.w = 1.0;\n    gl_Position = projectionMatrix * proj;\n    gl_Position.z = gl_Position.w;\n\n    #ifdef USE_PANO\n    vUvw = position;\n    #else\n    vUv = uv * tiling;\n    #endif\n}",Rn="#define GLSLIFY 1\n#ifdef USE_PANO\nvarying vec3 vUvw;\nuniform sampler2D map;\nuniform float tiling;\n#else\nvarying vec2 vUv;\nuniform sampler2D map;\n#endif\nuniform float alpha;\nuniform float brightness;\n\nvoid main() {\n    #ifdef USE_PANO\n    vec3 dir = normalize(vUvw);\n    vec2 uv;\n    uv.x = atan(dir.z, dir.x) / 3.14159265;\n    uv.y = dir.y;\n    gl_FragColor = texture2D(map, (uv * .5 + .5) * tiling);\n    #else\n    gl_FragColor = texture2D(map, vUv);\n    #endif\n    gl_FragColor.rgb *= brightness;\n    gl_FragColor.a = alpha;\n}",Mn=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,c.Z)(this,n),i=t.call(this,{vertexShader:Cn,fragmentShader:Rn,uniforms:{map:{value:e},alpha:{value:a},brightness:{value:1},tiling:{value:r}},side:v._Li,depthWrite:!1,defines:{},type:"SkyboxMaterial"}),e.wrapS=v.rpg,e.wrapT=v.rpg,o&&(i.defines.USE_PANO=!0),i}return(0,J.Z)(n,[{key:"brightness",get:function(){return this.uniforms.brightness.value},set:function(e){this.uniforms.brightness.value=e}}]),n}(v.jyz),kn=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}var i=n.prototype;return i.onHide=function(){return Promise.resolve()},i.onShow=function(){return Promise.resolve()},i.linkHotspotGroup=function(){},i.linkHotspot=function(){},i.preCompile=function(){},n}(ue),En=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).objects=[],i.camera=e,i.needsSwap=!1,i.enabled=!1,i}var i=n.prototype;return i.add=function(e){this.objects.push(e),e.visible=!1,this.enabled=!0},i.remove=function(e){var t=this.objects.indexOf(e);this.objects.splice(t,1),this.enabled=this.objects.length>0},i.updateCamera=function(e){this.camera=e},i.render=function(e){var t=this,n=e.autoClear;e.autoClear=!1,this.objects.forEach((function(n){n.visible=!0,e.render(n,t.camera),n.visible=!1})),e.autoClear=n},n}(Mt.w2),An=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,c.Z)(this,n),(e=t.call(this,{extensions:{shaderTextureLOD:!0},uniforms:{aberrationShift:{value:1},cloudTransition:{value:0},transition:{value:1},tintColor:{value:new v.Ltg},levelsTop:{value:new v.Pa4},levelsBottom:{value:new v.FM8},vignette:{value:new v.Pa4},brightConSat:{value:new v.Pa4},inputBuffer:{value:null},noise:{value:null},lookup:{value:null},lutIntensity:{value:1},resolution:{value:new v.FM8(window.innerWidth,window.innerHeight)},time:{value:0}},vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"#define GLSLIFY 1\nuniform float aberrationShift;\nuniform float cloudTransition;\nuniform float lutIntensity;\nuniform float time;\nuniform float transition;\nuniform vec2 resolution;\nuniform vec3 brightConSat;\nuniform vec4 tintColor;\nuniform vec3 levelsTop; // x = blackInput, y = gamma, z = whiteInput\nuniform vec2 levelsBottom; // x = blackOutput, y = blackInput\nuniform vec3 vignette; // x = intensity, y = spread, z = opacity\nuniform sampler2D inputBuffer;\nuniform sampler2D noise;\nuniform sampler2D lookup;\nvarying vec2 vUv;\n\nfloat blendSoftLight(float base, float blend) {\n\treturn (blend<0.5)?(2.0*base*blend+base*base*(1.0-2.0*blend)):(sqrt(base)*(2.0*blend-1.0)+2.0*base*(1.0-blend));\n}\n\nvec3 blendSoftLight(vec3 base, vec3 blend) {\n\treturn vec3(blendSoftLight(base.r,blend.r),blendSoftLight(base.g,blend.g),blendSoftLight(base.b,blend.b));\n}\n\nvec3 blendSoftLight(vec3 base, vec3 blend, float opacity) {\n\treturn (blendSoftLight(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec4 lookup_0(in vec4 textureColor, in sampler2D lookupTable) {\n    #ifndef LUT_NO_CLAMP\n        textureColor = clamp(textureColor, 0.0, 1.0);\n    #endif\n\n    mediump float blueColor = textureColor.b * 63.0;\n\n    mediump vec2 quad1;\n    quad1.y = floor(floor(blueColor) / 8.0);\n    quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n    mediump vec2 quad2;\n    quad2.y = floor(ceil(blueColor) / 8.0);\n    quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n    highp vec2 texPos1;\n    texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\n    texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g);\n\n    #ifdef LUT_FLIP_Y\n        texPos1.y = 1.0-texPos1.y;\n    #endif\n\n    highp vec2 texPos2;\n    texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\n    texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g);\n\n    #ifdef LUT_FLIP_Y\n        texPos2.y = 1.0-texPos2.y;\n    #endif\n\n    lowp vec4 newColor1 = texture2D(lookupTable, texPos1);\n    lowp vec4 newColor2 = texture2D(lookupTable, texPos2);\n\n    lowp vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n    return newColor;\n}\n\n// IQ's Texture Variation\n// https://iquilezles.org/articles/texturerepetition\n\nfloat sum( vec3 v ) { return v.x+v.y+v.z; }\n\nvec3 textureNoTile( in sampler2D img, in vec2 x, float v ) {\n  float k = texture2D( img, 0.005*x ).x; // cheap (cache friendly) lookup\n  \n  vec2 duvdx = dFdx( x );\n  vec2 duvdy = dFdy( x );\n  \n  float l = k*8.0;\n  float f = fract(l);\n  \n  float ia = floor(l); // my method\n  float ib = ia + 1.0;   \n  \n  vec2 offa = sin(vec2(3.0,7.0)*ia); // can replace with any other hash\n  vec2 offb = sin(vec2(3.0,7.0)*ib); // can replace with any other hash\n\n  vec3 cola = textureGrad( img, x + v*offa, duvdx, duvdy ).xyz;\n  vec3 colb = textureGrad( img, x + v*offb, duvdx, duvdy ).xyz;\n  \n  return mix( cola, colb, smoothstep(0.2,0.8,f-0.1*sum(cola-colb)) );\n}\n\n// Increase or decrease theese values to adjust r, g and b color channels seperately\nconst float AvgLumR = 0.5;\nconst float AvgLumG = 0.5;\nconst float AvgLumB = 0.5;\nconst vec3 LumCoeff = vec3(0.2125, 0.7154, 0.0721);\nvec3 BrightnessContrastSaturation(vec3 color, float brt, float con, float sat) {\n  vec3 AvgLumin = vec3(AvgLumR, AvgLumG, AvgLumB);\n  vec3 brtColor = color * brt;\n  vec3 intensity = vec3(dot(brtColor, LumCoeff));\n  vec3 satColor = mix(intensity, brtColor, sat);\n  vec3 conColor = mix(AvgLumin, satColor, con);\n  return conColor;\n}\n\n// Levels\n#define minLevel 6.0 / 255.0\n#define maxLevel 249.0 / 255.0\n#define GammaCorrection(color, gamma) pow(color, vec3(1.0 / gamma))\n#define LevelsControlInputRange(color, minInput, maxInput)  min(max(color - vec3(minInput), vec3(0.0)) / (vec3(maxInput) - vec3(minInput)), vec3(1.0))\n#define LevelsControlInput(color, minInput, gamma, maxInput)  GammaCorrection(LevelsControlInputRange(color, minInput, maxInput), gamma)\n#define LevelsControlOutputRange(color, minOutput, maxOutput) mix(vec3(minOutput), vec3(maxOutput), color)\n#define LevelsControl(color, minInput, gamma, maxInput, minOutput, maxOutput) LevelsControlOutputRange(LevelsControlInput(color, clamp(minInput, 0.0, maxLevel), clamp(gamma, 0.01, 9.99), clamp(maxInput, minLevel, 1.0)), minOutput, maxOutput)\n\nconst float modulationOffset = 0.5;\nconst vec2 center = vec2(0.5);\n\nvoid main() {\n  vec2 uv = vUv;\n  vec4 color = texture2D(inputBuffer, uv, 10.0);\n\n  // Vignette distance\n  vec2 uv2 = uv * (1.0 - uv.yx);\n  float vig = uv2.x * uv2.y * vignette.x;\n  vig = clamp(pow(vig, vignette.y), 0.0, 1.0);\n\n  // Chromatic aberration\n  float shift = (aberrationShift / 100.0) * (1.0 - vig);\n  vec2 ra = color.ra;\n\tvec2 ba = color.ba;\n  vec2 vUvR = uv + shift;\n  vec2 vUvB = uv - shift;\n  float d = distance(uv, center) * 2.0;\n  float effect = (1.0 - vig) * 10.0;\n  d = max(d - modulationOffset, 0.0);\n  ra = texture2D(inputBuffer, mix(uv, vUvR, d), effect).ra;\n  ba = texture2D(inputBuffer, mix(uv, vUvB, d), effect).ba;\n  color.rgb = vec3(ra.x, color.g, ba.x);\n\n  // LUT\n  float lutExists = texture2D(lookup, uv).a;\n  color = mix(color, lookup_0(color, lookup), lutExists * lutIntensity);\n\n  // Cloud Animation\n  float _contrast = mix(brightConSat.y, 0.5, cloudTransition);\n  float _saturation = mix(brightConSat.z, 1.0, cloudTransition);\n  float _tint = mix(tintColor.a, 1.0, cloudTransition);\n\n  // BCS\n  color.rgb = BrightnessContrastSaturation(color.rgb, brightConSat.x * transition, _contrast, _saturation);\n\n  // Levels\n  color.rgb = LevelsControl(color.rgb, levelsTop.x, levelsTop.y, levelsTop.z, levelsBottom.x, levelsBottom.y);\n\n  // Tint\n  color.rgb = blendSoftLight(color.rgb, tintColor.rgb, _tint);\n\n  // Animated Noise\n  vec2 noiseUV = (resolution / 256.0) * uv;\n  float offset = mix(1.0, 3.0, sin(time * 0.025) * 0.5 + 0.5);\n  float noiseAmt = textureNoTile(noise, noiseUV, offset).r;\n  color.rgb *= mix(0.9, 1.0, noiseAmt);\n\n  // Vignette\n  color.rgb = mix(color.rgb, color.rgb * vig, vignette.z);\n\n  gl_FragColor = color;\n}",type:"post/CompositeMaterial"})).aberrationShift=.5,e.cloudTransition=0,e.transition=0,e.tintColor=new v.Ilk(0,113/255,184/255),e.tintOpacity=.3,e.levelsTop=new v.Pa4(.05,1.2,1),e.levelsBottom=new v.FM8(.05,1),e.vignette=new v.Pa4(30,.25,.5),e.brightConSat=new v.Pa4(1,1,1.2),e.lutIntensity=1;var i=u.Ll.textures.get("noise");return i.wrapS=v.rpg,i.wrapT=v.rpg,i.needsUpdate=!0,e.uniforms.noise.value=i,e}var i=n.prototype;return i.initDebug=function(e){var t,n=(0,u.Ae)("Composite",e),i=(0,u.Ae)("Coloring",n);(0,u.Zp)(i,this,"transition",{min:0,max:1,step:.01}),(0,u.Zp)(i,this,"aberrationShift",{min:0,max:1,step:.01,label:"Chromatic Aberration"});var a=this.uniforms.lookup,r=(0,u.dL)(i,"LUT",{image:null===(t=a.value)||void 0===t?void 0:t.image,texture:!0,onChange:function(e){e.magFilter=v.TyD,e.minFilter=v.TyD,e.flipY=!1,e.needsUpdate=!0,a.value=e}});(0,u.Zp)(i,this,"lutIntensity",{min:0,max:2}),(0,u.V6)(i,"Clear LUT",(function(){a.value=null,r.controller_.valueController.updateImage(u.z2)})),(0,u.Zp)(i,this.brightConSat,"x",{min:0,max:3,step:.01,label:"Brightness"}),(0,u.Zp)(i,this.brightConSat,"y",{min:0,max:5,step:.01,label:"Contrast"}),(0,u.Zp)(i,this.brightConSat,"z",{min:0,max:5,step:.01,label:"Saturation"}),(0,u.R6)(i,this,"tintColor"),(0,u.Zp)(i,this,"tintOpacity",{min:0,max:1,step:.01});var o=(0,u.Ae)("Levels",n);(0,u.Zp)(o,this.levelsTop,"x",{min:0,max:1,step:.01,label:"Shadows"}),(0,u.Zp)(o,this.levelsTop,"y",{min:0,max:10,step:.01,label:"Gamma"}),(0,u.Zp)(o,this.levelsTop,"z",{min:0,max:1,step:.01,label:"Highlights"}),(0,u.Zp)(o,this.levelsBottom,"x",{min:0,max:1,step:.01,label:"Black Out"}),(0,u.Zp)(o,this.levelsBottom,"y",{min:0,max:1,step:.01,label:"White Out"});var s=(0,u.Ae)("Vignette",n);(0,u.Zp)(s,this.vignette,"x",{min:0,max:100,step:.01,label:"Intensity"}),(0,u.Zp)(s,this.vignette,"y",{min:0,max:1,step:.01,label:"Spread"}),(0,u.Zp)(s,this.vignette,"z",{min:0,max:1,step:.01,label:"Opacity"})},i.update=function(e){this.uniforms.aberrationShift.value=this.aberrationShift,this.uniforms.cloudTransition.value=this.cloudTransition,this.uniforms.transition.value=this.transition,this.uniforms.brightConSat.value=this.brightConSat,this.uniforms.lutIntensity.value=this.lutIntensity,this.uniforms.tintColor.value.set(this.tintColor.r,this.tintColor.g,this.tintColor.b,this.tintOpacity),this.uniforms.levelsTop.value=this.levelsTop,this.uniforms.levelsBottom.value=this.levelsBottom,this.uniforms.vignette.value=this.vignette;var t=u.yO.renderer.domElement;this.uniforms.resolution.value.set(t.width,t.height),this.uniforms.time.value+=e},i.openHotspot=function(){ne.ZP.to(this,{duration:1,ease:"power1.inOut",transition:.85,overwrite:!0}),ne.ZP.to(this.vignette,{duration:1,ease:"power1.inOut",x:25,y:.75,z:.75,overwrite:!0})},i.closeHotspot=function(){ne.ZP.to(this,{duration:1,ease:"power1.inOut",transition:1,overwrite:!0}),ne.ZP.to(this.vignette,{duration:1,ease:"power1.inOut",x:30,y:.25,z:.5,overwrite:!0})},i.fadeOutLUT=function(){var e=this,t={value:1};ne.ZP.to(t,{value:0,delay:.25,duration:3,onUpdate:function(){e.lutIntensity=t.value},onComplete:function(){e.uniforms.lookup.value=null}})},(0,J.Z)(n,[{key:"inputBuffer",get:function(){return this.uniforms.inputBuffer.value},set:function(e){e.minFilter!==v.FDw&&(e.minFilter=v.FDw,e.needsUpdate=!0),this.uniforms.inputBuffer.value=e}},{key:"lookup",get:function(){return this.uniforms.lookup.value},set:function(e){this.uniforms.lookup.value=e}}]),n}(v.jyz),Ln=function(){function e(t){(0,c.Z)(this,e),this.objects=[],this.world=t}var t=e.prototype;return t.add=function(e,t){e.traverse((function(e){e.userData.frustumCulled=e.frustumCulled,e.frustumCulled=!1})),e.userData.parent=e.parent,this.objects.push(e),e.parent||(t=null!==t&&void 0!==t?t:this.world).add(e)},t.dispose=function(){this.objects.forEach((function(e){e.traverse((function(e){e.frustumCulled=e.userData.frustumCulled,delete e.userData.frustumCulled})),e.userData.parent||e.parent.remove(e),delete e.userData.parent})),this.objects=[]},e}(),Dn=new v.Pa4,In=new v.Ltg,On=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,D.RL.CAPABILITIES)).activeStateID=Ze.P.PROTECTING_SATELLITES,e.transitionPromise=Promise.resolve(),e.nullState=new kn((0,Q.Z)(e)),e.states=[new Oe((0,Q.Z)(e)),new yt((0,Q.Z)(e)),new at((0,Q.Z)(e))],e.camTarget=new v.Pa4(450,300,600),e.cameraOffsetAmount=1,e.camSmoothing=.1,e._blurAmount=0,e.hotspotOpen=!1,e.hotspotFocus=0,e.defaultFOV=30,e.hotspotFOV=20,e.openHotspot=function(t){var n=t.name;e.hotspotOpen=!0,e.compositeMaterial.openHotspot(),e.setHotspotCamTarget(e.shownState.getHotspotObject3D(n)),e.tiltShift&&ne.ZP.to(e.tiltShift,{duration:1,ease:"power1.inOut",focusArea:.67,overwrite:!0})},e.closeHotspot=function(){e.hotspotOpen&&(e.hotspotOpen=!1,e.compositeMaterial.closeHotspot(),e.setHotspotCamTarget(null),e.tiltShift&&ne.ZP.to(e.tiltShift,{duration:.5,ease:"power1.inOut",focusArea:1,overwrite:!0}))},e.onSetStage=e.onSetStage.bind((0,Q.Z)(e)),e.onSetScroll=e.onSetScroll.bind((0,Q.Z)(e)),e.camera=new v.cPb(e.defaultFOV,window.innerWidth/window.innerHeight,5,1300),e.camera.position.set(0,0,0),e.camera.name="mainCam",e.camera.layers.enable(mt.FlareOccluder),e.camContainer=new v.Tme,e.camContainer.add(e.camera),e.camContainer.position.set(400,300,800),e.depthPass=new Rt(u.yO.renderer,e.camera,!1),e}var r=n.prototype;return r.init=function(){var e=this,t=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(i){return[2,(0,d.Z)((0,h.Z)(n.prototype),"init",e).call(t).then((function(){return L.Z.addEventListener(D.zW.CAPABILITIES_SET_STAGE,t.onSetStage),L.Z.addEventListener(D.zW.CAPABILITIES_SET_SCROLL,t.onSetScroll),L.Z.addEventListener(D.zW.HOTSPOT_OPEN,t.openHotspot),L.Z.addEventListener(D.zW.HOTSPOT_CLOSE,t.closeHotspot),L.Z.dispatchEvent({type:D.zW.LOAD_COMPLETE}),t.compile()})).then((function(){u.Dq&&console.log("init complete")}))]}))}))()},r.compile=function(){var e=this;this.blurAmount=1,this.atmospherePass.enabled=!0,this.earth.visible=!0;var t=this.renderToCompile().then((function(){e.blurAmount=0,e.earth.visible=!1,e.atmospherePass.enabled=!1}));return this.states.forEach((function(n){t=t.then((function(){return e.renderToCompile((function(){return n.preCompile()}))}))})),t.then((function(){e.blurAmount=0,e.earth.visible=!1}))},r.renderToCompile=function(e){var t=this;return this.frustumDisabler=new Ln(this.world),e&&e(),this.world.children.forEach((function(e){return t.frustumDisabler.add(e)})),this.depthPass.render(this),this.post.render(10,new v.dd2(10,10,{depthBuffer:!0})),this.frustumDisabler.dispose(),this.frustumDisabler=null,Ie(10)},r.initMesh=function(){var e=this;return(0,i.Z)((function(){var t,n;return(0,a.__generator)(this,(function(i){return t=new Mn(u.Ll.textures.get("nebulaSkyBox"),0,2,!0),(n=new v.Kj0(new v.nvb,t)).rotation.x=.8,t.brightness=.3,n.frustumCulled=!1,n.name="skybox",e.world.add(n),e.earthContainer=new v.Tme,e.earthContainer.name="earthContainer",e.world.add(e.earthContainer),e.earth=new Pn(e.atmosphere).addClouds(),e.earth.rotation.set(-.4,.9,.3),e.earth.scale.setScalar(.05),e.earthContainer.add(e.earth),e.earth.visible=!1,e.fpoHotspot=new v.y8_(100),e.fpoHotspot.name="fpoHotspot",e.utils.add(e.fpoHotspot),[2,Ie().then((function(){return e.executeOnStates("initMesh")}))]}))}))()},r.initLights=function(){var e=this;return(0,i.Z)((function(){var t;return(0,a.__generator)(this,(function(n){return(t=new v.Ox3(16777215)).intensity=3,t.name="mainLight",e.lights.add(t),e.sun=t,e.pointLight=new v.cek,e.pointLight.intensity=0,e.pointLight.distance=300,e.pointLight.visible=!1,e.lights.add(e.pointLight),e.atmosphere=new rn,e.atmosphere.colorMatrixAmount=1,e.atmosphere.colorMatrixR.set(1,0,0),e.atmosphere.colorMatrixG.set(0,1,0),e.atmosphere.colorMatrixB.set(0,.3,1.4),e.atmosphere.updateColorMatrix(),e.atmosphere.scatterCurve=1.2,e.atmosphere.atmosScale=5,e.atmosphere.initFromTextures(),e.atmosphere.sun=e.sun,[2,Ie().then((function(){return e.executeOnStates("initLights")}))]}))}))()},r.initDebug=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return e.post.initDebug(),e.compositeMaterial.initDebug(e.post.debugFolder),[2,Ie().then((function(){return e.executeOnStates("initDebug")}))]}))}))()},r.initPost=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return e.post=new u.Wf(e),e.post.addRenderPass().clearPass.overrideClearAlpha=0,e.atmospherePass=new It(e.atmosphere,e.earth,e.camera,e.depthPass.texture),e.atmospherePass.enabled=!1,e.post.addPass("atmosphere",e.atmospherePass),e.postRenderPass=new En(e.camera),e.post.addPass("PostRender",e.postRenderPass),e.savePass=new Mt.KM,e.blurPass=new Mt.ki({height:480,kernelSize:Mt.DD.HUGE}),e.textureEffect=new Mt.tq({texture:e.savePass.texture}),e.texturePass=new Mt.H5(e.camera,e.textureEffect),e.post.addPass("Save",e.savePass),e.post.addPass("Blur",e.blurPass),e.post.addPass("Copy",e.texturePass),u.Xd.quality!==u.nJ.LOW&&(e.tiltShift=new Mt.$L({feather:.5,focusArea:1}),e.post.addPass("tiltShift",new Mt.H5(e.camera,e.tiltShift))),e.compositeMaterial=new An,e.post.addPass("Composite",new Mt.Cw(e.compositeMaterial,"inputBuffer")),e.blurAmount=0,[2,Ie()]}))}))()},r.initControllers=function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){return te.enable(),[2,Ie()]}))}))()},r.dispose=function(){L.Z.removeEventListener(D.zW.CAPABILITIES_SET_STAGE,this.onSetStage),L.Z.removeEventListener(D.zW.CAPABILITIES_SET_SCROLL,this.onSetScroll),L.Z.removeEventListener(D.zW.HOTSPOT_OPEN,this.openHotspot),L.Z.removeEventListener(D.zW.HOTSPOT_CLOSE,this.closeHotspot),te.disable()},r.update=function(){var e,t=this.clock.getDelta();if(Dn.set(2*te.normal.x-1,2*te.normal.y-1,0).multiplyScalar(this.cameraOffsetAmount),this.camera.position.lerp(Dn,this.camSmoothing),this.hotspotFocus>0&&this.hotspotTarget){var n=this.getHotspotTarget();this.camera.lookAt(Dn.lerpVectors(this.camTarget,n,this.hotspotFocus))}else this.camera.lookAt(this.camTarget);this.atmospherePass.enabled=this.earth.visible,this.earth.visible&&this.earth.update(t,this.camera),null===(e=this.shownState)||void 0===e||e.update(t,this.camera),this.pointLight.visible=this.pointLight.intensity>.001,this.camera.updateWorldMatrix(!0,!0)},r.draw=function(e){var t,n,i=this.clock.getDelta();this.earth.visible&&(this.earth.hideTransparents(),null===(t=this.shownState)||void 0===t||t.hideTransparents(),this.depthPass.render(this),null===(n=this.shownState)||void 0===n||n.showTransparents(),this.earth.showTransparents());this.post.render(i,e)},r.resize=function(e,t){var n=this.camera;n.aspect=e/t,n.updateProjectionMatrix(),this.post.resize(e,t),this.depthPass.resize(u.yO.canvas.width,u.yO.canvas.height),this.executeOnStates("resize",e,t)},r.switchState=function(e,t){var n,i=this;null===(n=this.switchTween)||void 0===n||n.kill(),this.switchTween=ne.ZP.to(this,{scrollValue:0,duration:2,ease:ie.lD.easeInOut,onUpdate:function(){return i.updateScroll(i.scrollValue)}}),this.setHotspotCamTarget(null),this.activeStateID=e;var a,r=this.states[e],o=null!==(a=this.activeState)&&void 0!==a?a:this.nullState;o!==r&&(this.activeState=r,this.transitionPromise=this.transitionPromise.then((function(){return null===o||void 0===o?void 0:o.hide()})).then((function(){return i.shownState=r,r.show(t)})))},r.executeOnStates=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a;return this.states.reduce((function(t,i){return t.then((function(){return(a=i)[e].apply(a,(0,$.Z)(n))}))}),Promise.resolve())},r.onSetStage=function(e){this.switchState(e.value,e.scrollValues)},r.onSetScroll=function(e){this.updateScroll(e.scrollValue)},r.updateScroll=function(e){this.scrollValue=e,this.hotspotOpen&&this.closeHotspot()},r.setHotspotCamTarget=function(e){var t,n=this;this._activeHotspotName=null===e||void 0===e?void 0:e.name;var i,a,r=ie.lD.easeInOut;if(e){var o,s=null!==(o=e.userData.holdPosition)&&void 0!==o?o:e.getWorldPosition(new v.Pa4);i=1,a=1,!this.hotspotTarget||this.hotspotFocus<1e-4?this.hotspotTarget=s.clone():ne.ZP.to(this.hotspotTarget,{x:s.x,y:s.y,z:s.z,duration:i,ease:r})}else i=.5,a=0;null===(t=this.hotspotTween)||void 0===t||t.kill(),this.hotspotTween=ne.ZP.to(this,{hotspotFocus:a,duration:i,ease:r,onUpdate:function(){var e=n.camera;e.fov=v.M8C.lerp(n.defaultFOV,n.hotspotFOV,n.hotspotFocus),e.updateProjectionMatrix()}})},r.getHotspotTarget=function(){return y.o.isMobile()?(this.camera.getWorldPosition(Dn),In.set(0,0,-this.hotspotTarget.distanceTo(Dn),1),In.applyMatrix4(this.camera.projectionMatrix),In.set(.7,-.85,In.z/In.w,1),In.applyMatrix4(this.camera.projectionMatrixInverse),In.divideScalar(In.w),In.w=0,In.applyMatrix4(this.camera.matrixWorld),Dn.set(In.x,In.y,In.z).add(this.hotspotTarget)):this.hotspotTarget},(0,J.Z)(n,[{key:"depthTexture",get:function(){return this.depthPass.texture}},{key:"activeHotspotName",get:function(){return this._activeHotspotName}},{key:"blurAmount",get:function(){return this._blurAmount},set:function(e){this._blurAmount=e;var t=e>.001;this.savePass.enabled=t,this.blurPass.enabled=t,this.texturePass.enabled=t,this.blurPass.scale=e,this.textureEffect.blendMode.opacity.value=1-e;var n=this.compositeMaterial;n.transition=v.M8C.lerp(1,.5,e),n.update(1)}}]),n}(u.Ee),Nn=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,new An,"inputBuffer")}return n}(Mt.Cw),Un=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,D.RL.CAREERS)).sunPolar=new v.$V,e.transparents=[],e.camera=new v.cPb(30,window.innerWidth/window.innerHeight,100,5e3),e.camera.name="mainCam",e.camera.position.set(0,0,600),e.camera.lookAt(0,0,0),e.camera.layers.enable(mt.FlareOccluder),e.depthPass=new Rt(u.yO.renderer,e.camera,!1),e}var r=n.prototype;return r.initMesh=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){e.earthContainer=new v.Tme,e.earthContainer.name="earthContainer",e.world.add(e.earthContainer),e.earth=new Pn(e.atmosphere,!1),e.earth.addClouds(),e.earth.earthMaterial.emissive.setRGB(1.5,1.5,1.5),e.earth.alignToLatLong(73,-125),e.earth.scale.setScalar(.05),e.earth.position.y=-300,e.earthContainer.add(e.earth),t()}))]}))}))()},r.initLights=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){var n=new v.Ox3(16777215);e.sunPolar.set(1,-1.1,0),n.position.setFromSphericalCoords(e.sunPolar.radius,e.sunPolar.phi,e.sunPolar.theta),n.intensity=3,n.name="mainLight",e.lights.add(n),e.sun=n,e.atmosphere=new rn,e.atmosphere.scatterCurve=1.2,e.atmosphere.atmosScale=5,e.atmosphere.initFromTextures(),e.atmosphere.sun=e.sun,t()}))]}))}))()},r.initPost=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){e.post=new u.Wf(e),e.post.addRenderPass().clearPass.overrideClearAlpha=0,e.atmospherePass=new It(e.atmosphere,e.earth,e.camera,e.depthPass.texture),e.post.addPass("atmosphere",e.atmospherePass);var n=new Nn;e.compositeMaterial=n.fullscreenMaterial,e.post.addPass("Composite",n),t()}))]}))}))()},r.initDebug=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){(0,u.Gy)(e.sheet,e.lights,e.utils,void 0),e.multiCams=new u.SN(e.utils,null),e.hierarchy=new u.AU(e),e.hierarchy.update(),e.hierarchy.expanded=!1,e.inspector=new u.lj(e.camera,e,e.utils,e.sheet),e.earth.initDebug(),t()}))]}))}))()},r.dispose=function(){var e,t,n;u.Dq&&(null===(e=this.hierarchy)||void 0===e||e.dispose(),null===(t=this.inspector)||void 0===t||t.dispose(),null===(n=this.multiCams)||void 0===n||n.dispose())},r.draw=function(e){var t=this.clock.getDelta();this.hideTransparents(),this.depthPass.render(this),this.showTransparents(),this.post.render(t,e)},r.postDraw=function(){var e;null===(e=this.multiCams)||void 0===e||e.postRender(this)},r.resize=function(e,t){var n,i=this.camera;i.aspect=e/t,i.updateProjectionMatrix(),this.post.resize(e,t),this.depthPass.resize(u.yO.canvas.width,u.yO.canvas.height),u.Dq&&(null===(n=this.multiCams)||void 0===n||n.resize(e,t))},r.hideTransparents=function(){this.transparents.forEach((function(e){e.userData.visible=e.visible,e.visible=!1})),this.earth.hideTransparents()},r.showTransparents=function(){this.transparents.forEach((function(e){e.visible=e.userData.visible})),this.earth.showTransparents()},n}(u.Ee),Zn=n(1899),zn=n(89380),Bn=n(11249),Fn=JSON.parse('{"sheetsById":{"launch-idle":{"staticOverrides":{"byObject":{"sequence":{"keyframe":"space","time":0},"Launch":{"cameraNear":0.1,"cameraFar":700},"Scene":{"cameraRotation":{"x":-0.3,"y":1.2,"z":0.3},"near":0.05,"far":700,"cameraTarget":{"y":0.04,"z":0.017,"x":-0.1},"fogDensity":0.75}}},"sequence":{"subUnitsPerUnit":30,"length":17,"type":"PositionalSequence","tracksByObject":{"sequence":{"trackData":{},"trackIdByPropPath":{}},"Launch":{"trackData":{"s_8s5TwXly":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"keyframe\\"]","keyframes":[{"id":"SN7B9PhJ-n","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"ground"},{"id":"_8qpqddn3K","position":8,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"cloudsStart"},{"id":"9ISUawzLo_","position":9.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"cloudsEnd"},{"id":"BDXRaysY6Y","position":12,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"atmosphere"},{"id":"JKyxQDORtx","position":16,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"rocket"},{"id":"4IjrlCTFLI","position":18.4,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"space"},{"id":"M28b_weZ3I","position":20,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"satellite"}]},"H0cv0c1146":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"groundVisibility\\"]","keyframes":[{"id":"hcPI4ORB76","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"JB1x2xn-gr","position":9.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"6cj7JXOH4I":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"cameraNear\\"]","keyframes":[{"id":"3kwNriovwD","position":12,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.1},{"id":"OzNzxBuN2p","position":13.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.002}]}},"trackIdByPropPath":{"[\\"keyframe\\"]":"s_8s5TwXly","[\\"groundVisibility\\"]":"H0cv0c1146","[\\"cameraNear\\"]":"6cj7JXOH4I"}},"Scene":{"trackData":{"JT9pFWnIfN":{"type":"BasicKeyframedTrack","__debugName":"Scene:[\\"compositeTransition\\"]","keyframes":[{"id":"ljU8N5ToR8","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"k5om7PuteK","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"UVHSnuoB2O","position":9,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"-prmAMaIEN","position":10,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"pnj4xVXsWL","position":11,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"gj04GTDo-E","position":16,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"Np5BImMnaF","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"uuivj2ZoPL":{"type":"BasicKeyframedTrack","__debugName":"Scene:[\\"cameraPosition\\",\\"y\\"]","keyframes":[{"id":"arRgeXyYDs","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.04},{"id":"N4OGghsiXF","position":5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.09},{"id":"wXK7QLJ-dx","position":10,"connectedRight":true,"handles":[0.5,1,1,-0.007692307692307692],"value":0.04,"type":"hold"},{"id":"fhq_ZAVN1V","position":10.033,"connectedRight":true,"handles":[0,1,0.5,0],"value":0.25},{"id":"3C0KMS7DvC","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.09}]},"tbXTngN0o6":{"type":"BasicKeyframedTrack","__debugName":"Scene:[\\"cameraPosition\\",\\"x\\"]","keyframes":[{"id":"omtuWx21fp","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.4},{"id":"fqYi3Vt9nU","position":5,"connectedRight":true,"handles":[0.487640881147541,0.32307692307692326,0.504119706284153,0.6769230769230772],"value":0.3},{"id":"r3Jx_oDJ1k","position":10,"connectedRight":true,"handles":[0.5,1,0.03666552027207033,1.0015384615384615],"value":0.2,"type":"hold"},{"id":"4HnNA4XVuc","position":10.033,"connectedRight":true,"handles":[0,1,0.5,0],"value":-0.3},{"id":"xrd4XkEIvd","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.14}]},"nGmqSM_yU2":{"type":"BasicKeyframedTrack","__debugName":"Scene:[\\"cameraPosition\\",\\"z\\"]","keyframes":[{"id":"2sQt_pypIn","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.2},{"id":"Wt0VZob4f-","position":5,"connectedRight":true,"handles":[0.495880293715847,0.3384615384615385,0.504119706284153,0.676923076923077],"value":0.1},{"id":"-gQeZl-PvI","position":10,"connectedRight":true,"handles":[0.5,1,1,0],"value":0,"type":"hold"},{"id":"6yLONnZGGJ","position":10.033,"connectedRight":true,"handles":[0,1,0.5,0],"value":0.22},{"id":"fpoqREi6ai","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.27}]}},"trackIdByPropPath":{"[\\"compositeTransition\\"]":"JT9pFWnIfN","[\\"cameraPosition\\",\\"y\\"]":"uuivj2ZoPL","[\\"cameraPosition\\",\\"x\\"]":"tbXTngN0o6","[\\"cameraPosition\\",\\"z\\"]":"nGmqSM_yU2"}}}}},"launch-launch":{"staticOverrides":{"byObject":{"Launch":{"cameraFar":700,"launchTime":5,"launchDelay":5,"particleRotation":{"x":0,"y":0,"z":0},"satelliteDelay":24,"launchCamPosition":{"x":-0.1,"y":0.193,"z":0.541},"launchTarget":{"y":0.05,"z":0.018,"x":-0.093},"launchCam":{"posZ":0.5822784810126584},"launchCamContainer":{"posY":0.2,"rotY":-0.157},"rocket":{"posX":-0.9268248379230499,"posY":0.10188484191894531,"posZ":0.1851915344595909}},"Clouds":{"rush":{"opacity":0}},"Camera":{"targetOffset":{"x":0,"y":0.035,"z":0},"position":0,"near":0.01,"far":200,"zoom":1,"shakeAmount":0},"Terminal":{"guardian":-1,"terminal":-1},"Rocket":{"rotation":0,"duration":0,"timeOffset":10},"Etc":{"starAlpha":1,"fogDensity":0.3},"Earth":{"rotation":0.15906798246024267,"position":{"x":0,"y":-6360,"z":0},"rotationY":2.1488157895229127,"rotationX":0},"Post":{"compositeTransition":1,"dofEnabled":true,"focalLength":0.015}}},"sequence":{"subUnitsPerUnit":30,"length":60,"type":"PositionalSequence","tracksByObject":{"Launch":{"trackData":{"RiuqJx3nhG":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"keyframe\\"]","keyframes":[{"id":"8CZgq26Dpv","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"idle"},{"id":"gtA9n6tCFg","position":4,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"launch"},{"id":"NzU3U3pNri","position":13.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"cloudStart"},{"id":"mC6szbVRXQ","position":14.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"cloudEnd"},{"id":"5bg14Gukif","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"atmosphere"},{"id":"jEBglLw2Ha","position":21,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"rocket"},{"id":"2M50YGcKsK","position":23.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"space"},{"id":"zlmnV4uuen","position":25,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"showSatellite"},{"id":"mCAV6UvCGE","position":27,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"satellite"},{"id":"o7ytcDKuZh","position":28,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"showGuardians"},{"id":"ofy39EtQSR","position":29,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"complete"}]},"A0IzV6KJrs":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"cameraNear\\"]","keyframes":[{"id":"rEyTXKmexQ","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.01},{"id":"G3xE-_vbcc","position":18.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.002}]},"OaJVJsjMsK":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"groundVisibility\\"]","keyframes":[{"id":"GFT3JgxjKH","position":5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"IqvmDiHlOU","position":14.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"4L4yuASIex":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"compositeTransition\\"]","keyframes":[{"id":"3KZJGthhfr","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"UcMWQzmo-b","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1}]},"Xnajz9za_4":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"rocketVisibility\\"]","keyframes":[{"id":"Vk0r-sfULs","position":5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"jMsD5B8j6S","position":23.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"Wf5mT4bqgI":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"rocketActive\\"]","keyframes":[{"id":"CQ1Fb0ir7J","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false},{"id":"ywOMluiSlm","position":0.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"3ib7p90r4K","position":12,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"wekDt0WzOk":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"rocketSpeed\\"]","keyframes":[{"id":"WM7Sdx_ZA7","position":15.533,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"d-25WDczB-","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"bPAC9PHWEO":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"particleRotation\\",\\"z\\"]","keyframes":[{"id":"zfHGscXvzD","position":13.633,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"e6A1mgjvp0","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":-1.57},{"id":"654Nz32R3_","position":20,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":-2}]},"g3Wo1Ja9RX":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"cameraFar\\"]","keyframes":[{"id":"m8hRNGu28c","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":700},{"id":"X1dP_EWSdF","position":18.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":2000}]},"lINVC_pS52":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earthOffset\\"]","keyframes":[{"id":"lf0ZGsysPw","position":15.233,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"1gwe7t1oVf","position":26.3,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":-2565}]},"bAZHSVjzOs":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earthOffset\\",\\"x\\"]","keyframes":[{"id":"DvH56fzrk7","position":14.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"V-z1pZTwvj","position":23.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"IuI0wDFPrY":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earthOffset\\",\\"y\\"]","keyframes":[{"id":"eSVdYZ0bl8","position":14.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"6q08xZIoNL","position":23.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":6274.3935}]},"3rHbDGxBEp":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earthOffset\\",\\"z\\"]","keyframes":[{"id":"R3XZNosqXQ","position":14.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"TlUoZe8mp_","position":23.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"zlit0WKl-d":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earthScale\\"]","keyframes":[{"id":"b6UKjEhdVM","position":14.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"9r4oAKzFZI","position":23.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.09698686922368105}]},"K39dQVJ4cf":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"lightProbeIntensity\\"]","keyframes":[{"id":"cl62d4c-1G","position":14.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"RGsGdxRqxj","position":19.433,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.2636534688398017}]},"EtaAN54kfu":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earthTransition\\"]","keyframes":[{"id":"95uI9dum1Y","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"byGZUYZnDW","position":18.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1}]},"cNBZY7V5_b":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"cloudRush\\"]","keyframes":[{"id":"mb-TI6aTmz","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false},{"id":"CQJz4rfNP5","position":13.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"QPVDJN-NxT","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"EfW8qH2WwC":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"cloudRushOpacity\\"]","keyframes":[{"id":"7wr1nemMHV","position":13.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"dIGcAXaeiY","position":14,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"fk-B_umZiL","position":15,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"XvWUf1LhyM","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"6xSB3kFF3W":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"cloudRushSpeed\\"]","keyframes":[{"id":"gvhmWsVam5","position":14,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":3},{"id":"HQXMXpHd47","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.5}]},"MxNMmfppuk":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earthSpeed\\"]","keyframes":[{"id":"4fPYgkzo8q","position":23.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"4mSZyTQFnF","position":25,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.2}]},"cpvVfznFof":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"cameraSmooth\\"]","keyframes":[{"id":"WJ7lkaRUDo","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"aIQrIto7in","position":18.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1}]},"9WDNRjeH2M":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"launchCamPosition\\",\\"x\\"]","keyframes":[{"id":"Cf66yl7cWF","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":-0.05},{"id":"9Fz1980j3w","position":5,"connectedRight":true,"handles":[0.5,1,0.20987805395991,-0.026223776223776224],"value":-0.1},{"id":"XDmYL9hpBn","position":6,"connectedRight":true,"handles":[0.7238083583737838,0.6590909090909092,0.5,0.5],"value":-0.32},{"id":"EVsCOLhS7O","position":7,"connectedRight":true,"handles":[0.5,0.5,0.2513240462513514,0.3951048951048951],"value":-0.52},{"id":"tl1TwEPsGn","position":8,"connectedRight":true,"handles":[0.6243379768743242,0.7622377622377623,0.2560592370010812,0.31846153846153824],"value":-0.63},{"id":"pe9j8OhKmy","position":9,"connectedRight":true,"handles":[0.7305191599154954,0.955,0.455,0.03],"value":-0.65},{"id":"3za2vVqPoC","position":10,"connectedRight":true,"handles":[0.6724947707074774,0.5223076923076926,0.22290244316792798,0.17423076923076927],"value":-0.57},{"id":"jRotzZAC0y","position":11,"connectedRight":true,"handles":[0.747097556832072,0.6953846153846153,0.20632404625135145,0.13128205128205134],"value":-0.37},{"id":"0GeFLZwQnn","position":12,"connectedRight":true,"handles":[0.6724947707074774,0.7271153846153845,0.273,0.217],"value":-0.1421518987341773},{"id":"X3P2TYmM2R","position":13,"connectedRight":true,"handles":[0.593,0.659,0.262,0.217],"value":0.08569620253164546},{"id":"Bt0TT3VFVE","position":14,"connectedRight":true,"handles":[0.645,0.69,0.262,0.217],"value":0.29},{"id":"5Pd29cyvM0","position":15,"connectedRight":true,"handles":[0.645,0.69,0.273,0.269],"value":0.43},{"id":"nN8zPDYhm8","position":16,"connectedRight":true,"handles":[0.634,0.68,0.262,0.258],"value":0.4},{"id":"H8QRTx8IdW","position":17,"connectedRight":true,"handles":[0.665,0.731,0.5,0],"value":0.18},{"id":"Tn_FbTOGM2","position":18,"connectedRight":true,"handles":[0.5,1,0.252,0.238],"value":-0.08},{"id":"bwPYwdvrlj","position":19,"connectedRight":true,"handles":[0.675,0.741,0.252,0.258],"value":-0.11},{"id":"w53biwRM5r","position":20,"connectedRight":true,"handles":[0.645,0.711,0.5,0],"value":-0.11}]},"wSjm16gPay":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"launchCamPosition\\",\\"y\\"]","keyframes":[{"id":"pKkQOyysFA","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.19},{"id":"7qOBZ60xin","position":5,"connectedRight":true,"handles":[0.5,1,0.2513240462513514,0],"value":0.193},{"id":"B7mMdqvRwg","position":6,"connectedRight":true,"handles":[0.7901219460400899,0.6487278106508876,0.5,0.5],"value":0.163},{"id":"5E7Xn3JcM0","position":7,"connectedRight":true,"handles":[0.5,0.5,0.5,0.5],"value":0.11},{"id":"nj3n7aZtIZ","position":8,"connectedRight":true,"handles":[0.5,0.5,0.24777003854279284,0.42518121301775147],"value":0.07},{"id":"WoCHOP77Yn","position":9,"connectedRight":true,"handles":[0.7719651522069368,1.0867270710059171,0.2146132447096397,-0.09980769230769235],"value":0.05},{"id":"KTMy6o6FGw","position":10,"connectedRight":true,"handles":[0.6973623660823423,0.565576923076923,0.2146132447096397,0.10691105769230771],"value":0.09},{"id":"BmcWE61v7a","position":11,"connectedRight":true,"handles":[0.8382787398732432,0.8011778846153845,0.2146132447096397,0.13083390061266165],"value":0.1912658227848101},{"id":"muEmkK-buD","position":12,"connectedRight":true,"handles":[0.7719651522069368,0.8743328795098706,0.273,0.217],"value":0.32},{"id":"mzo96-tJHM","position":13,"connectedRight":true,"handles":[0.593,0.659,0.262,0.217],"value":0.51},{"id":"LJ__C9js6h","position":14,"connectedRight":true,"handles":[0.645,0.69,0.262,0.217],"value":0.7125316455696205},{"id":"VMzrSiQbOA","position":15,"connectedRight":true,"handles":[0.645,0.69,0.273,0.269],"value":0.865},{"id":"_kan8-jJHB","position":16,"connectedRight":true,"handles":[0.634,0.68,0.262,0.258],"value":1.02},{"id":"ffb5JOfh90","position":17,"connectedRight":true,"handles":[0.665,0.731,0.5,0],"value":1.11},{"id":"oAq9QJBfhj","position":18,"connectedRight":true,"handles":[0.5,1,0.252,0.238],"value":1.23},{"id":"FGLDBhH3GR","position":19,"connectedRight":true,"handles":[0.675,0.741,0.252,0.258],"value":1.35},{"id":"cFQTVpf3-h","position":20,"connectedRight":true,"handles":[0.645,0.711,0.314,0.207],"value":1.39},{"id":"Ik2D4h5hx-","position":21,"connectedRight":true,"handles":[0.665,0.71,0.5,0.5],"value":1.41},{"id":"PiQROdRRbF","position":22.467,"connectedRight":true,"handles":[0.5,0.5,0.5,0],"value":1.41}]},"NIVZ42zzQ1":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"launchCamPosition\\",\\"z\\"]","keyframes":[{"id":"_sGcDHL8PS","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.53},{"id":"v5ChLaf_dv","position":5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.541},{"id":"kMmV5PNTO4","position":6,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.52},{"id":"DNpmQtbyGx","position":7,"connectedRight":true,"handles":[0.5,1,0.5,0.5],"value":0.36810126582278474},{"id":"n-0D5n3WFJ","position":8,"connectedRight":true,"handles":[0.5,0.5,0.3306620231256757,0.25884615384615384],"value":0.19},{"id":"yvpEToa3eB","position":9,"connectedRight":true,"handles":[0.6807839691657658,0.6498717948717948,0.3886864123336937,0.441923076923077],"value":-0.08},{"id":"Mfp1k_Rtyw","position":10,"connectedRight":true,"handles":[0.6973623660823423,0.8005288461538461,0.25605923700108113,0.2016346153846154],"value":-0.28},{"id":"1vojpjT_kE","position":11,"connectedRight":true,"handles":[0.6807839691657658,0.8977884615384615,0.2643484354593694,0.3242307692307693],"value":-0.46},{"id":"jLDawO6zDX","position":12,"connectedRight":true,"handles":[0.515,0.955,0.273,0.217],"value":-0.53},{"id":"IthPaZPAba","position":13,"connectedRight":true,"handles":[0.593,0.659,0.262,0.217],"value":-0.49},{"id":"Bo3dGDydwk","position":14,"connectedRight":true,"handles":[0.645,0.69,0.262,0.217],"value":-0.33},{"id":"9K00AbZUPt","position":15,"connectedRight":true,"handles":[0.645,0.69,0.273,0.269],"value":-0.07},{"id":"3AoyT5K8Jt","position":16,"connectedRight":true,"handles":[0.634,0.68,0.262,0.258],"value":0.33},{"id":"3lnnHdPLjd","position":17,"connectedRight":true,"handles":[0.665,0.731,0.5,0],"value":0.66},{"id":"fCbCKEViLw","position":18,"connectedRight":true,"handles":[0.5,1,0.252,0.238],"value":0.78},{"id":"dmNws_dGXp","position":19,"connectedRight":true,"handles":[0.675,0.741,0.252,0.258],"value":0.83},{"id":"8-GcprJEky","position":20,"connectedRight":true,"handles":[0.645,0.711,0.3,0.278],"value":1.02},{"id":"qis8vX_nDD","position":21,"connectedRight":true,"handles":[0.614,0.721,0.5,0.5],"value":1.24},{"id":"Syb0AaBGwM","position":22.467,"connectedRight":true,"handles":[0.5,0.5,0.5,0],"value":1.55}]},"eyAz7UwcEA":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"launchTarget\\",\\"y\\"]","keyframes":[{"id":"eYb4ADo-2M","position":8.5,"connectedRight":true,"handles":[0.5,1,0.3355757759579416,0.05921052631578947],"value":0.05},{"id":"9XY5-p4ykK","position":12,"connectedRight":true,"handles":[0.6826935822689538,0.6052631578947368,0.49,0.45],"value":0.4297468354430381},{"id":"gyEvVKrdry","position":15,"connectedRight":true,"handles":[0.55,0.55,0.145,0.195],"value":0.92},{"id":"cWSJ6xfdzP","position":18,"connectedRight":true,"handles":[0.562,0.74,0.2989179533029388,0.47961430867210053],"value":1.22},{"id":"fTwLSd94Q_","position":21,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1.222}]},"MMF12HkEM3":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"launchTarget\\",\\"z\\"]","keyframes":[{"id":"IGgJtR6a2_","position":8.5,"connectedRight":true,"handles":[0.5,1,0.336,0.059],"value":0.018},{"id":"j1jhiwzgpI","position":12,"connectedRight":true,"handles":[0.683,0.605,0.34722762181856304,-0.025663157894736856],"value":0.035},{"id":"ZU-2flCjGR","position":15,"connectedRight":true,"handles":[0.7083771591832456,0.55,0.2476648056407433,0.12297392913514396],"value":0.16158227848101264},{"id":"VruSijes5K","position":18,"connectedRight":true,"handles":[0.7699399753610654,0.6749974729999768,0.4501821143466093,0.389937106918239],"value":0.4}]},"dQ0jT1O2i4":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"launchCamContainer\\",\\"rotY\\"]","keyframes":[{"id":"gD0dPkqaUf","position":5,"connectedRight":true,"handles":[0.5,1,0.323,0.228],"value":-0.157},{"id":"OB1AhueA7x","position":8.733,"connectedRight":true,"handles":[0.811,0.795,0.43268761051850174,0.5282840992274349],"value":-1.6},{"id":"AWUVqlQMSI","position":10,"connectedRight":true,"handles":[0.686,0.731,0.483,0.283],"value":-2.08},{"id":"LQByPwE95D","position":12,"connectedRight":true,"handles":[0.744,0.804,0.276,0.124],"value":-2.88},{"id":"i3l2ShvQ9i","position":13.633,"connectedRight":true,"handles":[0.721,0.804,0.283,0.207],"value":-3.67},{"id":"FIJgw8isWG","position":15.5,"connectedRight":true,"handles":[0.808,0.804,0.319,0.281],"value":-4.9},{"id":"dZkEh161xP","position":17,"connectedRight":true,"handles":[0.613,0.71,0.5,0],"value":-6.1},{"id":"NGNR3YvKrJ","position":19,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":-6.559067982460243}]},"13vEC5hJBV":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"launchCamContainer\\",\\"posY\\"]","keyframes":[{"id":"6LfwkBYdAg","position":5,"connectedRight":true,"handles":[0.5,1,0.29180202395895094,0.18552156505907155],"value":0.2},{"id":"yngzEMYA1u","position":8.733,"connectedRight":true,"handles":[0.6076886082970944,1.1855215650590716,0.20458342865740695,-0.03936580198173989],"value":0.05},{"id":"TvmYe8q13u","position":10,"connectedRight":true,"handles":[0.574111238209876,0.80981709900913,0.438,0.021],"value":0.1},{"id":"8npKwH6Njd","position":12,"connectedRight":true,"handles":[0.679,0.68,0.280023656754805,0.23022099392638085],"value":0.3226196547115452},{"id":"ucj4FuDC-8","position":13.633,"connectedRight":true,"handles":[0.7201447208707465,0.7191860040490794,0.2723733718630718,0.27238696066421664],"value":0.65},{"id":"lpzyB-mwkk","position":15.5,"connectedRight":true,"handles":[0.6617011200676601,0.6913356472029399,0.237,0.355],"value":0.95},{"id":"jNC_Qd2YqA","position":17,"connectedRight":true,"handles":[0.562,0.783,0.5,0],"value":1.1},{"id":"TCHmmFPX4J","position":18,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1.22},{"id":"P6O0WmebH9","position":19,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1.2706329113924049}]},"NNud-xuLo_":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"launchCam\\",\\"posZ\\"]","keyframes":[{"id":"TAfspPN0LI","position":5,"connectedRight":true,"handles":[0.5,1,0.4021082424870682,0.02867383512544803],"value":0.5822784810126584},{"id":"Z9TnECnovk","position":8.733,"connectedRight":true,"handles":[0.5,1,0.2813732182949984,-0.2646815550041274],"value":0.6582278481012661},{"id":"jr4JJK-QDl","position":10,"connectedRight":true,"handles":[0.7254588686332829,0.20310929676176703,0.5429917565642087,0.3042937605149595],"value":0.65},{"id":"fI2diyz8yv","position":12,"connectedRight":true,"handles":[0.7901943568084091,0.6957062394850405,0.2498948638334456,0.25806451612903225],"value":0.5569620253164559},{"id":"Rqbya--O0v","position":13.633,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.45569620253164567},{"id":"dJ7KW06rEC","position":15.5,"connectedRight":true,"handles":[0.5,1,0.603,0.217],"value":0.45569620253164567},{"id":"7UBTQ62FTU","position":17,"connectedRight":true,"handles":[0.614,0.711,0.5,0],"value":0.7},{"id":"t6lzZzOZhy","position":21,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.45}]},"i0s4dIP4vT":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"rocket\\",\\"posX\\"]","keyframes":[{"id":"SirSg5eZlm","position":7,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":-0.9268248379230499}]},"pmME9d-NkT":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"rocket\\",\\"posY\\"]","keyframes":[{"id":"zmfl8YEg_z","position":8.5,"connectedRight":true,"handles":[0.5,1,0.336,0.059],"value":0.10188484191894531},{"id":"Vn_g8vWEuI","position":12,"connectedRight":true,"handles":[0.683,0.605,0.49,0.45],"value":3.899353196349324},{"id":"M65a_dzgut","position":15,"connectedRight":true,"handles":[0.55,0.55,0.23,0.49],"value":8.96264433558983},{"id":"RK9ey60boc","position":18,"connectedRight":true,"handles":[0.73,0.86,0.5,0],"value":11.99},{"id":"ewoEQLByJu","position":23,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":11.99},{"id":"PvtlEBnLDu","position":23.467,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":12.622911392405067}]},"QxU4s370vV":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"rocket\\",\\"posZ\\"]","keyframes":[{"id":"E536GERZei","position":9,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.1851915344595909},{"id":"13_x1zxU1f","position":12,"connectedRight":true,"handles":[0.5,1,0.624,0.093],"value":0.3},{"id":"t--0ulWDs-","position":15,"connectedRight":true,"handles":[0.882,0.772,0.25,0.273],"value":1.45},{"id":"aOeRFfKim1","position":18,"connectedRight":true,"handles":[0.75,0.8,0.5,0],"value":3.7284810126582286},{"id":"17UUDwcITy","position":23,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":3.7284810126582286},{"id":"mqtQ2Ctgv4","position":23.467,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":4.487974683544305}]},"qXZJUz6QvF":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"rocket\\",\\"rotX\\"]","keyframes":[{"id":"vhmUqhezpx","position":9,"connectedRight":true,"handles":[0.5,1,0.432,0.145],"value":0},{"id":"R8vxzumzJ2","position":12,"connectedRight":true,"handles":[0.655,0.917,0.242,0.196],"value":0.07953399123012134},{"id":"-msKpJuugg","position":15,"connectedRight":true,"handles":[0.665,0.804,0.18,0.372],"value":0.43743695176566744},{"id":"SV2Re4O_TC","position":18,"connectedRight":true,"handles":[0.572,0.814,0.5,0],"value":0.8748739035313351},{"id":"ix4Bdr4KUh","position":23,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.8748739035313351},{"id":"z0JpuGV4EG","position":23.467,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.9941748903765172}]},"6hyV3G5lG3":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"rocket\\",\\"rotY\\"]","keyframes":[]},"mUadoKd7WW":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"rocket\\",\\"rotZ\\"]","keyframes":[]},"E_EOlB408t":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earth\\",\\"posX\\"]","keyframes":[{"id":"GrIwku9UTC","position":17,"connectedRight":true,"handles":[0.5,1,0.19,0.538],"value":0},{"id":"V_gBkahPZh","position":20,"connectedRight":true,"handles":[0.862,0.886,0.5,0],"value":0.000001451799674256904}]},"ffAx1gapJK":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earth\\",\\"posY\\"]","keyframes":[{"id":"d05sDB5FL7","position":17,"connectedRight":true,"handles":[0.5,1,0.19,0.538],"value":-6360},{"id":"flr_OQ0SvK","position":20,"connectedRight":true,"handles":[0.862,0.886,0.5,0],"value":-3}]},"ikmGP46Hor":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earth\\",\\"posZ\\"]","keyframes":[{"id":"C3MI2nGYT1","position":17,"connectedRight":true,"handles":[0.5,1,0.19,0.538],"value":0},{"id":"XqGPm2KqyF","position":20,"connectedRight":true,"handles":[0.862,0.886,0.5,0],"value":-1.0000016297267091}]},"Hrt3bXRAWj":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earth\\",\\"rotX\\"]","keyframes":[]},"MS15KtkcNE":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earth\\",\\"rotZ\\"]","keyframes":[]},"S_24nkmQnR":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earth\\",\\"speed\\"]","keyframes":[{"id":"sZdVUTLu1h","position":17.467,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"yK-oK3rjDB","position":20,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.3}]},"ljpL_kLt9V":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"earth\\",\\"scale\\"]","keyframes":[{"id":"soJG0-lEgL","position":17,"connectedRight":true,"handles":[0.5,1,0.19,0.538],"value":1},{"id":"i0KhH0qAct","position":20,"connectedRight":true,"handles":[0.862,0.886,0.5,0],"value":0.0006205791561361662}]},"Cp6nXyaEZh":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"rocket\\",\\"position\\"]","keyframes":[{"id":"8TB4nKlLsC","position":8,"connectedRight":true,"handles":[0.5,1,0.407,0.031],"value":0},{"id":"BK2pdOol2c","position":21,"connectedRight":true,"handles":[0.169,0.979,0.5,0],"value":1}]},"pFqzlA0g_U":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"camera\\",\\"near\\"]","keyframes":[{"id":"yM4q0ymg2A","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.01}]},"4w-eyHYE2S":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"camera\\",\\"far\\"]","keyframes":[{"id":"ULlyJ7iNM2","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1000}]},"O6CZ-u1AAa":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"camera\\",\\"smooth\\"]","keyframes":[]},"PbfDvP_WVh":{"type":"BasicKeyframedTrack","__debugName":"Launch:[\\"camera\\",\\"position\\"]","keyframes":[{"id":"mzv52M9WG0","position":4,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"TteKWaij-H","position":20,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1}]}},"trackIdByPropPath":{"[\\"keyframe\\"]":"RiuqJx3nhG","[\\"cameraNear\\"]":"A0IzV6KJrs","[\\"groundVisibility\\"]":"OaJVJsjMsK","[\\"compositeTransition\\"]":"4L4yuASIex","[\\"rocketVisibility\\"]":"Xnajz9za_4","[\\"rocketActive\\"]":"Wf5mT4bqgI","[\\"rocketSpeed\\"]":"wekDt0WzOk","[\\"particleRotation\\",\\"z\\"]":"bPAC9PHWEO","[\\"cameraFar\\"]":"g3Wo1Ja9RX","[\\"earthOffset\\"]":"lINVC_pS52","[\\"earthOffset\\",\\"x\\"]":"bAZHSVjzOs","[\\"earthOffset\\",\\"y\\"]":"IuI0wDFPrY","[\\"earthOffset\\",\\"z\\"]":"3rHbDGxBEp","[\\"earthScale\\"]":"zlit0WKl-d","[\\"lightProbeIntensity\\"]":"K39dQVJ4cf","[\\"earthTransition\\"]":"EtaAN54kfu","[\\"cloudRush\\"]":"cNBZY7V5_b","[\\"cloudRushOpacity\\"]":"EfW8qH2WwC","[\\"cloudRushSpeed\\"]":"6xSB3kFF3W","[\\"earthSpeed\\"]":"MxNMmfppuk","[\\"cameraSmooth\\"]":"cpvVfznFof","[\\"launchCamPosition\\",\\"x\\"]":"9WDNRjeH2M","[\\"launchCamPosition\\",\\"y\\"]":"wSjm16gPay","[\\"launchCamPosition\\",\\"z\\"]":"NIVZ42zzQ1","[\\"launchTarget\\",\\"y\\"]":"eyAz7UwcEA","[\\"launchTarget\\",\\"z\\"]":"MMF12HkEM3","[\\"launchCamContainer\\",\\"rotY\\"]":"dQ0jT1O2i4","[\\"launchCamContainer\\",\\"posY\\"]":"13vEC5hJBV","[\\"launchCam\\",\\"posZ\\"]":"NNud-xuLo_","[\\"rocket\\",\\"posX\\"]":"i0s4dIP4vT","[\\"rocket\\",\\"posY\\"]":"pmME9d-NkT","[\\"rocket\\",\\"posZ\\"]":"QxU4s370vV","[\\"rocket\\",\\"rotX\\"]":"qXZJUz6QvF","[\\"rocket\\",\\"rotY\\"]":"6hyV3G5lG3","[\\"rocket\\",\\"rotZ\\"]":"mUadoKd7WW","[\\"earth\\",\\"posX\\"]":"E_EOlB408t","[\\"earth\\",\\"posY\\"]":"ffAx1gapJK","[\\"earth\\",\\"posZ\\"]":"ikmGP46Hor","[\\"earth\\",\\"rotX\\"]":"Hrt3bXRAWj","[\\"earth\\",\\"rotZ\\"]":"MS15KtkcNE","[\\"earth\\",\\"speed\\"]":"S_24nkmQnR","[\\"earth\\",\\"scale\\"]":"ljpL_kLt9V","[\\"rocket\\",\\"position\\"]":"Cp6nXyaEZh","[\\"camera\\",\\"near\\"]":"pFqzlA0g_U","[\\"camera\\",\\"far\\"]":"4w-eyHYE2S","[\\"camera\\",\\"smooth\\"]":"O6CZ-u1AAa","[\\"camera\\",\\"position\\"]":"PbfDvP_WVh"}},"Post":{"trackData":{"QA2jHQy6py":{"type":"BasicKeyframedTrack","__debugName":"Post:[\\"dofEnabled\\"]","keyframes":[{"id":"BszTsKSp9g","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"Y9Hus6WsP8","position":23.133,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"DeYJIVmJ-D":{"type":"BasicKeyframedTrack","__debugName":"Post:[\\"focalLength\\"]","keyframes":[{"id":"ioinUOhAcr","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.01},{"id":"SVd_AfsrQE","position":3.333,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.015,"type":"hold"},{"id":"xnalKluETE","position":3.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.0025,"type":"hold"},{"id":"Kn8KGFh3yv","position":5.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.0035,"type":"hold"},{"id":"CSnygpRvcB","position":10.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.006,"type":"hold"},{"id":"GJ8l75A6XH","position":17.067,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.002}]}},"trackIdByPropPath":{"[\\"dofEnabled\\"]":"QA2jHQy6py","[\\"focalLength\\"]":"DeYJIVmJ-D"}},"Camera":{"trackData":{"K9CKkTxsUE":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"smooth\\"]","keyframes":[]},"yWS6vk0Q26":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"target\\",\\"x\\"]","keyframes":[]},"wONhmdBPuP":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"target\\",\\"y\\"]","keyframes":[]},"Dhr3vWAjMp":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"target\\",\\"z\\"]","keyframes":[]},"5Yi76uIRwq":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"updateTarget\\"]","keyframes":[{"id":"IiEuEAXwL8","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"8OqEXSlWFM","position":20,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"RW00Mvhm83":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"offset\\",\\"x\\"]","keyframes":[]},"kogC1B5voH":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"offset\\",\\"y\\"]","keyframes":[{"id":"8gvmCCbda7","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":-0.0050632911392404995}]},"pHIJjtGlKJ":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"offset\\",\\"z\\"]","keyframes":[]},"8q5nyMV8Qf":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"launchLookAt\\"]","keyframes":[{"id":"SSWZDC48_O","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"Mdw3n9k8Zp","position":32,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"qNL_mblcTB":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"rotationStrength\\"]","keyframes":[{"id":"x1l-f7f68e","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"AJpn43c5a8","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"VcxDMxnhU0","position":10,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"KukLmflvMM","position":12,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"xdeRq3jXpb","position":18,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"a5hTdRVSlE","position":19,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"iDl27vqNft","position":30,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"Viyt8T_1Rr","position":32,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"RyXJD5PKK6":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"rotateCamera\\"]","keyframes":[{"id":"7CqcTUnHDw","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false},{"id":"moGes-vPeK","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"g03ZfPPDBS","position":12,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false},{"id":"7O2bnPjDuZ","position":18,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"63NUjKF3BO","position":32,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"CBUKALafvQ":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"shakeCamera\\"]","keyframes":[{"id":"RALiUhTPeU","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false},{"id":"JHpHfrLHxP","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"IXmrADR7Nd","position":30,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false},{"id":"ss-XS_F-T4","position":32.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"V9T6W7oomE","position":34,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"erZBwV8v7J":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"shakeAmount\\"]","keyframes":[{"id":"UPwbPLlZL9","position":3.333,"connectedRight":true,"handles":[0.5,1,0.5,0.5],"value":0},{"id":"XbwTC8zkmL","position":3.367,"connectedRight":true,"handles":[0.5,0.5,0.5,0.5],"value":0.5},{"id":"2cTQ450dgU","position":5.6,"connectedRight":true,"handles":[0.5,0.5,0.5,0.5],"value":0.5},{"id":"PqGKLITwKe","position":5.667,"connectedRight":true,"handles":[0.5,0.5,0.5,0.5],"value":1},{"id":"X3avh_asMB","position":10.467,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"_ZCWQSChZH","position":10.5,"connectedRight":true,"handles":[0.5,0.5,0.5,0],"value":0.25},{"id":"xPwwEblYUX","position":12.8,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.25},{"id":"eHLL9FBfDd","position":12.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.75},{"id":"q47Rl7_4ZR","position":16.267,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.75},{"id":"6iVG9Miefc","position":16.3,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.5},{"id":"DVCj42KHgI","position":17.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.5},{"id":"y99Pw64_ic","position":17.067,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.1},{"id":"RdsCNG-maG","position":19.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.4},{"id":"bfESU7qmir","position":19.067,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1.5},{"id":"8Z8QHXlEpN","position":20.2,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.1},{"id":"Am_y6JbL76","position":20.233,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.5},{"id":"qijepQgLUN","position":25.733,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.5},{"id":"RYHRFkl_KD","position":25.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"y4G4Sq_P5Z","position":27.733,"connectedRight":true,"handles":[0.5,1,0.014,0.32],"value":5},{"id":"aquk5glQp1","position":29,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"rR4ACe11VY":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"far\\"]","keyframes":[]},"C4EG_qNXWr":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"near\\"]","keyframes":[{"id":"rnd179Nywj","position":20.233,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.01},{"id":"VXICQzrK52","position":25.733,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.05}]}},"trackIdByPropPath":{"[\\"smooth\\"]":"K9CKkTxsUE","[\\"target\\",\\"x\\"]":"yWS6vk0Q26","[\\"target\\",\\"y\\"]":"wONhmdBPuP","[\\"target\\",\\"z\\"]":"Dhr3vWAjMp","[\\"updateTarget\\"]":"5Yi76uIRwq","[\\"offset\\",\\"x\\"]":"RW00Mvhm83","[\\"offset\\",\\"y\\"]":"kogC1B5voH","[\\"offset\\",\\"z\\"]":"pHIJjtGlKJ","[\\"launchLookAt\\"]":"8q5nyMV8Qf","[\\"rotationStrength\\"]":"qNL_mblcTB","[\\"rotateCamera\\"]":"RyXJD5PKK6","[\\"shakeCamera\\"]":"CBUKALafvQ","[\\"shakeAmount\\"]":"erZBwV8v7J","[\\"far\\"]":"rR4ACe11VY","[\\"near\\"]":"C4EG_qNXWr"}},"Clouds":{"trackData":{"CU5Pd8ZJtM":{"type":"BasicKeyframedTrack","__debugName":"Clouds:[\\"rush\\"]","keyframes":[]},"n6-nGtUCkw":{"type":"BasicKeyframedTrack","__debugName":"Clouds:[\\"opacity\\"]","keyframes":[]},"x_7Qd_VKuB":{"type":"BasicKeyframedTrack","__debugName":"Clouds:[\\"speed\\"]","keyframes":[]},"mgUXdsGQAi":{"type":"BasicKeyframedTrack","__debugName":"Clouds:[\\"cards\\",\\"opacity\\"]","keyframes":[{"id":"zbUJDwphHV","position":16.067,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"oDuciNPzYD","position":21.1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"-dSrnQw6Ti":{"type":"BasicKeyframedTrack","__debugName":"Clouds:[\\"cards\\",\\"visible\\"]","keyframes":[{"id":"amW0GzwXrJ","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"XNXA9Gdeus","position":23,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"FuCwqCm7kK":{"type":"BasicKeyframedTrack","__debugName":"Clouds:[\\"rush\\",\\"speed\\"]","keyframes":[{"id":"Rlle34JH-5","position":21.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.5},{"id":"QAzc2XcG5Z","position":22.9,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":3}]},"dlSxQJO8N4":{"type":"BasicKeyframedTrack","__debugName":"Clouds:[\\"rush\\",\\"visible\\"]","keyframes":[{"id":"Xl2YwdxSFz","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false},{"id":"4KM4zBjsN2","position":21.533,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"V27nSDeKXy","position":25.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"dKMJEDS87q":{"type":"BasicKeyframedTrack","__debugName":"Clouds:[\\"rush\\",\\"opacity\\"]","keyframes":[{"id":"lqSCzRQS4l","position":21.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"dtI72dfc5-","position":22.733,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"xBwdpgBp7z","position":23.867,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.5},{"id":"Nk7DpeV5CE","position":25.6,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]}},"trackIdByPropPath":{"[\\"rush\\"]":"CU5Pd8ZJtM","[\\"opacity\\"]":"n6-nGtUCkw","[\\"speed\\"]":"x_7Qd_VKuB","[\\"cards\\",\\"opacity\\"]":"mgUXdsGQAi","[\\"cards\\",\\"visible\\"]":"-dSrnQw6Ti","[\\"rush\\",\\"speed\\"]":"FuCwqCm7kK","[\\"rush\\",\\"visible\\"]":"dlSxQJO8N4","[\\"rush\\",\\"opacity\\"]":"dKMJEDS87q"}},"Earth":{"trackData":{"tnBMnFHOi-":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"rotation\\",\\"x\\"]","keyframes":[]},"1KMT_J6KFv":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"rotation\\",\\"z\\"]","keyframes":[]},"bfU78mrTsd":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"scale\\"]","keyframes":[{"id":"WAOgR-rrbs","position":22.2,"connectedRight":true,"handles":[0.5,1,0.793,0.02],"value":1},{"id":"xNCWTXgYqp","position":25.633,"connectedRight":true,"handles":[1,0.824,0,1],"value":0.99,"type":"hold"},{"id":"eZW3WOPsl9","position":25.733,"connectedRight":true,"handles":[0,1,0.5,0.5],"value":0.997,"type":"hold"},{"id":"nbX1tJaiwR","position":27.733,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.996,"type":"hold"},{"id":"z1VUPCeIBN","position":31.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.81578492756799}]},"ttRCeDq_C5":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"speed\\"]","keyframes":[{"id":"q7w5xfRE4y","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0,"type":"hold"},{"id":"KjcVDf1BYb","position":31.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1}]},"yoz96PlbM8":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"atmosThickness\\"]","keyframes":[{"id":"pgHWPF2XUc","position":21.4,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":60},{"id":"a7QevPuM7c","position":27.133,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":200}]},"SKMBXL3p03":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"rotation\\"]","keyframes":[{"id":"9WhOzI6eEX","position":30,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.24}]},"8Lc2U3G0PK":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"atmosScale\\"]","keyframes":[{"id":"zMivP1sG5M","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1,"type":"hold"},{"id":"9MYV2HOcB_","position":31.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":6}]},"HLIMZ1Vdff":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"scatterCurve\\"]","keyframes":[{"id":"jlX1vcmmqY","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1,"type":"hold"},{"id":"-BCeEUKDQ1","position":31.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1.25}]},"FTfLqLjrR5":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"position\\",\\"x\\"]","keyframes":[{"id":"X4XRTXTkQa","position":0,"connectedRight":true,"handles":[0.5,0.5,0.5,0],"value":0,"type":"hold"},{"id":"aJeJ14WJYR","position":27.733,"connectedRight":true,"handles":[0.5,1,0.5,0.5],"value":-600,"type":"hold"},{"id":"NWLYuujX1V","position":31.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":3000,"type":"hold"},{"id":"W2zyj_jIfK","position":37.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":-3000,"type":"hold"},{"id":"tG4GTq2JBl","position":39.8,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":2000,"type":"hold"},{"id":"EWR0ssmean","position":41.933,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":2000}]},"nD8cPXPQNT":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"position\\",\\"y\\"]","keyframes":[{"id":"u36h8FNOd0","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":-6361,"type":"hold"},{"id":"9Gv8gul_mU","position":27.733,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":6360,"type":"hold"},{"id":"SLPBSf6_r0","position":31.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":5443,"type":"hold"},{"id":"OfMtUtAROX","position":37.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":-5443,"type":"hold"},{"id":"1GEy3SLq7p","position":39.8,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":6000,"type":"hold"},{"id":"dDTdTs-diD","position":41.933,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":6000}]},"Gv6ODr_at1":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"position\\",\\"z\\"]","keyframes":[{"id":"RRcC_rVtQ6","position":0,"connectedRight":true,"handles":[0.5,0.5,0.5,0],"value":0,"type":"hold"},{"id":"c0x4cEAXef","position":27.733,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":252,"type":"hold"},{"id":"ZGXrNWiZVg","position":31.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":7000,"type":"hold"},{"id":"6V6s6gq73n","position":37.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":-7000,"type":"hold"},{"id":"PqvQI0Pqia","position":39.8,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":7000,"type":"hold"},{"id":"MS4uxjxyg5","position":41.933,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":7000}]},"Q_ElwIZtIY":{"type":"BasicKeyframedTrack","__debugName":"Earth:[\\"rotationX\\"]","keyframes":[{"id":"nghmVZYtWn","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0,"type":"hold"},{"id":"jUlggzUTLR","position":27.733,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.08,"type":"hold"}]}},"trackIdByPropPath":{"[\\"rotation\\",\\"x\\"]":"tnBMnFHOi-","[\\"rotation\\",\\"z\\"]":"1KMT_J6KFv","[\\"scale\\"]":"bfU78mrTsd","[\\"speed\\"]":"ttRCeDq_C5","[\\"atmosThickness\\"]":"yoz96PlbM8","[\\"rotation\\"]":"SKMBXL3p03","[\\"atmosScale\\"]":"8Lc2U3G0PK","[\\"scatterCurve\\"]":"HLIMZ1Vdff","[\\"position\\",\\"x\\"]":"FTfLqLjrR5","[\\"position\\",\\"y\\"]":"nD8cPXPQNT","[\\"position\\",\\"z\\"]":"Gv6ODr_at1","[\\"rotationX\\"]":"Q_ElwIZtIY"}},"Etc":{"trackData":{"e4pA7FNoAR":{"type":"BasicKeyframedTrack","__debugName":"Etc:[\\"keyframe\\"]","keyframes":[{"id":"sjYB5HqYn4","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_01"},{"id":"X36XJSr0nh","position":3.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_02"},{"id":"Rk6pviVMB7","position":5.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_03"},{"id":"n2e2C1Mwmw","position":10.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_04"},{"id":"k0k6xqYl-C","position":12,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"particles_ignite"},{"id":"wrFpB7TXzN","position":12.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_05"},{"id":"DcNIlKt8e6","position":13.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"particles_smoke"},{"id":"zsoITz67pT","position":16.3,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_06"},{"id":"e8-5ypwa2n","position":17.067,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_07"},{"id":"yL6qmdZVB9","position":19.067,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_08"},{"id":"3MxDsQ1hrI","position":20.233,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_09"},{"id":"yJUSedqXDF","position":25.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_10"},{"id":"MZlP93ZC2N","position":27.733,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_11"},{"id":"rKy3AEFi_R","position":31.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_12"},{"id":"7Aj0Q0DRlS","position":34,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"particles_stop_burn"},{"id":"GACscd6jyX","position":37,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"rocket"},{"id":"oq2hhhOopV","position":37.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_13"},{"id":"LzSHkNQGqp","position":39.8,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_14"},{"id":"-d2NmUrWLv","position":41.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"shot_15"},{"id":"pP3HpwijMy","position":44,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"satelliteHotspots"}]},"mAx9HlpBwj":{"type":"BasicKeyframedTrack","__debugName":"Etc:[\\"groundVisibility\\"]","keyframes":[{"id":"yyvyw8dOpK","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"6GDqjcNGhK","position":23.133,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"Mww72L7z0V":{"type":"BasicKeyframedTrack","__debugName":"Etc:[\\"starAlpha\\"]","keyframes":[{"id":"2UE6k6k90d","position":16.333,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"LpSxhoK_jb","position":21.867,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1}]},"HQ4L3UgiVh":{"type":"BasicKeyframedTrack","__debugName":"Etc:[\\"gltfTime\\"]","keyframes":[{"id":"oNgW9beKqi","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0.5],"value":0},{"id":"fYIiaga1yu","position":41.9,"connectedRight":true,"handles":[0.5,0.5,0.5,0],"value":41.89454320583769,"type":"hold"},{"id":"SeQ5eVL3Ua","position":41.967,"connectedRight":true,"handles":[0.5,0.5,0.455,0.03],"value":44},{"id":"xKHLkQC46L","position":44,"connectedRight":true,"handles":[0.515,0.955,0.5,0],"value":47.000000146173285}]},"AdRvW6FnvL":{"type":"BasicKeyframedTrack","__debugName":"Etc:[\\"groundY\\"]","keyframes":[{"id":"uCA8oLxOdy","position":19.467,"connectedRight":true,"handles":[0.5,1,0.984,0.013],"value":0},{"id":"OR8kTiL2-k","position":25.3,"connectedRight":true,"handles":[1,0.468,0.5,0],"value":-50}]},"VN5i3RZd59":{"type":"BasicKeyframedTrack","__debugName":"Etc:[\\"groundAlpha\\"]","keyframes":[{"id":"yDnPEeUIED","position":22.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"8DtML-xAtx","position":24.567,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"wqI5hAXs_L":{"type":"BasicKeyframedTrack","__debugName":"Etc:[\\"fogDensity\\"]","keyframes":[{"id":"CG1vXn42JS","position":21.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.3},{"id":"Ln_sNKM1fM","position":22.9,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1}]}},"trackIdByPropPath":{"[\\"keyframe\\"]":"e4pA7FNoAR","[\\"groundVisibility\\"]":"mAx9HlpBwj","[\\"starAlpha\\"]":"Mww72L7z0V","[\\"gltfTime\\"]":"HQ4L3UgiVh","[\\"groundY\\"]":"AdRvW6FnvL","[\\"groundAlpha\\"]":"VN5i3RZd59","[\\"fogDensity\\"]":"wqI5hAXs_L"}},"Lights":{"trackData":{"Q97XTJ2qIa":{"type":"BasicKeyframedTrack","__debugName":"Lights:[\\"lightProbeIntensity\\"]","keyframes":[{"id":"NY-IXBCL1C","position":19.333,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"rwQfFiGVoa","position":21.2,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.46597733193799773}]},"7HymPrrllR":{"type":"BasicKeyframedTrack","__debugName":"Lights:[\\"satelliteLight\\",\\"intensity\\"]","keyframes":[{"id":"ngGRzx5Yze","position":37.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"FIP-xKinnt","position":40,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1}]},"5WeqvblMWb":{"type":"BasicKeyframedTrack","__debugName":"Lights:[\\"satelliteLight\\",\\"visible\\"]","keyframes":[{"id":"TzE2cvMydb","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false},{"id":"4UDwtbNcPR","position":37.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true}]}},"trackIdByPropPath":{"[\\"lightProbeIntensity\\"]":"Q97XTJ2qIa","[\\"satelliteLight\\",\\"intensity\\"]":"7HymPrrllR","[\\"satelliteLight\\",\\"visible\\"]":"5WeqvblMWb"}},"Particles":{"trackData":{"5k53eXDDwr":{"type":"BasicKeyframedTrack","__debugName":"Particles:[\\"rotation\\",\\"x\\"]","keyframes":[]},"ApN7ewaxNX":{"type":"BasicKeyframedTrack","__debugName":"Particles:[\\"rotation\\",\\"y\\"]","keyframes":[]},"R7noCcjFjH":{"type":"BasicKeyframedTrack","__debugName":"Particles:[\\"rotation\\",\\"z\\"]","keyframes":[]}},"trackIdByPropPath":{"[\\"rotation\\",\\"x\\"]":"5k53eXDDwr","[\\"rotation\\",\\"y\\"]":"ApN7ewaxNX","[\\"rotation\\",\\"z\\"]":"R7noCcjFjH"}},"Rocket":{"trackData":{"l8Kslk2e1-":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"rotation\\",\\"x\\"]","keyframes":[]},"XgEo9tzsFq":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"rotation\\",\\"y\\"]","keyframes":[]},"taeiY2AO3M":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"rotation\\",\\"z\\"]","keyframes":[]},"o4Anebv56X":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"speed\\"]","keyframes":[]},"Ml-OJNsB4q":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"visibility\\"]","keyframes":[{"id":"4sY63l2Ly2","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"ImGIiPUuuZ","position":37.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"fOKb3gSMZl":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"position\\"]","keyframes":[{"id":"xJs_75TnjD","position":13,"connectedRight":true,"handles":[0.5,1,0.356,0.011],"value":0},{"id":"aXKRgGcL3Z","position":17,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.24380192231384956},{"id":"3Y6Rd-OfAR","position":22,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.24380192231384956},{"id":"gaVLYkTAyL","position":32,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.9},{"id":"9Uzgr6_OLC","position":35,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1}]},"hovgxktM4n":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"contrailAlpha\\"]","keyframes":[{"id":"7OpZwIN7MK","position":37,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"YCPLWhDfkh","position":37.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"Cwpj2BbxaP":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"duration\\"]","keyframes":[{"id":"X1IH7c76tt","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"51izLEJIvB","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"TJeLwthK4Z","position":26.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"-A4OM8CDBw":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"disperseParticles\\"]","keyframes":[{"id":"aWnw-K6kRw","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false},{"id":"I0vSjq4w-s","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"YplUSEnOMv","position":28,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"NTjtVComi9":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"traveled\\"]","keyframes":[{"id":"NItF1F18t6","position":16.033,"connectedRight":true,"handles":[0.5,1,0.955,0.02],"value":0},{"id":"g8w2KgX62f","position":22,"connectedRight":true,"handles":[0.5,1,0.55,0.085],"value":3},{"id":"A355Q2Khcx","position":25.733,"connectedRight":true,"handles":[0.68,0.53,0.3429805870639548,0.03],"value":800},{"id":"3mi_G9BkfJ","position":27.733,"connectedRight":true,"handles":[0.5630083198297336,0.7633623693379791,0.204679818149322,0.4191873481636736],"value":9000},{"id":"QRhQ7rdEr1","position":31.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":11999},{"id":"c0yADRDWoO","position":33.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":12000},{"id":"u1RGd3hVqo","position":37,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":12000},{"id":"6O6HS6MbMI","position":39.8,"connectedRight":true,"handles":[0.5,1,0.3608785269202732,0],"value":12551},{"id":"CQ0wm6PS4x","position":42,"connectedRight":true,"handles":[0.610046913423811,0.6824755361833559,0.12295531316258365,0.20952380952380953],"value":17500},{"id":"Jve0mYNx_n","position":44,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":22000}]},"qiR5gIkKnp":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"rotation\\"]","keyframes":[{"id":"BGMgoqGhks","position":36,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"qLRXxYPmMA","position":37,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":3}]},"qmbiXBseYt":{"type":"BasicKeyframedTrack","__debugName":"Rocket:[\\"boosterOpacity\\"]","keyframes":[{"id":"8vN9kaHyIf","position":33.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"yoYMnKVdGw","position":34.333,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1}]}},"trackIdByPropPath":{"[\\"rotation\\",\\"x\\"]":"l8Kslk2e1-","[\\"rotation\\",\\"y\\"]":"XgEo9tzsFq","[\\"rotation\\",\\"z\\"]":"taeiY2AO3M","[\\"speed\\"]":"o4Anebv56X","[\\"visibility\\"]":"Ml-OJNsB4q","[\\"position\\"]":"fOKb3gSMZl","[\\"contrailAlpha\\"]":"hovgxktM4n","[\\"duration\\"]":"Cwpj2BbxaP","[\\"disperseParticles\\"]":"-A4OM8CDBw","[\\"traveled\\"]":"NTjtVComi9","[\\"rotation\\"]":"qiR5gIkKnp","[\\"boosterOpacity\\"]":"qmbiXBseYt"}},"Terminal":{"trackData":{"LzuFHYfEtA":{"type":"BasicKeyframedTrack","__debugName":"Terminal:[\\"guardian\\"]","keyframes":[{"id":"9riQoq_cGr","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"dhHiylrzPo","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"dllBHtnJ7Y","position":11,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":2},{"id":"Apw06weDHR","position":16,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":3},{"id":"D7hJUy1_xu","position":25.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":4},{"id":"SOH-wQJsfO","position":31.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":5},{"id":"g5e4MSbL6r","position":37.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":6},{"id":"TOlnWLv9c1","position":40.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":7}]},"g8lafLjnq5":{"type":"BasicKeyframedTrack","__debugName":"Terminal:[\\"terminal\\"]","keyframes":[{"id":"W5A4wBxtKk","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"JdTjcf0Amf","position":1.333,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1},{"id":"JT3ivHjP91","position":11.333,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":2},{"id":"IcCdnciSDG","position":26.1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":3},{"id":"pYOcJrvCGO","position":31.7,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":4},{"id":"2bgOD8h7UN","position":37.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":5},{"id":"oVT1jrWrpR","position":41,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":6}]}},"trackIdByPropPath":{"[\\"guardian\\"]":"LzuFHYfEtA","[\\"terminal\\"]":"g8lafLjnq5"}},"Satellite":{"trackData":{"qe38w4dqEH":{"type":"BasicKeyframedTrack","__debugName":"Satellite:[\\"rotationWeight\\"]","keyframes":[{"id":"EcfFCUVtzc","position":42.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0},{"id":"sZQCx4xygw","position":44,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1}]}},"trackIdByPropPath":{"[\\"rotationWeight\\"]":"qe38w4dqEH"}}}}},"launch-satellite":{"staticOverrides":{"byObject":{"Satellite":{"rotation":{"y":0.31813596492048546,"x":0.9544078947614554,"z":0.6362719298409708}}}},"sequence":{"subUnitsPerUnit":30,"length":10,"type":"PositionalSequence","tracksByObject":{"Satellite":{"trackData":{"xkqly-4Bir":{"type":"BasicKeyframedTrack","__debugName":"Satellite:[\\"visible\\"]","keyframes":[{"id":"YLYwbNpKIS","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"TNcwXUfALq","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":true},{"id":"QLcR9ROdTU","position":5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":false}]},"xulg8QvbT2":{"type":"BasicKeyframedTrack","__debugName":"Satellite:[\\"position\\",\\"x\\"]","keyframes":[{"id":"rrI1JLSw28","position":1,"connectedRight":true,"handles":[0.5,1,0.0809248554913295,0.8253968253968254],"value":0.09},{"id":"dtrtrp17-b","position":3,"connectedRight":true,"handles":[0.5,1,0.8757225433526011,0],"value":0},{"id":"zIREDg3svB","position":5,"connectedRight":true,"handles":[0.7890173410404624,1,0.5,0],"value":-0.09}]},"ME7onqG0TM":{"type":"BasicKeyframedTrack","__debugName":"Satellite:[\\"position\\",\\"y\\"]","keyframes":[{"id":"Wx7WppKb3L","position":3,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"MVvPhFhAKn":{"type":"BasicKeyframedTrack","__debugName":"Satellite:[\\"position\\",\\"z\\"]","keyframes":[{"id":"Qv5im-jOgg","position":3,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0}]},"jwKC5FZpSP":{"type":"BasicKeyframedTrack","__debugName":"Satellite:[\\"rotation\\",\\"x\\"]","keyframes":[{"id":"aT8K8gfZ3f","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.7953399123012126},{"id":"iG1D_--bp_","position":3,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.9544078947614554},{"id":"ZDUUq71PZL","position":5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":1.2327768640668797}]},"_C0LeAc5uM":{"type":"BasicKeyframedTrack","__debugName":"Satellite:[\\"rotation\\",\\"y\\"]","keyframes":[{"id":"FnSj22xptf","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.07953399123012142},{"id":"BTlL9dW07I","position":3,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.31813596492048546},{"id":"5gSVfqF_O6","position":5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.15906798246024276}]},"eNjeKRLmgt":{"type":"BasicKeyframedTrack","__debugName":"Satellite:[\\"rotation\\",\\"z\\"]","keyframes":[{"id":"3JpXdpkFVv","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.4374369517656673},{"id":"U29oBDxEcK","position":3,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.6362719298409708},{"id":"8RvaitijS0","position":5,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":0.9146408991463957}]}},"trackIdByPropPath":{"[\\"visible\\"]":"xkqly-4Bir","[\\"position\\",\\"x\\"]":"xulg8QvbT2","[\\"position\\",\\"y\\"]":"ME7onqG0TM","[\\"position\\",\\"z\\"]":"MVvPhFhAKn","[\\"rotation\\",\\"x\\"]":"jwKC5FZpSP","[\\"rotation\\",\\"y\\"]":"_C0LeAc5uM","[\\"rotation\\",\\"z\\"]":"eNjeKRLmgt"}}}}},"launch-audio":{"staticOverrides":{"byObject":{}},"sequence":{"subUnitsPerUnit":30,"length":60,"type":"PositionalSequence","tracksByObject":{"Prelaunch":{"trackData":{"o2hyUTaARi":{"type":"BasicKeyframedTrack","__debugName":"Prelaunch:[\\"audio\\"]","keyframes":[{"id":"5v3IKZ9hQP","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":""},{"id":"WYZPARREeq","position":0.533,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"prelaunch_01"},{"id":"F_9NpNgJOd","position":12,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"prelaunch_02"},{"id":"ZbUD_9z6FT","position":19,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"prelaunch_03"},{"id":"LPITwVYDXU","position":25,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"prelaunch_04"},{"id":"9eEIvkzsa-","position":30,"connectedRight":true,"handles":[0.5,1,0.5,0],"value":"prelaunch_05"}]}},"trackIdByPropPath":{"[\\"audio\\"]":"o2hyUTaARi"}}}}}},"definitionVersion":"0.4.0","revisionHistory":["rjZcL-52QOkj--Ma","IbBTq5QN9DY5fIKi","rJAFflncmkg8KAZA","0bMh6-mQp_3bcPGk","3p9BNAw-TG2X8sts","uNu8-lH-oEizx7X6","aHNg8YkxahNhOXaR","-QYzqnosp9OPoRqT","J185wPIV7XybTgWR","qF8RvcF0f1TnNtvR","fKiUM7J502vvGBlY","Kl3ESv7Lmk6bUXxA","xjsIb2dDShZXSVDj","uKqU8YbUKjiQmmWo","nmbbecEGJ8AkNi7l","AJvS_UzuYcFU2nYk","Ekn_QOTz56zPJTvW","oSnAzEmR0j2NfSKP","9l4M0grfLMd3-byj","-KuV_W_HQEmmmD2L","2rsnZoemlWa9xReo","S4uMzUZTKGUEnpSo","U_barxXhf39RLK6b","PVRU1OfYX4E4F_De","giJFiUsK5Fstu0Cn","1M-gtOrw7XpfZ9xg","aYJTRG-1IQ7U_qP4","_vOsgicyQ0cSlfVv","yOOUSBYaQPIkparS","Zf4BzmtO9f2MpXPU","guG8qf8Q8ok4VRoP","WegPaFlni8phkOnW","c6yr35__yW5RgCAQ","69YcpFzXANzDfzKH","BvircJjvemxOAYFc","2WSgQWZ4Rrbr3pT1","DdQxBkhGNWijBCsJ","ifeTwHUx9Gox_8f7","IRrVhrxDlLrY2MmW","TZYILIgLv2qmG4XG","fXdQHUp7KnBdLQLs","Je0vplyN6fyjZcqG","jvzZ3whrxIZCVGbs","n5VbXQVqcdHb6G1y","gZZuxrttE-FVcNBi","OhcSoYpOvNmNwyTp","akl7461_XwP-vdkb","d-HX542bKMYb-PMT","v9anHnHzovz0nPhD","YyEruh8mwDdPziY_"]}'),Hn=(0,Bn.getProject)("ussf-website",{state:Fn}),Gn={idle:Hn.sheet("launch-idle"),launch:Hn.sheet("launch-launch")},jn={idle:Gn.idle.object("Scene",{compositeTransition:Bn.types.number(1,{range:[0,1]}),cameraPosition:{x:Bn.types.number(.3,{nudgeMultiplier:.01}),y:Bn.types.number(.09,{nudgeMultiplier:.01}),z:Bn.types.number(.1,{nudgeMultiplier:.01})},cameraTarget:{x:Bn.types.number(0,{nudgeMultiplier:.01}),y:Bn.types.number(0,{nudgeMultiplier:.01}),z:Bn.types.number(0,{nudgeMultiplier:.01})},near:Bn.types.number(.03,{range:[0,1]}),far:Bn.types.number(700,{range:[.1,4e3]}),fogDensity:Bn.types.number(.07,{range:[0,1]})}),launch_camera:Gn.launch.object("Camera",{near:Bn.types.number(.05,{range:[0,10]}),far:Bn.types.number(700,{range:[0,8e3]}),smooth:Bn.types.number(0,{range:[0,1]}),position:Bn.types.number(0,{range:[0,1]}),targetOffset:{x:Bn.types.number(0,{range:[-.1,.1]}),y:Bn.types.number(0,{range:[-.1,.1]}),z:Bn.types.number(0,{range:[-.1,.1]})},zoom:Bn.types.number(1,{range:[0,3]}),launchLookAt:!0,rotateCamera:!1,rotationAmount:{x:Bn.types.number(2,{range:[-30,30]}),y:Bn.types.number(1,{range:[-30,30]})},rotationStrength:Bn.types.number(0,{range:[0,1]}),shakeCamera:!1,shakeAmount:Bn.types.number(0,{range:[0,1]})}),launch_clouds:Gn.launch.object("Clouds",{rush:{opacity:Bn.types.number(1,{range:[0,1]}),speed:Bn.types.number(0,{range:[0,50]}),visible:!1}}),launch_earth:Gn.launch.object("Earth",{position:{x:0,y:0,z:0},rotationX:Bn.types.number(0,{range:[-u.uo,u.uo]}),rotationY:Bn.types.number(0,{range:[-u.uo,u.uo]}),atmosScale:Bn.types.number(0,{range:[1,10]}),scatterCurve:Bn.types.number(1,{range:[-u.uo,u.uo]}),scale:Bn.types.number(1,{range:[0,1]}),speed:Bn.types.number(0,{range:[0,1]})}),launch_etc:Gn.launch.object("Etc",{keyframe:"ground",groundVisibility:!0,groundY:0,starAlpha:1,gltfTime:Bn.types.number(0,{range:[0,48]}),fogDensity:Bn.types.number(.07,{range:[0,1]}),time:Bn.types.number(0,{range:[0,48]})}),launch_lights:Gn.launch.object("Lights",{lightProbeIntensity:Bn.types.number(1,{range:[0,1]}),satelliteLight:{intensity:Bn.types.number(1,{range:[0,1]}),visible:!0}}),launch_post:Gn.launch.object("Post",{dofEnabled:!0,focalLength:Bn.types.number(.002,{range:[0,.2]})}),launch_rocket:Gn.launch.object("Rocket",{position:Bn.types.number(0,{range:[0,1]}),rotation:Bn.types.number(0,{range:[-5,5]}),speed:Bn.types.number(1,{range:[0,1]}),visibility:!0,contrailAlpha:Bn.types.number(1,{range:[0,1]}),traveled:Bn.types.number(0,{range:[0,D.st]}),timeOffset:Bn.types.number(10,{range:[-30,30]}),boosterOpacity:Bn.types.number(0,{range:[0,1]})}),launch_satellite:Gn.launch.object("Satellite",{rotationWeight:Bn.types.number(0,{range:[0,1]})}),launch_terminal:Gn.launch.object("Terminal",{guardian:Bn.types.number(-1,{nudgeMultiplier:1}),terminal:Bn.types.number(-1,{nudgeMultiplier:1})})},Wn=64,Vn=4,Kn=4,qn=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i){var a;(0,c.Z)(this,n),(a=t.call(this)).boundingBox=new v.ZzF,a.copyAttributes(e,["position","normal","uv","vertexIndex"]);for(var r=[],o=[],s=[],l=Math.min(Wn,i),u=Math.ceil(i/l),d=0,h=0,m=0;m<i;++m)r.push(d/l,h/u),o.push(m),s.push(Math.random(),Math.random(),Math.random(),Math.random()),++d===l&&(d=0,++h);return a.setAttribute("particleUV",new v.lb7(new Float32Array(r),2)),a.setAttribute("particleIndex",new v.lb7(new Float32Array(o),1)),a.setAttribute("particleRandom",new v.lb7(new Float32Array(s),4)),a.setIndex(e.getIndex()),a.boundingBox.min.set(-100,-100,-100),a.boundingBox.max.set(100,100,100),a._count=i,a}return n.prototype.copyAttributes=function(e,t){var n=!0,i=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value,l=e.getAttribute(s);l&&this.setAttribute(s,l)}}catch(u){i=!0,a=u}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}},n}(v.L5s),Yn="#define GLSLIFY 1\n// x, y, z, start time\n#ifdef FLOAT_FBO\nuniform sampler2D p0Buffer;\n#else\nuniform sampler2D p0BufferXY;\nuniform sampler2D p0BufferZW;\n#endif\n\nuniform sampler2D v0Buffer;\nuniform sampler2D propsMap;\nuniform sampler2D windMap;\n\nuniform float time;\nuniform vec3 gravity;\nuniform float worldScale;\nuniform float velocityScale;\nuniform float duration;\nuniform float drag;\nuniform float rcpDT;\n\nuniform vec2 windSpeed;\nuniform vec3 windDir;\nuniform vec2 particleMapSize;\nuniform vec2 propsMapSize;\n\nvec2 encodeFP(float value)\n{\n    vec2 enc = vec2(1.0, 255.0) * value;\n    enc.y = fract(enc.y);\n    enc.x -= enc.y / 255.0;\n    return enc;\n}\n\nfloat decodeFP(vec2 rg)\n{\n    return dot(rg, vec2(1.0, 1.0/255.0));\n}\n\nvec4 sampleVelocityBuffer(vec2 uv)\n{\n    vec4 v = texture2D(v0Buffer, uv);\n    #ifndef FLOAT_FBO\n    v.xyz = (v.xyz - 0.5) * velocityScale;\n    #endif\n    return v;\n}\n\nvec4 samplePositionBuffer(vec2 uv)\n{\n    vec4 p;\n\n    #ifdef FLOAT_FBO\n    p = texture2D(p0Buffer, uv);\n    #else\n    vec4 pXY = texture2D(p0BufferXY, uv);\n    vec4 pZW = texture2D(p0BufferZW, uv);\n\n    p.x = decodeFP(pXY.xy);\n    p.y = decodeFP(pXY.zw);\n    p.z = decodeFP(pZW.xy);\n    p.w = decodeFP(pZW.zw);\n\n    p.xz = p.xz - 0.5;\n    p.xyz *= worldScale;\n    p.w *= duration;\n    #endif\n    return p;\n}\n\nvec4 encodePositionBuffer(vec3 pos, float emitTime)\n{\n    #ifndef FLOAT_FBO\n    pos.xyz /= worldScale;\n    pos.xz += .5;\n    emitTime /= duration;\n    #endif\n    vec4 v = vec4(pos, emitTime);\n\n    #ifndef FLOAT_FBO\n        #if FP_ENCODING == 0\n            v = vec4(encodeFP(v.x), encodeFP(v.y));\n        #else\n            v = vec4(encodeFP(v.z), encodeFP(v.w));\n        #endif\n    #endif\n\n    return v;\n}\n\nvec4 encodeVelocityBuffer(vec3 vel, float type)\n{\n    #ifndef FLOAT_FBO\n    vel.xyz /= velocityScale;\n    vel.xyz += .5;\n    #endif\n    return vec4(vel, type);\n}\n\n// g = gravity or any constant acceleration\n// d = drag\nvec3 evaluatePath(vec3 p0, vec3 v0, vec3 g, float d, float t)\n{\n    #if USE_DRAG == 0\n        vec3 p = p0 + t * v0 + g * 0.5 * t * t;\n    #else\n        // rewrite to the form v' + av = b to match with literature\n        // v' = gravity - drag*v\n\n        vec3 b = g;\n        float a = d * rcpDT;\n\n        // v' + a v = b\n        //      multiply with e^at\n        // v' e^at + a v e^at = b e^at\n        //      left hand side is the derivative of v e^at\n        // d(v e^at)/dt = b e^at\n        //      integrate\n        // v e^at = b/a e^at + C\n        //      multiply by e^-at\n        // v(t) = C e^-at + b/a\n        // v(0) = C + b/a\n\n        vec3 VC = v0 - b / a;\n\n        // integrate velocity for position\n        // dx/dt = v\n        // x(t) = P + (bt - C*e^(-at)) / a\n        // x(0) = P - C / a\n        vec3 PC = p0 + VC / a;\n        vec3 p = PC + (b * t - VC * exp(-a*t)) / a;\n    #endif\n\n    // use starting position height to define randomized wind speed\n    vec2 windUV = vec2(p0.y / worldScale, 0.0);\n//    float windHeight = clamp(p0.y / 0.25, 0.0, 1.0);\n    float windV = mix(windSpeed.x, windSpeed.y, texture2D(windMap, windUV).x);\n    p += windV * windDir * t;\n    return p;\n}\n\nvec4 getParticleProps(float index, float type)\n{\n    vec2 uv = vec2(type + 0.5 / propsMapSize.x, (index + 0.5) / propsMapSize.y);\n    return texture2D(propsMap, uv);\n}\n\nvec3 getParticlePosData(in vec2 uv, out float t, out float type, out vec3 vel)\n{\n    vec4 p0 = samplePositionBuffer(uv);\n    vec4 v0 = sampleVelocityBuffer(uv);\n    t = max(time - p0.w, 0.0);\n    type = v0.w;\n\n    vel = v0.xyz;\n\n    return evaluatePath(p0.xyz, v0.xyz, gravity, drag, t);\n}\n\nvec3 getParticlePosData(in vec2 uv, out float t, out float type)\n{\n    vec3 vel;\n    return getParticlePosData(uv, t, type, vel);\n}\n\nvec3 getParticlePosData(in vec2 uv, out float t)\n{\n    float l;\n    vec3 vel;\n    return getParticlePosData(uv, t, l, vel);\n}\n\nvec3 getParticlePosition(vec2 uv)\n{\n    float t, l;\n    vec3 vel;\n    return getParticlePosData(uv, t, l, vel);\n}\n\nint getParticleIndex(vec2 uv)\n{\n    return int(floor(uv.x * particleMapSize.x) + floor(uv.y * particleMapSize.x) * particleMapSize.y);\n}\n\n// calculates a particle's uv coordinate in the position/velocity maps\nvec2 getParticleUV(float index)\n{\n    vec2 uv;\n    uv.y = floor(index / particleMapSize.x);\n    uv.x = index - uv.y * particleMapSize.x;\n    return uv / particleMapSize;\n}",Xn=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i){return(0,c.Z)(this,n),e.defines=e.defines||{},e.uniforms=e.uniforms||{},void 0===e.defines.FP_ENCODING&&(e.defines.FP_ENCODING=2),e.defines.USE_DRAG=0===i._drag?0:1,function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(e.uniforms,{worldScale:{value:i._worldScale},velocityScale:{value:i._velocityScale},windMap:{value:i._windMap},windSpeed:{value:new v.FM8(i._windSpeedMin,i._windSpeedMax)},windDir:{value:(new v.Pa4).copy(i._windDirection).normalize()},p0Buffer:{value:i.p0Buffer},p0BufferXY:{value:i.p0BufferXY},p0BufferZW:{value:i.p0BufferZW},v0Buffer:{value:i.v0Buffer},time:{value:0},rcpDT:{value:60},gravity:{value:new v.Pa4(0,-i._gravity,0)},drag:{value:i._drag},duration:{value:i._duration},particleMapSize:{value:i.particleMapSize},propsMapSize:{value:new v.FM8(i.propsMap.image.width,i.propsMap.image.height)},propsMap:{value:i.propsMap}}),(y.o.FLOAT_FBO||y.o.HALF_FLOAT_FBO)&&(e.defines.FLOAT_FBO=1),e.vertexShader=Yn+"\n"+e.vertexShader,e.fragmentShader=Yn+"\n"+e.fragmentShader,void 0===e.type&&(e.type="BaseFWMaterial"),t.call(this,e)}return(0,J.Z)(n,[{key:"time",get:function(){return this.uniforms.time.value},set:function(e){this.uniforms.time.value=e}},{key:"rcpDT",get:function(){return this.uniforms.rcpDT.value},set:function(e){this.uniforms.rcpDT.value=e}}]),n}(v.jyz);var Qn,Jn,$n=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a,r,o){var s;return(0,c.Z)(this,n),(s=t.call(this,{uniforms:{lifetime:{value:5},lightColor:{value:new v.Ilk},atlas:{value:null},rcpNumAtlasSprites:{value:1},minY:{value:a.minY},turbulence:{value:a.turbulence},depthTex:{value:o},camNear:{value:0},rcpCamRange:{value:0},scaling:{value:r}},vertexShader:"#define GLSLIFY 1\nvarying vec2 vUV;\nvarying vec4 vColor;\n\nattribute vec2 particleUV;\nattribute float particleIndex;\nattribute vec4 particleRandom;\n\n#ifdef USE_ATLAS\nuniform float rcpNumAtlasSprites;\nvarying vec2 vAtlasUV;\n#endif\n\nuniform float minY;\nuniform float turbulence;\nuniform float scaling;\n\nvarying vec4 vProj;\n\nvoid main()\n{\n    vUV = uv;\n\n    float life, type;\n    vec3 v0;\n    vec3 particle = getParticlePosData(particleUV, life, type, v0);\n    vec4 pos = vec4(particle, 1.0);\n\n    vec4 viewPos = modelMatrix * pos;\n    float diff = max(minY - viewPos.y, 0.0);\n    viewPos.y += diff;\n\n    #ifdef USE_TURBULENCE\n    diff *= min(diff * diff, 1.0);\n    diff *= turbulence;\n    float v = length(v0.xz);\n    float phase = diff * .2 * v;\n    float radius = diff * v;\n    vec2 curl = vec2(cos(phase), sin(phase)) * radius;\n    curl += mix(0.0, 1.5, min(diff, 1.0));\n    viewPos.y += curl.y;\n    viewPos.xz += normalize(v0.xz) * curl.x;\n    viewPos.y = max(minY, viewPos.y);\n    #endif\n\n    viewPos.xyz *= scaling;\n\n    viewPos = viewMatrix * viewPos;\n\n    vec4 particleData1 = getParticleProps(2.0, type);\n    vec4 particleData2 = getParticleProps(3.0, type);\n    float lifetime = particleData1.y * 4.0;\n    float particleGrow = particleData2.z * 20.0;\n\n    float lifeRatio = clamp(1.0 - life / lifetime, 0.0, 1.0);\n    float particleSize = particleData1.x * 20.0 * mix(particleGrow, 1.0, lifeRatio) * scaling;\n    float rotation = particleData2.x + particleData2.y * life * 10.0 + particleRandom.x * 6.283;\n    float c = cos(rotation);\n    float s = sin(rotation);\n    vec3 offset = position;\n    offset.xy = mat2(c, s, -s, c) * offset.xy;\n    viewPos.xyz += offset * particleSize;\n\n    // make degenerate\n    if (life > lifetime) viewPos *= 0.0;\n\n    gl_Position = projectionMatrix * viewPos;\n\n    // vColor = mix(color1, color2, particleRandom.w) * lifeRatio;\n    // random.w contains a highly polarized random value\n    vec4 colorData = getParticleProps(particleRandom.w, type);\n    vColor.xyz = colorData.xyz * colorData.w * 10.0;\n    vColor.w = particleData1.z * pow(lifeRatio, 2.0);\n\n    #ifdef USE_ATLAS\n    vAtlasUV = vUV;\n    vAtlasUV.x = (vAtlasUV.x + particleData1.w * 255.0) * rcpNumAtlasSprites;\n    #endif\n\n    vProj = gl_Position;\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUV;\nvarying vec3 vViewPos;\nvarying vec4 vColor;\n\nuniform vec3 lightColor;\n\n#ifdef USE_ATLAS\nvarying vec2 vAtlasUV;\nuniform sampler2D atlas;\n#endif\n\n#ifdef USE_DEPTH_TEX\nuniform sampler2D depthTex;\nuniform float rcpCamRange;\n#endif\n\nvarying vec4 vProj;\nuniform float camNear;\n\n#include <packing>\n\nfloat unpackRGBAToDepth( const in vec2 v ) {\n    return dot(v, vec2(1.0, 1.0/255.0));\n}\n\nfloat RGBA8ToFloat(vec4 rgba)\n{\n    return dot(rgba, vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/16581375.0));\n}\n\nvoid main()\n{\n    #ifdef USE_ATLAS\n    float dist = 1.0;\n    vec4 atlasColor = texture2D(atlas, vAtlasUV);\n        #ifdef ATLAS_CHANNEL\n            atlasColor.rgb = vec3(atlasColor[ATLAS_CHANNEL]);\n        #endif\n    #else\n    vec2 diff = vUV * 2.0 - 1.0;\n    float dist = length(diff);\n    #endif\n    // this way allows for a sort of bokeh effect, if we need it\n    // dist = pow(dist, 5.0);\n\n    // additive (glowing) particles\n    #if BLENDING == 0\n//        float brightness = (1.0 - dist) * .5 + (1.0 - smoothstep(dist, 0.0, 0.05)) * 10.0;\n        gl_FragColor = vec4(vColor.xyz * vColor.w * dist, vColor.w);\n    #elif BLENDING == 1\n        // normal\n        gl_FragColor = vec4(vColor.xyz, dist * vColor.w);\n    #else\n        gl_FragColor = vec4(mix(vColor.xyz, vec3(1.0), dist * vColor.w), vColor.w);\n    #endif\n\n    #ifdef USE_ATLAS\n        gl_FragColor *= atlasColor;\n        #ifdef CUSTOM_PASS\n            // output normals\n            gl_FragColor.xy = atlasColor.xy;\n        #endif\n    #endif\n\n    gl_FragColor.a *= smoothstep(camNear, camNear + 0.1, vProj.w);\n\n    #ifdef USE_DEPTH_TEX\n    vec3 screenUV = vProj.xyz / vProj.w * .5 + .5;\n    vec4 depthBA = texture2D(depthTex, screenUV.xy);\n    float depth = (vProj.w - camNear) * rcpCamRange;\n    float backDepth = RGBA8ToFloat(depthBA);\n    float diff = clamp((backDepth - depth) * 100000.0, 0.0, 1.0);\n    gl_FragColor.a *= diff;\n    #endif\n}\n",transparent:!0,blending:i||v.WMw,depthWrite:!1,defines:{BLENDING:0},type:"FireworksMaterial"},e))._usesAtlas=!1,i===v.WMw?s.defines.BLENDING=0:s.blending===v.bdR?s.defines.BLENDING=1:s.blending===v.M5h&&(s.defines.BLENDING=2),a.layer===mt.CustomParticlePass&&(s.defines.CUSTOM_PASS=""),o&&(s.defines.USE_DEPTH_TEX=""),void 0!==a.atlasChannel&&(s.defines.ATLAS_CHANNEL=a.atlasChannel),a.turbulence>0&&(s.defines.USE_TURBULENCE=""),s}var i=n.prototype;return i.setLight=function(e){this.uniforms.lightColor.value.copy(e.color).multiplyScalar(3.14*e.intensity).addScalar(.1)},i.updateCamera=function(e){this.uniforms.camNear.value=e.near,this.uniforms.rcpCamRange.value=1/(e.far-e.near)},(0,J.Z)(n,[{key:"usesAtlas",get:function(){return this._usesAtlas},set:function(e){this._usesAtlas!==e&&(this._usesAtlas=e,e?this.defines.USE_ATLAS="":delete this.defines.USE_ATLAS,this.needsUpdate=!0)}},{key:"atlas",get:function(){return this.uniforms.atlas.value},set:function(e){this.uniforms.atlas.value=e,e&&(this.uniforms.rcpNumAtlasSprites.value=e.image.naturalHeight/e.image.naturalWidth)}}]),n}(Xn);function ei(e,t,n,i){Qn?Qn.material=n:(Qn=new v.Kj0(new v.BKK(2,2),n),Jn=new v.iKG(-1,1,1,-1,0,1));var a=e.getRenderTarget(),r=e.autoClear;e.setRenderTarget(t),void 0!==i&&(e.autoClear=i),e.render(Qn,Jn),e.setRenderTarget(a),e.autoClear=r}var ti,ni,ii="#define GLSLIFY 1\nvarying vec2 vUV;\n\nvoid main()\n{\n    gl_Position = vec4(position, 1.0);\n    vUV = uv;\n}",ai=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,{uniforms:{tDiffuse:{value:null}},vertexShader:ii,fragmentShader:"#define GLSLIFY 1\nuniform sampler2D tDiffuse;\n\nvarying vec2 vUV;\n\nvoid main()\n{\n    gl_FragColor = texture2D(tDiffuse, vUV);\n}",type:"CopyMaterial"})}return n}(v.jyz),ri=0,oi=1,si=[2,0],li=[2,1],ui=[2,2],ci=[2,3],di=[3,0],hi=[3,1],mi=[3,2],pi=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a,r,o,s){var l,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:v.WMw,d=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0;(0,c.Z)(this,n),(l=t.call(this))._time=0,l._scaling=1,l._maxParticles=r.maxParticles,l._renderer=e,l._worldScale=i,l._velocityScale=a,l._duration=o,l._emitIndex=0,l._windMap=s,l._scaling=d,l._copyMaterial=new ai,l._initTextures();var m=new qn(new v.BKK,l._maxParticles);return m.instanceCount=0,l.geometry=m,l._gravity=r.gravity,l._drag=r.drag,l._windSpeedMin=r.wind.minSpeed,l._windSpeedMax=r.wind.maxSpeed,l._windDirection=r.wind.direction,l.renderOrder=r.renderOrder,l.material=new $n((0,Q.Z)(l),u,r,l._scaling,h),r.layer&&l.layers.set(r.layer),l}var i=n.prototype;return i.setLifetime=function(e,t){gi(this.propsMap,e,li,.25*t)},i.setColors=function(e,t,n,i,a){i=i||1,vi(this.propsMap,e,ri,t,i),vi(this.propsMap,e,oi,n,i),gi(this.propsMap,e,ui,a||1)},i.setParticleSize=function(e,t,n){gi(this.propsMap,e,si,t/20),gi(this.propsMap,e,mi,n/20)},i.setAtlasIndex=function(e,t){(gi(this.propsMap,e,ci,t/255),t>=0)&&(this.material.usesAtlas=!0)},i.setRotation=function(e,t,n){gi(this.propsMap,e,di,t),gi(this.propsMap,e,hi,n/10)},i.dispose=function(){var e,t,n;this.material.dispose(),this.geometry.dispose(),null===(e=this._p0RT)||void 0===e||e.dispose(),null===(t=this._p0XYRT)||void 0===t||t.dispose(),null===(n=this._p0ZWRT)||void 0===n||n.dispose(),this._v0RT.dispose()},i.updatePrimaryPosMap=function(){this._p1RT&&(this._copyMaterial.uniforms.tDiffuse.value=this._p0RT.texture,ei(this._renderer,this._p1RT,this._copyMaterial,!0)),this._p1XYRT&&(this._copyMaterial.uniforms.tDiffuse.value=this._p0XYRT.texture,ei(this._renderer,this._p1XYRT,this._copyMaterial,!0),this._copyMaterial.uniforms.tDiffuse.value=this._p0ZWRT.texture,ei(this._renderer,this._p1ZWRT,this._copyMaterial,!0))},i._initTextures=function(){var e=Math.min(Wn,this._maxParticles),t=Math.ceil(this._maxParticles/e);this._texParticles=e*t,this._particleMapSize=new v.FM8(e,t),y.o.FLOAT_FBO||y.o.HALF_FLOAT_FBO?this._p0RT=fi(e,t):(this._p0XYRT=fi(e,t),this._p0ZWRT=fi(e,t)),this._v0RT=fi(e,t),this.randomTexture=function(e,t){for(var n=e*t*4,i=new Uint8Array(n),a=0;a<n;++a)i[a]=Math.round(255*Math.random());var r=new v.IEO(i,e,t,v.wk1,v.ywz,void 0,v.uWy,v.uWy,v.TyD,v.TyD);return r.needsUpdate=!0,r}(e,t),this.propsMap=function(e,t){for(var n=e*t*4,i=new Uint8Array(n),a=0;a<n;++a)i[a]=0;var r=new v.IEO(i,e,t,v.wk1,v.ywz,void 0,v.uWy,v.uWy,v.wem,v.wem);return r.needsUpdate=!0,r}(Vn,Kn)},i.update=function(e,t){this._time+=e;var n=this.material;n.time=this._time,n.updateCamera(t)},(0,J.Z)(n,[{key:"numParticles",get:function(){return this.geometry.instanceCount},set:function(e){this.geometry.instanceCount=v.M8C.clamp(e,0,this._maxParticles)}},{key:"atlas",get:function(){return this.material.atlas},set:function(e){this.material.atlas=e}},{key:"primaryPosMap",get:function(){var e;return!this._p1RT&&this._p0RT&&(this._p1RT=this._p0RT.clone()),null===(e=this._p1RT)||void 0===e?void 0:e.texture}},{key:"primaryPosMapXY",get:function(){var e;return!this._p1XYRT&&this._p0XYRT&&(this._p1XYRT=this._p0XYRT.clone()),null===(e=this._p1XYRT)||void 0===e?void 0:e.texture}},{key:"primaryPosMapZW",get:function(){var e;return!this._p1ZWRT&&this._p0ZWRT&&(this._p1ZWRT=this._p0ZWRT.clone()),null===(e=this._p1ZWRT)||void 0===e?void 0:e.texture}},{key:"particleMapSize",get:function(){return this._particleMapSize}},{key:"p0Buffer",get:function(){var e;return null===(e=this._p0RT)||void 0===e?void 0:e.texture}},{key:"p0BufferXY",get:function(){var e;return null===(e=this._p0XYRT)||void 0===e?void 0:e.texture}},{key:"p0BufferZW",get:function(){var e;return null===(e=this._p0ZWRT)||void 0===e?void 0:e.texture}},{key:"v0Buffer",get:function(){return this._v0RT.texture}}]),n}(v.Kj0);function fi(e,t){var n=y.o.getTexTypeHalfOrFloatOrAny();return new v.dd2(e,t,{wrapS:v.uWy,wrapT:v.uWy,minFilter:v.TyD,magFilter:v.TyD,depthBuffer:!1,stencilBuffer:!1,type:n})}function vi(e,t,n,i,a){var r=_i(t,n),o=e.image.data;o[r]=i>>16&255,o[r+1]=i>>8&255,o[r+2]=255&i,o[r+3]=Math.floor(a/10*255),e.needsUpdate=!0}function gi(e,t,n,i){var a=_i(t,n[0],n[1]);e.image.data[a]=Math.floor(255*i)}function _i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return 4*(e+Vn*t)+n}!function(e){e[e.Velocity=0]="Velocity",e[e.Position=1]="Position"}(ti||(ti={})),function(e){e[e.XY=0]="XY",e[e.ZW=1]="ZW"}(ni||(ni={}));var yi=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ti.Position,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return(0,c.Z)(this,n),e.defines=e.defines||{},e.uniforms=e.uniforms||{},e.type="BaseEmitMaterial",e.defines.POSITION=a,e.defines.FP_ENCODING=r,xi(e.uniforms,{spawnStart:{value:0},spawnEnd:{value:1},randomTexture:{value:null},type:{value:0}}),t.call(this,e,i)}var i=n.prototype;return i.reset=function(){},i.updateInitVelocity=function(e,t,n,i){},i.updatePosition=function(e,t){},(0,J.Z)(n,[{key:"crackle",get:function(){return this._crackle},set:function(e){this._crackle!==e&&(this._crackle=e,this.defines.CRACKLE=e?1:0,this.needsUpdate=!0)}},{key:"randomVelocity",get:function(){var e;return null===(e=this.uniforms.randomVelocity)||void 0===e?void 0:e.value},set:function(e){this.uniforms.randomVelocity&&(this.uniforms.randomVelocity.value=e)}}]),n}(Xn);function xi(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}var bi,Si=function(){function e(t,n,i,a){(0,c.Z)(this,e),this._time=0,this._dt=0,this._renderer=t,this._effect=i,y.o.FLOAT_FBO||y.o.HALF_FLOAT_FBO?(this._posMaterial=new n(i,ti.Position),a&&a(this._posMaterial),this._uniforms=this._posMaterial.uniforms):(this._posMaterialXY=new n(i,ti.Position,ni.XY),this._posMaterialZW=new n(i,ti.Position,ni.ZW),this._uniforms=this._posMaterialXY.uniforms,this._posMaterialZW.uniforms=this._uniforms),this._velMaterial=new n(i,ti.Velocity),this._velMaterial.uniforms=this._uniforms,this._uniforms.randomTexture.value=i.randomTexture}var t=e.prototype;return t.reset=function(){this._posMaterial?this._posMaterial.reset():(this._posMaterialXY.reset(),this._posMaterialZW.reset()),this._velMaterial.reset(),this._time=0},t.updateTime=function(e){this._dt=e,this._time+=e},t.emit=function(e,t){this._uniforms.type.value=e/Vn;var n=Math.round(this._dt*t);if(0!==n){var i=this._effect._emitIndex,a=i+n;this._effect.numParticles+=n,this._effect._emitIndex=a;var r=this._effect._maxParticles;if(a<=r)this._renderSpawn(i,a);else{this._renderSpawn(i,r);var o=a-r;this._renderSpawn(0,o),this._effect._emitIndex=o}}},t._renderSpawn=function(e,t){var n=this._uniforms;n.spawnStart.value=e,n.spawnEnd.value=t,n.time.value=this._time,this._posMaterial?ei(this._renderer,this._effect._p0RT,this._posMaterial,!1):(ei(this._renderer,this._effect._p0XYRT,this._posMaterialXY,!1),ei(this._renderer,this._effect._p0ZWRT,this._posMaterialZW,!1)),ei(this._renderer,this._effect._v0RT,this._velMaterial,!1)},(0,J.Z)(e,[{key:"material",get:function(){return this._velMaterial}}]),e}(),wi=new v.yGw,Ti=new v.Pa4(0,1,0),Pi=new v.Pa4(0,0,0),Ci=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a){var r;return(0,c.Z)(this,n),(r=t.call(this,{uniforms:{p0:{value:new v.Pa4},p1:{value:new v.Pa4},offsets:{value:new Float32Array([0,0,0])},v0:{value:new v.Ltg(10,10,0,Math.PI)},orientation:{value:new v.Vkp}},defines:{NUM_OFFSETS:1},vertexShader:ii,fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUV;\n\nuniform sampler2D randomTexture;\nuniform vec3 offsets[NUM_OFFSETS];\nuniform vec3 p0;\nuniform vec3 p1;\nuniform vec4 v0;\nuniform mat3 orientation;\nuniform int spawnStart;\nuniform int spawnEnd;\nuniform float type;\n\nvoid main()\n{\n    int index = getParticleIndex(vUV);\n\n    if (index < spawnStart || index >= spawnEnd)\n        discard;\n\n    vec4 rand = texture2D(randomTexture, vUV);\n\n    #if POSITION == 1\n        int i = int(rand.y * float(NUM_OFFSETS));\n        vec3 p = mix(p0, p1, rand.z) + orientation * offsets[i];\n        gl_FragColor = encodePositionBuffer(p, time);\n    #else\n        float azimuth = rand.x * 3.1415 * 2.0;\n        float polar = mix(v0.z, v0.w, rand.y);\n\n        float rad = mix(v0.x, v0.y, rand.z);\n        float spr = sin(polar) * rad;\n        vec3 spread = vec3(\n            spr * sin(azimuth),\n            spr * cos(azimuth),\n            cos(polar) * rad\n        );\n\n        gl_FragColor = encodeVelocityBuffer(orientation * spread, type);\n    #endif\n}\n",type:"EmitFromPointsMaterial"},e,i,a))._newPath=!0,r}var i=n.prototype;return i.reset=function(){this._newPath=!0},i.updatePosition=function(e,t){var n=this.uniforms,i=n.p0.value,a=n.p1.value,r=n.orientation.value;this._newPath?(i.copy(e),a.copy(e),i.y-=.01,this._newPath=!1,t||r.identity()):(i.copy(a),a.copy(e),t||(wi.lookAt(a,i,Ti),r.setFromMatrix4(wi))),t&&(wi.lookAt(Pi,t,Ti),r.setFromMatrix4(wi))},i.updateInitVelocity=function(e,t,n,i){this.uniforms.v0.value.set(e,t,n,i)},(0,J.Z)(n,[{key:"offsets",get:function(){return this.uniforms.offsets.value},set:function(e){this.uniforms.offsets.value=e,this.defines.NUM_OFFSETS=e.length,this.needsUpdate=!0}}]),n}(yi),Ri=function(){function e(){(0,c.Z)(this,e),this._listeners=[]}var t=e.prototype;return t.bind=function(e,t){this._listeners.push({listener:e,thisRef:t})},t.unbind=function(e){for(var t=0;t<this._listeners.length;++t){if(this._listeners[t].listener===e)return void this._listeners.splice(t,1)}},t.unbindAll=function(){this._listeners=[]},t.dispatch=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a=!0,r=!1,o=void 0;try{for(var s,l=this._listeners[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u,c,d=s.value;d.thisRef?(u=d.listener).call.apply(u,[d.thisRef,e].concat((0,$.Z)(n))):(c=d).listener.apply(c,[e].concat((0,$.Z)(n)))}}catch(h){r=!0,o=h}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}},t.forward=function(e){this.bind(e.dispatch,e)},t.unforward=function(e){this.unbind(e.dispatch)},(0,J.Z)(e,[{key:"hasListeners",get:function(){return this._listeners.length>0}}]),e}(),Mi=new v.Ilk(.5,.5,.5),ki=new v.Ilk(.5,0,.5),Ei=new v.Ilk,Ai=new v.Pa4;!function(e){e[e.Rocket=0]="Rocket"}(bi||(bi={}));var Li=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a,r,o,s,l){var u;(0,c.Z)(this,n),(u=t.call(this)).onPrimaryExplosion=new Ri,u.onSecondaryExplosion=new Ri,u.onDestroyed=new Ri,u.emit=!0,u._time=0,u.position.copy(i),u._renderer=a,u._options=e;var d=e.rocket;return u._duration=d.duration,u._duration+=d.life,u._duration+=.1,u._worldScale=r,u._velocityScale=.5*r,u._windMap=o,u._depthTex=s,u._scaling=l,u._initEffect(),u._emitter=new Si(u._renderer,Ci,u._effect,(function(t){e.offsets&&(t.offsets=e.offsets)})),u._reset(),u}var i=n.prototype;return i.update=function(e,t){var n=this._options.rocket;this._time+=e,this._time>this._duration?this.dispose():(this._emitter.updateTime(e),this._time<n.duration&&this.emit&&this._updateProjectileEmitter(bi.Rocket,this._options.rocket),this._effect.update(e,t))},i._initEffect=function(){var e=this._options,t=e.rocket,n=e.atlas,i=e.blending;this._effect=new pi(this._renderer,this._worldScale,this._velocityScale,this._options,this._duration,this._windMap,i,this._scaling,this._depthTex),this._effect.frustumCulled=!1,this._effect.atlas=n,this._setParticleProps(this._effect,bi.Rocket,t),this.add(this._effect)},i.dispose=function(){this.onDestroyed.dispatch(this),this._effect.dispose()},i._reset=function(){this._time=0,this._emitter.reset(),this._resetEffect(this._effect)},i._resetEffect=function(e){if(e){var t=this._renderer.getRenderTarget();this._renderer.getClearColor(Ei),this._renderer.setRenderTarget(e._p0RT),this._renderer.setClearColor(ki,0),this._renderer.clear(),this._renderer.setRenderTarget(e._v0RT),this._renderer.setClearColor(Mi,1),this._renderer.clear(),this._renderer.setClearColor(Ei),this._renderer.setRenderTarget(t)}},i._updateProjectileEmitter=function(e,t){var n=t.coneAngle,i=t.direction,a=t.force,r=t.force2,o=t.emitRate,s=n*Math.PI/180,l=this._emitter.material,u=i?a||1:Ai.length(),c=r||.1*u;l.updateInitVelocity(c,u,Math.PI-s,Math.PI),l.updatePosition(new v.Pa4,i),this._emitter.emit(e,o)},i._setParticleProps=function(e,t,n){e.setColors(t,n.color1,n.color2,n.brightness,n.opacity),e.setParticleSize(t,n.particleSize,n.particleGrow),e.setAtlasIndex(t,n.atlasIndex),e.setLifetime(t,n.life),e.setRotation(t,n.rotation,n.rotationSpeed)},n}(v.ZAu),Di=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i){var a;return(0,c.Z)(this,n),(a=t.call(this)).timeScale=1,a.gravity=9.8,a.scaling=1,a._instances=[],a._renderer=e,a._worldSize=null!==i&&void 0!==i?i:70,y.o.init(e),a._windMap=function(){for(var e=32,t=4*e,n=new Uint8Array(t),i=0;i<t;++i)n[i]=Math.floor(255*Math.random());var a=new v.IEO(n,e,1,v.wk1,v.ywz,void 0,v.uWy,v.uWy,v.wem,v.wem);return a.needsUpdate=!0,a}(),a}var i=n.prototype;return i.update=function(e,t){if(0!==(e*=this.timeScale))for(var n=this._instances.length-1;n>=0;--n){var i=this._instances[n];i.visible&&i.update(e,t)}},i.launch=function(e,t,n){e=this._completeDefaults(e);var i=new Li(e,t,this._renderer,this._worldSize,this._windMap,n,this.scaling);return this.name=e.name,i.onDestroyed.bind(this._destroyInstance,this),this._instances.push(i),this.add(i),i},i.createDefaultOptions=function(){return this._completeDefaults()},i._destroyInstance=function(e){var t=this._instances.indexOf(e);this._instances.splice(t,1),this.remove(e)},i._completeDefaults=function(){var e,t,n,i,a,r,o,s,l,u,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.gravity=null!==(e=c.gravity)&&void 0!==e?e:this.gravity,c.drag=null!==(t=c.drag)&&void 0!==t?t:.01,c.projectileDrag=null!==(n=c.projectileDrag)&&void 0!==n?n:.01,c.maxParticles=null!==(i=c.maxParticles)&&void 0!==i?i:4096,c.blending=null!==(a=c.blending)&&void 0!==a?a:v.WMw,c.renderOrder=null!==(r=c.renderOrder)&&void 0!==r?r:0,c.minY=null!==(o=c.minY)&&void 0!==o?o:-1e4,c.turbulence=null!==(s=c.turbulence)&&void 0!==s?s:0,c.rocket=null!==(l=c.rocket)&&void 0!==l?l:{},c.wind=null!==(u=c.wind)&&void 0!==u?u:{};var d,h,m,p,f,g,_,y,x,b,S,w,T,P,C,R,M,k=c.rocket,E=c.wind;return E.minSpeed=null!==(d=c.wind.minSpeed)&&void 0!==d?d:3.5,E.maxSpeed=null!==(h=c.wind.maxSpeed)&&void 0!==h?h:4.5,E.direction=null!==(m=E.direction)&&void 0!==m?m:new v.Pa4(1,0,1),k.color1=null!==(p=k.color1)&&void 0!==p?p:8417328,k.color2=null!==(f=k.color2)&&void 0!==f?f:8388608,k.brightness=null!==(g=k.brightness)&&void 0!==g?g:10,k.rotation=null!==(_=k.rotation)&&void 0!==_?_:Math.random()*Math.PI*2,k.rotationSpeed=null!==(y=k.rotationSpeed)&&void 0!==y?y:0,k.emitRate=null!==(x=k.emitRate)&&void 0!==x?x:2048,k.coneAngle=null!==(b=k.coneAngle)&&void 0!==b?b:10,k.duration=null!==(S=k.duration)&&void 0!==S?S:2,k.life=null!==(w=k.life)&&void 0!==w?w:.3,k.particleSize=null!==(T=k.particleSize)&&void 0!==T?T:.1,k.particleGrow=null!==(P=k.particleGrow)&&void 0!==P?P:1,k.atlasIndex=null!==(C=k.atlasIndex)&&void 0!==C?C:-1,k.direction=null!==(R=k.direction)&&void 0!==R?R:void 0,k.force=null!==(M=k.force)&&void 0!==M?M:void 0,c},n}(v.ZAu);var Ii=256,Oi=new v.yGw,Ni=new v.Pa4;var Ui=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a,r,o){var s;return(0,c.Z)(this,n),s=t.call(this,function(){var e=new v.L5s;e.copy(new v.BKK(1,1));var t=new Float32Array((0,Fe.Ef)(Ii,(function(e){return e})));return e.setAttribute("instanceID",new v.lb7(t,t.length/Ii)),e}(),new Be(i,Ii,o)),s.spacing=.005,s.length=2,s.alpha=1,s.rocket=e,s.frustumCulled=!1,s.earth=a,s.offset=null!==r&&void 0!==r?r:new v.Pa4,s}var i=n.prototype;return i.start=function(){this.isEmitting=!0},i.stop=function(){this.isEmitting=!1},i.reset=function(){this.stop(),this.time=0,this.initPos=null,this.geometry.instanceCount=0},i.update=function(e,t){this.earth.updateMatrixWorld(),this.matrix.copy(this.earth.matrixWorld),this.matrixWorldNeedsUpdate=!0;var n=this.material;this.time+=e;var i=n.uniforms;if(i.time.value=this.time,this.isEmitting){var a=this.geometry,r=i.anchorPosition.value;this.rocket.getWorldPos(r).add(this.offset);var o=i.direction.value;o.set(0,-1,0).applyQuaternion(this.rocket.worldQuat),Ni.setFromMatrixColumn(t.matrixWorld,2),i.alpha.value=this.alpha*Math.max(1-Math.abs(Ni.dot(o)),.5),this.initPos||(this.initPos=r.clone(),Oi.copy(this.earth.matrixWorld).invert(),this.earthLaunchPos=r.clone().applyMatrix4(Oi));var s=this.initPos.distanceTo(r);i.launchDir.value.copy(this.earthLaunchPos).applyMatrix4(this.earth.matrixWorld).sub(r).normalize(),a.instanceCount=Ii*Math.min(1,s/this.length),n.updateCamera(t)}},n}(v.Kj0),Zi=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,{vertexShader:"#define GLSLIFY 1\nattribute float spriteOffset;\n\nvarying vec2 vUv;\n\nuniform float spriteIndex;\n\nvoid main() {\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n    #include <project_vertex>\n\n    float offset = floor(spriteIndex + spriteOffset);\n    offset = mod(offset, float(NUM_SPRITES));\n    vUv.x = (uv.x + offset) /  float(NUM_SPRITES);\n    vUv.y = 1.0 - uv.y;\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D map;\n\nvoid main() {\n    gl_FragColor = texture2D(map, vUv);\n}",uniforms:{map:{value:e},spriteIndex:{value:0},rotation:{value:new v.Vkp}},defines:{NUM_SPRITES:e.image.naturalWidth/e.image.naturalHeight},side:v.ehD,transparent:!0,blending:v.Xaj,blendSrcAlpha:v.c8b,blendDstAlpha:Yt.ghN,blendSrc:v.k74,blendDst:Yt.ghN,depthWrite:!1,type:"ExhaustMaterial"}))._numSprites=e.image.naturalWidth/e.image.naturalHeight,i}return n.prototype.update=function(e){this.uniforms.spriteIndex.value=(this.uniforms.spriteIndex.value+30*e)%this._numSprites},n}(v.jyz),zi=Number.POSITIVE_INFINITY,Bi=new v.Pa4,Fi=new v.yGw,Hi=(new v.yGw).makeRotationY(.5*Math.PI),Gi={name:"rocket",drag:0,atlas:void 0,layer:void 0,minY:-2,turbulence:.01,renderOrder:1e3,maxParticles:256,offsets:void 0,wind:{minSpeed:.05,maxSpeed:.1},rocket:{emitRate:256,coneAngle:10,brightness:1,life:1.5,duration:zi,direction:new v.Pa4(0,-1,0),force:100,particleSize:3,particleGrow:10,atlasIndex:0,rotationSpeed:5}},ji={name:"smoke",drag:.01,atlas:void 0,offsets:void 0,blending:v.bdR,layer:void 0,renderOrder:-1,maxParticles:256,minY:-2,turbulence:.004,wind:{minSpeed:.05,maxSpeed:.1},rocket:{emitRate:128,color1:16777215,color2:10526880,coneAngle:20,brightness:.8,life:10,duration:zi,direction:new v.Pa4(0,-1,0),force:100,particleSize:10,particleGrow:2,atlasIndex:1,rotationSpeed:1}},Wi={name:"vent",drag:.002,gravity:1,blending:v.bdR,atlasChannel:2,atlas:void 0,layer:void 0,maxParticles:128,wind:{minSpeed:.01,maxSpeed:.02},rocket:{color1:8421504,color2:10526880,emitRate:32,coneAngle:10,brightness:1,life:3,duration:20,direction:new v.Pa4(-1,-1,0),force:5,force2:3,particleSize:3,particleGrow:2,atlasIndex:1,rotationSpeed:.2}},Vi={name:"bucket",drag:.05,atlas:void 0,maxParticles:256,blending:v.bdR,minY:-8,turbulence:3e-4,layer:void 0,wind:{minSpeed:.05,maxSpeed:.1},rocket:{emitRate:128,color1:3355443,color2:1118481,coneAngle:70,brightness:1,life:2,duration:zi,direction:new v.Pa4(0,.25,2),force:400,particleSize:10,particleGrow:10,atlasIndex:2,rotationSpeed:.5}},Ki={name:"billow",drag:.05,atlas:void 0,maxParticles:256,blending:v.bdR,minY:-1,turbulence:6e-4,layer:void 0,wind:{minSpeed:.05,maxSpeed:.1},rocket:{emitRate:128,color1:3355443,color2:1118481,coneAngle:70,brightness:1,life:2,duration:zi,direction:new v.Pa4(0,-1,0),force:300,particleSize:10,particleGrow:10,atlasIndex:2,rotationSpeed:.5}};Gi.offsets=[],ji.offsets=[];for(var qi=0;qi<6;++qi){var Yi=.5+2*Math.PI*qi/6,Xi=4*Math.cos(Yi),Qi=4*Math.sin(Yi);Gi.offsets.push(new v.Pa4(Xi,Qi,0)),ji.offsets.push(new v.Pa4(Xi,Qi,0))}Gi.offsets.push(new v.Pa4(-2,0,0)),ji.offsets.push(new v.Pa4(-2,0,0)),Gi.offsets.push(new v.Pa4(2,0,0)),ji.offsets.push(new v.Pa4(2,0,0));var Ji=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,c.Z)(this,n),(r=t.call(this))._rocketParticles=[],r._ventParticles=[],r._bucketParticles=[],r._groundParticlesActive=!0,r._rocketParticlesActive=!0,r.exhausts=[],r.name="RocketParticles",r._rocket=e,r._useHeavyPass=o,r._particleEngine=new Di(u.yO.renderer,void 0),r._particleEngine.scaling=.001,r.add(r._particleEngine);var s=u.Ll.textures.get("fire-atlas");if(s.wrapS=v.rpg,s.wrapT=v.rpg,r._depthTex=a,r._contrails=new Ui(e,s,i,new v.Pa4(0,0,0),a),r.add(r._contrails),Gi.atlas=s,ji.atlas=s,Wi.atlas=s,Vi.atlas=s,Ki.atlas=s,o){ji.layer=mt.CustomParticlePass,ji.rocket.brightness=1,Vi.rocket.brightness=10,Ki.rocket.brightness=10,Vi.layer=mt.CustomParticlePass,Ki.layer=mt.CustomParticlePass,r._contrails.layers.set(mt.CustomParticlePass),ji.blending=v.bdR,Vi.blending=v.bdR,Ki.blending=v.bdR;var l=r._contrails.material;l.blending=v.WMw,l.uniforms.brightness.value=.5}return r.initExhaust(),r}var i=n.prototype;return i.ignite=function(){this.disposeRocket(),this.smokeInstance=this._trigger(ji,new v.Pa4(0,0,0),this._rocketParticles,!0),this.smokeInstance.name="smoke",this.rocketInstance=this._trigger(Gi,new v.Pa4(0,0,0),this._rocketParticles,!1),this.rocketInstance.name="rocket"},i.launch=function(){this.disposeBucket(),this._contrails.reset(),this._contrails.start(),this._trigger(Vi,new v.Pa4(-90,-35,90),this._bucketParticles,!0).name="bucket",this._trigger(Ki,new v.Pa4(-93,-35,19),this._bucketParticles,!0).name="billow"},i.stopBurn=function(){this._rocketParticles.forEach((function(e){return e.emit=!1})),this.exhaustMesh.visible=!1},i.initDebug=function(){var e=this,t=(0,u.Ae)("Particles");return(0,u.V6)(t,"Restart",(function(){e.restart()})),(0,u.V6)(t,"Stop Vents",(function(){e.stopVents()})),t},i.restart=function(){this.dispose()},i.startExhausts=function(){this.exhaustMesh.visible=!0},i.startVents=function(){this.disposeVents(),this.ventInstance=this._trigger(Wi,new v.Pa4(0,0,0),this._ventParticles,!0),this.ventInstance.name="vent1",this.ventInstance2=this._trigger(Wi,new v.Pa4(0,0,0),this._ventParticles,!0),this.ventInstance2.name="vent2"},i.stopVents=function(){this.ventInstance&&(this.ventInstance.emit=!1),this.ventInstance2&&(this.ventInstance2.emit=!1)},i.update=function(e,t){var n,i,a,r,o=this;this._particleEngine.update(e,t),this._contrails.update(e,t);var s=this._rocket.getWorldPos(Bi).multiplyScalar(1e3),l=this._rocket.worldQuat;null===(n=this.rocketInstance)||void 0===n||n.position.set(0,-4,0).applyQuaternion(l).add(s),null===(i=this.smokeInstance)||void 0===i||i.position.set(0,-6,0).applyQuaternion(l).add(s),null===(a=this.ventInstance)||void 0===a||a.position.set(0,40,0).applyQuaternion(l).add(s),null===(r=this.ventInstance2)||void 0===r||r.position.set(0,55,0).applyQuaternion(l).add(s),Bi.set(0,-1,0).applyQuaternion(l),Gi.rocket.direction.copy(Bi),ji.rocket.direction.copy(Bi),this.exhausts.forEach((function(e){return o.updateExhaust(e.object3D,e.index,e.offsetY)})),this.exhaustMesh.material.update(e)},i.dispose=function(){this.disposeVents(),this.disposeRocket(),this.disposeBucket(),this._contrails.reset()},i.disposeVents=function(){this._ventParticles.concat().forEach((function(e){return e.dispose()})),this._ventParticles=[]},i.disposeRocket=function(){this._rocketParticles.concat().forEach((function(e){return e.dispose()})),this._rocketParticles=[]},i.disposeBucket=function(){this._bucketParticles.concat().forEach((function(e){return e.dispose()})),this._bucketParticles=[]},i._trigger=function(e,t,n,i){var a=this._particleEngine.launch(e,t,i?this._depthTex:void 0);return a.onDestroyed.bind(this._onDestroyed,this),n.push(a),a},i._onDestroyed=function(e){this._remove(e,this._ventParticles)||this._remove(e,this._bucketParticles)||this._remove(e,this._rocketParticles)},i._remove=function(e,t){var n=t.indexOf(e);return n>=0&&((0,Fe.LW)(t,n),!0)},i.initExhaust=function(){var e=this,t=0,n=[];this._rocket.traverse((function(i){var a="booster_"===i.name.substr(0,8);if(a||"root"===i.name.substr(0,5)){var r=a?-3:-.2;e.exhausts.push({index:t,object3D:i,offsetY:r}),n.push(fe(0,16)),t+=2}}));var i=(new v.L5s).copy(new v.BKK(10,20));i.translate(0,-10,0),i.setAttribute("spriteOffset",new v.lb7(new Float32Array(n),1,!1,2));var a=new v.SPe(i,new Zi(u.Ll.textures.get("exhaust-sheet")),16);a.name="exhaust",a.count=t,this.add(a),a.visible=!1,this.exhaustMesh=a},i.updateExhaust=function(e,t,n){e.getWorldScale(Bi),Fi.makeScale(.001/Bi.x,.001/Bi.y,.001/Bi.z),Fi.premultiply(e.matrixWorld),Bi.set(0,n,0),Bi.applyMatrix4(Fi),Fi.setPosition(Bi),this.exhaustMesh.setMatrixAt(t,Fi),Fi.multiply(Hi),this.exhaustMesh.setMatrixAt(t+1,Fi),this.exhaustMesh.instanceMatrix.needsUpdate=!0},(0,J.Z)(n,[{key:"groundParticlesActive",get:function(){return this._groundParticlesActive},set:function(e){this._groundParticlesActive=e,this._bucketParticles.forEach((function(t){return t.visible=e}))}},{key:"rocketParticlesActive",get:function(){return this._rocketParticlesActive},set:function(e){this._rocketParticlesActive=e,this._rocketParticles.forEach((function(t){return t.visible=e}))}},{key:"exhaust",get:function(){return this.exhaustMesh}},{key:"contrailAlpha",get:function(){return this._contrails.alpha},set:function(e){this._contrails.alpha=e}}]),n}(v.Tme),$i=new v.BKK(2,2),ea=new v.Pa4,ta=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,c.Z)(this,n),(e=t.call(this)).speed=3,e.opacity=1,e.layedDelay=.5;var i=new v.vBJ({color:5468628,transparent:!0,depthFunc:v.Se2,depthWrite:!1,alphaMap:u.Ll.textures.get("cloud-rush")});return e.name="CloudRush",e._top0=new v.Kj0($i,i),e._top0.name="top0",e._top0.position.y=1,e._bottom0=new v.Kj0($i,i),e._bottom0.name="bottom0",e._bottom0.position.y=-1,e._top0.position.z=-.25,e._bottom0.position.z=-.25,e._bottom0.renderOrder=e._top0.renderOrder=1e4,e._top1=e._top0.clone(),e._top1.name="top1",e._bottom1=e._bottom0.clone(),e._bottom1.name="bottom1",e._top1.position.z=-.5,e._bottom1.position.z=-.5,e.add(e._top0),e.add(e._top1),e.add(e._bottom0),e.add(e._bottom1),e}return n.prototype.update=function(e,t){var n=this;if(this.visible){[this._top0.material,this._top1.material,this._bottom0.material,this._bottom1.material].forEach((function(e){e.opacity=n.opacity})),t.getWorldPosition(this.position),t.getWorldQuaternion(this.quaternion),this.position.addScaledVector(t.getWorldDirection(ea),t.near+.1);var i=e*this.speed;for(this._top0.position.y-=i,this._bottom0.position.y-=i;this._bottom0.position.y<-2;){this._bottom0.position.y=this._top0.position.y+2;var a=this._top0;this._top0=this._bottom0,this._bottom0=a}var r=i*this.layedDelay;for(this._top1.position.y-=r,this._bottom1.position.y-=r;this._bottom1.position.y<-2;){this._bottom1.position.y=this._top1.position.y+2;var o=this._top1;this._top1=this._bottom1,this._bottom1=o}}},n}(v.ZAu),na=n(95566),ia=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,c.Z)(this,n),(e=t.call(this)).timeOffset=10,e.worldQuat=new v._fP,e.centerPos=new v.Pa4,e.localCenterPos=new v.Pa4,e._boosters=[],e.name="RocketContainer",e.frustumCulled=!1,e.position.set(7e-4,0,-.0012),e.scale.setScalar(.1);var i=u.Ll.custom.get("rocket");return e.rocketGLTF=(0,na.d9)(i.scene),e.rocketGLTF.traverse((function(t){t.frustumCulled=!1,t.renderOrder=5e3,"booster_02"!==t.name&&"booster_04"!==t.name&&"booster_06"!==t.name||e._boosters.push({obj:t,prevMat:new v.yGw,currMat:new v.yGw,changeMat:null})})),e.rocketGLTF.name="rocket",e.add(e.rocketGLTF),e.rocketMesh=e.rocketGLTF.getObjectByName("rocketMain"),e.boostersMesh=e.rocketGLTF.getObjectByName("rocketBoosters"),e.rootBone=e.rocketGLTF.getObjectByName("root"),e.initQuat=e.rootBone.quaternion.clone().invert(),e.rocketPlayer=new ze("rocket"),e.rocketPlayer.setGLTF(i,e.rocketGLTF),e.rocketPlayer.play("Animation"),e.localCenterPos.set(0,30,0),e}var i=n.prototype;return i.initDebug=function(){var e=this,t={scale:this.scale.x},n=(0,u.Ae)("Rocket");(0,u.Zp)(n,t,"scale",{min:0,max:1,step:.001,onChange:function(t){console.log(t),e.scale.setScalar(t)}}),(0,u.Zp)(n,this,"rotation",{x:{min:-Math.PI,max:Math.PI},y:{min:-Math.PI,max:Math.PI},z:{min:-Math.PI,max:Math.PI}}),(0,u.Zp)(n,this,"timeOffset",{min:0,max:50}),(0,u.Zp)(n,this,"visible"),this.rocketPlayer.initDebug()},i.dispose=function(){},i.update=function(){this.rocketPlayer.update(0),this.centerPos.copy(this.localCenterPos).applyMatrix4(this.rootBone.matrixWorld),this.worldQuat.multiplyQuaternions(this.initQuat,this.rootBone.quaternion),this.rocketPlayer.time<33?this._updateBoosterChange():33===this.rocketPlayer.time&&this._applyBoosterChange()},i.restart=function(){this._boosters.forEach((function(e){e.changeMat=null})),this.showBaseAO(),this.rocketPlayer.time=0},i.showBaseAO=function(){this.boostersMesh.visible=!0},i.showSpaceAO=function(){this.boostersMesh.visible=!1},i.getWorldPos=function(e){return this.rootBone.getWorldPosition(null!==e&&void 0!==e?e:new v.Pa4)},i._updateBoosterChange=function(){this._boosters.forEach((function(e){e.prevMat.copy(e.currMat),e.currMat.copy(e.obj.matrix),e.changeMat=null}))},i._applyBoosterChange=function(){this._boosters.forEach((function(e){e.changeMat||(e.changeMat=e.prevMat.invert().multiply(e.currMat)),e.obj.matrix.premultiply(e.changeMat),e.obj.matrix.decompose(e.obj.position,e.obj.quaternion,e.obj.scale)}))},(0,J.Z)(n,[{key:"time",get:function(){return this.rocketPlayer.time},set:function(e){this.rocketPlayer.time=e}}]),n}(v.Tme);ia.offset=new v.Pa4(-.00926917850971222,0,-.0018378633260726928);var aa=new v.Tme,ra=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,c.Z)(this,n),(i=t.call(this)).updateHotspots=!1,i.rotationWeight=0,i._rotateX=20,i._rotateY=20,i.show=function(){i.showHotspots()},i.hide=function(){i.hideHotspots()},i.showHotspots=function(){i.updateHotspots=!0},i.hideHotspots=function(){i.updateHotspots=!1,L.Z.dispatchEvent({type:D.zW.HOTSPOT_HIDE})},i.name="".concat(e.modelName,"_container"),i.visible=!1,i.container=new v.Tme,i.container.name="container",i.container.rotation.set(3.49,3.56,2.8),i.add(i.container);var r=u.Ll.custom.get(e.modelName);return i.model=r.scene.clone(),i.model.name=e.modelName,i.container.add(i.model),i.hotspots=new v.Tme,i.hotspots.name="hotspots",i.container.add(i.hotspots),e.hotspots.forEach((function(e){var t=new v.Tme;t.name=e.name,t.position.set(e.position[0],e.position[1],e.position[2]),i.hotspots.add(t)})),a&&(i.light0=new v.cek(15199132,1,.3),i.light0.name="satelliteLight0",i.light0.position.set(.178,-.022,-.055),i.add(i.light0),i.light1=new v.cek(15199132,1,.2),i.light1.name="satelliteLight1",i.light1.position.set(.064,.032,.019),i.add(i.light1),i.light2=new v.cek(15199132,1,.5),i.light2.name="satelliteLight2",i.light2.position.set(.305,.171,-.349),i.add(i.light2)),i}var i=n.prototype;return i.initDebug=function(e){var t=this,n={scale:this.scale.x,rotation:{x:(0,zn.ZY)(this.model.rotation.x),y:(0,zn.ZY)(this.model.rotation.y),z:(0,zn.ZY)(this.model.rotation.z)}};this.debugFolder=(0,u.Ae)(this.model.name,e),(0,u.V6)(this.debugFolder,"Show",this.show),(0,u.V6)(this.debugFolder,"Hide",this.hide),(0,u.V6)(this.debugFolder,"Show Hotspots",this.showHotspots),(0,u.V6)(this.debugFolder,"Hide Hotspots",this.hideHotspots),(0,u.Zp)(this.debugFolder,this,"position"),(0,u.Zp)(this.debugFolder,this,"_rotateX",{min:-45,max:45,label:"Max Rotate X"}),(0,u.Zp)(this.debugFolder,this,"_rotateY",{min:-45,max:45,label:"Max Rotate Y"}),(0,u.Zp)(this.debugFolder,n,"scale",{min:0,max:1,label:"Scale",onChange:function(e){t.scale.setScalar(e)}}),(0,u.Zp)(this.debugFolder,n,"rotation",{x:{min:-270,max:270,step:1},y:{min:-270,max:270,step:1},z:{min:-270,max:270,step:1},onChange:function(e){t.model.rotation.set((0,zn.Id)(e.x),(0,zn.Id)(e.y),(0,zn.Id)(e.z))}}),(0,u.V6)(this.debugFolder,"Log Transform",(function(){var e=new v.Pa4,n=new v._fP;t.getWorldPosition(e),t.getWorldQuaternion(n),console.log("pos:",e),console.log("quat:",n)}))},i.dispose=function(){var e;this.hideHotspots(),null===(e=this.debugFolder)||void 0===e||e.dispose()},i.update=function(e){if(this.visible){var t=.9*this.rotationWeight,n=(0,zn.Id)(this._rotateX),i=(0,zn.Id)(this._rotateY);if(aa.rotation.x=(0,zn.t7)(-n,n,te.normal.y),aa.rotation.y=(0,zn.t7)(-i,i,te.normal.x),this.rotation.x=(0,u.u1)(this.rotation.x,aa.rotation.x,t,e),this.rotation.y=(0,u.u1)(this.rotation.y,aa.rotation.y,t,e),this.updateHotspots){var a=this.getHotspots();L.Z.dispatchEvent({type:D.zW.HOTSPOT_UPDATE,value:a})}}},i.getHotspots=function(){var e=this;if(this.camera){var t=[];return this.hotspots.children.forEach((function(n){var i=le(n,e.camera);i.x=Math.round(i.x),i.y=Math.round(i.y),t.push({point:i,name:n.name})})),t}return[]},(0,J.Z)(n,[{key:"lightIntensity",set:function(e){void 0!==this.light0&&(this.light0.intensity=.75*e,this.light1.intensity=.25*e,this.light2.intensity=.5*e)}},{key:"lightVisibility",set:function(e){void 0!==this.light0&&(this.light0.visible=e,this.light1.visible=e,this.light2.visible=e)}}]),n}(v.Tme),oa=1/6,sa=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,c.Z)(this,n),(e=t.call(this,u.yC.clone(),new v.vBJ({fog:!0,transparent:!0,alphaTest:.1}))).time=10*Math.random(),e.yPosition=new v.FM8;var i="birdsFlying"+(Math.random()<.5?"":"2"),a=u.Ll.textures.get(i);return a.repeat.setScalar(1/6),e.material.map=a,e.texture=a,e.resetAnimation(),e}var i=n.prototype;return i.resetAnimation=function(){this.scale.setScalar((0,u.MX)(.005,.01)),this.radius=(0,u.MX)(.2,.3),this.speed=(0,u.MX)(.75,1.25),this.time=(0,u.MX)(0,30),this.yPosition.x=(0,u.MX)(0,.1),this.yPosition.y=(0,u.MX)(.17,.23)},i.update=function(e,t){this.time+=e*this.speed;var n=Math.floor(30*this.time)%33,i=n%6,a=Math.floor(n/6);this.texture.offset.x=i*oa,this.texture.offset.y=1-a*oa-1/6;var r=-.2*this.time;this.position.x=Math.cos(r)*this.radius,this.position.y=Math.sin(.1*this.time)*this.yPosition.x+this.yPosition.y,this.position.z=Math.sin(r)*this.radius,this.position.add(ia.offset),this.lookAt(t.position)},n}(v.Kj0),la=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,c.Z)(this,n),(e=t.call(this)).name="birds",e.visible=!1;for(var i=Math.round((0,u.MX)(3,5)),a=0;a<i;a++){var r=new sa;r.name="bird_".concat(a),e.add(r)}return e}return n.prototype.update=function(e,t){this.children.forEach((function(n){n.update(e,t)}))},n}(v.Tme),ua=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).inited=!1,e.loaded=!1,e.currentTime=0,e.raycaster=new v.iMs,e.enable=function(){e.commands.addEventListener(u.Ry.COMMAND,e.onCommand),e.commands.enable()},e.disable=function(){e.commands.removeEventListener(u.Ry.COMMAND,e.onCommand),e.commands.disable()},e.show=function(t){e.inited&&!e.visible&&e.loaded&&(ne.ZP.to(e.light,{intensity:1,duration:3,ease:"power1.inOut"}),t?(e.position.set(0,-.12,-.08),e.scale.setScalar(6e-5),ne.ZP.to(e.position,{y:-.006,duration:3,ease:"power1.inOut"})):(e.position.set(0,-.01,-.015),e.scale.setScalar(1e-5),ne.ZP.to(e.position,{y:-.0015,duration:3,ease:"power1.inOut"})),e.visible=!0,u.yO.canvas.addEventListener("click",e.onClick,!1))},e.hide=function(){e.visible&&(u.yO.canvas.removeEventListener("click",e.onClick),e.visible=!1)},e.onCommand=function(){e.inited=!0,e.disable(),e.preload()},e.preload=function(){u._m.loadGLTF("/models/cod.gltf","cod").then((function(t){var n=t.scene.clone();n.name="codGLTF",e.add(n);var i=n.getObjectByName("logo-logo").material;i.map.wrapS=v.uWy,i.map.wrapT=v.uWy,i.map.needsUpdate=!0;var a=n.getObjectByName("stand-sticker").material;a.aoMap.wrapS=v.uWy,a.aoMap.wrapT=v.uWy,a.aoMap.needsUpdate=!0,a.aoMapIntensity=5,e.loaded=!0;var r=(0,u.vX)(33,37,e.currentTime);(r||(0,u.vX)(43,44,e.currentTime))&&e.show(r)}))},e.onClick=function(t){var n=new v.FM8;n.x=t.clientX/u.yO.width*2-1,n.y=-t.clientY/u.yO.height*2+1,e.raycaster.setFromCamera(n,e.camera),e.raycaster.intersectObjects(e.children).length>0&&window.open("https://www.youtube.com/watch?v=47Fh1sza-Ec")},e.name="COD",e.light=new v.cek(16777215,0),e.light.name="codLight",e.light.position.set(-500,500,500),e.add(e.light),e.commands=new u.Ry,e.commands.add("COD","callofduty".split("")),e.hide(),e}return n.prototype.update=function(e){this.currentTime=e},n}(v.Tme),ca=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,c.Z)(this,n),i=t.call(this,{vertexShader:"#define GLSLIFY 1\n#define STANDARD\n\nvarying vec3 vViewPosition;\nvarying vec3 vSplatBlend;\n\n#ifdef USE_TRANSMISSION\n\nvarying vec3 vWorldPosition;\n\n#endif\n\nattribute vec3 color;\n\n#include <common>\nvarying vec2 vUv;\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n#ifdef BAKED_MAP\nattribute vec2 uv2;\nvarying vec2 vUv2;\n#endif\n\nvoid main() {\n\n    vUv = uv;\n\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <morphcolor_vertex>\n\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n    #include <normal_vertex>\n\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n\n    vViewPosition = - mvPosition.xyz;\n\n    #include <worldpos_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n\n    #ifdef USE_TRANSMISSION\n\n    vWorldPosition = worldPosition.xyz;\n\n    #endif\n\n    vSplatBlend = color;\n\n    #ifdef BAKED_MAP\n    vUv2 = uv2;\n    #endif\n}",fragmentShader:"#define GLSLIFY 1\n#define STANDARD\n\n#ifdef PHYSICAL\n#define IOR\n#define SPECULAR\n#endif\n\nuniform vec3 splatTilings;\nvarying vec3 vSplatBlend;\nuniform sampler2D splat0;\nuniform sampler2D splat1;\nuniform sampler2D splat2;\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef IOR\nuniform float ior;\n#endif\n\n#ifdef SPECULAR\nuniform float specularIntensity;\nuniform vec3 specularColor;\n\n#ifdef USE_SPECULARINTENSITYMAP\nuniform sampler2D specularIntensityMap;\n#endif\n\n#ifdef USE_SPECULARCOLORMAP\nuniform sampler2D specularColorMap;\n#endif\n#endif\n\n#ifdef USE_CLEARCOAT\nuniform float clearcoat;\nuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_IRIDESCENCE\nuniform float iridescence;\nuniform float iridescenceIOR;\nuniform float iridescenceThicknessMinimum;\nuniform float iridescenceThicknessMaximum;\n#endif\n\n#ifdef USE_SHEEN\nuniform vec3 sheenColor;\nuniform float sheenRoughness;\n\n#ifdef USE_SHEENCOLORMAP\nuniform sampler2D sheenColorMap;\n#endif\n\n#ifdef USE_SHEENROUGHNESSMAP\nuniform sampler2D sheenRoughnessMap;\n#endif\n#endif\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\nvarying vec2 vUv;\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nuniform sampler2D bakedMap;\nvarying vec2 vUv2;\n\nvec4 applySplat(vec4 color, sampler2D splat, int index)\n{\n    vec4 splatCol = texture2D(splat, vUv * splatTilings[index]);\n    return mix(color, splatCol, vSplatBlend[index]);\n}\n\nvoid main() {\n\n    #include <clipping_planes_fragment>\n\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n\n    #ifdef USE_SPLAT_0\n    diffuseColor = applySplat(diffuseColor, splat0, 0);\n    #endif\n    #ifdef USE_SPLAT_1\n    diffuseColor = applySplat(diffuseColor, splat1, 1);\n    #endif\n    #ifdef USE_SPLAT_2\n    diffuseColor = applySplat(diffuseColor, splat2, 2);\n    #endif\n\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <roughnessmap_fragment>\n    #include <metalnessmap_fragment>\n    #include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n    #include <emissivemap_fragment>\n\n    // accumulation\n    #include <lights_physical_fragment>\n    #include <lights_fragment_begin>\n    #include <lights_fragment_maps>\n    #include <lights_fragment_end>\n\n    // modulation\n    #include <aomap_fragment>\n\n    #ifdef BAKED_MAP\n    vec4 bake = texture2D(bakedMap, vUv2);\n    #else\n    vec4 bake = vec4(1.0);\n    #endif\n    vec3 totalDiffuse = reflectedLight.directDiffuse * bake.x + reflectedLight.indirectDiffuse * bake.y;\n    vec3 totalSpecular = reflectedLight.directSpecular * bake.x + reflectedLight.indirectSpecular * bake.y;\n\n    #include <transmission_fragment>\n\n    vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\n    #ifdef USE_SHEEN\n\n    // Sheen energy compensation approximation calculation can be found at the end of\n    // https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\n    float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\n    outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\n    #endif\n\n    #ifdef USE_CLEARCOAT\n\n    float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n    vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\n    outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\n    #endif\n\n    #include <output_fragment>\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}",uniforms:{splat0:{value:null},splat1:{value:null},splat2:{value:null},splatTilings:{value:new Float32Array(3)},bakedMap:{value:e}},defines:{},fog:!0,type:"TerrainMaterial"}),e&&(i.defines.BAKED_MAP=""),i}var i=n.prototype;return i.enableSplat=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.wrapS=v.rpg,t.wrapT=v.rpg,this.uniforms["splat"+e].value=t,this.uniforms.splatTilings.value[e]=n,this.defines["USE_SPLAT_"+e]=""},i.disableSplat=function(e){this.uniforms["splat"+e].value=null,delete this.defines["USE_SPLAT_"+e]},(0,J.Z)(n,[{key:"normalStrength",get:function(){return this.normalScale.x},set:function(e){this.normalScale.set(e,e)}}]),n}(de),da=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i){var a;return(0,c.Z)(this,n),(a=t.call(this,{vertexShader:"#define GLSLIFY 1\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifdef USE_TRANSMISSION\n\nvarying vec3 vWorldPosition;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nattribute vec2 uv2;\nvarying vec2 vUv2;\n\nvoid main() {\n\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <morphcolor_vertex>\n\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n    #include <normal_vertex>\n\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <displacementmap_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n\n    vViewPosition = - mvPosition.xyz;\n\n    #include <worldpos_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n\n    #ifdef USE_TRANSMISSION\n\n    vWorldPosition = worldPosition.xyz;\n\n    #endif\n\n    vUv2 = uv2;\n}",fragmentShader:"#define GLSLIFY 1\n#define STANDARD\n\n#ifdef PHYSICAL\n#define IOR\n#define SPECULAR\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef IOR\nuniform float ior;\n#endif\n\n#ifdef SPECULAR\nuniform float specularIntensity;\nuniform vec3 specularColor;\n\n#ifdef USE_SPECULARINTENSITYMAP\nuniform sampler2D specularIntensityMap;\n#endif\n\n#ifdef USE_SPECULARCOLORMAP\nuniform sampler2D specularColorMap;\n#endif\n#endif\n\n#ifdef USE_CLEARCOAT\nuniform float clearcoat;\nuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_IRIDESCENCE\nuniform float iridescence;\nuniform float iridescenceIOR;\nuniform float iridescenceThicknessMinimum;\nuniform float iridescenceThicknessMaximum;\n#endif\n\n#ifdef USE_SHEEN\nuniform vec3 sheenColor;\nuniform float sheenRoughness;\n\n#ifdef USE_SHEENCOLORMAP\nuniform sampler2D sheenColorMap;\n#endif\n\n#ifdef USE_SHEENROUGHNESSMAP\nuniform sampler2D sheenRoughnessMap;\n#endif\n#endif\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\nvarying vec2 vUv2;\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nuniform sampler2D bakedMap;\n\nvoid main() {\n\n    #include <clipping_planes_fragment>\n\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <roughnessmap_fragment>\n    #include <metalnessmap_fragment>\n    #include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n    #include <emissivemap_fragment>\n\n    // accumulation\n    #include <lights_physical_fragment>\n    #include <lights_fragment_begin>\n    #include <lights_fragment_maps>\n    #include <lights_fragment_end>\n\n    // modulation\n    #include <aomap_fragment>\n\n    vec4 bake = texture2D(bakedMap, vUv2);\n    vec3 totalDiffuse = reflectedLight.directDiffuse * bake.x + reflectedLight.indirectDiffuse * bake.y;\n    vec3 totalSpecular = reflectedLight.directSpecular * bake.x + reflectedLight.indirectSpecular * bake.y;\n\n    #include <transmission_fragment>\n\n    vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\n    #ifdef USE_SHEEN\n\n    // Sheen energy compensation approximation calculation can be found at the end of\n    // https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\n    float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\n    outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\n    #endif\n\n    #ifdef USE_CLEARCOAT\n\n    float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n    vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\n    outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\n    #endif\n\n    #include <output_fragment>\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}",uniforms:{bakedMap:{value:i}},fog:!0,type:"LightMappedMaterial"})).fromStandardMaterial(e),a}return n}(de),ha=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;(0,c.Z)(this,n);var a=v.rDY.merge([e.uniforms,v.Vj0.lambert.uniforms]);for(var r in e.uniforms)a[r].value=e.uniforms[r].value;return e.vertexShader="#define GLSLIFY 1\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\nvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <morphcolor_vertex>\n\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    #include <defaultnormal_vertex>\n\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <lights_lambert_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n}",e.fragmentShader="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\nvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n    #include <clipping_planes_fragment>\n\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #include <emissivemap_fragment>\n\n    // accumulation\n\n    #ifdef DOUBLE_SIDED\n\n    reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n    #else\n\n    reflectedLight.indirectDiffuse += vIndirectFront;\n\n    #endif\n\n    #include <lightmap_fragment>\n\n    reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\n    #ifdef DOUBLE_SIDED\n\n    reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n    #else\n\n    reflectedLight.directDiffuse = vLightFront;\n\n    #endif\n\n    reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n    // modulation\n\n    #include <aomap_fragment>\n\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n    #include <envmap_fragment>\n\n    #include <output_fragment>\n    gl_FragColor.rgb *= gl_FragColor.a;\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}",e.uniforms=a,e.lights=!0,e.type="TreeMaterial",(i=t.call(this)).uniforms=e.uniforms,i.defines=e.defines,i.setValues(e),i.opacity=1,i._morphTargets=!1,i._morphNormals=!1,i._useInstancing=!1,i}return n.prototype.fromStandardMaterial=function(e){this.map=e.map,this.color=e.color,this.opacity=e.opacity,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive=e.emissive,this.emissiveMap=e.emissiveMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.transparent=e.transparent,this.blending=e.blending,this.vertexColors=e.vertexColors},(0,J.Z)(n,[{key:"color",get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value.set(e)}},{key:"opacity",get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms&&(this.uniforms.opacity.value=e)}},{key:"map",get:function(){return this.uniforms.map.value},set:function(e){this.needsUpdate=!!this.uniforms.map.value!==!!e,this.uniforms.map.value=e}},{key:"lightMap",get:function(){return this.uniforms.lightMap.value},set:function(e){this.needsUpdate=!!this.uniforms.lightMap.value!==!!e,this.uniforms.lightMap.value=e}},{key:"lightMapIntensity",get:function(){return this.uniforms.lightMapIntensity.value},set:function(e){this.uniforms.lightMapIntensity.value=e}},{key:"aoMap",get:function(){return this.uniforms.aoMap.value},set:function(e){this.needsUpdate=!!this.uniforms.aoMap.value!==!!e,this.uniforms.aoMap.value=e}},{key:"aoMapIntensity",get:function(){return this.uniforms.aoMapIntensity.value},set:function(e){this.uniforms.aoMapIntensity.value=e}},{key:"emissive",get:function(){return this.uniforms.emissive.value},set:function(e){this.uniforms.emissive.value.set(e)}},{key:"emissiveMap",get:function(){return this.uniforms.emissiveMap.value},set:function(e){this.needsUpdate=!!this.uniforms.emissiveMap.value!==!!e,this.uniforms.emissiveMap.value=e}},{key:"alphaMap",get:function(){return this.uniforms.alphaMap.value},set:function(e){this.needsUpdate=!!this.uniforms.alphaMap.value!==!!e,this.uniforms.alphaMap.value=e}},{key:"envMap",get:function(){return this.uniforms.envMap.value},set:function(e){if(this.needsUpdate=!!this.uniforms.envMap.value!==!!e,this.uniforms.envMap.value=e,e)if(Array.isArray(e.image)){var t=e.image[0].naturalWidth,n=e.image[0].naturalHeight;this.uniforms.maxMipLevel.value=Math.log2(Math.max(t,n))}else{var i=e.image.width,a=e.image.height;this.uniforms.maxMipLevel.value=Math.log2(Math.max(i,a))}}},{key:"envMapIntensity",get:function(){return this.uniforms.envMapIntensity.value},set:function(e){this.uniforms.envMapIntensity.value=e}},{key:"skinning",get:function(){return this._skinning},set:function(e){this._skinning!==e&&(this.needsUpdate=!0),this._skinning=e}},{key:"morphTargets",get:function(){return this._morphTargets},set:function(e){this._morphTargets!==e&&(this.needsUpdate=!0),this._morphTargets=e}},{key:"morphNormals",get:function(){return this._morphNormals},set:function(e){this._morphNormals!==e&&(this.needsUpdate=!0),this._morphNormals=e}}]),n}(v.jyz),ma=new v.Ilk,pa=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a){var r;(0,c.Z)(this,n);var o=u.Ll.textures.get("heatwave"),s=new v.jyz({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vViewDir;\nvarying vec2 vHeatwaveUv1;\nvarying vec2 vHeatwaveUv2;\n\nuniform mat4 unproject;\nuniform vec2 heatwaveScale;\nuniform vec2 heatwaveOffset1;\nuniform vec2 heatwaveOffset2;\n\nvec3 getFrustumVector(vec2 position, mat4 unprojectionMatrix)\n{\n    vec4 unprojNear = unprojectionMatrix * vec4(position, -1.0, 1.0);\n    vec4 unprojFar = unprojectionMatrix * vec4(position, 1.0, 1.0);\n    return unprojFar.xyz/unprojFar.w - unprojNear.xyz/unprojNear.w;\n}\n\nvoid main()\n{\n    gl_Position = vec4(position, 1.0);\n    vUv = uv;\n    vViewDir = getFrustumVector(uv.xy * 2.0 - 1.0, unproject);\n    vHeatwaveUv1 = uv * heatwaveScale;\n    vHeatwaveUv2 = vHeatwaveUv1;\n    vHeatwaveUv1 += heatwaveOffset1;\n    vHeatwaveUv2 += heatwaveOffset2;\n}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vHeatwaveUv1;\nvarying vec2 vHeatwaveUv2;\nvarying vec3 vViewDir;\n\nuniform sampler2D inputBuffer;\nuniform sampler2D particleBuffer;\nuniform sampler2D heatwaveMap;\nuniform vec3 sunDir;\nuniform vec3 sunColor;\nuniform vec3 shadowColor;\nuniform vec3 smokeColor;\nuniform vec2 pixelSize;\nuniform vec3 absorbtion;\nuniform float heatDistortion;\nuniform float backscattering;\n\nfloat hg(float g, float cosAngle)\n{\n    float g2 = g * g;\n    return 0.5 * (1.0 - g2) / pow(1.0 + g2 - 2.0 * g * cosAngle, 1.5);\n}\n\nvoid main()\n{\n    vec3 viewDir = normalize(vViewDir);\n    float VdotL = -dot(sunDir, viewDir);\n    vec4 particles = texture2D(particleBuffer, vUv);\n    float particleAmount = particles.a;\n    vec3 normal = normalize(vec3(particles.xy * 2.0 - 1.0, -1.0));\n\n    vec2 heatwave1 = texture2D(heatwaveMap, vHeatwaveUv1).xy;\n    vec2 heatwave2 = texture2D(heatwaveMap, vHeatwaveUv2).xy;\n    vec2 heatwave = mix(heatwave1, heatwave2, 0.5) * 2.0 - 1.0;\n    float amount = heatDistortion * smoothstep(0.0, 0.03, particleAmount);\n    vec2 dist = amount * heatwave;\n\n    vec4 color = texture2D(inputBuffer, vUv + dist);\n    color.rgb = pow(color.rgb, vec3(2.2));\n\n//    vec3 inscatter = (sunColor * hg(backscattering, VdotL) + ambient) * particles.rgb;\n\n    const float wrap = 0.4;\n    float lDotN = -dot(sunDir, normal);\n    float wrapped = max((lDotN + wrap) / (1.0 - wrap), 0.0);\n    vec3 smoke = mix(shadowColor, sunColor, wrapped) * particles.b;\n\n    float alpha = smoothstep(0.0, 0.4, particleAmount);\n    vec3 inScatter = max(-lDotN, 0.0) * exp(-particleAmount * absorbtion) * sunColor;\n    gl_FragColor.rgb = mix(color.rgb, (smoke + inScatter) * smokeColor, alpha);\n    gl_FragColor.rgb = pow(gl_FragColor.rgb, vec3(1.0 / 2.2));\n    gl_FragColor.a = color.a;\n}",uniforms:{inputBuffer:{value:null},particleBuffer:{value:null},unproject:{value:new v.yGw},sunDir:{value:new v.Pa4},sunColor:{value:new v.Ilk},absorbtion:{value:new v.Pa4(2,1.7,1.5).multiplyScalar(.2)},shadowColor:{value:new v.Ilk(7437003).convertSRGBToLinear()},smokeColor:{value:new v.Ilk(5267568).convertSRGBToLinear()},pixelSize:{value:new v.FM8},heatDistortion:{value:.01},heatwaveMap:{value:o},heatwaveScale:{value:new v.FM8},heatwaveOffset1:{value:new v.FM8(.7,.2)},heatwaveOffset2:{value:new v.FM8(.4,0)},backscattering:{value:-.2}},depthTest:!1,depthWrite:!1,type:"HeavyParticlePass"});return r=t.call(this,s),o.wrapS=v.rpg,o.wrapT=v.rpg,r.sun=i,r.object=e,r.camera=a,r.needsSwap=!0,r.fbo=new v.dd2(window.innerWidth,window.innerHeight,{depthBuffer:!1,stencilBuffer:!1,type:y.o.getTexTypeHalfOrFloatOrAny()}),s.uniforms.particleBuffer.value=r.fbo.texture,r}var i=n.prototype;return i.updateCamera=function(e){this.camera=e},i.setSize=function(e,t){var n=this.fullscreenMaterial.uniforms;n.heatwaveScale.value.set(e/128,t/256),n.pixelSize.value.set(1/e,1/t),this.fbo.setSize(e,t)},i.render=function(e,t,i,a,r){var o=this.fullscreenMaterial.uniforms,s=e.autoClear,l=this.camera,u=l.layers.mask,c=e.getClearAlpha();e.autoClear=!0,e.getClearColor(ma),e.setClearColor(0),e.setClearAlpha(0),o.heatwaveOffset1.value.y+=.04,o.heatwaveOffset2.value.y-=.028,o.unproject.value.copy(l.projectionMatrixInverse),this.sun.getWorldPosition(o.sunDir.value).transformDirection(l.matrixWorldInverse).normalize(),o.sunColor.value.set(this.sun.color).multiplyScalar(3.14*this.sun.intensity),this.object.visible=!0,l.layers.set(mt.CustomParticlePass),e.setRenderTarget(this.fbo),e.render(this.object,l),l.layers.mask=u,e.autoClear=s,e.setClearColor(ma),e.setClearAlpha(c),(0,d.Z)((0,h.Z)(n.prototype),"render",this).call(this,e,t,i,a,r),this.object.visible=!1},(0,J.Z)(n,[{key:"backscattering",get:function(){return this.fullscreenMaterial.uniforms.backscattering.value},set:function(e){this.fullscreenMaterial.uniforms.backscattering.value=e}},{key:"shadowColor",get:function(){return this.fullscreenMaterial.uniforms.shadowColor.value}},{key:"absorbtion",get:function(){return this.fullscreenMaterial.uniforms.absorbtion.value}}]),n}(Mt.Cw),fa="#define GLSLIFY 1\nuniform vec3 sunPosition;\nuniform float aspectRatio;\nuniform vec2 rotation;\n\n#ifdef DATA_AS_ATTRIBUTES\nattribute vec2 size;\nattribute float distance;\nattribute float spriteIndex;\nattribute float aIntensity;\n\nvarying float intensity;\n#else\nuniform vec2 size;\nuniform float distance;\n#endif\n\nvarying vec2 vUv;\n\nvoid main() {\n    mat2 rot = mat2(rotation.x, rotation.y, -rotation.y, rotation.x);\n    vec4 pos = vec4(sunPosition, 1.0);\n    pos.xy = mix(pos.xy, -pos.xy, distance);\n    vec2 offset = position.xy * vec2(size.x, size.y);\n    offset = rot * offset;\n    offset.x /= aspectRatio;\n    pos.xy += offset;\n\n    gl_Position = pos;\n\n    vUv = uv;\n\n    #ifdef DATA_AS_ATTRIBUTES\n    intensity = aIntensity;\n    vUv.x = (vUv.x + spriteIndex) / float(NUM_SPRITES);\n    #endif\n}\n",va="#define GLSLIFY 1\nuniform sampler2D tDiffuse;\nuniform vec3 sunColor;\nuniform float alpha;\n\n#ifdef DATA_AS_ATTRIBUTES\nvarying float intensity;\n#else\nuniform float intensity;\n#endif\n\nvarying vec2 vUv;\n\nuniform float hueAdjust;\nuniform float hueAdjustAmount;\n\n// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786\nvec3 hueShift( vec3 color ){\n\n    const vec3  kRGBToYPrime = vec3 (0.299, 0.587, 0.114);\n    const vec3  kRGBToI      = vec3 (0.596, -0.275, -0.321);\n    const vec3  kRGBToQ      = vec3 (0.212, -0.523, 0.311);\n\n    const vec3  kYIQToR     = vec3 (1.0, 0.956, 0.621);\n    const vec3  kYIQToG     = vec3 (1.0, -0.272, -0.647);\n    const vec3  kYIQToB     = vec3 (1.0, -1.107, 1.704);\n\n    float   YPrime  = dot (color, kRGBToYPrime);\n    float   I       = dot (color, kRGBToI);\n    float   Q       = dot (color, kRGBToQ);\n    float   hue     = atan (Q, I);\n    float   chroma  = sqrt (I * I + Q * Q);\n\n    hue += hueAdjust;\n\n    Q = chroma * sin (hue);\n    I = chroma * cos (hue);\n\n    vec3    yIQ   = vec3 (YPrime, I, Q);\n\n    return vec3( dot (yIQ, kYIQToR), dot (yIQ, kYIQToG), dot (yIQ, kYIQToB) );\n\n}\n\nvoid main() {\n    vec4 color = texture2D(tDiffuse, vUv);\n\n    #ifdef SHIFT_HUE\n    vec3 shifted = hueShift(color.rgb);\n    color.rgb = mix(color.rgb, shifted, hueAdjustAmount);\n    #endif\n\n    gl_FragColor = color;\n\n    gl_FragColor.rgb *= sunColor * alpha * intensity;\n}\n",ga=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return(0,c.Z)(this,n),(r=t.call(this,{vertexShader:fa,fragmentShader:va,uniforms:{tDiffuse:{value:e},size:{value:new v.FM8(i,a)},hueAdjustAmount:{value:0},hueAdjust:{value:Math.PI},sunPosition:{value:new v.Pa4},sunColor:{value:new v.Ilk},aspectRatio:{value:1},alpha:{value:1},intensity:{value:l},distance:{value:o},rotation:{value:new v.FM8}},blending:v.WMw,depthTest:!1,depthWrite:!1,transparent:!0,defines:{NUM_SPRITES:6},type:"LensFlareMaterial"}))._baseSunIllum=0,u&&(r.defines.SHIFT_HUE=""),r._hueShift=u,r._rotate=s,r}var i=n.prototype;return i.setSunBaseColor=function(e){this._baseSunIllum=(e.r+e.g+e.b)/3},i.setSunInfo=function(e,t){var n=this.uniforms;n.sunPosition.value=e,n.sunColor.value=t;var i=this._rotate?Math.atan2(-e.y,-e.x*this.aspect):0;if(n.rotation.value.set(Math.cos(i),Math.sin(i)),this._hueShift){var a=(t.r+t.g+t.b)/3;n.hueAdjustAmount.value=1-v.M8C.smoothstep(a,this._baseSunIllum,1)}},(0,J.Z)(n,[{key:"aspect",get:function(){return this.uniforms.aspectRatio.value},set:function(e){this.uniforms.aspectRatio.value=e}},{key:"alpha",get:function(){return this.uniforms.alpha.value},set:function(e){this.uniforms.alpha.value=e}},{key:"dataAsAttributes",get:function(){return this._dataAsAttributes},set:function(e){this._dataAsAttributes!==e&&(this._dataAsAttributes=e,e?this.defines.DATA_AS_ATTRIBUTES="":delete this.defines.DATA_AS_ATTRIBUTES,this.needsUpdate=!0)}},{key:"hueShift",get:function(){return this._hueShift}},{key:"hueAdjust",get:function(){return this.uniforms.hueAdjust.value},set:function(e){this.uniforms.hueAdjust.value=e}}]),n}(v.jyz),_a=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new v.Pa4,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v.Pa4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return(0,c.Z)(this,n),t.call(this,e,i,a,r)}return n.prototype.doesIntersect=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return ya(this,e,t)},n}(v.iMs);function ya(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(t.layers.test(e.layers)&&(t.raycast(e,i),i.length>0))return!0;if(n)for(var a=t.children,r=0,o=a.length;r<o;r++){var s=ya(e,a[r],!0,i);if(s)return!0}return!1}var xa,ba=new v._12,Sa=new v._fP;!function(e){e[e.FadedCircle=0]="FadedCircle",e[e.FullCircle=1]="FullCircle",e[e.Caustic=2]="Caustic",e[e.BokehIris1=3]="BokehIris1",e[e.BokehIris2=4]="BokehIris2",e[e.MoonShapedCircle=5]="MoonShapedCircle"}(xa||(xa={}));var wa=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a){var r;return(0,c.Z)(this,n),(r=t.call(this,null))._materials=[],r._sunPos=new v.Pa4,r._coverage=1,r._targetCoverage=1,r._scene=e,r._raycaster=new _a,r._raycaster.layers.set(mt.FlareOccluder),r._sun=i,r._group=new v.ZAu,r._camera=a,r._initFlares(),r.needsSwap=!1,r}var i=n.prototype;return i.updateCamera=function(e){this._camera=e},i.setSize=function(e,t){(0,d.Z)((0,h.Z)(n.prototype),"setSize",this).call(this,e,t);var i=e/t;this._materials.forEach((function(e){return e.aspect=i}))},i.render=function(e){var t=this,n=this._sunPos;this._sun.getWorldPosition(n).normalize(),Sa.copy(this._camera.quaternion).invert(),n.applyQuaternion(Sa),n.z>0||(n.applyMatrix4(this._camera.projectionMatrix),n.x<-1||n.x>1||n.y<-1||n.y>1?this._targetCoverage=0:(this._raycaster.setFromCamera(n,this._camera),this._targetCoverage=this._raycaster.doesIntersect(this._scene)?0:1),this._coverage=v.M8C.lerp(this._coverage,this._targetCoverage,.2),this._materials.forEach((function(e){e.alpha=t._coverage,e.setSunInfo(t._sunPos,t._sun.color)})),this._coverage>.01&&e.render(this._group,this._camera))},i.initDebug=function(e){var t=this,n=(0,u.Ae)("Lens Flare",e),i={hueAdjust:Math.PI};(0,u.Zp)(n,i,"hueAdjust",{min:-u.uo,max:u.uo,onChange:function(e){t._materials.forEach((function(t){t.hueShift&&(t.hueAdjust=e)}))}})},i._initFlares=function(){this._createSprite(u.Ll.textures.get("lensflare-main"),4,1),this._createSprite(u.Ll.textures.get("lensflare-center"),.7,.7,0,!0,.5),this._createSprite(u.Ll.textures.get("lensflare-halo"),.5,.5,.25,!0,.5),this._createSprite(u.Ll.textures.get("lensflare-halo"),2,2,1.2,!0,.2);var e={sizes:[],offsets:[],sprites:[],intensities:[]};Ta(xa.FullCircle,.15,.1,.1,e),Ta(xa.FadedCircle,.15,-.2,.05,e),Ta(xa.BokehIris1,.1,1.2,.1,e),Ta(xa.BokehIris1,.2,1,.1,e),Ta(xa.Caustic,.2,1.1,.3,e),Ta(xa.BokehIris2,.3,.7,.05,e),Ta(xa.MoonShapedCircle,1,1,.05,e),Ta(xa.BokehIris2,.2,.2,.07,e),Ta(xa.BokehIris1,.1,.4,.1,e),Ta(xa.FadedCircle,.03,.42,.1,e),Ta(xa.BokehIris2,.07,.44,.07,e),Ta(xa.BokehIris1,.04,.46,.04,e),Ta(xa.FadedCircle,.03,.47,.09,e),Ta(xa.BokehIris1,.1,.48,.07,e),Ta(xa.BokehIris2,.03,.49,.06,e),Ta(xa.FadedCircle,.02,.5,.04,e),Ta(xa.BokehIris1,.04,.51,.05,e),Ta(xa.BokehIris2,.02,.523,.04,e),Ta(xa.BokehIris1,.015,.534,.03,e),this._createChain(e)},i._createSprite=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=new ga(e,t,n,i,a,r,!0);o.setSunBaseColor(this._sun.color),this._materials.push(o);var s=new v.Kj0(ba,o);return s.renderOrder=5e3,s.frustumCulled=!1,this._group.add(s),s},i._createChain=function(e){var t=e.sizes,n=e.offsets,i=e.sprites,a=e.intensities,r=new ga(u.Ll.textures.get("lensflare-bokeh-atlas"),1,1,0,!0);r.dataAsAttributes=!0,this._materials.push(r);var o=new v.L5s;o.setAttribute("position",ba.getAttribute("position").clone()),o.setAttribute("uv",ba.getAttribute("uv").clone()),o.setAttribute("size",new v.lb7(new Float32Array(t),2)),o.setAttribute("distance",new v.lb7(new Float32Array(n),1)),o.setAttribute("spriteIndex",new v.lb7(new Float32Array(i),1)),o.setAttribute("aIntensity",new v.lb7(new Float32Array(a),1)),o.setIndex(ba.index.clone());var s=new v.Kj0(o,r);return s.frustumCulled=!1,this._group.add(s),s},n}(Mt.w2);function Ta(e,t,n,i,a){a.sprites.push(e),a.sizes.push(t,t),a.offsets.push(n),a.intensities.push(i)}var Pa=n(11738),Ca=new v.Pa4,Ra=new v.Tme,Ma="power1.inOut",ka=l.Z.hotspotPadding,Ea=!1,Aa=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;(0,c.Z)(this,n),(i=t.call(this)).time=0,i.shakeCamera=!1,i.shakeAmount=1,i.smoothAmount=0,i.shakeSmoothing=.01,i.rotationAmount=new v.FM8(90,1),i.rotationStrength=1,i.cameras=[],i._rotateCamera=!1,i._shakeOffset=new v.Pa4,i.currentCam=-1,i.currentFrame=0,i.rotationDummy=new v.Tme,i.satelliteOffset=new v.USm,i.name="CameraController",i.rocket=e,i.activeCamera=new v.cPb(60,window.innerWidth/window.innerHeight,.01,1e3);var a=u.Ll.custom.get("launchSequence"),r=(0,na.d9)(a.scene);r.name="launchSequence",i.add(r);var o=r.getObjectByName("clouds1");(0,u.B9)(o),i.satelliteContainer=r.getObjectByName("GPS_III_Satellite1");for(var s=i.satelliteContainer.children.length-1;s>-1;s--){var l=i.satelliteContainer.children[s];(0,u.B9)(l)}return r.traverse((function(e){if((0,ce.Z)(e,v.cPb)){e.near=.01,e.far=1e3,"Shot009_CAM_15_B"===e.name?(i.shot9Cam=e,e.near=.05,e.far=7800):("Shot012_CAM_15"===e.name||i.cameras.length>11)&&(e.near=.05,e.far=7800),"Shot010_CAM_15_C"!==e.name&&"Shot011_CAM_15_D"!==e.name||(e.far=3e3),"Shot013_CAM_16_E"===e.name&&(e.near=.02),e.updateProjectionMatrix(),e.scale.setScalar(10);var t=e;"Shot015_CAM_16_D"===e.name&&(i.satelliteCamera=e.clone(),i.satelliteCamera.near=.01,i.satelliteCamera.position.set(0,0,0),i.satelliteCamera.rotation.set(0,0,0),i.satelliteCamera.name="Shot015_satelliteCam",i.satelliteCamera.updateProjectionMatrix(),i.satelliteCameraRef=e,t=i.satelliteCamera),i.cameras.push(t)}})),i.cameraContainer=new v.Tme,i.cameraContainer.name="satelliteCamContainer",i.cameraContainer.add(i.satelliteCamera),i.rotationDummy.name="rotationDummy",i.cameraContainer.add(i.rotationDummy),i.add(i.cameraContainer),i.player=new ze("launchSequence"),i.player.setGLTF(a,r),i.player.play("All Animations"),i.restart(),i}var i=n.prototype;return i.updateTime=function(){this.currentFrame=Math.round(30*this.time);for(var e=Pa.Fq,t=e.length,i=-1,a=-1,r=0,o=0,s=0;s<t;s++){var l=e[s],c=l.frames[1]-l.frames[0];if(o+=c,(0,u.vX)(r,o,this.currentFrame)){a=(0,u.Fv)(r,o,this.currentFrame),11!==s&&14!==s||(a=(0,u._s)(a,.5,0,.25,1)),a=(0,u.uZ)(0,1,a),i=Math.round((0,u.CD)(l.frames[0],l.frames[1],a))+300,this.player.time=i/30,this.rocket.time=(0,u.uZ)(0,48,this.player.time-this.rocket.timeOffset),11===s&&(this.player.time=Math.min(43,this.player.time),this.rocket.time=Math.min(33,this.rocket.time)),s!==this.currentCam&&(this.currentCam=s,this.activeCamera=this.cameras[this.currentCam],this.dispatchEvent({type:n.CAM_UPDATE,value:this.activeCamera}));break}r+=c}this.time=(0,u.uZ)(0,47,this.time)},i.updateSatellite=function(e){this.satelliteCameraRef.getWorldPosition(this.cameraContainer.position),this.satelliteCameraRef.getWorldQuaternion(this.cameraContainer.quaternion),this.satelliteCamera.position.copy((0,u.G0)(this.satelliteCamera.position,Ra.position,1,e)),this.satelliteCamera.quaternion.slerp(this.rotationDummy.quaternion,e),this.satelliteCamera.rotation.x+=(0,zn.Id)(this.satelliteOffset.x),this.satelliteCamera.rotation.y+=(0,zn.Id)(this.satelliteOffset.y),this.satelliteCamera.rotation.z+=(0,zn.Id)(this.satelliteOffset.z)},i.updateShake=function(){if(this.shakeCamera&&this.shakeAmount>0){var e=new v.Pa4;this.activeCamera.getWorldPosition(e);var t=this.rocket.centerPos,n=10*e.distanceTo(t)*this.shakeAmount;Ca.set(Math.random(),Math.random(),Math.random()).subScalar(.5).multiplyScalar(n/1e3),this._shakeOffset.lerp(Ca,1-this.shakeSmoothing),this.activeCamera.position.add(this._shakeOffset)}},i.update=function(e){this.updateTime(),this.time<47&&this.player.update(0),this.updateSatellite(e),this.updateShake()},i.initDebug=function(e){var t=(0,u.Ae)("CameraController");(0,u.Zp)(t,this,"shakeCamera"),(0,u.Zp)(t,this,"shakeAmount",{min:0,max:100}),(0,u.Zp)(t,this,"rotateCamera"),(0,u.Zp)(t,this,"rotationAmount",{x:{min:-180,max:180},y:{min:-180,max:180}}),(0,u.Zp)(t,this,"satelliteOffset",{x:{min:-90,max:90},y:{min:-90,max:90},z:{min:-90,max:90}}),this.cameras.forEach((function(t){e.addCamera(t,!0,!1)})),e.addCamera(this.satelliteCameraRef,!0,!1),e.reload(),this.player.initDebug(e),this.satelliteCamera.position.set(0,0,0),this.satelliteCamera.rotation.set(0,0,0)},i.restart=function(){this.time=0,this.player.time=0,this.activeCamera=this.cameras[0],this.position.copy(ia.offset),Ra.position.set(0,0,0),Ra.rotation.set(0,0,0),this.rotationDummy.rotation.set(0,0,0),this.resize(u.yO.width,u.yO.height),this._rotateCamera=!1,this.cameraContainer.position.set(0,0,0),this.cameraContainer.rotation.set(0,0,0),this.satelliteOffset.set(0,0,0),this.shakeCamera=!1},i.lookAt=function(e){var t=this;this.rotationDummy.lookAt(e),this.rotationDummy.rotateX(Math.PI),this.rotationDummy.rotateZ(-this.rotationDummy.rotation.z);var n=y.o.isMobile(),i=u.yO.renderer.domElement,a=i.width,r=i.height;n&&this.satelliteCamera.setViewOffset(a,r,0,0,a,r);var o={value:0};ne.ZP.to(o,{duration:1,ease:Ma,value:1,onUpdate:function(){if(t.satelliteCamera.zoom=(0,u.CD)(1,2,o.value),n){var e=a/2-ka.x,i=r/2-ka.y;t.satelliteCamera.view.offsetX=(0,u.CD)(0,e,o.value),t.satelliteCamera.view.offsetY=(0,u.CD)(0,i,o.value)}t.satelliteCamera.updateProjectionMatrix()}})},i.lookAway=function(){var e=this;this.rotationDummy.rotation.set(0,0,0);var t=y.o.isMobile(),n=u.yO.renderer.domElement,i=n.width,a=n.height;t&&this.satelliteCamera.setViewOffset(i,a,0,0,i,a);var r={value:1};ne.ZP.to(r,{duration:1,ease:Ma,value:0,onUpdate:function(){if(e.satelliteCamera.zoom=(0,u.CD)(1,2,r.value),t){var n=i/2-ka.x,o=a/2-ka.y;e.satelliteCamera.view.offsetX=(0,u.CD)(0,n,r.value),e.satelliteCamera.view.offsetY=(0,u.CD)(0,o,r.value)}e.satelliteCamera.updateProjectionMatrix()}})},i.resize=function(e,t){var n=e/t;n<.9?(this.cameras[2].fov=60,this.cameras[3].fov=50,this.cameras[8].fov=40,this.cameras[9].fov=50,this.cameras[10].fov=50,this.cameras[11].fov=60,this.cameras[12].fov=50,this.cameras[13].fov=50,this.cameras[14].fov=50):(this.cameras[2].fov=37.85,this.cameras[3].fov=37.85,this.cameras[8].fov=37.85,this.cameras[9].fov=37.85,this.cameras[10].fov=37.85,this.cameras[11].fov=37.85,this.cameras[12].fov=37.85,this.cameras[13].fov=37.85,this.cameras[14].fov=37.85),this.cameras.forEach((function(e){e.aspect=n,e.updateProjectionMatrix()}))},i.addGuardianOffset=function(){var e=this;ne.ZP.to(this.satelliteOffset,{x:1.2,y:-1.2,duration:.4,ease:"power2.inOut"}),ne.ZP.to(this.satelliteCamera,{fov:60,duration:.4,ease:"power2.inOut",onUpdate:function(){return e.satelliteCamera.updateProjectionMatrix()}}),Ea=!0,(0,u.gw)(3).then((function(){Ea&&L.Z.dispatchEvent({type:D.zW.APP_PAUSE}),Ea=!1}))},i.removeGuardianOffset=function(){var e=this;Ea=!1,L.Z.dispatchEvent({type:D.zW.APP_PLAY}),ne.ZP.to(this.satelliteOffset,{x:0,y:0,duration:1,ease:"power2.inOut"});var t=u.yO.width/u.yO.height;ne.ZP.to(this.satelliteCamera,{fov:t<.9?50:37.85,duration:1,ease:"power2.inOut",onUpdate:function(){return e.satelliteCamera.updateProjectionMatrix()}})},(0,J.Z)(n,[{key:"rotateCamera",get:function(){return this._rotateCamera},set:function(e){this._rotateCamera=e}},{key:"cameraNear",get:function(){return this.shot9Cam.near},set:function(e){this.shot9Cam.near=e,this.shot9Cam.updateProjectionMatrix()}},{key:"satellitePos",get:function(){var e=new v.Pa4;return this.satelliteContainer.getWorldPosition(e),e}},{key:"satelliteQuat",get:function(){var e=new v._fP;return this.satelliteContainer.getWorldQuaternion(e),e}}]),n}(v.Tme);Aa.CAM_UPDATE="cameraUpdate";var La=n(4825),Da=new v.Ilk(16777215),Ia=new v.Ilk(16305366).convertSRGBToLinear(),Oa=new v.Pa4,Na=new v.Pa4(-.09199408209560624,.04378768448994613,.017091218621530957),Ua={position:new v.Pa4(-.15,.02,.07),rotationOffset:120,radius:-1},Za=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,c.Z)(this,n),(e=t.call(this,D.RL.LAUNCH)).roamingTarget=new v.Pa4,e.sunPolar=new v.$V,e.prelaunchCamTarget=new v.Pa4,e.keyframe="",e.currentAnimation="",e.currentSequence="",e.currentSequencePercent=-1,e.transparents=[],e.rocketDistance=0,e.ambientIntensity=1.5,e.showHomeHotspots=!1,e.lastSequencePosition=-1,e.directSatellite=!0,e.launchUpdate=function(t){switch(t.value){case"shot_09":e.terrainMesh.position.z=5;break;case"shot_11":e.cameraController.position.set(0,0,0);break;case"shot_12":if(e.cameraController.position.set(0,-.01,0),void 0!==e.cod){var n=e.cameraController.cameras[11];e.cod.camera=n,n.add(e.cod)}break;case"rocket":e.rocket.showSpaceAO(),Gn.launch.sequence.pause();break;case"shot_13":var i;if(e.directSatellite=!0,null===(i=e.cod)||void 0===i||i.hide(),e.satellite.position.set(.01,0,0),e.satellite.visible=!0,e.particles.restart(),void 0!==e.cod){var a=e.cameraController.cameras[14];e.cod.camera=a,a.add(e.cod)}break;case"shot_14":e.particles.restart(),e.satellite.position.set(0,0,0);break;case"shot_15":var r;e.particles.restart(),e.cameraController.position.set(-.03,-.01,.02),e.satellite.position.set(-.02,0,0),e.satellite.visible=!0,null===(r=e.cod)||void 0===r||r.show(!1),Ie().then((function(){e.directSatellite=!1}));break;case"satelliteHotspots":e.satellite.show();break;case"particles_ignite":break;case"particles_smoke":e.particles.launch();break;case"particles_stop_burn":var o;e.particles.stopBurn(),null===(o=e.cod)||void 0===o||o.show(!0)}},e.playIdle=function(){e.prelaunchCamTarget.copy(Na);var t=function(){(e.cameraController.restart(),e.particles.restart(),Gn.launch.sequence.position=0,Gn.launch.sequence.pause(),void 0!==e.dofPass)&&(e.dofPass.enabled=!0,e.dofCopyPass.enabled=!0,e.dofEffect.circleOfConfusionMaterial.uniforms.focalLength.value=.004);e.currentAnimation="idle",e.updateCamera(e.roamingCam),Gn.idle.sequence.position=0,Gn.idle.sequence.play({iterationCount:1/0})};e.currentAnimation.length>0?ne.ZP.to(e.compositeMaterial,{transition:0,duration:.5,onComplete:t}):t()},e.showLaunchSite=function(){if("launchsite"!==e.currentAnimation){(0,La.Z)("virtual_pageview","launch site",location.href);var t=function(){(Gn.idle.sequence.pause(),Gn.launch.sequence.pause(),Gn.launch.sequence.position=0,e.prelaunchCam.position.set(0,0,-.02),e.prelaunchCam.rotation.set(0,Math.PI,0),e.prelaunchCamTarget.copy(Na),e.particles.restart(),e.rocket.restart(),e.birds.visible=!0,e.cameraController.rotateCamera=!1,e.satellite.position.set(0,.1,0),e.satellite.visible=!1,e.satellite.hide(),e.cameraController.restart(),e.terrainMesh.position.z=0,e.earth.restart(),e.prelaunchCamContainer.position.copy(Ua.position),void 0!==e.dofPass)&&(e.dofPass.enabled=!0,e.dofCopyPass.enabled=!0,e.dofEffect.circleOfConfusionMaterial.uniforms.focalLength.value=.004);e.currentAnimation="launchsite",e.updateCamera(e.prelaunchCam),ne.ZP.to(e.compositeMaterial,{transition:1,duration:.5,delay:.1,onStart:function(){e.updateCamera(e.prelaunchCam)},onComplete:function(){(0,u.gw)(.2).then((function(){e.showHomeHotspots=!0,L.Z.dispatchEvent({type:D.zW.TERMINAL_GUARDIAN,value:0}),L.Z.dispatchEvent({type:D.zW.TERMINAL_UPDATE,value:0})}))},overwrite:!0}),ne.ZP.to(e.prelaunchCam.position,{z:0,duration:2,ease:"power1.inOut",onComplete:function(){e.cameraController.rotateCamera=!0}})};L.Z.dispatchEvent({type:D.zW.HOTSPOT_HIDE}),e.showHomeHotspots=!1,e.compositeMaterial.fadeOutLUT(),ne.ZP.to(e.compositeMaterial,{transition:0,duration:.25,onComplete:t,overwrite:!0})}},e.startLaunchSequence=function(){if("launch"!==e.currentAnimation){var t={value:1},n=function(){!function(){var t;null===(t=e.cod)||void 0===t||t.hide(),e.satellite.position.set(0,.1,0),e.satellite.visible=!1,e.satellite.hide(),e.cameraController.restart(),e.particles.restart(),e.rocket.restart(),e.terrainMesh.position.z=0,e.birds.visible=!1,void 0!==e.dofPass&&(e.dofPass.enabled=!0,e.dofCopyPass.enabled=!0)}(),e.currentAnimation="launch",ne.ZP.to(t,{value:1,duration:.25,delay:.2,onStart:function(){e.updateCamera(e.cameraController.cameras[0]),Gn.launch.sequence.play({range:[0,37]})},onUpdate:function(){e.compositeMaterial.transition=t.value},onComplete:function(){e.compositeMaterial.transition=1,e.particles.startVents(),e.particles.startExhausts(),e.particles.ignite()},overwrite:!0})};L.Z.dispatchEvent({type:D.zW.HOTSPOT_HIDE}),e.showHomeHotspots=!1,ne.ZP.to(t,{value:0,duration:.25,overwrite:!0,onUpdate:function(){e.compositeMaterial.transition=t.value},onComplete:n})}},e.showRocket=function(){if("rocket"!==e.currentAnimation){(0,La.Z)("virtual_pageview","deploy satellite",location.href);var t=Gn.launch.sequence.position;if(!(0,u.vX)(36,37,t)){var n={value:1};L.Z.dispatchEvent({type:D.zW.HOTSPOT_HIDE}),e.showHomeHotspots=!1,ne.ZP.to(n,{value:0,duration:.5,onUpdate:function(){e.compositeMaterial.transition=n.value},onComplete:function(){e.currentAnimation="rocket",void 0!==e.dofPass&&(e.dofPass.enabled=!1,e.dofCopyPass.enabled=!1),e.particles.ignite(),e.particles.launch(),Gn.launch.sequence.play({range:[32,37]}),ne.ZP.to(n,{value:1,duration:.5,onUpdate:function(){e.compositeMaterial.transition=n.value}})}})}}},e.showSatelitte=function(){if("satellite"!==e.currentAnimation)if(L.Z.dispatchEvent({type:D.zW.HOTSPOT_HIDE}),e.showHomeHotspots=!1,37===Gn.launch.sequence.position)e.particles.restart(),Gn.launch.sequence.play({range:[37+1/30,44]});else if(Gn.launch.sequence.position<37){var t=function(){e.currentAnimation="satellite",void 0!==e.dofPass&&(e.dofPass.enabled=!1,e.dofCopyPass.enabled=!1),e.particles.restart(),e.updateCamera(e.cameraController.cameras[12]),Gn.launch.sequence.play({range:[43,44]}),ne.ZP.to(e.compositeMaterial,{transition:1,duration:.5,overwrite:!0})};ne.ZP.to(e.compositeMaterial,{transition:0,duration:.5,onComplete:t,overwrite:!0})}},e.showGuardians=function(){e.cameraController.addGuardianOffset(),L.Z.dispatchEvent({type:D.zW.HOTSPOT_HIDE})},e.hideGuardians=function(){e.cameraController.removeGuardianOffset(),L.Z.dispatchEvent({type:D.zW.HOTSPOT_OPEN})},e.hotspotToggle=function(t){var n="power1.inOut",i=l.Z.hotspotPadding,a=u.yO.renderer.domElement,r=y.o.isMobile(),o=function(){e.compositeMaterial.openHotspot()},s=function(){e.compositeMaterial.closeHotspot()};"launchsite"===e.currentAnimation?t.type===D.zW.HOTSPOT_OPEN?function(){for(var s=function(s){var l=e.homeHotspots.children[s];if(l.name===t.name){o(),ne.ZP.to(e.prelaunchCamTarget,{duration:1,ease:n,x:l.position.x,y:l.position.y,z:l.position.z});var c=a.width,d=a.height;r&&e.prelaunchCam.setViewOffset(c,d,0,0,c,d);var h={value:0};return ne.ZP.to(h,{duration:1,ease:n,value:1,onUpdate:function(){if(e.prelaunchCam.zoom=(0,u.CD)(1,2,h.value),r){var t=c/2-i.x,n=d/2-i.y;e.prelaunchCam.view.offsetX=(0,u.CD)(0,t,h.value),e.prelaunchCam.view.offsetY=(0,u.CD)(0,n,h.value)}e.prelaunchCam.updateProjectionMatrix()}}),{v:void 0}}},l=e.homeHotspots.children.length,c=0;c<l;c++){var d=s(c);if("object"===(0,Zn.Z)(d))return d.v}}():function(){s();var t=e.rocket.centerPos;ne.ZP.to(e.prelaunchCamTarget,{duration:1,ease:n,x:t.x,y:t.y,z:t.z});var o=a.width,l=a.height;r&&e.prelaunchCam.setViewOffset(o,l,0,0,o,l);var c={value:1};ne.ZP.to(c,{duration:1,ease:n,value:0,onUpdate:function(){if(e.prelaunchCam.zoom=(0,u.CD)(1,2,c.value),r){var t=o/2-i.x,n=l/2-i.y;e.prelaunchCam.view.offsetX=(0,u.CD)(0,t,c.value),e.prelaunchCam.view.offsetY=(0,u.CD)(0,n,c.value)}e.prelaunchCam.updateProjectionMatrix()}})}():t.type===D.zW.HOTSPOT_OPEN?function(){for(var n=e.satellite.hotspots.children.length,i=0;i<n;i++){var a=e.satellite.hotspots.children[i];if(a.name===t.name){var r=new v.Pa4;return a.getWorldPosition(r),e.cameraController.lookAt(r),void o()}}}():(e.cameraController.lookAway(),s())},e.onLaunchCamUpdate=function(t){var n=t.value;e.updateCamera(n)};var i=window.innerWidth/window.innerHeight;return e.roamingCam=new v.cPb(70,i,.03,700),e.roamingCam.position.set(.3,.09,.1),e.roamingCam.lookAt(e.roamingTarget),e.roamingCam.name="roaming",e.prelaunchCamContainer=new v.Tme,e.prelaunchCamContainer.name="prelaunchCamContainer",e.prelaunchCamContainer.position.copy(Ua.position),e.interactive.add(e.prelaunchCamContainer),e.prelaunchCam=new v.cPb(y.o.isMobile()?80:60,i,.01,700),e.prelaunchCam.name="prelaunch",e.prelaunchCamContainer.add(e.prelaunchCam),u.Ll.textures.get("sceneLightMap").flipY=!1,u.Ll.textures.get("terrainLightMap").flipY=!1,e.satelliteContainer=new v.Tme,e.satelliteContainer.name="satelliteContainer",e.interactive.add(e.satelliteContainer),e.camera=e.roamingCam,e.fog=new v.yo9(1586294,.3),e.depthPass=new Rt(u.yO.renderer,e.camera,!1),e}var r=n.prototype;return r.initLights=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){var n=new v.Ox3(16777215);e.sunPolar.set(1,1.45,4.0977295481606),n.position.setFromSphericalCoords(e.sunPolar.radius,e.sunPolar.phi,e.sunPolar.theta),n.intensity=1.43,n.name="mainLight",e.lights.add(n),e.sun=n,e.atmosphere=new rn,e.atmosphere.initFromTextures(),e.atmosphere.sun=e.sun,e.lightProbe=u.Ll.custom.get("groundLightProbe"),e.lightProbe.intensity=e.ambientIntensity,e.lightProbe.name="lightProbe",e.world.add(e.lightProbe),t()}))]}))}))()},r.initMesh=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){e.skybox=new v.Kj0(new v.nvb,new Mn(u.Ll.textures.get("starfield"),0)),e.skybox.frustumCulled=!1,e.skybox.name="skybox",e.world.add(e.skybox),e.earthContainer=new v.Tme,e.earthContainer.name="earthContainer",e.world.add(e.earthContainer),e.earth=new Pn(e.atmosphere).addClouds().addBackgroundClouds(),e.earth.restart(),e.earthContainer.add(e.earth);var n=u.Ll.custom.get("launchScene");e.launchScene=n.scene.clone(),e.launchScene.name="launchGLTF",e.launchScene.scale.setScalar(.1),e.world.add(e.launchScene),e.terrainMesh=e.launchScene.getObjectByName("Terrain_Object");var i=e.terrainMesh.geometry.hasAttribute("uv2")?u.Ll.textures.get("terrainLightMap"):null,a=new ca(i);a.fromStandardMaterial(e.terrainMesh.material),a.vertexColors=!1,a.enableSplat(0,u.Ll.textures.get("terrain_grass")),a.enableSplat(1,u.Ll.textures.get("terrain_dirt")),a.enableSplat(2,u.Ll.textures.get("terrain_dirt_grass")),a.normalStrength=.26,e.terrainMesh.material=a,e.terrainMaterial=a,e.rocket=new ia,e.world.add(e.rocket),e.particles=new Ji(e.rocket,e.earth,e.depthPass.texture,true),e.world.add(e.particles);var r=Pa.BC;e.satellite=new ra({modelName:"satellite_gps3",hotspots:r.gps3},!0),e.satellite.position.y=.01,e.satellite.scale.setScalar(.5),e.satelliteContainer.add(e.satellite),Te(e.satellite,.2),e.cloudRush=new ta,e.cloudRush.visible=!1,e.world.add(e.cloudRush),e.birds=new la,e.world.add(e.birds),y.o.isMobile()||(e.cod=new ua,e.cod.enable(),e.world.add(e.cod));var o=new v.ZzF,s=new v.Pa4;e.transparents.push(e.particles,e.particles.exhaust,e.cloudRush,e.skybox),e.birds.children.forEach((function(t){return e.transparents.push(t)})),e.launchScene.traverse((function(t){(0,ce.Z)(t,v.Kj0)&&t.material&&(t.renderOrder=-10,t.material.transparent&&(e.transparents.push(t),o.setFromObject(t),t.renderOrder=-o.getCenter(s).lengthSq()/1e3,"Tree_Cards"===t.name&&(t.material=new ha({map:t.material.map,transparent:!0,depthWrite:!1,premultipliedAlpha:!1}),t.material.map.anisotropy=4)),function(e){if(!(0,ce.Z)(e.material,v.Wid)||!e.geometry.hasAttribute("uv2"))return;e.material=new da(e.material,u.Ll.textures.get("sceneLightMap"))}(t))})),e.markAsFlareOccluder(e.launchScene),e.markAsFlareOccluder(e.satellite),e.homeHotspots=new v.Tme,e.homeHotspots.name="homeHotspots",e.interactive.add(e.homeHotspots),Pa.BC.launchSite.forEach((function(t){var n=new v.Tme;n.name=t.name,n.position.set(t.position[0],t.position[1],t.position[2]),e.homeHotspots.add(n)})),t()}))]}))}))()},r.initPost=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){e.post=new u.Wf(e),e.post.addRenderPass().clearPass.overrideClearAlpha=0,u.Xd.quality!==u.nJ.LOW&&(e.dofPass=e.post.addDOF(1,{bokehScale:6,focalLength:.002}),e.dofTarget=e.post.helpers.get("DOF"),e.dofEffect=e.post.effects.get("DOF"),e.dofCopyPass=e.post.addCopyPass(2)),e.atmospherePass=new It(e.atmosphere,e.earth,e.camera,e.depthPass.texture,!0),e.post.addPass("atmosphere",e.atmospherePass),e.particlePass=new pa(e.particles,e.sun,e.camera),e.post.addPass("particlePass",e.particlePass),e.postRenderPass=new En(e.camera),e.postRenderPass.add(e.particles),e.post.addPass("postRenderPass",e.postRenderPass),e.lensFlare=new wa(e.world,e.sun,e.camera),e.lensFlare.enabled=!(u.Xd.mobile&&u.Xd.iOS),e.post.addPass("lensFlare",e.lensFlare),e.compositeMaterial=new An;var n=u.Ll.textures.get("lobby-lut");n.magFilter=v.TyD,n.minFilter=v.TyD,n.flipY=!1,n.needsUpdate=!0,e.compositeMaterial.lookup=n,e.post.addPass("Composite",new Mt.Cw(e.compositeMaterial,"inputBuffer")),t()}))]}))}))()},r.initAnimation=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){var n=e.fog;jn.idle.onValuesChange((function(t){e.compositeMaterial.transition=t.compositeTransition,e.roamingCam.position.set(t.cameraPosition.x,t.cameraPosition.y,t.cameraPosition.z),e.roamingTarget.set(t.cameraTarget.x,t.cameraTarget.y,t.cameraTarget.z),e.roamingCam.lookAt(e.roamingTarget),e.roamingCam.near===t.near&&e.roamingCam.far===t.far||(e.roamingCam.near=t.near,e.roamingCam.far=t.far,e.roamingCam.updateProjectionMatrix()),void 0!==e.targetHelper&&e.targetHelper.position.copy(e.roamingTarget),n.density=t.fogDensity}));var i={guardian:-1,terminal:-1};jn.launch_camera.onValuesChange((function(t){e.cameraController.rotationStrength=t.rotationStrength,e.cameraController.shakeAmount=t.shakeAmount,e.cameraController.shakeCamera=t.shakeCamera,e.cameraController.smoothAmount=t.smooth,e.cameraController.cameraNear=t.near})),jn.launch_clouds.onValuesChange((function(t){e.compositeMaterial.cloudTransition=t.rush.opacity,e.cloudRush.opacity=t.rush.opacity,e.cloudRush.speed=t.rush.speed,e.cloudRush.visible=t.rush.visible})),jn.launch_earth.onValuesChange((function(t){e.atmosphere.atmosScale=t.atmosScale,e.atmosphere.scatterCurve=t.scatterCurve,e.earth.position.set(t.position.x,t.position.y,t.position.z),e.earthContainer.rotation.x=t.rotationX,e.earthContainer.rotation.y=t.rotationY,e.earth.spinSpeed=t.speed,e.earth.scale.setScalar(t.scale)})),jn.launch_etc.onValuesChange((function(t){e.keyframe!==t.keyframe&&L.Z.dispatchEvent({type:D.zW.LAUNCH_UPDATE,value:t.keyframe,previous:e.keyframe}),e.keyframe=t.keyframe;var i,a=(i=t.gltfTime,Math.round(30*i)/30);e.cameraController.time=a,e.launchScene.visible=t.groundVisibility,n.density=t.fogDensity,e.launchScene.position.y=t.groundY,e.particles.groundParticlesActive=t.groundVisibility,e.skybox.material.brightness=t.starAlpha,e.atmosphere.colorMatrixAmount=1-t.starAlpha,e.atmosphere.updateColorMatrix()})),jn.launch_lights.onValuesChange((function(t){e.lightProbe&&(e.lightProbe.intensity=t.lightProbeIntensity*e.ambientIntensity),e.satellite.lightIntensity=t.satelliteLight.intensity,e.satellite.lightVisibility=t.satelliteLight.visible})),jn.launch_post.onValuesChange((function(t){void 0!==e.dofPass&&(e.dofPass.enabled=t.dofEnabled,e.dofCopyPass.enabled=t.dofEnabled,e.dofEffect.circleOfConfusionMaterial.uniforms.focalLength.value=t.focalLength)})),jn.launch_rocket.onValuesChange((function(t){e.rocketDistance=t.traveled,e.rocket.visible=t.visibility,e.rocket.timeOffset=t.timeOffset,e.particles.contrailAlpha=t.contrailAlpha,e.particles.rocketParticlesActive=t.visibility})),jn.launch_satellite.onValuesChange((function(t){e.satellite.rotationWeight=t.rotationWeight})),jn.launch_terminal.onValuesChange((function(e){var t=Math.floor(e.guardian),n=Math.floor(e.terminal);t!==i.guardian&&L.Z.dispatchEvent({type:D.zW.TERMINAL_GUARDIAN,value:t}),n!==i.terminal&&L.Z.dispatchEvent({type:D.zW.TERMINAL_UPDATE,value:n}),i.guardian=t,i.terminal=n})),t()}))]}))}))()},r.initControllers=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){te.enable(),e.cameraController=new Aa(e.rocket),e.interactive.add(e.cameraController);var n=Na;Ua.radius=n.distanceTo(e.prelaunchCamContainer.position)/2+.01,t()}))]}))}))()},r.initDebug=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){(0,u.V6)(void 0,"Clear Cache",(function(){localStorage.clear()}));var n=(0,u.Ae)("Fog"),i=e.fog;(0,u.R6)(n,i,"color"),(0,u.Zp)(n,i,"density",{min:0,max:1});var a=(0,u.Gy)(Gn.launch,e.lights,e.utils,void 0);(0,u.Zp)(a,e,"ambientIntensity",{label:"ambientIntensity",min:0,max:2,onChange:function(t){e.lightProbe.intensity=t}}),e.post.initDebug(),e.lensFlare.initDebug(e.post.debugFolder),e.compositeMaterial.initDebug(e.post.debugFolder);var r=(0,u.Ae)("Helpers");e.targetHelper=new v.y8_(.1),e.targetHelper.name="camTargetHelper",e.targetHelper.visible=!1,e.utils.add(e.targetHelper),(0,u.Zp)(r,e.targetHelper,"visible",{label:e.targetHelper.name}),e.launchTargetHelper=new v.y8_(.1),e.launchTargetHelper.name="launchTargetHelper",e.launchTargetHelper.visible=!1,e.utils.add(e.launchTargetHelper),(0,u.Zp)(r,e.launchTargetHelper,"visible",{label:e.launchTargetHelper.name}),(0,u.Zp)(void 0,e.cloudRush,"layedDelay",{min:0,max:1});var o=e.particles.initDebug();(0,u.Zp)(o,e.particlePass,"backscattering",{min:-1,max:1}),(0,u.Zp)(o,e.particlePass,"absorbtion"),(0,u.Zp)(o,e.particlePass,"shadowColor"),e.satellite.initDebug(),e.earth.initDebug();var s=(0,u.Ae)("Sun");(0,u.V6)(s,"Log shadow dir",(function(){return e.logShadowDir()})),(0,u.Zp)(s,e.sun,"intensity",{min:0,max:20}),(0,u.R6)(s,e.sun,"color"),(0,u.Zp)(s,e.sunPolar,"phi",{min:0,max:Math.PI,onChange:function(){e.sun.position.setFromSphericalCoords(e.sunPolar.radius,e.sunPolar.phi,e.sunPolar.theta)}}),(0,u.Zp)(s,e.sunPolar,"theta",{min:0,max:2*Math.PI,onChange:function(){e.sun.position.setFromSphericalCoords(e.sunPolar.radius,e.sunPolar.phi,e.sunPolar.theta)}});var l=(0,u.Ae)("Floor");(0,u.Zp)(l,e.terrainMaterial,"normalStrength",{min:0,max:1,label:"normalStrength"});var c=(0,u.Ae)("Sky");(0,u.Zp)(c,e.atmosphere,"atmosScale",{min:0,max:10,label:"atmosScale"}),(0,u.Zp)(c,e.atmosphere,"scatterCurve",{min:0,max:2,label:"colorCurve"}),(0,u.Zp)(c,e.atmosphere,"colorMatrixR",{label:"colorMatrixR",onChange:function(){e.atmosphere.updateColorMatrix()}}),(0,u.Zp)(c,e.atmosphere,"colorMatrixG",{label:"colorMatrixG",onChange:function(){e.atmosphere.updateColorMatrix()}}),(0,u.Zp)(c,e.atmosphere,"colorMatrixB",{label:"colorMatrixB",onChange:function(){e.atmosphere.updateColorMatrix()}}),(0,u.Zp)(c,e.atmosphere,"colorMatrixO",{label:"colorMatrixO",onChange:function(){e.atmosphere.updateColorMatrix()}}),e.hierarchy=new u.AU(e),e.hierarchy.update(),e.hierarchy.expanded=!1,e.inspector=new u.lj(e.camera,e,e.utils,Gn.launch,3,Va),e.multiCams=new u.SN(e.utils,(function(t){e.updateCamera(t)}),!0,5e3),e.multiCams.addCamera(e.roamingCam),e.multiCams.addCamera(e.prelaunchCam),e.cameraController.initDebug(e.multiCams),e.rocket.initDebug(),t()}))]}))}))()},r.init=function(){var e=this,t=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(i){return[2,new Promise((function(i){(0,d.Z)((0,h.Z)(n.prototype),"init",e).call(t).then((function(){t.cameraController.addEventListener(Aa.CAM_UPDATE,t.onLaunchCamUpdate),L.Z.addEventListener(D.zW.LAUNCH_IDLE,t.playIdle),L.Z.addEventListener(D.zW.SHOW_LAUNCHSITE,t.showLaunchSite),L.Z.addEventListener(D.zW.LAUNCH,t.startLaunchSequence),L.Z.addEventListener(D.zW.LAUNCH_UPDATE,t.launchUpdate),L.Z.addEventListener(D.zW.ROCKET,t.showRocket),L.Z.addEventListener(D.zW.SHOW_SATELLITE,t.showSatelitte),L.Z.addEventListener(D.zW.SHOW_GUARDIANS,t.showGuardians),L.Z.addEventListener(D.zW.HIDE_GUARDIANS,t.hideGuardians),L.Z.addEventListener(D.zW.HOTSPOT_OPEN,t.hotspotToggle),L.Z.addEventListener(D.zW.HOTSPOT_CLOSE,t.hotspotToggle),L.Z.dispatchEvent({type:D.zW.LOAD_COMPLETE}),i()}))}))]}))}))()},r.updateLaunchsite=function(e,t){var n=(0,zn.Id)(Ua.rotationOffset),i=new v.Pa4(this.prelaunchCamContainer.position.x,.025,this.prelaunchCamContainer.position.z);this.cameraController.rotateCamera&&(n+=(0,zn.Id)((0,u.CD)(-110,60,te.normal.x)),i.y=(0,u.CD)(.1,.0075,te.normal.y),(0,u.vX)(50,120,(0,zn.ZY)(n))&&(i.y=Math.max(i.y,.022))),i.x=Math.cos(n)*Ua.radius+t.x,i.z=Math.sin(n)*Ua.radius+t.z,this.prelaunchCamContainer.position.copy((0,u.G0)(this.prelaunchCamContainer.position,i,.2,e)),this.prelaunchCamContainer.lookAt(this.prelaunchCamTarget),this.birds.update(e,this.prelaunchCam)},r.update=function(){var e,t,n,i=Math.min(this.clock.getDelta(),.05);this.earth.worldToLocal(this.camera.getWorldPosition(Oa));var a=Oa.length(),r=(1-v.M8C.smoothstep(this.sun.position.y,0,.3))*(1-v.M8C.smoothstep(a,6360,6420));this.sun.color.lerpColors(Da,Ia,r),this.cameraController.update(i),this.rocket.update(),this.rocket.visible&&this.particles.update(i,this.camera),this.earth.update(i,this.camera),this.cloudRush.update(i,this.camera),this.directSatellite?(this.satelliteContainer.position.copy(this.cameraController.satellitePos),this.satelliteContainer.quaternion.copy(this.cameraController.satelliteQuat)):(this.satelliteContainer.position.copy((0,u.G0)(this.satelliteContainer.position,this.cameraController.satellitePos,.95,i)),this.satelliteContainer.quaternion.slerp(this.cameraController.satelliteQuat,.95)),this.satellite.camera=this.cameraController.activeCamera,this.satellite.update(i);var o=this.rocket.centerPos;"Shot003_CAM_03"!==this.camera.name&&"Shot005_CAM_09"!==this.camera.name||(o.y-=.02),null===(e=this.dofTarget)||void 0===e||e.position.copy(o),"launchsite"===this.currentAnimation&&this.updateLaunchsite(i,o),null===(t=this.cod)||void 0===t||t.update(Gn.launch.sequence.position),this.compositeMaterial.update(i),this.updateReact(),u.Dq&&(null===(n=this.multiCams)||void 0===n||n.update())},r.updateReact=function(){var e=this,t=Gn.launch.sequence.position;if(this.showHomeHotspots){var n=[];this.homeHotspots.children.forEach((function(t){var i=le(t,e.prelaunchCam);i.x=Math.round(i.x),i.y=Math.round(i.y),n.push({point:i,name:t.name})})),L.Z.dispatchEvent({type:D.zW.HOTSPOT_UPDATE,value:n})}for(var i in this.lastSequencePosition!==Gn.launch.sequence.position&&L.Z.dispatchEvent({type:D.zW.ROCKET_UPDATE,value:this.rocketDistance}),this.lastSequencePosition=Gn.launch.sequence.position,D.T9){var a=D.T9[i],r=a[0],o=a[1];if((0,u.vX)(r,o,t)){this.currentSequence.length>0&&this.currentSequence!==i&&L.Z.dispatchEvent({type:D.zW.LAUNCH_STATUS,state:this.currentSequence,percent:1}),this.currentSequence=i;var s=(0,u.Fv)(r,o,t);return this.currentSequencePercent!==s&&L.Z.dispatchEvent({type:D.zW.LAUNCH_STATUS,state:i,percent:s}),void(this.currentSequencePercent=s)}}},r.draw=function(e){var t=this.clock.getDelta();this.hideTransparents(),this.depthPass.render(this),this.showTransparents(),this.post.render(t,e)},r.postDraw=function(){var e;null===(e=this.multiCams)||void 0===e||e.postRender(this)},r.hideTransparents=function(){this.transparents.forEach((function(e){e.userData.visible=e.visible,e.visible=!1})),this.earth.hideTransparents()},r.showTransparents=function(){this.transparents.forEach((function(e){e.visible=e.userData.visible})),this.earth.showTransparents()},r.resize=function(e,t){var n=this.camera;n.aspect=e/t,this.cameraController.resize(e,t);var i=y.o.isMobile();n.zoom>1&&i&&this.prelaunchCam.setViewOffset(e,t,e/2-l.Z.hotspotPadding.x,t/2-l.Z.hotspotPadding.y,e,t),n.updateProjectionMatrix(),this.post.resize(e,t),this.depthPass.resize(u.yO.canvas.width,u.yO.canvas.height),u.Dq&&this.multiCams.resize(e,t)},r.updateCamera=function(e){var t;if(this.camera!==e){this.camera=e,e.layers.enable(mt.FlareOccluder),this.post.updateCamera(e),this.atmospherePass.updateCamera(e),this.lensFlare.updateCamera(e),this.depthPass.updateCamera(e),null===(t=this.particlePass)||void 0===t||t.updateCamera(e),this.postRenderPass.updateCamera(e);var n=e.name;this.sun.position.setFromSphericalCoords(1,this.sunPolar.phi,this.sunPolar.theta),this.earth.uvScale=1,this.earth.uvOffset.set(0,0),"Shot010_CAM_15_C"===n?(this.earth.uvScale=50,this.earth.uvOffset.set(.2,0)):"Shot011_CAM_15_D"===n&&(this.earth.uvScale=50,this.earth.uvOffset.set(.3,.4),this.sun.position.setFromSphericalCoords(1,1.77,6.127))}},r.dispose=function(){var e;Gn.idle.sequence.pause(),Gn.launch.sequence.pause(),this.particles.dispose(),te.disable(),null===(e=this.cod)||void 0===e||e.disable(),L.Z.dispatchEvent({type:D.zW.HOTSPOT_HIDE}),this.cameraController.removeEventListener(Aa.CAM_UPDATE,this.onLaunchCamUpdate),L.Z.removeEventListener(D.zW.LAUNCH_IDLE,this.playIdle),L.Z.removeEventListener(D.zW.SHOW_LAUNCHSITE,this.showLaunchSite),L.Z.removeEventListener(D.zW.LAUNCH,this.startLaunchSequence),L.Z.removeEventListener(D.zW.LAUNCH_UPDATE,this.launchUpdate),L.Z.removeEventListener(D.zW.ROCKET,this.showRocket),L.Z.removeEventListener(D.zW.SHOW_SATELLITE,this.showSatelitte),L.Z.removeEventListener(D.zW.SHOW_GUARDIANS,this.showGuardians),L.Z.removeEventListener(D.zW.HOTSPOT_OPEN,this.hotspotToggle),L.Z.removeEventListener(D.zW.HOTSPOT_CLOSE,this.hotspotToggle),u.Dq&&(this.hierarchy.dispose(),this.inspector.dispose(),this.multiCams.dispose())},r._initEarthTransition=function(){var e=new v.yGw;e.elements=[.9934705076918856,6938893903907228e-33,.11408922099141115,0,.017488575187760487,.9881814660651511,-.15228768782547922,0,-.11274085366152369,.15328858445862356,.9817291427834576,0,-.11037294940958148,1.3748412318749417,.9655451929609469,1];var t=new v.Pa4(-100,-200,-500),n=new v.Kj0(new v.Aip(250),new v.vBJ);n.position.copy(t).applyMatrix4(e),this.launchScene.updateWorldMatrix(!0,!0);var i=new v.ZzF;i.setFromObject(this.earth);var a=i.max.x-i.min.x,r=this.earth.scale.x,o=this.earth.position,s=new v.Pa4;i.setFromObject(n),i.getCenter(s);var l=(i.max.x-i.min.x)/(a*r);console.log(o,s),console.log(r,l)},r.markAsFlareOccluder=function(e){e.traverse((function(e){(0,ce.Z)(e,v.Kj0)&&e.material.transparent||e.layers.set(mt.FlareOccluder)}))},r.logShadowDir=function(){var e=this.sun.getWorldPosition(new v.Pa4).normalize(),t=this.launchScene.matrixWorld.clone().invert();e.transformDirection(t),console.log(e)},n}(u.Ee);var za=new v.Tme,Ba=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e))._rotateY={min:(0,zn.Id)(-15),max:(0,zn.Id)(40)},i._rotateX={min:(0,zn.Id)(-30),max:(0,zn.Id)(-15)},i._dragStartRotationX=0,i._dragStartRotationY=0,i.dragEase=3,i.handleDragStart=function(){var e,t;i._dragStartRotationY=null===(e=i._threeObject)||void 0===e?void 0:e.rotation.y,i._dragStartRotationX=null===(t=i._threeObject)||void 0===t?void 0:t.rotation.x},e.threeObject&&(i._threeObject=e.threeObject),i._dragStartHandler=i.handleDragStart,i.enable(),i}var i=n.prototype;return i.alignToLatLong=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new v.Pa4(0,1,0),i=(new v.Pa4).setFromSphericalCoords(1,(90-e)*v.M8C.DEG2RAD,(90+t)*v.M8C.DEG2RAD);za.quaternion.setFromUnitVectors(i,n)},i.update=function(e){this.isDragging&&(za.rotation.y=(0,zn.uZ)(this._dragStartRotationY+this.dragDeltaNormal.x,this._rotateY.min,this._rotateY.max),za.rotation.x=(0,zn.uZ)(this._dragStartRotationX+this.dragDeltaNormal.y,this._rotateX.min,this._rotateX.max)),this._threeObject.rotation.x=(0,zn.u1)(this._threeObject.rotation.x,za.rotation.x,this.dragEase,e),this._threeObject.rotation.y=(0,zn.u1)(this._threeObject.rotation.y,za.rotation.y,this.dragEase,e),this._threeObject.rotation.z=(0,zn.u1)(this._threeObject.rotation.z,za.rotation.z,this.dragEase,e)},i.dispose=function(){this.disable()},n}(ee),Fa=Ba,Ha={base:new v.Pa4(200,770,2e3),md:new v.Pa4(-100,880,1490)},Ga={base:new v.Pa4(0,0,0),md:new v.Pa4(0,0,0)},ja=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,c.Z)(this,n),(e=t.call(this,D.RL.BASES)).sunPolar=new v.$V,e.transparents=[],e.connections=new _t,e.handleSelectBase=function(t){if(t.value.location){var n=t.value.location,i=n.lat,a=n.lon;e.alignLatLongTopAngle(i,a)}},e.handleAddHotspots=function(t){var n=t.value;e.basesHotspots=new v.Tme,e.basesHotspots.name="basesHotspots",e.earth.add(e.basesHotspots),n.forEach((function(t){var n=new v.Tme;n.name=t.name;var i=e.earth.latLongToXYZ(t.location.lat,t.location.lon);n.position.copy(i),e.basesHotspots.add(n)})),e.alignLatLongTopAngle(n[0].location.lat,n[0].location.lon)},e.camera=new v.cPb(30,window.innerWidth/window.innerHeight,100,5e3),e.camera.name="mainCam",e.camera.lookAt(0,0,0),e.camera.layers.enable(mt.FlareOccluder),e.depthPass=new Rt(u.yO.renderer,e.camera,!1),e.dragEnabled=i,e.initLatLng=a,e.curvesEnabled=r,e}var r=n.prototype;return r.isMd=function(){return window.innerWidth>=900},r.initMesh=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){var n=new v.nvb,i=new v.Kj0(n,new Mn(u.Ll.textures.get("starfield"),0));i.frustumCulled=!1,i.name="skybox";var a=new Mn(u.Ll.textures.get("nebulaSkyBox"),0,2,!0);a.transparent=!0,a.blending=v.Xaj,a.blendSrc=Yt.ghN,a.blendDst=Yt.ghN,a.blendDstAlpha=Yt.ghN,a.blendSrcAlpha=v.c8b;var r=new v.Kj0(n,a);r.renderOrder=500,r.rotation.y=2.5,r.rotation.x=.5,a.brightness=.5,r.frustumCulled=!1,r.name="skybox",e.earthContainer=new v.Tme,e.earthContainer.name="earthContainer",e.earth=new Pn(e.atmosphere,!1,!0);var o=1e3/6360;e.earth.scale.copy(new v.Pa4(o,o,o)),e.earth.position.copy(Ga.base),e.earthContainer.add(e.earth),e.earth.earthMaterial.setAmbient(new v.Ilk(1001864).multiplyScalar(.7),new v.Pa4(1,1,1)),e.rotateGroup=new v.ZAu,e.rotateGroup.name="rotateGroup",e.rotateGroup.add(e.earthContainer),e.rotateGroup.add(i),e.rotateGroup.add(r),e.world.add(e.rotateGroup),e.curvesEnabled&&(e.initCurves(),e.earth.add(e.curves),e.curves.endPhase=1,e.curves.startPhase=0,e.showCurveAnim(gt.NewYork),e.showCurveAnim(gt.LosAngeles),e.showCurveAnim(gt.Tokyo)),e.dragEnabled&&(e.dragController=new Fa({target:document.querySelector("#drag-layer"),threeObject:e.rotateGroup})),t()}))]}))}))()},r.initCurves=function(){for(var e in this.curves=new pt(this.atmosphere,1e3,this.depthPass.texture),gt){var t=gt[e];for(var n in gt){var i=gt[n];if(t!==i&&!this.connections.has(t,i)){var a=this.curves.addCurve(t.lat,t.long,i.lat,i.long);this.connections.add(t,i,a)}}}},r.showCurveAnim=function(e){var t=this,n=this.connections.pickRandomDestination(e),i=this.connections.get(e,n),a=i.curve,r=i.inverted;a.playAnim(r,2+Math.random()).then((function(){t.showCurveAnim(n)}))},r.alignLatLongTopAngle=function(e,t){var n,i=this.isMd()?new v.Pa4(0,1,.7):new v.Pa4(.25,1,.7);this.dragEnabled&&(null===(n=this.dragController)||void 0===n||n.alignToLatLong(e,t,i))},r.initLights=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){var n=new v.Ox3(16777215);e.sunPolar.set(1,-1.1,-.5),n.position.setFromSphericalCoords(e.sunPolar.radius,e.sunPolar.phi,e.sunPolar.theta),n.intensity=3,n.name="mainLight",e.lights.add(n),e.sun=n,e.atmosphere=new rn,e.atmosphere.scatterCurve=1.5,e.atmosphere.atmosScale=5,e.atmosphere.initFromTextures(),e.atmosphere.colorMatrixAmount=1,e.atmosphere.colorMatrixR.set(1,0,0),e.atmosphere.colorMatrixG.set(0,1,0),e.atmosphere.colorMatrixB.set(0,.3,1.4),e.atmosphere.updateColorMatrix(),e.atmosphere.sun=e.sun,t()}))]}))}))()},r.initPost=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){e.post=new u.Wf(e),e.post.addRenderPass().clearPass.overrideClearAlpha=0,e.atmospherePass=new It(e.atmosphere,e.earth,e.camera,e.depthPass.texture),e.post.addPass("atmosphere",e.atmospherePass),e.postRenderPass=new En(e.camera),e.curves&&e.postRenderPass.add(e.curves),e.post.addPass("PostRender",e.postRenderPass),e.post.addPass("Composite",new Nn),t()}))]}))}))()},r.initDebug=function(){var e=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){(0,u.Gy)(e.sheet,e.lights,e.utils,void 0),e.multiCams=new u.SN(e.utils,null),e.multiCams.addCamera(e.camera),e.hierarchy=new u.AU(e),e.hierarchy.update(),e.hierarchy.expanded=!1,e.inspector=new u.lj(e.camera,e,e.utils,e.sheet),e.earth.initDebug(),t()}))]}))}))()},r.init=function(){var e=this,t=this;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(i){return[2,new Promise((function(i){(0,d.Z)((0,h.Z)(n.prototype),"init",e).call(t).then((function(){L.Z.addEventListener(D.zW.SELECT_BASE,t.handleSelectBase),L.Z.addEventListener(D.zW.ADD_BASES_HOTSPOTS,t.handleAddHotspots),L.Z.dispatchEvent({type:D.zW.LOAD_COMPLETE}),t.initLatLng&&t.alignLatLongTopAngle(t.initLatLng.x,t.initLatLng.y),i()}))}))]}))}))()},r.dispose=function(){var e,t,n;u.Dq&&(null===(e=this.hierarchy)||void 0===e||e.dispose(),null===(t=this.inspector)||void 0===t||t.dispose(),null===(n=this.multiCams)||void 0===n||n.dispose());this.dragEnabled&&this.dragController.dispose(),L.Z.removeEventListener(D.zW.ADD_BASES_HOTSPOTS,this.handleAddHotspots),L.Z.removeEventListener(D.zW.SELECT_BASE,this.handleSelectBase)},r.draw=function(e){var t=this.clock.getDelta();this.depthPass.render(this),this.post.render(t,e)},r.postDraw=function(){var e;null===(e=this.multiCams)||void 0===e||e.postRender(this)},r.resize=function(e,t){var n,i=this.camera;i.aspect=e/t,i.updateProjectionMatrix(),this.post.resize(e,t),this.depthPass.resize(u.yO.canvas.width,u.yO.canvas.height),u.Dq&&(null===(n=this.multiCams)||void 0===n||n.resize(e,t));var a=this.isMd()?Ha.md:Ha.base,r=this.isMd()?Ga.md:Ga.base;this.camera.position.copy(a),this.earth.position.copy(r)},r.update=function(){var e,t,n=this.clock.getDelta();this.dragEnabled&&(null===(t=this.dragController)||void 0===t||t.update(n));this.earth.update(n,this.camera),this.basesHotspots&&L.Z.dispatchEvent({type:D.zW.HOTSPOT_UPDATE,value:this.getHotspots()}),null===(e=this.curves)||void 0===e||e.update(this.camera)},r.getHotspots=function(){var e,t=this,n=[];return null===(e=this.basesHotspots)||void 0===e||e.children.forEach((function(e){var i=le(e,t.camera);i.x=Math.round(i.x),i.y=Math.round(i.y),n.push({point:i,name:e.name})})),n},r.hideTransparents=function(){this.transparents.forEach((function(e){e.userData.visible=e.visible,e.visible=!1})),this.earth.hideTransparents()},r.showTransparents=function(){this.transparents.forEach((function(e){e.visible=e.userData.visible})),this.earth.showTransparents()},n}(u.Ee),Wa=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return n.prototype.setNextScene=function(e){switch(e){case D.RL.CAPABILITIES:this.nextScene=new On;break;case D.RL.CAREERS:this.nextScene=new Un;break;case D.RL.LAUNCH:this.nextScene=new Za;break;case D.RL.BASES:this.nextScene=new ja;break;case D.RL.RECRUITERS:this.nextScene=new ja(!0,new v.FM8(ft,vt),!0)}},n}(u.Eo),Va=new Wa,Ka=function(e){(0,m.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;(0,c.Z)(this,n),(i=t.call(this,e)).loadingStarted=!1,i.onPause=function(){i.pause()},i.onPlay=function(){i.play()};var a=u.yO.dpr;return u.yO.dpr=Math.min(a,1.5),Va.init(),i}var i=n.prototype;return i.init=function(){if((0,d.Z)((0,h.Z)(n.prototype),"init",this).call(this),!this.loadingStarted){this.loadingStarted=!0,function(){var e=u.Xd.quality===u.nJ.HIGH?"4k":"2k",t=u.Xd.quality===u.nJ.LOW||y.o.isMobile()?"2k":"4k",n=function(n){Array.isArray(n.file)||(n.file=n.file.replace("earth_***",e),n.file=n.file.replace("***",t))};M.forEach(n),k.forEach(n),E.forEach(n),A.forEach(n)}();var e=M;l.Z.scene===D.RL.CAPABILITIES?e=k:l.Z.scene===D.RL.CAREERS?e=E:l.Z.scene!==D.RL.BASES&&l.Z.scene!==D.RL.RECRUITERS||(e=A);X.supportsBlob=!1;var t=l.Z.scene===D.RL.CAPABILITIES&&u.Xd.mobile;X.loadAssets(e,(function(e){L.Z.dispatchEvent({type:D.zW.LOAD_PROGRESS,value:e})}),t).then((function(){f.TQ&&console.log("Load Complete:",l.Z.scene),Va.setScene(l.Z.scene)})).catch((function(e){console.log(e)})),L.Z.addEventListener(D.zW.APP_PAUSE,this.onPause),L.Z.addEventListener(D.zW.APP_PLAY,this.onPlay)}},i.dispose=function(){L.Z.removeEventListener(D.zW.APP_PAUSE,this.onPause),L.Z.removeEventListener(D.zW.APP_PLAY,this.onPlay),Va.dispose(),(0,d.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)},i.update=function(){Va.update()},i.draw=function(){Va.draw()},i.resize=function(){(0,d.Z)((0,h.Z)(n.prototype),"resize",this).call(this);var e=window.innerWidth,t=window.innerHeight;Va.resize(e,t)},n}(u.wM);var qa=function(e){var t=e.scene,n=(0,o.useRef)(null),c=(0,o.useRef)(null),d=(0,o.useState)("initial"),h=d[0],m=d[1];return(0,o.useEffect)((function(){var e=function(){var e=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,u.VP)()];case 1:return e.sent(),u.Xd.mobile=y.o.isMobile(),/(CrOS)/.test(navigator.userAgent)&&(u.Xd.quality=u.nJ.LOW),n.current=new Ka(c.current),n.current.init(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return e(),function(){var e;null===n||void 0===n||null===(e=n.current)||void 0===e||e.dispose()}}),[]),(0,o.useEffect)((function(){switch(t||l.Z.scene){case D.RL.LAUNCH:m("fixed");break;case D.RL.BASES:case D.RL.RECRUITERS:m("absolute")}}),[t]),(0,r.jsx)(s.xu,{as:"canvas",pos:h,top:"0",left:"0",ref:c})}}}]);