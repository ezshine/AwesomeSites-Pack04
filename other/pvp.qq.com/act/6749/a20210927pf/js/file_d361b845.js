/* AUTHORIZATION SKIP ES6 */
(function(e){function t(t){for(var i,s,a=t[0],u=t[1],c=t[2],f=0,h=[];f<a.length;f++)s=a[f],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&h.push(o[s][0]),o[s]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={app:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"014c":function(e,t,n){"use strict";n("b6d5")},"01c8":function(e,t,n){"use strict";n("40b4")},"0574":function(e,t,n){"use strict";n("26ef")},"0e63":function(e,t,n){"use strict";n("999c")},"0f29":function(e,t,n){"use strict";n("9124")},1068:function(e,t){e.exports="precision highp float;\nattribute float nodeIndex;\nuniform float time;\nuniform float offset;\nuniform float speed;\nuniform float manPosX;\nuniform float wavePosX;\nvarying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tvec3 transform = position.xyz;\n\tfloat x = position.x + offset;\n\ttransform.y += ((sin((time * speed) + (x * 0.7)) * 0.4) + 0.2);\n\t(cos(((time * 2.0) * speed) + (x * 1.4)) * 0.2) + 0.1;\n\t(sin(((time * 4.0) * speed) + (x * 2.8)) * 0.1) + 0.05;\n\ttransform.y = mix(transform.y, position.y, smoothstep(manPosX - 10.0, manPosX - 0.0, position.x) * smoothstep(manPosX + 10.0, manPosX + 0.0, position.x));\n\tvec4 worldPos = modelMatrix * vec4(transform, 1.0);\n\tgl_Position = (projectionMatrix * viewMatrix) * worldPos;\n}\n"},"1c6b":function(e,t,n){"use strict";n("cce8")},2252:function(e,t,n){"use strict";n("e4f4")},"22d1":function(e,t,n){"use strict";n("5dfb")},2436:function(e,t,n){},"246f":function(e,t){e.exports="precision highp float;\nfloat unpack(const in vec4 rgba_depth) {\n\tconst vec4 bit_shift = vec4(1.0 / ((256.0 * 256.0) * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\n\treturn (dot(rgba_depth, bit_shift) * 256.0) - 128.0;\n}\nattribute float nodeIndex;\nuniform float time;\nuniform float nodeNum;\nuniform float pointPosScale;\nuniform float posTextureWidth;\nuniform sampler2D posTexture;\nuniform sampler2D initPosTexture;\nuniform sampler2D noiseTexture;\nvarying vec2 vUv;\nvarying vec3 vWorldPos;\nvec2 getUv(float nodeIndex, float partIndex) {\n\tfloat id = (nodeNum * partIndex) + nodeIndex;\n\treturn vec2(mod(id, posTextureWidth) + 0.5, floor(id / posTextureWidth) + 0.5) / posTextureWidth;\n}\nvec4 getByNodeIndex(sampler2D tex, float nodeIndex) {\n\tfloat x = unpack(texture2D(tex, getUv(nodeIndex, 0.0)));\n\tfloat y = unpack(texture2D(tex, getUv(nodeIndex, 1.0)));\n\tfloat z = unpack(texture2D(tex, getUv(nodeIndex, 2.0)));\n\tfloat w = unpack(texture2D(tex, getUv(nodeIndex, 3.0)));\n\tvec3 pos = vec3(x, y, z) / pointPosScale;\n\treturn vec4(pos, w);\n}\nvoid main() {\n\tvUv = uv;\n\tvec4 data = getByNodeIndex(posTexture, nodeIndex);\n\tvec3 transform = data.xyz;\n\ttransform.y += position.y;\n\tvec4 worldPos = modelMatrix * vec4(transform, 1.0);\n\tvWorldPos = worldPos.xyz;\n\tgl_Position = (projectionMatrix * viewMatrix) * worldPos;\n}\n"},"26ef":function(e,t,n){},"3a9f":function(e,t,n){"use strict";n("62dc")},"3d16":function(e,t){e.exports="precision highp float;\nuniform float time;\nuniform float fps;\nuniform vec2 grid;\nuniform sampler2D map;\nvarying vec2 vUv;\nvec4 seqTexture(sampler2D tex, vec2 uv) {\n\tfloat colNum = grid.x;\n\tfloat rowNum = grid.y;\n\tfloat index = floor(mod(floor(time * fps), rowNum * colNum));\n\tfloat col = floor(mod(index, colNum));\n\tfloat row = floor(index / colNum);\n\treturn texture2D(tex, (uv / grid) + (vec2(col, row) / grid));\n}\nvoid main() {\n\tvec2 uv = vUv;\n\tvec4 col = seqTexture(map, uv);\n\tgl_FragColor = col;\n}\n"},"40b4":function(e,t,n){},"46b0":function(e,t){e.exports="precision highp float;\nuniform sampler2D lastTexture;\nuniform sampler2D initTexture;\nuniform sampler2D noiseTexture;\nuniform float time;\nuniform vec2 resolution;\nuniform float isInteract;\nuniform float affectRadius;\nuniform vec2 mouse;\nuniform float isDownFlow;\nvarying vec2 vUv;\nconst float K = 0.2;\nconst float v = 0.55;\nconst float dt = 0.15;\nconst float vorticity = 0.5;\nconst vec2 velBound = vec2(-10.0, 10.0);\nconst vec2 densityBound = vec2(0.5, 3.0);\nconst vec2 vortBound = vec2(-10.0, 10.0);\n#define PI 3.1415926\r\nfloat mag2(vec2 p) {\n\treturn dot(p, p);\n}\nvec4 mapData(vec4 data) {\n\treturn vec4((data.x * (velBound.y - velBound.x)) + velBound.x, (data.y * (velBound.y - velBound.x)) + velBound.x, (data.z * (densityBound.y - densityBound.x)) + densityBound.x, (data.w * (vortBound.y - vortBound.x)) + vortBound.x);\n}\nvec4 unmapData(vec4 data) {\n\tdata = clamp(data, vec4(velBound.x, velBound.x, densityBound.x, vortBound.x), vec4(velBound.y, velBound.y, densityBound.y, vortBound.y));\n\treturn vec4((data.x - velBound.x) / (velBound.y - velBound.x), (data.y - velBound.x) / (velBound.y - velBound.x), (data.z - densityBound.x) / (densityBound.y - densityBound.x), (data.w - vortBound.x) / (vortBound.y - vortBound.x));\n}\nvec2 point2(float t) {\n\tt *= 0.62;\n\treturn vec2(0.5, 0.5 + (cos(t) * 0.2));\n}\nvoid main() {\n\tvec2 uv = vUv;\n\tvec2 step = 1.0 / resolution.xy;\n\tfloat aspect = resolution.x / resolution.y;\n\tvec4 data = mapData(texture2D(lastTexture, uv));\n\tvec4 tr = mapData(texture2D(lastTexture, uv + (step * vec2(1.0, 0.0))));\n\tvec4 tl = mapData(texture2D(lastTexture, uv + (step * vec2(-1.0, 0.0))));\n\tvec4 tu = mapData(texture2D(lastTexture, uv + (step * vec2(0.0, 1.0))));\n\tvec4 td = mapData(texture2D(lastTexture, uv + (step * vec2(0.0, -1.0))));\n\tvec3 dx = (tr.xyz - tl.xyz) * 0.5;\n\tvec3 dy = (tu.xyz - td.xyz) * 0.5;\n\tvec2 densDif = vec2(dx.z, dy.z);\n\tdata.z -= (dt * dot(vec3(densDif, dx.x + dy.y), data.xyz));\n\tvec2 laplacian = (((tu.xy + td.xy) + tr.xy) + tl.xy) - (4.0 * data.xy);\n\tvec2 viscForce = v * laplacian;\n\tdata.xyw = mapData(texture2D(lastTexture, uv - ((dt * data.xy) * step))).xyw;\n\tvec2 newForce = vec2(0.0);\n\tvec2 dir = normalize(uv - mouse);\n\tfloat dist = mag2((uv - mouse) * vec2(aspect, 1.0));\n\tfloat angle = atan(dir.y, dir.x) + PI;\n\tfloat affectFactor = smoothstep(affectRadius, 0.0, dist);\n\taffectFactor *= mix(1.0, smoothstep(PI * 0.3, 0.0, abs(angle - (PI * 0.5))), isDownFlow);\n\tnewForce += ((((((0.12 * dir) / (pow(dist, 1.0) + 0.001)) * affectFactor) * isInteract) * affectRadius) / 0.04);\n\tnewForce.x *= (1.0 - isDownFlow);\n\tfloat distortAngle = texture2D(noiseTexture, ((uv * vec2(1.0, aspect)) * 3.0) + (time * 0.03)).r * 2.0;\n\tfloat decay = texture2D(noiseTexture, (((dir + 0.5) * vec2(1.0, aspect)) * 0.03) + (time * 0.03)).r;\n\tnewForce.x += (((cos(distortAngle) * 3.0) * isInteract) * affectFactor);\n\tnewForce.y += (((sin(distortAngle) * 3.0) * isInteract) * affectFactor);\n\tnewForce *= decay;\n\tdata.xy += ((dt * ((viscForce.xy - ((K / dt) * densDif)) + newForce)) / data.z);\n\tdata.xy += ((dt * newForce) / data.z);\n\tdata.xy *= 0.992;\n\tdata.w = ((tu.x - td.x) + tl.y) - tr.y;\n\tvec2 vort = vec2(abs(td.w) - abs(tu.w), abs(tr.w) - abs(tl.w));\n\tvort *= ((vorticity / (length(vort) + 1e-8)) * data.w);\n\tdata.xy += (vort * dt);\n\tdata = unmapData(data);\n\tif (time < 1.0) {\n\t\tdata = vec4(0.5, 0.5, 0.5, 0.0);\n\t}\n\tgl_FragColor = data;\n}\n"},"487d":function(e,t,n){},"54bd":function(e,t){e.exports="precision highp float;\nuniform float time;\nuniform float angle;\nuniform float opacity;\nuniform sampler2D clueMap0;\nuniform sampler2D clueMap1;\nuniform float progress;\nuniform sampler2D inkAnimMap;\nvarying vec2 vUv;\n#define PI 3.1415926\r\nvec3 seqTexture(sampler2D tex, vec2 uv, float progress) {\n\tfloat rowNum = 8.0;\n\tfloat colNum = 8.0;\n\tfloat duration = (rowNum * colNum) / 25.0;\n\tfloat time = progress * duration;\n\tvec2 size = vec2(colNum, rowNum);\n\tfloat index = floor(mod(floor(time * 25.0), rowNum * colNum));\n\tfloat col = floor(mod(index, colNum));\n\tfloat row = floor(index / colNum);\n\treturn texture2D(tex, (uv / size) + (vec2(col, row) / size)).rgb;\n}\nvec4 getFlowCol(sampler2D tex, vec2 uv) {\n\tvec4 col = texture2D(tex, uv);\n\tfloat offsetFactor = smoothstep(0.4, 0.2, col.r);\n\tuv.x += ((sin(((time * 1.0) + (uv.y * 30.0)) + (col.r * 10.0)) * 0.02) * offsetFactor);\n\tuv.y += ((cos(((time * 1.0) + (uv.x * 30.0)) + (col.r * 10.0)) * 0.02) * offsetFactor);\n\tvec4 offsetCol = texture2D(tex, uv);\n\tfloat dist = distance(offsetCol, col);\n\tcol = mix(offsetCol, col, smoothstep(0.1, 0.2, dist));\n\treturn col;\n}\nvoid main() {\n\tvec2 uv = vUv;\n\tvec4 col0 = getFlowCol(clueMap0, uv);\n\tvec4 col1 = getFlowCol(clueMap1, uv);\n\tcol1.rgb = pow(col1.rgb, vec3(mix(5.0, 1.0, clamp(pow(progress, 1.0), 0.0, 1.0))));\n\tcol1.a *= pow(progress, 0.3);\n\tvec2 inkUv = vUv - 0.5;\n\tinkUv = (inkUv.xy * vec2(cos(angle), cos(angle))) + (inkUv.yx * vec2(-sin(angle), sin(angle)));\n\tinkUv += 0.5;\n\tfloat ink = seqTexture(inkAnimMap, inkUv, progress).x;\n\tgl_FragColor = mix(col1, col0, ink);\n\tgl_FragColor.a *= opacity;\n}\n"},"583c":function(e,t,n){},"5c0b":function(e,t,n){"use strict";n("7df9")},"5dfb":function(e,t,n){},"5fb3":function(e,t){e.exports="precision highp float;\nuniform float time;\nuniform float fps;\nuniform float opacity;\nuniform sampler2D noiseTexture;\nuniform sampler2D map;\nuniform vec2 grid;\nvarying vec2 vUv;\nvarying vec3 vWorldPos;\nvec4 seqTexture(sampler2D tex, vec2 uv) {\n\tfloat colNum = grid.x;\n\tfloat rowNum = grid.y;\n\tfloat index = floor(mod(floor(time * fps), rowNum * colNum));\n\tfloat col = floor(mod(index, colNum));\n\tfloat row = floor(index / colNum);\n\treturn texture2D(tex, (uv / grid) + (vec2(col, row) / grid));\n}\nvoid main() {\n\tvec2 uv = vUv;\n\tfloat n = texture2D(noiseTexture, vUv * 0.2).r;\n\tuv.x += (sin((n + (uv.y * 40.0)) - (time * 6.28)) * 0.05);\n\tuv = mod(uv, vec2(1.0));\n\tvec4 col = seqTexture(map, uv);\n\tgl_FragColor = col;\n\tgl_FragColor.a *= ((n * 0.5) * opacity);\n}\n"},"62dc":function(e,t,n){},"63be":function(e,t){e.exports="precision highp float;\nuniform float time;\nuniform vec2 resolution;\nuniform sampler2D initTexture;\nuniform sampler2D colTexture;\nuniform sampler2D velTexture;\nuniform float isInteract;\nuniform float recoverRate;\nuniform vec2 mouse;\nuniform float isBlackInk;\nuniform float isSpread;\nuniform float keepAspect;\nuniform vec2 initTextureSize;\nvarying vec2 vUv;\nconst float dt = 0.15;\nfloat mag2(vec2 p) {\n\treturn dot(p, p);\n}\nconst vec2 velBound = vec2(-10.0, 10.0);\nconst vec2 densityBound = vec2(0.5, 3.0);\nconst vec2 vortBound = vec2(-10.0, 10.0);\nvec4 mapData(vec4 data) {\n\treturn vec4((data.x * (velBound.y - velBound.x)) + velBound.x, (data.y * (velBound.y - velBound.x)) + velBound.x, (data.z * (densityBound.y - densityBound.x)) + densityBound.x, (data.w * (vortBound.y - vortBound.x)) + vortBound.x);\n}\nvec4 unmapData(vec4 data) {\n\tdata = clamp(data, vec4(velBound.x, velBound.x, densityBound.x, vortBound.x), vec4(velBound.y, velBound.y, densityBound.y, vortBound.y));\n\treturn vec4((data.x - velBound.x) / (velBound.y - velBound.x), (data.y - velBound.x) / (velBound.y - velBound.x), (data.z - densityBound.x) / (densityBound.y - densityBound.x), (data.w - vortBound.x) / (vortBound.y - vortBound.x));\n}\nvec2 point2(float t) {\n\tt *= 0.62;\n\treturn vec2(0.5, 0.5 + (cos(t) * 0.2));\n}\nvoid main() {\n\tvec2 uv = vUv;\n\tvec2 step = 1.0 / resolution.xy;\n\tvec4 data = mapData(texture2D(velTexture, uv));\n\tvec2 vel = data.xy;\n\tfloat density = data.z;\n\tvec4 originCol = texture2D(initTexture, uv);\n\tvec4 col = texture2D(colTexture, uv - (((dt * vel) * step) * 3.));\n\tif (keepAspect == 1.0) {\n\t\tvec2 correctUv = uv;\n\t\tcorrectUv -= 0.5;\n\t\tfloat aspect = resolution.x / resolution.y;\n\t\tfloat initAspect = initTextureSize.x / initTextureSize.y;\n\t\tif (aspect > initAspect) {\n\t\t\tcorrectUv.y *= (initAspect / aspect);\n\t\t}\n\t\telse {\n\t\t\tcorrectUv.x *= (aspect / initAspect);\n\t\t}\n\t\tcorrectUv += 0.5;\n\t\toriginCol = texture2D(initTexture, correctUv);\n\t\tvec2 dir = normalize(uv - mouse);\n\t\tfloat dist = mag2((uv - mouse) * vec2(aspect, 1.0));\n\t\tcol.rgb *= mix(1.05, 1.0, smoothstep(0.0, 0.01, dist));\n\t}\n\tif (isBlackInk == 1.0) {\n\t\tcol.rgb = mix(col.rgb, vec3(0.0), smoothstep(0.5, 5.0, length(vel)));\n\t\tfloat brightness = length(col.rgb);\n\t\tif (isSpread == 1.0) {\n\t\t\tfor (float i = -1.0; i <= 1.0; i++) {\n\t\t\t\tfor (float j = -1.0; j <= 1.0; j++) {\n\t\t\t\t\tvec4 cc = texture2D(colTexture, uv + (step * vec2(i, j)));\n\t\t\t\t\tif (brightness > length(cc.rgb)) {\n\t\t\t\t\t\tcol.rgb = cc.rgb;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tcol = mix(col, originCol, recoverRate);\n\t}\n\tif (time < 1.0) {\n\t\tcol = mix(texture2D(initTexture, vUv), vec4(1.0, 1.0, 1.0, 1.0), isBlackInk);\n\t}\n\tgl_FragColor = col;\n}\n"},"692d":function(e,t){e.exports="precision highp float;\nvec4 pack(float num) {\n\tnum += 128.0;\n\tnum /= 256.0;\n\tconst vec4 bit_shift = vec4((256.0 * 256.0) * 256.0, 256.0 * 256.0, 256.0, 1.0);\n\tconst vec4 bit_mask = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\n\tvec4 res = mod((num * bit_shift) * vec4(255), vec4(256)) / vec4(255);\n\tres -= (res.xxyz * bit_mask);\n\treturn res;\n}\nfloat unpack(const in vec4 rgba_depth) {\n\tconst vec4 bit_shift = vec4(1.0 / ((256.0 * 256.0) * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\n\treturn (dot(rgba_depth, bit_shift) * 256.0) - 128.0;\n}\nuniform sampler2D lastTexture;\nuniform sampler2D initTexture;\nuniform sampler2D velTexture;\nuniform sampler2D noiseTexture;\nuniform float time;\nuniform float delta;\nuniform float reset;\nuniform float nodeNum;\nuniform float pointPosScale;\nuniform float riverLength;\nuniform float posZ;\nuniform vec2 resolution;\nuniform vec4 stonePos0;\nuniform vec4 stonePos1;\nuniform vec4 stonePos2;\nuniform vec4 stonePos3;\nuniform vec4 stonePos4;\nuniform vec4 stonePos5;\nuniform vec4 stonePos6;\nuniform vec4 stonePos7;\nuniform vec4 stonePos8;\nvarying vec2 vUv;\nvec3 processStone(vec3 worldPos, vec4 stonePos) {\n\tvec3 originPos = worldPos;\n\tfloat radius = max(0.001, stonePos.w);\n\tfloat d = length(worldPos.xy - stonePos.xy);\n\tif (d > (radius * 2.0))\n\t\treturn worldPos;\n\td = smoothstep(0.0, radius * 2.0, d);\n\td = (d * radius) + radius;\n\tworldPos.xy = stonePos.xy + (normalize(worldPos.xy - stonePos.xy) * d);\n\treturn mix(originPos, worldPos, 0.1);\n}\nvec2 getUv(float nodeIndex, float partIndex) {\n\tfloat id = (nodeNum * partIndex) + nodeIndex;\n\treturn vec2(mod(id, resolution.x) + 0.5, floor(id / resolution.x) + 0.5) / resolution;\n}\nvec3 getByNodeIndex(sampler2D tex, float nodeIndex) {\n\tfloat x = unpack(texture2D(tex, getUv(nodeIndex, 0.0)));\n\tfloat y = unpack(texture2D(tex, getUv(nodeIndex, 1.0)));\n\tfloat z = unpack(texture2D(tex, getUv(nodeIndex, 2.0)));\n\treturn vec3(x, y, z) / pointPosScale;\n}\nvoid main() {\n\tvec2 uv = vUv;\n\tfloat id = floor(uv.x * resolution.x) + (floor(uv.y * resolution.y) * resolution.x);\n\tfloat nodeIndex = mod(id, nodeNum);\n\tfloat partIndex = floor(id / nodeNum);\n\tvec3 initPos = getByNodeIndex(initTexture, nodeIndex);\n\tvec3 lastPos = getByNodeIndex(lastTexture, nodeIndex);\n\tvec3 prevPos = getByNodeIndex(lastTexture, nodeIndex - 1.0);\n\tvec3 nextPos = getByNodeIndex(lastTexture, nodeIndex + 1.0);\n\tvec3 pos = lastPos;\n\tif ((nodeIndex > 0.5) && (nodeIndex < (nodeNum - 1.5))) {\n\t\tpos.y += ((prevPos.y - pos.y) * 0.1);\n\t}\n\tif ((nodeIndex > 0.5) && (nodeIndex < (nodeNum - 1.5))) {\n\t\tpos = ((pos + prevPos) + nextPos) / 3.0;\n\t}\n\tpos += ((initPos - pos) * 0.05);\n\tpos = processStone(pos, stonePos0);\n\tpos = processStone(pos, stonePos1);\n\tpos = processStone(pos, stonePos2);\n\tpos = processStone(pos, stonePos3);\n\tpos = processStone(pos, stonePos4);\n\tpos = processStone(pos, stonePos5);\n\tpos = processStone(pos, stonePos6);\n\tpos = processStone(pos, stonePos7);\n\tpos = processStone(pos, stonePos8);\n\tpos = mix(pos, initPos, reset);\n\tfloat distToOrigin = distance(pos, initPos);\n\tpos *= pointPosScale;\n\tif (partIndex == 0.0) {\n\t\tgl_FragColor = pack(pos.x);\n\t}\n\telse if (partIndex == 1.0) {\n\t\tgl_FragColor = pack(pos.y);\n\t}\n\telse if (partIndex == 2.0) {\n\t\tgl_FragColor = pack(pos.z);\n\t}\n\telse {\n\t\tgl_FragColor = pack(distToOrigin);\n\t}\n}\n"},"6afd":function(e,t,n){},"6b0b":function(e,t){e.exports="uniform sampler2D maskTexture;\nuniform sampler2D inkTexture;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 mask = texture2D(maskTexture, vUv);\n\tvec4 col = texture2D(inkTexture, vUv);\n\tgl_FragColor = mix(col, vec4(0.945, 0.996, 1.0, 1.0), mask.r);\n}\n"},"6f83":function(e,t,n){},"74f5":function(e,t){e.exports="uniform sampler2D finalTexture;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 col = texture2D(finalTexture, vUv);\n\tgl_FragColor = col;\n}\n"},"75a0":function(e,t,n){},"75ae":function(e,t,n){},"7bbf":function(e,t){e.exports="precision highp float;\nuniform sampler2D stringTexture;\nuniform sampler2D noiseTexture;\nuniform float uvOffset;\nuniform float time;\nuniform float opacity;\nvarying vec2 vUv;\nvarying vec3 vWorldPos;\nvoid main() {\n\tvec2 uv0 = vUv;\n\tvec2 uv1 = vUv;\n\tfloat flowSpeed = 0.2;\n\tuv0.x += (uvOffset + (time * flowSpeed));\n\tuv1.x = ((uv1.x * 2.0) + uvOffset) + (time * flowSpeed);\n\tvec4 col = texture2D(stringTexture, uv0);\n\tgl_FragColor = col;\n\tgl_FragColor.a *= 0.5;\n\tgl_FragColor.a *= smoothstep(1.0, 0.7, vUv.x);\n\tgl_FragColor.a *= smoothstep(0.0, 0.3, vUv.x);\n\tfloat n0 = texture2D(noiseTexture, (vUv * vec2(1.0, 0.01)) + vec2(time * 0.05, 0.0)).r;\n\tfloat n1 = texture2D(noiseTexture, (vUv * vec2(1.0, 0.01)) + vec2(time * 0.1, 0.0)).r;\n\tfloat n = (n0 * 0.5) + (n1 * 0.5);\n\tgl_FragColor.a *= smoothstep(0.0, 0.5, n);\n}\n"},"7df9":function(e,t,n){},"82a9":function(e,t){e.exports="precision highp float;\nuniform float time;\nuniform sampler2D waveTexture;\nuniform sampler2D noiseTexture;\nuniform float opacity;\nvarying vec2 vUv;\nvoid main() {\n\tfloat n = texture2D(noiseTexture, (vUv * 0.15) + (time * 0.01)).r;\n\tvec2 uv = vUv;\n\tuv -= 0.5;\n\tvec2 dir = normalize(uv);\n\tfloat originLen = length(uv);\n\tfloat len = originLen * 6.0;\n\tlen -= ((time * 1.0) + (n * 0.8));\n\tlen = mod(len, 1.0);\n\tuv = dir * len;\n\tuv += 0.5;\n\tvec4 col = texture2D(waveTexture, uv);\n\tgl_FragColor = col;\n\tgl_FragColor.a *= ((opacity * smoothstep(0.5, 0.3, originLen)) * smoothstep(0.1, 0.2, originLen));\n\tgl_FragColor.a *= smoothstep(0.0, 0.5, n);\n}\n"},"8a87":function(e,t){e.exports="precision highp float;\nuniform float time;\nuniform float opacity;\nuniform sampler2D map;\nvarying vec2 vUv;\nvoid main() {\n\tvec2 uv = vUv;\n\tuv.y += (sin((time * 16.0) + (uv.x * 12.0)) * 0.02);\n\tvec4 col = texture2D(map, uv);\n\tgl_FragColor = col;\n\tgl_FragColor.a *= opacity;\n}\n"},"8b09":function(e,t,n){"use strict";n("6afd")},9124:function(e,t,n){},"999c":function(e,t,n){},"9e21":function(e,t){e.exports="varying vec2 vUv;\nvarying vec3 vWorldPos;\nvoid main() {\n\tvUv = uv;\n\tvWorldPos = (modelMatrix * vec4(position, 1.0)).xyz;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(position, 1.0);\n}\n"},"9e81":function(e,t){e.exports="precision highp float;\nuniform float time;\nuniform float fps;\nuniform vec2 grid;\nuniform float opacity;\nuniform sampler2D map;\nvarying vec2 vUv;\nvec4 seqTexture(sampler2D tex, vec2 uv) {\n\tfloat colNum = grid.x;\n\tfloat rowNum = grid.y;\n\tfloat index = floor(mod(floor(time * fps), rowNum * colNum));\n\tfloat col = floor(mod(index, colNum));\n\tfloat row = floor(index / colNum);\n\treturn texture2D(tex, (uv / grid) + (vec2(col, row) / grid));\n}\nvoid main() {\n\tvec2 uv = vUv;\n\tvec4 col = seqTexture(map, uv);\n\tgl_FragColor = col;\n\tgl_FragColor.a *= (0.35 * opacity);\n}\n"},"9e85":function(e,t,n){"use strict";n("d68a")},"9f24":function(e,t,n){"use strict";n("75ae")},a0bf:function(e,t,n){"use strict";n("2436")},a3e0:function(e,t,n){"use strict";n("c17b")},a480:function(e,t,n){},ae42:function(e,t,n){"use strict";n("fa2cd")},b4c7:function(e,t,n){"use strict";n("75a0")},b6d5:function(e,t,n){},b917:function(e,t,n){"use strict";n("fea4")},beab:function(e,t,n){},c01e:function(e,t,n){"use strict";n("beab")},c17b:function(e,t,n){},cce8:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("1c9a");var i=n("430a"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"app  "+(e.needRotate?"need_rotate":""),style:{width:this.width+"px",height:this.height+"px"},on:{touchmove:e.onTouchMove}},[e.startLoad?[n("Renderer",{ref:"renderer"})]:e._e(),e.pageSwitch.poster?n("PosterPage",{ref:"posterPage",on:{again:e.onAgain,getWelfare:e.onGetWelfare}}):e._e(),n("Dialog",{directives:[{name:"show",rawName:"v-show",value:e.showDialog,expression:"showDialog"}],ref:"dailog",staticClass:"dialog",style:{pointerEvents:e.showDialog?"all":"none",opacity:e.showDialog?1:0},on:{close:e.onCloseDialog}}),e.pageSwitch.clue?n("CluePage",{on:{confirm:e.onConfirm}}):e._e(),e.pageSwitch.interact?n("InteractPage",{ref:"interactPage",on:{hide:e.showCluePage,skip:e.onSkipScene}}):e._e(),e.pageSwitch.openning?n("OpenningPage",{ref:"openningPage",attrs:{pageSize:e.pageSize},on:{start:e.onStart,hide:e.hideOpenning}}):e._e(),e.pageSwitch.loading?n("LoadingPage",{attrs:{pageSize:e.pageSize},on:{load:e.onLoad}}):e._e()],2)},r=[],s=n("a7a0"),a=n("3c3a"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"poster_page fullscreen"},[e.highVersion?e._e():n("div",{class:"low_version_poster poster"+e.clueIndex+" fullscreen"}),n("RightZone",{ref:"rightZone",attrs:{selectedRole:e.selectedRole},on:{guess:e.onGuess,again:e.onAgain,showRule:e.onShowRule,getWelfare:e.onGetWelfare}}),e.enablePoster?e._e():n("div",{ref:"qr",staticClass:"qrcode",style:{opacity:e.showQR?1:0}}),e.highVersion?n("SwipeTip",{ref:"swipeTip"}):e._e(),e.showRule?n("Rule",{ref:"rule",on:{close:function(t){e.showRule=!1}}}):e._e(),n("keep-alive",[e.showGuessPage?n("GuessPage",{on:{confirm:e.onConfirm}}):e._e()],1)],1)},c=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"rightZone",staticClass:"right_wrapper fullscreen"},[e.enablePoster?n("div",{staticClass:"save_tip"}):e._e(),e.enablePoster?e._e():n("div",{staticClass:"shot_tip"}),n("div",{staticClass:"saved_poster_zone",style:{pointerEvents:e.lockInteract||!e.enablePoster?"none":"all"}},[n("img",{ref:"savedPosterImg",attrs:{src:e.savedPosterSrc}})]),n("div",{class:"again_bt "+(1==e.clueIndex||3==e.clueIndex?"light":"dark"),style:{pointerEvents:e.lockInteract?"none":"all"},on:{click:e.again}}),n("div",{staticClass:"text_wrapper "},[n("p",{staticClass:"poster_title"},e._l(e.posterTitle,(function(t,i){return n("span",{directives:[{name:"multi-ref",rawName:"v-multi-ref:animChar",arg:"animChar"}],key:t+i},[e._v(e._s(t))])})),0),n("div",{directives:[{name:"multi-ref",rawName:"v-multi-ref:gap",arg:"gap"}],staticClass:"gap"}),n("div",{staticClass:"clue_text"},e._l(e.clueText,(function(t,i){return n("div",{key:t},[n("p",{class:0===i?"first_line":""},e._l(t,(function(t,i){return n("span",{directives:[{name:"multi-ref",rawName:"v-multi-ref:animChar",arg:"animChar"}],key:t+i},[e._v(e._s(t))])})),0),n("div",{directives:[{name:"multi-ref",rawName:"v-multi-ref:gap",arg:"gap"}],staticClass:"gap"})])})),0),""!==e.guessName?n("div",{staticClass:"guess_text",domProps:{innerHTML:e._s(e.guessText)}}):e._e()]),n("div",{staticClass:"bt_wrapper"},[n("div",{staticClass:"guess_bt",style:{pointerEvents:e.lockInteract?"none":"all"},on:{click:e.onGuess}}),n("div",{staticClass:"welfare_bt_wrapper"},[n("div",{staticClass:"welfare_bt",style:{pointerEvents:e.lockInteract?"none":"all"},on:{click:e.getWelfare}}),n("div",{staticClass:"samll_bt_wrapper"},[n("div",{staticClass:"rule_bt",style:{pointerEvents:e.lockInteract?"none":"all"},on:{click:e.showRule}}),n("div",{staticClass:"reaccount_bt",style:{pointerEvents:e.lockInteract?"none":"all"},on:{click:e.reAccount}})])])])])},f=[],h=n("7736"),p=n("f412"),m=n.n(p),d=[{browser:{name:"any"},device:{model:"MI MAX 2"}},{browser:{name:"any"},device:{model:"V1901A"}},{browser:{name:"any"},device:{model:"PBAM00"}},{browser:{name:"any"},device:{model:"PBEM00"}},{browser:{name:"any"},device:{model:"ELE-AL00"}},{browser:{name:"any"},device:{model:"LIO-AN00"}},{browser:{name:"any"},device:{model:"V1818A"}},{browser:{name:"any"},device:{model:"PCAM10"}},{browser:{name:"any"},device:{model:"PCAM00"}},{browser:{name:"any"},device:{model:"ANA-AN00"}},{browser:{name:"any"},device:{model:"JEF-AN00"}},{browser:{name:"any"},device:{model:"MI 8"}},{browser:{name:"any"},device:{model:"vivo X20A"}},{browser:{name:"any"},device:{model:"V1818CA"}},{browser:{name:"any"},device:{model:"YAL-AL00"}},{browser:{name:"any"},device:{model:"PBBM30"}},{browser:{name:"any"},device:{model:"vivo X9"}},{browser:{name:"any"},device:{model:"OPPO R11"}},{browser:{name:"any"},device:{model:"PDVM00"}},{browser:{name:"any"},device:{model:"WLZ-AN00"}},{browser:{name:"any"},device:{model:"JSN-AL00a"}},{browser:{name:"any"},device:{model:"OPPO A57"}},{browser:{name:"any"},device:{model:"OPPO R9s"}},{browser:{name:"any"},device:{model:"CDY-AN00"}},{browser:{name:"any"},device:{model:"V1913A"}},{browser:{name:"any"},device:{model:"MAR-AL00"}},{browser:{name:"any"},device:{model:"COL-AL10"}},{browser:{name:"any"},device:{model:"V1911A"}},{browser:{name:"any"},device:{model:"DVC-AN20"}},{browser:{name:"any"},device:{model:"JSN-AL00"}},{browser:{name:"any"},device:{model:"OPPO A59s"}},{browser:{name:"any"},device:{model:"vivo Y66"}},{browser:{name:"any"},device:{model:"Y66"}},{browser:{name:"any"},device:{model:"V1813A"}},{browser:{name:"any"},device:{model:"PCGM00"}},{browser:{name:"any"},device:{model:"PDYM20"}},{browser:{name:"any"},device:{model:"Redmi Note 8"}},{browser:{name:"any"},device:{model:"V2012A"}},{browser:{name:"any"},device:{model:"PEGM00"}},{browser:{name:"any"},device:{model:"PCHM10"}},{browser:{name:"any"},device:{model:"V1981A"}},{browser:{name:"any"},device:{model:"M2012K11AC"}},{browser:{name:"any"},device:{model:"BRQ-AN00"}},{browser:{name:"any"},device:{model:"MI 8"}},{browser:{name:"any"},os:{versionLessThan:"14.6"},device:{model:"iPad"}},{browser:{name:"any"},os:{versionLessThan:"11"},device:{model:"iPhone"}}],v=n("0951"),y=n.n(v),g=n("03fb");function b(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){b(r,i,o,s,a,"next",e)}function a(e){b(r,i,o,s,a,"throw",e)}s(void 0)}))}}function x(e,t,n){var i=!1;if(e>t){var o=[t,e];e=o[0],t=o[1],i=!0}return i?1-g["I"].smootherstep(n,e,t):g["I"].smootherstep(n,e,t)}function k(e,t,n){return e+n*(t-e)}function T(e){return 0===e?0:Math.pow(2,10*e-10)}function P(e,t){return e+(t-e)*Math.random()}function S(e,t,n){if(PTTSendClick&&!H.state.isDEV)try{PTTSendClick(e,t,n)}catch(i){console.warn(i)}}function O(e){e+=128,e/=256;var t=new g["zb"](16777216,65536,256,1),n=new g["zb"](0,1/256,1/256,1/256),i=t.clone().multiplyScalar(255*e);return i.x%=256,i.y%=256,i.z%=256,i.w%=256,i.divideScalar(255),i.sub(new g["zb"](i.x*n.x,i.x*n.y,i.y*n.z,i.z*n.w)),i}function I(e){return e.sort((function(e,t){var n=e.name.split("-"),i=t.name.split("-"),o=parseInt(n[n.length-1]),r=parseInt(i[i.length-1]);return o-r}))}function _(e,t){return j.apply(this,arguments)}function j(){return j=w(y.a.mark((function e(t,n){return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var i=new Image;i.onload=function(){n&&n(i),e(i)},i.src=t})));case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function C(e,t,n,i,o,r){if(r=r||!1,e.beginPath(),R(e,M(t,n,i,o)),r){e.stroke(),e.beginPath();for(var s=0;s<t.length-1;s+=2)e.rect(t[s]-2,t[s+1]-2,4,4)}}function R(e,t){e.moveTo(t[0],t[1]);for(var n=2;n<t.length-1;n+=2)e.lineTo(t[n],t[n+1])}function M(e,t,n,i){t="undefined"!=typeof t?t:.5,n=n||!1,i=i||16;var o,r,s,a,u,c,l,f,h,p,m,d,v,y=[],g=[];for(y=e.slice(0),n?(y.unshift(e[e.length-1]),y.unshift(e[e.length-2]),y.unshift(e[e.length-1]),y.unshift(e[e.length-2]),y.push(e[0]),y.push(e[1])):(y.unshift(e[1]),y.unshift(e[0]),y.push(e[e.length-2]),y.push(e[e.length-1])),v=2;v<y.length-4;v+=2)for(d=0;d<=i;d++)s=(y[v+2]-y[v-2])*t,a=(y[v+4]-y[v])*t,u=(y[v+3]-y[v-1])*t,c=(y[v+5]-y[v+1])*t,m=d/i,l=2*Math.pow(m,3)-3*Math.pow(m,2)+1,f=-2*Math.pow(m,3)+3*Math.pow(m,2),h=Math.pow(m,3)-2*Math.pow(m,2)+m,p=Math.pow(m,3)-Math.pow(m,2),o=l*y[v]+f*y[v+2]+h*s+p*a,r=l*y[v+1]+f*y[v+3]+h*u+p*c,g.push(o),g.push(r);return g}function E(e,t,n,i){var o=(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x),r=(e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x);if(o*r>=0)return!1;var s=(n.x-e.x)*(i.y-e.y)-(n.y-e.y)*(i.x-e.x),a=s+o-r;if(s*a>=0)return!1;var u=s/(r-o),c=u*(t.x-e.x),l=u*(t.y-e.y);return{x:e.x+c,y:e.y+l}}function z(e,t,n){return g["I"].clamp((n-e)/(t-e),0,1)}function D(e){for(var t=window.location.search.substring(1),n=t.split("&"),i=0;i<n.length;i++){var o=n[i].split("=");if(o[0]==e)return o[1]}return!1}function A(e,t){var n=e.split("?")[0]+"?",i=e.split("?")[1];if(i.indexOf(t)>-1){for(var o={},r=i.split("&"),s=0;s<r.length;s++)r[s]=r[s].split("="),o[r[s][0]]=r[s][1];delete o[t];var a=n+JSON.stringify(o).replace(/[\"\{\}]/g,"").replace(/\:/g,"=").replace(/\,/g,"&");return a}return e}function B(e){e=e.toString();for(var t=e.split("."),n=["","0","00","000","0000"],i=n.reverse(),o=0;o<t.length;o++){var r=t[o].length;t[o]=i[r]+t[o]}var s=t.join("");return s}function F(e,t){try{var n=B(e),i=B(t);return n==i?0:n>i?1:-1}catch(o){return 1}}function N(){return!/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)}function U(){var e=ulink.isWxApp(),t=ulink.isQQApp();return e||t}function W(){var e=U();if(e){var t=new m.a,n=t.getResult();n.device.model&&"iphone"===n.device.model.toLowerCase()&&"6+"===X()&&(e=!1)}return e}function X(){var e=window.screen.height,t=window.screen.width;return 414===t&&896===e?"Xmax-Xr":375===t&&812===e?"X-Xs":320===t&&480===e?"4":375===t&&667===e?"6":414===t&&736===e?"6+":320===t&&568===e?"5":e<=480?"2-3":"none"}function L(){var e=new m.a,t=e.getResult();console.log("------设备信息------"),console.log(JSON.stringify(t,null,4)),console.log("-------------------");var n=!0;return d.forEach((function(e){if(t.browser.name&&t.device.model){var i=-1!==e.browser.name.toLowerCase().indexOf(t.browser.name.toLowerCase())||-1!==e.browser.name.toLowerCase().indexOf("any"),o=e.device.model.toLowerCase()===t.device.model.toLowerCase();i&&o&&(n=!!(e.os&&e.os.versionLessThan&&t.os.version)&&F(e.os.versionLessThan,t.os.version)<=0)}})),n&&t.device.model&&"iphone"===t.device.model.toLowerCase()&&"6+"===X()&&(console.log("iphone 6+ plus"),n=!1),console.log("HighVersion: ",n),n}i["default"].use(h["a"]);var $,H=new h["a"].Store({state:{highVersion:L(),needRotate:window.innerWidth<window.innerHeight,isDEV:!1,hmsr:"",id:"",enablePoster:W(),isPC:N(),isWindowsPhone:!1,isSymbian:!1,isAndroid:!1,isFireFox:!1,isChrome:!1,isTablet:!1,isPhone:!1,isMobile:!1,isSafari:!1,startLoad:!1,load:{resource:{}},user:{avatar:"",username:""},pageSwitch:{loading:!0,openning:!0,interact:!0,clue:!1,poster:!1},interactChapterIndex:-1,hasInteract:[!1,!1,!1,!1,!1],clueIndex:0,currentSceneName:"mountain",clueTmeplateIndex:0,savedPosterBase64:"",guessText:[],clueText:[],guessHero:"",hasGetWelfare:!1,riverStoneIndex:0},getters:{loadProgress:function(e){var t=0,n=0,i=Object.keys(e.load.resource);if(0===i.length)return 0;for(var o=0;o<i.length;o++)t+=1,n+=e.load.resource[i[o]],e.load.resource[i[o]];return n/t}},mutations:{UpdateResLoadProgress:function(e,t){i["default"].set(e.load.resource,t.id,t.progress)},UpdatePageSwitch:function(e,t){i["default"].set(e.pageSwitch,t.pageName,t.enabled)},updateQuestionsController:function(e,t){i["default"].set(e,"questionsController",t)},init:function(e,t){var n=navigator.userAgent;e.isWindowsPhone=/(?:Windows Phone)/.test(n),e.isSymbian=/(?:SymbianOS)/.test(n)||e.isWindowsPhone,e.isAndroid=/(?:Android)/.test(n),e.isFireFox=/(?:Firefox)/.test(n),e.isChrome=/(?:Chrome|CriOS)/.test(n),e.isTablet=/(?:iPad|PlayBook)/.test(n)||e.isAndroid&&!/(?:Mobile)/.test(n)||e.isFireFox&&/(?:Tablet)/.test(n)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,e.isPhone=/(?:iPhone)/.test(n)&&!e.isTablet,e.isMobile=e.isAndroid||e.isPhone,e.isSafari=!!navigator.userAgent.match(/Safari/i)&&!navigator.userAgent.match(/Chrome/i)},setUsernameCommit:function(e,t){e.user.username=t},setAvatarCommit:function(e,t){e.user.avatar=t},setNeedRotate:function(e,t){e.needRotate=t},setChapter:function(e,t){e.interactChapterIndex=t},setStartLoad:function(e,t){e.startLoad=t},setHasInteract:function(e,t){i["default"].set(e.hasInteract,t.index,t.flag)},resetHasInteract:function(e){for(var t=0;t<e.hasInteract.length;t++)i["default"].set(e.hasInteract,t,!1)},setClueIndex:function(e,t){e.clueIndex=t},setCurrentSceneName:function(e,t){e.currentSceneName=t},setPosterBase64:function(e,t){e.savedPosterBase64=t},setGuessText:function(e,t){e.guessText=t},setGuessHero:function(e,t){e.guessHero=t},setClueText:function(e,t){e.clueText=t},setClueTemplateIndex:function(e,t){e.clueTmeplateIndex=t},setHasGetWelfare:function(e,t){e.hasGetWelfare=t},setRiverStoneIndex:function(e,t){e.riverStoneIndex=t}},actions:{},modules:{}});function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V={LEFT:0,RIGHT:1,TOP:2,BOTTOM:3},G=($={},q($,V.LEFT,{shakeDir:0,shakePinPos:1}),q($,V.RIGHT,{shakeDir:0,shakePinPos:0}),q($,V.BOTTOM,{shakeDir:1,shakePinPos:0}),q($,V.TOP,{shakeDir:1,shakePinPos:1}),$),K={num:17},Y={num:H.state.highVersion?20:12,duration:H.state.highVersion?30:14,startAt:[0,.8,2.64,3+.28,4.6,6,7.36,8.36,9.48,10.48,11.8,12.88,13.84,14.88,17.4,18.4,20.24,22.4,24.2,25.2]},Q={num:H.state.highVersion?25:15,duration:H.state.highVersion?28:13,startAt:[0,1.2,2.12,2+.72,3.2,3.84,4.64,5.6,6.12,7.08,8.4,9.48,10.44,11.48,12.28,13.44,14.32,15.32,16.2,17.48,18.32,19.16,19.84,20.92,22]},J={chengyaojin:{cn:"程咬金"},cwj:{cn:"蔡文姬"},damo:{cn:"达摩"},gaojianli:{cn:"高渐离"},houyi:{cn:"后羿"},jiangziya:{cn:"姜子牙"},jing:{cn:"镜"},libai:{cn:"李白"},lixin:{cn:"李信"},mengqi:{cn:"梦奇"},mingshiyin:{cn:"明世隐"},sgwe:{cn:"上官婉儿"},taiyizhenren:{cn:"太乙真人"},yangyuhuan:{cn:"杨玉环"},yixing:{cn:"弈星"},yunzhongjun:{cn:"云中君"},zhaoyun:{cn:"赵云"},zhouyu:{cn:"周瑜"},zhuangzhou:{cn:"庄周"},zhubajie:{cn:"猪八戒"},zhugeliang:{cn:"诸葛亮"}},Z={bird:{colNum:3,textTemplates:[{clueText:"灵鸟翔千仞%只为留一人",templates:{chengyaojin:"你觉得我是*?%两个字，搞笑",cwj:"你觉得我是*？%不对不对，再猜猜",damo:"我是*？%这一头秀发，他倒是想要拥有",gaojianli:"你猜我是*？%我们的灵魂总算起共鸣了",houyi:"我是*？%哼，要变天了",jiangziya:"你猜我是*？%可能是年少时候的我",jing:"我是*？%你怎么满脑子都是那家伙",libai:"你觉得我是*？%我看是你醉了",lixin:"我是*？%我说是你信吗？",mengqi:"你觉得我是*？%哈哈，太期待了",mingshiyin:"你觉得我是*？%呵，有点意思",sgwe:"你猜我是*？%呵，有点意思",taiyizhenren:"你猜我是*？%我的脸可没那么黑",yangyuhuan:"你猜我是*？%也许是吧",yixing:"你猜我是*？%下棋还是弹琴，这是个问题",yunzhongjun:"你觉得我是*？%有点道理",zhaoyun:"你猜我是*？%真是出乎意料的有趣",zhouyu:"你猜我是*？%嘿嘿，我很想告诉你答案，但现在不能说",zhuangzhou:"你猜我是*？%脑洞太大，得补补",zhubajie:"你觉得我是*？%嘘！俺的秘密可不要乱说",zhugeliang:"你觉得我是*？%呵呵，一切都在计算中"}},{clueText:"归去的飞鸟%会记住我的梦吗",templates:{chengyaojin:"你觉得我是*?%两个字，搞笑",cwj:"你觉得我是*？%错啦！我是不会说谎的",damo:"我是*？%这一头秀发，他倒是想要拥有",gaojianli:"你猜我是*？%我们的灵魂总算起共鸣了",houyi:"我是*？%哼，要变天了",jiangziya:"你猜我是*？%可能是年轻时候的我",jing:"我是*？%你是不是太爱她了",libai:"你觉得我是*？%哈哈哈，你是个天才",lixin:"我是*？%我说是你信吗？",mengqi:"你觉得我是*？%哈哈，太期待了",mingshiyin:"你觉得我是*？%呵，有点意思",sgwe:"你猜我是*？%呵，有点意思",taiyizhenren:"你猜我是*？%我的脸可没那么黑",yangyuhuan:"你猜我是*？%也许是吧",yixing:"你猜我是*？%呵呵，先保持神秘",yunzhongjun:"你觉得我是*？%有点道理",zhaoyun:"你猜我是*？%真是出乎意料的有趣",zhouyu:"你猜我是*？%我看你是想火了",zhuangzhou:"你猜我是*？%美梦成真了",zhubajie:"你觉得我是*？%你在逗我吗",zhugeliang:"你觉得我是*？%呵呵，一切都在计算中"}},{clueText:"鸟儿停在我头顶",templates:{chengyaojin:"你觉得我是*?%一个字，错",cwj:"你觉得我是*？%不对不对，再猜猜",damo:"我是*？%鸟儿怎么会停在我头上？",gaojianli:"你猜我是*？%我们的灵魂总算起共鸣了",houyi:"如果我是*%我会让这鸟儿把你打晕",jiangziya:"你猜我是*？%可能是年轻时候的我",jing:"我是*？%你是不是太爱她了",libai:"你觉得我是*？%我看是你醉了",lixin:"我是*？%我说是你信吗？",mengqi:"你觉得我是*？%哈哈，太期待了",mingshiyin:"你觉得我是*？%呵，有点意思",sgwe:"你猜我是*？%呵，有点意思",taiyizhenren:"你猜我是*？%我的脸可没那么黑",yangyuhuan:"你猜我是*？%也许是吧",yixing:"你猜我是*？%呵呵，先保持神秘",yunzhongjun:"你觉得我是*？%有点道理",zhaoyun:"你猜我是*？%真是出乎意料的有趣",zhouyu:"你猜我是*？%我看你是想火了。",zhuangzhou:"你猜我是*？%美梦成真了",zhubajie:"你觉得我是*？%你在逗我吗",zhugeliang:"你觉得我是*？%呵呵，智商太低会传染"}}]},water:{colNum:1,textTemplates:[{clueText:"是这倒影看见了我%还是我看见了这倒影",templates:{chengyaojin:"我若在倒影中看到我是*%那也怪吓人的",cwj:"我若在倒影中看到我是*%嘿嘿，太可爱了吧",damo:"我是*？%这一头秀发，他倒是想要拥有",gaojianli:"你猜我是*？%我们的灵魂总算起共鸣了",houyi:"你觉得我是*？%呵，光明，制造白日梦",jiangziya:"我若在倒影中看到我是*%哟，变年轻了不少",jing:"你觉得我是*？%嗯？也许你是对的",libai:"我若在倒影中看到我是*%哈哈哈哈，妙哉妙哉",lixin:"我是*？%我说是你信吗？",mengqi:"我若在倒影中看到我是*%那还怪可爱的",mingshiyin:"我若在倒影中看到我是*%嘿嘿，还真俊",sgwe:"你猜我是*？%呵，有点意思",taiyizhenren:"我若在倒影中看到我是*%那那那也怪吓人的",yangyuhuan:"我若在倒影中看到我是*%世事易变，容颜也变了？",yixing:"我若在倒影中看到我是*%唔，倒有几分相似",yunzhongjun:"你觉得我是*？%呵，有点意思",zhaoyun:"嗯？*也会喜欢看%倒影里的自己吗？",zhouyu:"你猜我是*？%也许是吧",zhuangzhou:"我会是*吗？%呵，琴师是我，我就是琴师",zhubajie:"我若在倒影中看到我是*%那也怪吓人的",zhugeliang:"我若在倒影中看到我是*%嘿嘿，真有点像"}}]},leaf:{colNum:2,textTemplates:[{clueText:"红叶舞秋色%是梦亦是真",templates:{chengyaojin:"你觉得我是*？%一个字，错",cwj:"你觉得我是*？%错啦！我是不会说谎的",damo:"我是*？%这一头秀发，他倒是想要拥有",gaojianli:"如果我是*%在红叶下弹古琴也是很不错的",houyi:"我是*？%哼，要变天了",jiangziya:"你猜我是*？%可能是年轻时候的我",jing:"你觉得我是*？%嗯？也许你是对的",libai:"你觉得我是*？%哈哈哈，你是个天才",lixin:"我是*？%只怪这红叶让人浮想联翩。",mengqi:"你觉得我是*？%哈哈，太期待了",mingshiyin:"你觉得我是*？%呵，有点意思",sgwe:"你猜我是*？%呵，有点意思",taiyizhenren:"你猜我是*？%我说你猜对了你敢信吗？",yangyuhuan:"你猜我是*？%也许是吧",yixing:"我会是*吗？%呵，一琴一棋一宇宙",yunzhongjun:"你觉得我是*？%呵，有点意思",zhaoyun:"你猜我是*？%真是出乎意料的有趣",zhouyu:"你猜我是*？%也许是吧",zhuangzhou:"梦里花落知多少%我会是*吗？",zhubajie:"你觉得我是*？%你在逗我吗",zhugeliang:"你觉得我是*？%呵呵，智商太低会传染"}},{clueText:"红叶连天如火%琴音幽幽似梦",templates:{chengyaojin:"*可不会弹琴",cwj:"你觉得我是*？%人家演奏，台下的加油哦",damo:"我是*？%这一头秀发，他倒是想要拥有",gaojianli:"如果我是*%新曲子会让你泪流满面的",houyi:"我是*？%哼，要变天了",jiangziya:"你猜我是*？%可能是年轻时候的我",jing:"你觉得我是*？%嗯？也许你是对的",libai:"你觉得我是*？%哈哈哈，你是个天才",lixin:"我是*？%只怪这红叶让人浮想联翩",mengqi:"你觉得我是*？%哈哈，太期待了",mingshiyin:"你觉得我是*？%呵，有点意思",sgwe:"你猜我是*？%呵，有点意思",taiyizhenren:"你猜我是*？%拿拿拿拿什么拯救你，小笨蛋",yangyuhuan:"你猜我是*？%也许是吧",yixing:"我会是*吗？%呵，一琴一棋一宇宙",yunzhongjun:"你觉得我是*？%呵，有点意思",zhaoyun:"你猜我是*？%真是出乎意料的有趣",zhouyu:"你猜我是*？%也许是吧",zhuangzhou:"你猜我是*？%美妙的琴声，值得高歌一曲",zhubajie:"*弹琴？%难以想象",zhugeliang:"你觉得我是*？%呵呵，智商太低会传染"}}]},hair:{colNum:1,textTemplates:[{clueText:"待我长发及腰%就是我们相逢的时候",templates:{chengyaojin:"*的业余爱好确实是变装",cwj:"你觉得我是*？%你猜错啦，宝宝不开心",damo:"如果我是*%距离长发及腰还有些时日",gaojianli:"我是*？%哼，该我上场表演啦",houyi:"你觉得我是*？%那我得先去染个黑发",jiangziya:"我是*？%我都白发及腰，我们咋还没相遇",jing:"你觉得我是*？%嗯？长发的一定是女孩子吗？",libai:"你觉得我是*？%你有点想法",lixin:"我是*？%我说是你信吗？",mengqi:"如果我是*%我可长不出头发",mingshiyin:"如果我是*%我的长发已经及腰了，我们最终会相逢吗",sgwe:"如果我是*%我的长发已经及腰了，我们最终会相逢吗",taiyizhenren:"你猜我是*？%道生一，一生二，二生长头发",yangyuhuan:"如果我是*%我的长发已经及腰了，我们最终会相逢吗",yixing:"你猜我是*？%也许是吧",yunzhongjun:"你觉得我是*？%呵，有点意思",zhaoyun:"你猜我是*？%真是出乎意料的有趣",zhouyu:"你猜我是*？%也许是吧",zhuangzhou:"如果我是*%我要做多久的梦长发才能及腰呢？",zhubajie:"*长发及腰的样子太期待了",zhugeliang:"你觉得我是*？%呵呵，智商太低会传染"}}]},cloud:{colNum:1,textTemplates:[{clueText:"在云海上钓鱼%能钓到什么呢？",templates:{chengyaojin:"如果我是*%我可能没有耐心在这钓鱼",cwj:"你觉得我是*？%不知道能不能钓上来一只羊驼",damo:"我是*？%这一头秀发，他倒是想要拥有",gaojianli:"你猜我是*？%我们的灵魂总算起共鸣了",houyi:"我是*？%哼，要变天了",jiangziya:"如果我是*%愿者上钩",jing:"你觉得我是*？%镜花水月里的鱼，她可没有兴趣",libai:"你觉得我是*？%呵，他会来钓鱼吗？",lixin:"我是*？%我说是你信吗？",mengqi:"你觉得我是*？%哈哈，太期待了",mingshiyin:"你觉得我是*？%呵，有点意思",sgwe:"你猜我是*？%呵，有点意思",taiyizhenren:"你猜我是*？%你竟然这样猜我的真面目",yangyuhuan:"你猜我是*？%也许是吧",yixing:"我会是*吗？%下棋还是弹琴，这是个问题",yunzhongjun:"你觉得我是*？%呵，有点意思",zhaoyun:"你猜我是*？%真是出乎意料的有趣",zhouyu:"你猜我是*？%不知道能不能钓上来个小乔",zhuangzhou:"如果我是*%我的鲲也许藏在这云海中",zhubajie:"你觉得我是*？%在这云海里也许能钓上来个大西瓜",zhugeliang:"你觉得我是*？%呵呵，智商太低会传染"}}]}},ee={num:5,startPoint:[0,24.08,56.96,86.12,114.08]},te={poster:{data:[0,0,0,0,0,.07,0,.56,0,0,.15,.15,0,.15,.07,.3,.04,0,0,.11,.07,0,.07,0,0,.22,0,0,.52,.07,.22,0,0,0,.04,0,.07,0,.07,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,.07,0,0,0,.04,0,0,0,.04,0,0,.11,.04,0,0,.11,0,.04,0,0,0,0,.04,0,.04,0,0,0,0,0,0,.11,.26,.15,.11,0,0,.04,.07,0,.11,0,.41,0,.04,0,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,.07,0,0,0,.07,0,0,0,.07,0,.04,.04,.04,0,.07,0,0,.07,0,0,0,.07,0,.04,0,.07,.04,.11,.04,0,.33,.04,0,0,.26,.04,.15,.56,.04,.11,0,.19,0,.04,0,.44,0,.07,.7,.15,.15,.3,.07,0,.19,.11,.48,.15,0,.44,.11,.07,.07,.22,0,0,.07,0,0,0,0,0,0,0,0,0,.07,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,.22,0,.04,.07,0,0,0,0,.07,0,.04,0,0,0,0,0,0,.04,0,0,0,0,0,0,0,.19,.26,0,0,0,0,0,0,.04,0,0,0,0,0,0,0,0,.07,0,0,0,0,.04,.07,0,0,0,0,0,0,0,0,.78,.19,0,.15,.04,0,.3,.11,.11,0,0,.07,.07,0,0,.04,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,.04,0,0,.15,0,.04,.04,.15,0,0,0,.37,.04,.07,.11,.15,0,.04,.04,.04,0,.33,.15,.41,.3,.22,.11,0,.22,.11,.15,0,.04,.07,.07,.11,.11,.33,.11,0,0,.11,0,.22,.04,0,0,.19,0,0,.04,0,0,.04,0,0,0,0,0,0,0,0,0,0,.04,0,.3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.19,.3,0,.04,.04,.04,.11,.11,.04,0,.15,.04,.07,0,0,0,0,0,0,.19,0,.11,0,.07,0,0,0,0,0,0,.04,0,0,0,.04,0,0,.04,0,0,.04,0,0,.15,.22,.11,0,0,0,0,0,.11,0,.04,0,0,0,0,0,0,0,.04,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,.04,.15,0,.04,.04,0,0,0,.07,0,.15,.07,.04,.07,0,.11,.07,0,.11,.26,.15,.22,.04,.15,0,.07,0,0,.26,0,.19,.04,.11,0,.07,.07,.07,.11,0,.15,0,.04,.15,0,0,.04,.07,.15,.04,.04,.59,.11,.04,0,0,.19,0,.07,0,.11,.44,.04,.04,.04,.04,0,0,.11,0,0,0,0,.19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.33,.04,.04,.15,.19,0,0,.15,0,0,0,.07,0,.11,.07,.04,0,0,0,0,0,.04,0,0,.04,.04,0,.15,0,0,.04,0,0,.19,0,.11,.37,0,0,0,0,0,0,0,.19,.15,0,.11,0,.04,.11,.04,0,.04,.04,.11,0,0,0,0,0,0,0,.04,0,.04,0,0,0,0,0,0,.07,0,0,0,.11,0,.04,0,0,.11,0,.04,.04,0,.04,.3,0,0,.07,.07,.19,0,0,0,.04,.07,0,0,0,.07,.11,0,.22,0,0,.04,0,.07,.04,0,.07,0,0,.07,0,0,0,.04,.15,0,.04,0,0,.04,0,.07,.04,0,0,.04,.37,.11,.07,0,0,.04,0,0,.04,0,0,0,.22,0,0,0,0,.04,0,0,0,0,0,.07,0,0,0,0,0,0,.07,0,0,.07,0,.04,.04,0,0,0,0,0,0,0,0,.41,.07,0,0,0,0,0,0,0,0,0,.19,0,0,.15,0,0,0,0,0,0,0,.22,.04,0,0,0,0,0,0,.04,0,0,.07,0,0,0,.04,0,0,0,0,0,0,0,0,.22,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,.07,0,.22,.19,0,0,0,0,0,.07,0,.07,.04,.07,.04,.07,.04,.04,.52,0,0,.04,.04,.07,0,0,.04,.07,0,0,0,0,.04,0,.04,.07,0,.04,0,0,0,.19,0,.19,.07,.04,.07,0,0,.04,.33,.07,.07,.04,.3,.04,.19,.07,.22,.07,0,.15,.04,.15,.26,.19,0,0,0,.37,.3,0,.07,.41,.15,0,.04,0,.07,.22,.04,.04,0,0,.04,.3,0,0,0,0,0,.04,0,0,0,0,.19,0,0,0,0,0,0,0,0,.04,0,0,.04,0,0,.04,.04,0,0,0,0,.56,0,0,0,0,0,.33,0,0,0,0,0,.44,0,.07,.07,0,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,0,0,0,0,0,0,.22,.07,.04,0,.07,0,.07,0,0,0,0,0,.3,.04,0,0,.04,0,0,0,0,0,0,0,.37,0,0,0,0,.19,0,0,.07,0,0,.07,0,0,0,0,0,0,.11,.04,.11,.04,.19,0,.07,.04,0,0,.15,0,0,0,.04,0,0,.22,0,0,.04,0,.15,.04,.11,0,.04,.11,.07,.07,.15,0,.22,.07,0,.07,0,.04,0,.07,.15,.15,.07,.19,.44,0,.07,.59,.11,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,.11,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,0,.33,.04,.04,0,0,0,0,0,0,0,0,.07,.26,.15,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.07,0,0,0,0,.11,0,0,0,0,0,0,0,0,0,.22,0,0,0,0,0,0,.04,0,0,.07,.3,0,.15,0,0,.04,.04,.04,0,0,.11,.07,0,0,0,0,0,0,.04,0,0,.11,.3,0,0,0,0,0,.07,0,.26,0,0,.04,0,0,0,0,.11,0,.04,0,0,0,0,.07,.07,0,.04,.07,0,0,0,0,.04,.07,0,.07,.15,0,.04,0,.04,.11,.11,0,.44,.15,0,0,.15,.04,.07,.07,.04,.11,.19,.04,.11,0,0,.04,.11,.19,.07,.04,.15,0,.04,.37,0,0,0,.04,.04,0,0,0,0,.04,.07,0,0,0,0,0,.33,0,0,0,.07,.11,.04,0,0,0,0,0,0,0,0,0,.3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.11,.19,.22,0,0,0,0,0,0,0,0,.33,.11,.15,.04,.07,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,.52,0,0,0,.07,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,.04,0,.41,0,.63,.04,.41,.3,0,0,.11,.41,0,.15,.04,.44,.04,.07,0,0,0,.04,0,0,0,.04,.3,0,0,0,0,0,0,.11,.04,0,.04,0,0,.04,0,.04,.22,.04,0,.19,.37,.07,0,0,.04,.11,0,0,.04,.07,.04,.26,.19,0,.07,.15,.19,.11,0,.04,.07,.56,.04,0,0,.04,.11,0,0,0,0,0,.15,.07,.04,0,.04,0,.04,0,0,0,0,0,.19,.07,.04,.07,0,.07,0,.07,.11,0,0,.22,0,0,.04,0,.04,0,0,0,0,.04,0,.04,0,0,0,0,0,0,0,0,0,.11,.04,0,.07,0,0,0,.04,0,0,0,0,.44,0,0,0,0,0,0,0,0,0,0,.52,0,0,0,.07,0,0,0,.11,0,.7,0,.04,.04,0,0,.04,0,.07,.07,.04,0,0,0,0,.07,0,0,0,0,0,0,0,0,0,0,0,0,0,.41,0,0,.07,.07,0,.04,0,0,.04,.04,0,0,0,0,.78,0,.07,0,0,0,0,0,.04,0,.04,0,0,.11,0,0,0,0,0,0,0,0,0,.19,.19,.04,.07,.07,.15,.11,.07,.07,.04,0,.19,.19,0,.04,0,.07,.04,0,.07,0,0,.26,0,.07,.04,0,0,.07,.04,0,0,0,0,.04,0,0,0,.26,.19,0,0,0,0,.26,0,0,0,0,.04,0,0,.04,.04,.04,.3,.04,0,0,.04,0,0,0,.04,0,0,.04,.04,.07,0,0,.07,0,.11,.11,0,.04,.04,.26,.04,0,.04,0,.19,0,0,0,.04,0,.19,.11,0,0,0,0,0,0,0,0,0,.33,.04,.11,0,0,.04,0,.11,0,0,0,.37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,0,.04,0,0,.11,0,0,0,0,.15,.48,0,0,.04,.19,.07,.04,0,.07,0,.11,0,.04,.04,0,.11,.41,.11,0,0,.04,.41,.37,0,.04,.19,.11,0,.19,0,.19,.15,.15,.04,.07,0,.04,.07,.15,0,.04,0,0,0,.04,.11,0,.04,.04,0,0,.04,0,0,0,.22,.11,0,0,0,0,0,0,0,0,0,0,.15,.07,0,0,0,.04,0,0,0,0,0,.11,0,0,0,0,0,0,0,0,0,.11,.41,.22,0,0,0,0,0,.04,0,0,0,0,0,0,0,0,0,.15,0,0,0,0,.15,.04,0,0,0,0,.04,.07,.04,.15,0,.11,0,.04,.04,.04,0,0,0,.04,0,0,.56,0,.04,.11,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,0,0,0,.07,0,0,0,.11,.11,.48,0,0,.04,0,.04,.11,.07,0,0,.04,0,0,.07,0,0,.48,0,.04,.11,.07,0,0,.74,0,0,0,.04,.07,0,0,0,.22,0,.19,.22,0,.07,.26,0,.22,.11,0,.19,.04,.04,.04,0,0,.07,.07,0,0,0,0,0,.04,.04,0,0,0,.59,.15,.04,0,0,0,0,.04,.04,0,.04,.04,0,.04,.04,.07,0,0,.04,.11,.04,.07,0,0,0,0,0,0,0,0,0,.22,0,.26,.07,.04,0,0,0,.11,0,.22,0,0,.07,.63,.11,.11,.04,0,0,.11,0,0,.07,.11,0,.04,0,0,.04,0,.04,.07,0,.04,.07,.07,.04,0,0,0,0,0,0,0,0,.04,.04,0,.04,0,.11,0,.07,.07,.04,0,0,.33,.48,0,0,0,.11,0,0,.04,0,0,.07,0,.04,0,0,.07,.15,.19,0,0,.04,0,0,.04,.04,0,.07,0,0,0,0,.07,0,0,0,0,0,0,.07,0,0,.07,0,.07,.44,0,0,.04,.04,.3,0,.07,0,.11,.15,.07,.04,.04,.11,0,0,.15,.15,0,.04,0,.04,.04,0,.15,0,0,.04,.07,0,0,0,.04,.07,0,0,0,.04,.11,.07,0,.11,.15,.26,.15,0,.04,.04,.15,.15,0,0,0,0,0,.04,0,.19,0,.22,.07,.04,.19,0,0,0,.04,.07,0,0,.04,0,0,0,0,.04,.19,0,.07,0,0,.15,0,0,.11,.07,0,.15,0,.07,.04,0,0,0,0,0,0,.07,.04,.07,0,.04,0,0,.07,0,0,0,.04,0,.19,0,.04,0,0,.15,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.7,0,0,.11,0,0,.04,0,0,0,0,0,0,0,0,0,0,.37,.07,0,0,.04,0,0,.07,0,0,0,.07,0,.04,.07,0,.04,0,0,0,0,0,.26,.07,0,0,0,0,.37,.04,.11,0,0,0,0,0,0,.04,.04,0,0,0,0,0,.07,0,.04,0,0,0,.26,.04,0,0,0,0,0,0,.07,.04,0,0,0,0,0,0,0,0,0,0,0,.41,0,0,.04,0,.07,.04,0,0,0,.07,.15,.22,.11,0,.07,.04,.04,0,0,0,0,0,.04,0,.07,0,.07,0,.15,0,0,0,.04,.07,.04,.07,0,.04,.19,.07,0,.15,0,.15,.22,.07,.11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,0,.04,0,.04,.11,.11,0,0,0,.07,.11,0,0,0,0,0,.04,0,0,0,0,0,0,0,0,.26,.33,.11,0,0,.04,.04,0,.15,.04,.07,0,.15,0,0,0,0,0,.11,0,0,0,0,.52,0,0,.11,0,0,0,.04,.15,0,0,0,0,0,0,0,.3,0,0,0,.04,0,.07,.33,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,.15,0,.04,0,0,0,0,0,0,0,.04,.04,.07,0,.07,0,.04,0,0,.04,0,0,.67,0,.04,.07,.22,.07,.52,.11,0,.11,0,0,.04,.07,.04,0,0,.07,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,.04,0,.07,0,0,0,0,0,0,.04,.04,0,0,.22,.15,0,0,.04,0,0,.04,0,.04,0,0,.07,.04,.04,.07,.07,.11,.04,0,.15,.04,.15,0,.11,.04,.15,.11,.07,.04,0,0,0,.07,0,0,0,0,0,.67,0,0,.04,0,.04,0,.11,.15,.07,0,.04,0,0,.07,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,.04,.04,0,0,0,.33,.11,0,0,.04,0,0,0,0,.04,0,.52,0,0,0,0,0,0,0,0,.04,0,.19,.07,0,0,.04,0,.04,.04,.04,0,0,0,.26,.04,.04,0,.19,.04,0,0,.11,0,0,.04,0,0,0,0,0,.11,0,0,.11,.67,0,.04,.15,.11,.04,0,.04,0,.15,.07,.04,0,0,0,0,0,0,0,0,0,0,0,.04,.04,0,0,0,0,0,0,.04,.04,.3,.11,0,.11,0,.04,.11,.11,0,.11,.11,.07,.41,0,.04,0,0,0,.04,.04,0,.19,.04,.11,.07,0,.11,.04,.15,.11,0,0,0,0,.33,.07,.04,.04,0,0,.19,.15,.04,.04,0,.04,0,0,.04,0,0,.19,.11,0,.07,0,.56,.3,0,.07,.11,0,.04,0,0,.04,0,0,.07,0,0,0,0,.07,.11,0,.07,0,0,.07,.07,.07,0,.04,.07,0,.19,.07,.07,.07,.3,.07,.04,0,0,.11,0,.11,0,.04,0,.37,.11,0,.04,.07,.04,.07,0,.11,.19,0,0,0,.07,.11,0,.04,.04,0,0,.15,.04,.26,.07,0,.04,.07,.04,.15,.22,.26,.11,0,.33,.04,.15,0,.04,.19,.04,0,0,.07,0,.11,.07,.11,.04,.04,0,.15,0,.04,.11,.04,0,0,0,0,0,0,0,0,.07,0,0,0,.04,0,.04,.04,0,0,0,0,0,0,.04,.04,.04,0,.04,0,0,0,0,0,0,0,.04,0,.04,0,0,0,0,0,0,.04,.3,0,.04,0,0,0,.07,.04,0,0,.04,.52,0,.04,.04,.11,.04,.04,.04,.04,0,0,.04,.22,.11,0,0,.07,.04,0,.04,0,0,0,0,.15,0,0,.07,0,0,0,.04,0,.04,0,0,.04,0,0,0,0,0,.07,0,0,0,.04,.07,0,0,0,0,0,0,0,0,0,.33,.04,.07,.04,.07,.07,0,.07,0,.04,.07,.19,.07,.26,0,.04,0,0,.04,0,.04,0,.04,.22,0,0,0,.04,0,0,.11,0,.04,.11,0,.07,0,0,.07,.07,0,.04,0,.11,.04,0,.07,.04,0,0,.04,.11,0,.04,0,.07,0,.07,.11,.07,.04,0,.19,0,.04,0,0,.04,.04,0,0,0,0,0,.07,0,0,0,.04,.07,.15,0,.04,0,0,.07,0,0,0,0,0,.04,0,.07,.07,0,0,0,0,.04,0,0,.3,0,.11,0,.04,0,0,.11,0,.07,0,.33,.19,.04,0,0,0,.07,.04,.11,.04,0,0,.07,0,.11,0,0,0,0,0,0,0,0,.15,0,.07,0,0,.04,0,0,0,0,.41,.19,0,0,.11,.04,.11,0,0,0,.04,.15,.07,0,0,0,.07,.07,0,0,.04,0,0,.15,.37,.11,.04,0,.04,0,0,0,.07,.04,.04,.3,0,.04,0,.04,.07,0,0,0,.04,.07,.26,.15,0,.07,.04,0,.04,.07,0,.07,0,.07,.15,0,.04,0,0,0,0,0,.04,.07,.04,.3,0,0,0,.04,0,.04,0,0,0,.04,.07,0,0,0,0,0,.04,0,0,0,0,0,.15,0,.19,0,0,.04,0,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,.07,.11,.04,0,0,0,.04,0,0,0,0,.19,.19,.19,.04,0,.04,.07,0,.04,.04,0,.3,.11,0,.07,0,0,.07,0,.04,0,0,0,0,0,.22,0,0,.04,0,0,0,.07,0,0,.11,.04,.04,0,.07,.11,.11,.11,.04,.04,.11,0,0,0,.07,.07,.11,.04,0,0,0,.07,.19,0,.04,.11,0,.07,0,0,0,0,0,.26,.04,0,0,0,0,.11,0,0,0,0,0,.19,0,0,.11,.07,0,0,.04,0,0,.07,0,0,0,0,0,.04,.07,.04,0,.07,.07,.37,.07,.07,.04,0,0,.04,0,.04,.04,0,.07,.15,0,.04,.11,0,0,.15,.07,.04,0,0,.07,0,.11,0,0,.04,0,.11,.07,.04,0,.04,0,.15,.04,0,0,.04,0,.26,.04,0,0,.07,.15,.07,.04,0,.04,0,0,0,0,0,0,0,0,0,.07,0,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,0,0,.11,0,0,.04,0,0,0,0,.07,0,0,0,.04,.11,0,0,0,0,0,0,.41,.19,0,.11,0,.11,.11,0,.04,0,.04,.22,0,.07,0,0,.07,0,0,.04,.04,.07,0,0,.15,0,0,0,0,0,0,0,0,0,.41,0,0,.15,.07,.04,.15,0,0,.04,0,0,0,0,0,.04,0,0,0,0,0,0,0,.07,0,0,0,0,0,0,0,0,0,0,0,.04,0,.07,0,0,.11,0,0,0,0,.11,.11,.04,0,.11,.07,0,.07,.04,0,0,.04,.07,.22,.11,.04,0,.15,.07,0,0,0,0,.26,.07,.3,.04,0,.15,.11,0,.07,0,.19,.15,0,0,0,.04,.22,0,.04,.19,0,0,0,0,.07,.22,.15,0,.11,.15,.11,.11,.04,0,.04,.07,.11,0,0,.07,0,.07,0,.04,.04,0,.04,0,0,0,.04,0,0,0,0,.07,.04,.07,.11,0,0,0,0,0,0,0,0,0,.11,.04,0,0,0,0,.04,0,0,0,0,0,.11,0,0,0,0,0,.04,.07,.11,0,0,0,0,0,0,0,.04,0,0,0,0,0,0,.07,0,0,0,0,0,0,0,.04,0,0,.07,0,.04,0,.07,0,.11,0,.04,0,0,0,.44,.04,.04,0,0,0,0,0,0,.04,.15,.07,.04,.04,0,0,0,0,.11,.07,0,.11,0,.33,0,.04,.11,.04,0,.04,.04,0,0,.07,.3,0,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.22,.07,0,0,.15,0,0,.15,0,0,0,0,0,0,.19,0,.04,.04,.04,.04,.07,0,0,0,.37,.04,.19,.3,.07,.11,0,0,0,.07,.15,0,.15,.11,0,.04,.07,0,0,0,0,0,0,.19,.07,0,0,0,0,0,0,0,0,0,0,0,.3,.04,.04,0,0,0,0,0,0,0,0,.04,0,.11,0,0,.04,.04,0,0,0,0,0,.04,0,0,0,0,0,0,0,0,.04,0,.04,.04,0,0,0,0,0,0,0,0,.04,0,0,0,.07,0,0,0,.04,0,0,.22,0,.19,.19,0,.04,0,0,0,.07,.04,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,0,0,0,0,.15,0,0,0,0,0,0,.33,.04,.07,0,0,.07,0,0,.07,.04,0,.26,0,0,0,0,0,0,0,0,0,0,.11,0,0,.04,.07,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3,0,.07,0,.04,0,0,0,0,.15,.19,.11,.04,.37,.07,0,0,.07,.07,.37,.07,.3,.26,.07,.15,.07,0,.11,.04,.11,0,.07,0,.11,.04,.04,0,0,0,.11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.11,0,0,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.11,0,0,0,.04,0,.04,0,0,0,0,.11,.04,0,0,0,0,0,.04,.07,0,0,0,.04,.07,0,.22,.04,0,0,0,.04,0,0,.11,0,0,.04,.22,.04,.07,0,.07,.15,.19,.07,0,.48,.15,.26,0,.04,0,.15,0,0,.3,.33,0,0,.11,.22,.44,.04,.15,0,.04,.15,0,0,0,0,0,0,0,0,0,0,0,0,0,.33,0,.04,0,0,0,0,0,.19,0,0,0,0,.19,.04,0,.04,0,0,.04,.04,.07,0,0,.04,.04,.19,0,0,0,.04,0,0,.07,.44,0,.3,.11,.04,.07,.11,.26,.07,.11,0,.07,0,.04,.04,0,0,0,0,0,0,0,0,0,0,0,0,.04,.19,.04,0,0,0,.11,0,.04,.15,0,0,0,.11,.07,0,0,0,0,0,.04,0,0,0,0,.04,0,0,0,0,0,0,.04,0,.11,.48,0,0,.07,0,.04,0,0,.19,.04,0,0,0,0,0,.04,0,0,.11,0,0,0,0,0,0,0,0,0,0,0,0,.07,0,0,0,.04,0,.04,.04,0,.15,0,.04,0,.04,0,0,0,0,0,0,0,0,.04,.07,.04,.04,0,0,.04,.07,0,.04,.19,.04,0,.04,0,0,0,0,0,0,.04,0,0,.04,.04,0,0,.07,0,.04,0,0,.04,.11,.11,.15,0,.07,0,0,0,0,.04,.04,0,.07,.04,.89,0,0,0,.11,0,.15,.07,.3,0,.04,0,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.07,.15,0,0,.04,0,0,0,.04,0,0,.04,0,0,0,.07,0,0,0,0,0,0,.07,0,0,.04,0,0,0,0,0,0,0,.04,0,0,0,0,0,0,0,0,.07,.04,0,0,0,0,.22,0,.07,.07,.04,0,0,0,0,0,.04,.04,0,.04,.07,0,.04,0,.07,.04,0,.11,.04,0,0,0,0,0,0,.22,0,.11,.19,.11,.7,.04,.48,0,.04,.22,.22,.15,0,0,.07,0,.48,0,.33,0,0,0,0,0,.07,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,.11,0,.44,.15,0,0,.48,0,.04,.11,0,0,.04,.19,0,0,0,0,.11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.07,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.07,.04,0,0,0,.48,.15,.15,.26,.07,.07,0,.04,0,.22,0,0,.19,.04,.07,0,0,0,.04,.11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,.44,0,0,.04,.3,.07,.11,.04,.04,.04,.04,0,.04,.22,0,.04,.22,.07,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,.04,0,0,0,0,.04,0,0,0,0,0,.04,0,0,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3,.07,0,0,0,.04,.04,.07,.07,.11,.04,.04,0,0,0,0,0,.04,.07,.07,.04,0,.04,0,.56,.3,.15,.26,0,.04,.04,.04,0,.15,0,.04,.04,.26,0,0,.07,0,.07,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.19,.04,0,.04,0,0,0,0,0,.33,0,0,.04,.11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.07,.15,.04,.04,.07,0,0,.48,.04,.15,.07,0,.04,.07,0,.07,.19,.11,.33,.15,0,.04,0,0,.04,.04,0,.11,0,0,0,0,0,.07,.04,0,.11,0,0,.15,.15,0,0,0,0,0,.04,.07,0,.04,0,0,.07,0,.19,0,.22,.04,.04,.19,.19,.04,0,.04,.04,0,.07,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.11,0,.07,.44,.07,.11,.33,.04,0,.11,0,.04,.11,.04,0,0,0,.04,.04,0,0,0,.04,0,.07,.41,.11,.04,.04,.26,0,.04,0,0,.04,.04,0,0,0,0,.07,0,.11,0,0,0,0,0,0,0,.26,0,0,.26,.19,0,0,0,0,.04,0,0,.07,0,0,0,0,0,.19,0,0,0,.04,0,0,.04,.07,.04,0,.07,0,.15,.11,.04,.04,0,0,0,.07,0,.11,0,.04,.11,.07,0,0,0,.04,0,.19,.3,0,0,0,.11,0,.07,0,0,0,.04,0,.07,0,.04,.04,0,0,.15,0,0,0,.22,.04,0,0,.37,.04,0,0,0,0,.22,.26,0,0,0,0,0,0,.15,.15,0,.07,0,.04,0,.07,0,0,.26,.19,.07,.04,.04,0,0,0,0,0,.07,0,.11,0,0,0,0,.04,0,.07,.07,.04,.07,0,.07,.04,.15,0,0,.07,.07,.04,0,0,.04,0,0,.19,0,0,.07,.07,.07,0,0,0,.26,0,0,.11,0,0,.07,0,0,.11,0,.07,0,.07,0,.11,0,0,.19,.11,.15,0,.04,0,0,.04,0,.04,0,.07,.11,.04,0,.04,.07,.07,.04,0,.04,.11,0,0,0,.04,0,0,0,.07,.04,.04,0,0,0,0,0,.04,.04,0,0,0,0,0,0,0,.11,.11,0,0,0,0,0,.07,0,.04,0,0,0,0,.04,.22,0,0,0,0,0,0,.07,.04,0,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,.04,.07,.19,.22,0,0,0,0,0,.04,0,.04,.04,.07,0,0,0,0,0,0,.04,.04,0,0,.33,.11,0,0,0,0,0,0,0,.19,.07,.15,.3,0,0,0,0,0,.04,.11,0,.04,0,0,0,0,.11,0,0,.04,.07,.04,.07,0,0,.04,.07,.07,0,0,.11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.26,0,0,0,0,0,0,0,0,0,.04,0,.04,0,0,0,0,0,0,0,0,.41,0,0,0,0,0,0,0,0,0,0,0,0,.44,.22,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,.56,0,.04,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,0,0,0,0,.67,.26,.07,.07,0,.07,0,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.22,0,.04,0,.07,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.07,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,0,0,0,0,0,.04,0,0,0,0,0,0,0]}},ne=n("091f"),ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"saved_poster_wrapper clue_"+e.clueIndex+" pv_"+e.version},[n("div",{staticClass:"clue_text_wrapper"},[n("div",{directives:[{name:"multi-ref",rawName:"v-multi-ref:gap",arg:"gap"}],class:"gap "+(1===e.clueIndex?"light":"")}),e._l(e.clueText,(function(t,i){return n("div",{key:t},[n("p",{class:0===i?"first_line":"",style:{color:1===e.clueIndex?"#ffffff":"#3c444c"}},e._l(t,(function(i,o){return n("span",{key:t+i+o},[e._v(e._s(i))])})),0),n("div",{directives:[{name:"multi-ref",rawName:"v-multi-ref:gap",arg:"gap"}],class:"gap "+(1===e.clueIndex?"light":"")})])}))],2),n("div",{staticClass:"guess_text_wrapper"},e._l(e.guessText,(function(t,i){return n("div",{key:t},[n("p",{class:0===i?"first_line":""},e._l(t,(function(i,o){return n("span",{key:t+i+o},[e._v(e._s(i))])})),0)])})),0),n("div",{class:"hero hero_"+e.guessHero,style:{backgroundImage:"url("+e.publicPath+"images/poster/hero/"+(e.guessHero?e.guessHero:"default")+".png)"}}),n("div",{staticClass:"qrcode"})])},oe=[],re=n("1735"),se=n.n(re);function ae(e){return ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ue(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function ce(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){ue(r,i,o,s,a,"next",e)}function a(e){ue(r,i,o,s,a,"throw",e)}s(void 0)}))}}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function he(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function pe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},me(e,t)}function de(e){var t=ge();return function(){var n,i=be(e);if(t){var o=be(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ve(this,n)}}function ve(e,t){if(t&&("object"===ae(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ye(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}var we=function(e){pe(n,e);var t=de(n);function n(){var e;return le(this,n),e=t.apply(this,arguments),e.publicPath="/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/",e.isCreating=!1,e}return he(n,[{key:"clueIndex",get:function(){return this.$store.state.clueIndex}},{key:"clueText",get:function(){return this.$store.state.clueText}},{key:"guessText",get:function(){return this.$store.state.guessText}},{key:"guessHero",get:function(){return this.$store.state.guessHero}},{key:"posterPageVisible",get:function(){return this.$store.state.pageSwitch.poster}},{key:"enablePoster",get:function(){return this.$store.state.enablePoster}},{key:"onClueIndexChange",value:function(){this.getPoster()}},{key:"onClueTextChange",value:function(){this.getPoster()}},{key:"onGuessTextChange",value:function(){this.getPoster()}},{key:"onPosterVisibleChange",value:function(e){e&&this.enablePoster&&this.getPoster()}},{key:"version",get:function(){return 1===this.clueIndex||3==this.clueIndex?0:1}},{key:"getPoster",value:function(){var e=ce(y.a.mark((function e(){var t,n=this;return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.posterPageVisible){e.next=2;break}return e.abrupt("return");case 2:if(!this.isCreating){e.next=4;break}return e.abrupt("return");case 4:if(this.enablePoster){e.next=6;break}return e.abrupt("return");case 6:return console.log("getPoster",this.guessText,this.clueIndex,this.clueText),this.isCreating=!0,e.next=10,new Promise((function(e){n.$nextTick(ce(y.a.mark((function t(){var i;return y.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,se()(n.$el,{useCORS:!0,scale:1});case 2:i=t.sent,e(i.toDataURL("image/jpeg",1));case 4:case"end":return t.stop()}}),t)}))))}));case 10:t=e.sent,this.$store.commit("setPosterBase64",t),this.isCreating=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){this.enablePoster&&this.getPoster()}}]),n}(a["c"]);Object(s["a"])([Object(a["d"])("clueIndex")],we.prototype,"onClueIndexChange",null),Object(s["a"])([Object(a["d"])("clueText")],we.prototype,"onClueTextChange",null),Object(s["a"])([Object(a["d"])("guessText")],we.prototype,"onGuessTextChange",null),Object(s["a"])([Object(a["d"])("posterPageVisible")],we.prototype,"onPosterVisibleChange",null),we=Object(s["a"])([Object(a["a"])({})],we);var xe=we,ke=xe,Te=(n("c01e"),n("cba8")),Pe=Object(Te["a"])(ke,ie,oe,!1,null,"be90c490",null),Se=Pe.exports;function Oe(e){return Oe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function je(e,t,n){return t&&_e(e.prototype,t),n&&_e(e,n),e}function Ce(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}function Re(e,t){return Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Re(e,t)}function Me(e){var t=De();return function(){var n,i=Ae(e);if(t){var o=Ae(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){if(t&&("object"===Oe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ze(e)}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}var Be=function(e){Ce(n,e);var t=Me(n);function n(){var e;return Ie(this,n),e=t.apply(this,arguments),e.posterTitle="这是我给你的线索，你能猜到我是谁",e.lockInteract=!0,e}return je(n,[{key:"savedPosterSrc",get:function(){return this.$store.state.savedPosterBase64}},{key:"enablePoster",get:function(){return this.$store.state.enablePoster}},{key:"clueIndex",get:function(){return this.$store.state.clueIndex}},{key:"clueName",get:function(){var e=["bird","water","leaf","hair","cloud"];return e[this.clueIndex]}},{key:"textTemplate",get:function(){var e=Z[this.clueName].colNum,t=Math.floor(Math.random()*e);return Z[this.clueName].textTemplates[t]}},{key:"clueText",get:function(){var e=this.textTemplate.clueText.split("%");return e[0]="﹃"+e[0],e[e.length-1]=e[e.length-1]+"﹄",e}},{key:"guessTemplate",get:function(){return this.selectedRole?this.textTemplate.templates[this.selectedRole]:""}},{key:"guessText",get:function(){for(var e=this.guessTemplate,t="",n=0;n<e.length;n++){var i=e[n];if("%"===i)t+="<br/>";else if("*"===i){t+='<span class="name">﹃</span>';for(var o=0;o<this.guessName.length;o++)t+='<span class="name">'.concat(this.guessName[o],"</span>");t+='<span class="name">﹄</span>'}else t+="<span>".concat(i,"</span>")}return t}},{key:"clueTextForPoster",get:function(){var e=this.textTemplate.clueText.split("%");return e}},{key:"guessTextForPoster",get:function(){var e=this.guessTemplate;return e=""===e?"猜猜我是谁":e.replace("*",this.guessName),e.split("%")}},{key:"guessName",get:function(){if(""===this.selectedRole)return"";var e=J[this.selectedRole];return e?e.cn:""}},{key:"onGuessTextChange",value:function(){this.$nextTick((function(){ne["a"].fromTo(".guess_text span",{opacity:0},{opacity:1,stagger:.1})}))}},{key:"onGuessTextForPosterChange",value:function(e){this.$store.commit("setGuessText",e),this.$store.commit("setGuessHero",""===this.selectedRole?"default":this.selectedRole)}},{key:"onClueTextChange",value:function(e){this.$store.commit("setClueText",e)}},{key:"mounted",value:function(){this.$store.commit("setGuessText",this.guessTextForPoster),this.$store.commit("setGuessHero",""===this.selectedRole?"default":this.selectedRole),this.$store.commit("setClueText",this.clueTextForPoster)}},{key:"showText",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=new ne["a"].core.Timeline;n.to(this.$refs.rightZone,{opacity:1,duration:1,delay:t,onComplete:function(){e.lockInteract=!1}}).fromTo(this.$refs.animChar,{opacity:0},{opacity:1,duration:2,stagger:.1},"<").fromTo(this.$refs.gap,{opacity:0},{opacity:1,duration:2,delay:1,stagger:1.4},"<")}},{key:"onGuess",value:function(){this.$emit("guess")}},{key:"again",value:function(){this.$emit("again")}},{key:"showRule",value:function(){this.$emit("showRule")}},{key:"reAccount",value:function(){OUT.role.showBindRoleDialog()}},{key:"getWelfare",value:function(){this.$emit("getWelfare")}}]),n}(a["c"]);Object(s["a"])([Object(a["b"])()],Be.prototype,"selectedRole",void 0),Object(s["a"])([Object(a["d"])("guessText")],Be.prototype,"onGuessTextChange",null),Object(s["a"])([Object(a["d"])("guessTextForPoster")],Be.prototype,"onGuessTextForPosterChange",null),Object(s["a"])([Object(a["d"])("clueTextForPoster")],Be.prototype,"onClueTextChange",null),Be=Object(s["a"])([Object(a["a"])({components:{SavedPoster:Se}})],Be);var Fe=Be,Ne=Fe,Ue=(n("01c8"),Object(Te["a"])(Ne,l,f,!1,null,"75c23ecf",null)),We=Ue.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"swipe_tip_wrapper fullscreen"},e._l(e.swipeTipText,(function(t,i){return n("p",{key:t+i,staticClass:"swipe_tip"},e._l(t,(function(t,i){return n("span",{key:t+i,ref:"swipeChar",refInFor:!0},[e._v(e._s(t))])})),0)})),0)},Le=[];function $e(e){return $e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ve(e,t,n){return t&&qe(e.prototype,t),n&&qe(e,n),e}function Ge(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}function Ke(e,t){return Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ke(e,t)}function Ye(e){var t=Ze();return function(){var n,i=et(e);if(t){var o=et(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Qe(this,n)}}function Qe(e,t){if(t&&("object"===$e(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Je(e)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}var tt=function(e){Ge(n,e);var t=Ye(n);function n(){var e;return He(this,n),e=t.apply(this,arguments),e.swipeTipText=["任意滑动屏幕","查看线索"],e}return Ve(n,[{key:"mounted",value:function(){this.showSwipeTip()}},{key:"showSwipeTip",value:function(){ne["a"].fromTo(this.$refs.swipeChar,{opacity:0},{opacity:1,duration:1.4,stagger:.1})}},{key:"hideSwipeTip",value:function(){ne["a"].to(this.$el,{opacity:0})}}]),n}(a["c"]);tt=Object(s["a"])([Object(a["a"])({components:{}})],tt);var nt=tt,it=nt,ot=(n("2252"),Object(Te["a"])(it,Xe,Le,!1,null,"210beb52",null)),rt=ot.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rule_wrapper fullscreen"},[n("div",{ref:"rule",staticClass:"rule"},[n("div",{staticClass:"close_bt",on:{click:e.close}})])])},at=[];function ut(e){return ut="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ft(e,t,n){return t&&lt(e.prototype,t),n&&lt(e,n),e}function ht(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}function pt(e,t){return pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pt(e,t)}function mt(e){var t=yt();return function(){var n,i=gt(e);if(t){var o=gt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return dt(this,n)}}function dt(e,t){if(t&&("object"===ut(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vt(e)}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function gt(e){return gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gt(e)}var bt=function(e){ht(n,e);var t=mt(n);function n(){return ct(this,n),t.apply(this,arguments)}return ft(n,[{key:"mounted",value:function(){ne["a"].fromTo(this.$el,{opacity:0},{opacity:1}),ne["a"].fromTo(this.$refs.rule,{y:50},{y:0,ease:"power2.out"})}},{key:"close",value:function(){var e=this;ne["a"].fromTo(this.$el,{opacity:1},{opacity:0,duration:.3,onComplete:function(){e.$emit("close")}}),ne["a"].fromTo(this.$refs.rule,{y:0},{y:50,ease:"power2.out"})}}]),n}(a["c"]);bt=Object(s["a"])([Object(a["a"])({components:{}})],bt);var wt=bt,xt=wt,kt=(n("ffb8"),Object(Te["a"])(xt,st,at,!1,null,"51a776a9",null)),Tt=kt.exports,Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"guess_page fullscreen"},[n("div",{staticClass:"flower"}),n("div",{staticClass:"text_wrapper"},[n("p",{staticClass:"pre_text"},[e._v("我猜神秘琴师是")]),n("p",{staticClass:"guess_name"},e._l(e.selectRoleCn,(function(t,i){return n("span",{key:t+i,ref:"nameChar",refInFor:!0},[e._v(e._s(t))])})),0)]),n("div",{staticClass:"role_wrapper"},e._l(e.roleNames,(function(t,i){return n("div",{key:i,staticClass:"role_block",on:{click:function(t){return e.selectRole(i)}}},[n("div",{class:"role_avatar_wrapper "+(e.selectedRole===i?"selected":"")},[n("div",{staticClass:"role_avatar",style:{backgroundImage:"url("+e.publicPath+"images/role/"+(e.selectedRole===i?"selected":"default")+"/"+i+".png)"}})]),n("div",{staticClass:"role_name",style:{opacity:e.selectedRole===i?1:.6}},e._l(t.cn,(function(t,o){return n("div",{key:t+o,staticClass:"role_name_char"},[n("span",{staticClass:"char"},[e._v(e._s(t))]),n("div",{staticClass:"dot",style:{opacity:e.selectedRole===i?1:0}})])})),0)])})),0),n("div",{ref:"bt",class:"confirm_bt ",on:{click:e.confirm}})])},St=[];function Ot(e){return Ot="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jt(e,t,n){return t&&_t(e.prototype,t),n&&_t(e,n),e}function Ct(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}function Rt(e,t){return Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rt(e,t)}function Mt(e){var t=Dt();return function(){var n,i=At(e);if(t){var o=At(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Et(this,n)}}function Et(e,t){if(t&&("object"===Ot(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zt(e)}function zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function At(e){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},At(e)}var Bt=function(e){Ct(n,e);var t=Mt(n);function n(){var e;return It(this,n),e=t.apply(this,arguments),e.publicPath="/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/",e.roleNames=J,e.selectedRole="",e}return jt(n,[{key:"selectRoleCn",get:function(){var e=J[this.selectedRole];return e?e.cn:""}},{key:"selectRole",value:function(e){var t=this;e!==this.selectedRole&&(this.selectedRole=e,a["c"].nextTick((function(){t.charTween&&(t.charTween.pause(),t.charTween.kill()),t.charTween=ne["a"].fromTo(t.$refs.nameChar,{opacity:0,y:10},{opacity:1,y:0,stagger:.1,ease:"back.out(3)",duration:.7})})))}},{key:"activated",value:function(){ne["a"].fromTo(this.$el,{opacity:0},{opacity:1})}},{key:"confirm",value:function(){var e=this;if(""===this.selectedRole){var t=this.$refs.bt;t.classList.remove("disable"),setTimeout((function(){t.classList.add("disable")}),20)}else ne["a"].to(this.$el,{opacity:0,duration:.3,onComplete:function(){e.$emit("confirm",e.selectedRole)}})}}]),n}(a["c"]);Bt=Object(s["a"])([Object(a["a"])({})],Bt);var Ft=Bt,Nt=Ft,Ut=(n("a3e0"),Object(Te["a"])(Nt,Pt,St,!1,null,"0fb66156",null)),Wt=Ut.exports;function Xt(e){return Xt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ht(e,t,n){return t&&$t(e.prototype,t),n&&$t(e,n),e}function qt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}function Vt(e,t){return Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vt(e,t)}function Gt(e){var t=Qt();return function(){var n,i=Jt(e);if(t){var o=Jt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Kt(this,n)}}function Kt(e,t){if(t&&("object"===Xt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yt(e)}function Yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Jt(e){return Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jt(e)}var Zt=function(e){qt(n,e);var t=Gt(n);function n(){var e;return Lt(this,n),e=t.apply(this,arguments),e.showGuessPage=!1,e.selectedRole="",e.showRule=!1,e.showQR=!1,e}return Ht(n,[{key:"highVersion",get:function(){return this.$store.state.highVersion}},{key:"clueIndex",get:function(){return this.$store.state.clueIndex}},{key:"hasInteract",get:function(){return this.$store.state.hasInteract[4]}},{key:"enablePoster",get:function(){return this.$store.state.enablePoster}},{key:"onInteract",value:function(){this.highVersion&&(this.showText(),this.hideSwipeTip())}},{key:"mounted",value:function(){this.highVersion||this.showText(0)}},{key:"hideSwipeTip",value:function(){var e=this.$refs.swipeTip;null===e||void 0===e||e.hideSwipeTip()}},{key:"showText",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;setTimeout((function(){e.showQR=!0}),t);var n=this.$refs.rightZone;n.showText(t/1e3)}},{key:"onGuess",value:function(){this.showGuessPage=!0}},{key:"onConfirm",value:function(e){this.showGuessPage=!1,this.selectedRole=e,S("btn","guess","猜测英雄-".concat(e))}},{key:"onAgain",value:function(){this.$emit("again")}},{key:"onGetWelfare",value:function(){this.$emit("getWelfare")}},{key:"onShowRule",value:function(){this.showRule=!0,S("btn","rule","活动规则")}}]),n}(a["c"]);Object(s["a"])([Object(a["d"])("hasInteract")],Zt.prototype,"onInteract",null),Zt=Object(s["a"])([Object(a["a"])({components:{GuessPage:Wt,RightZone:We,SwipeTip:rt,Rule:Tt}})],Zt);var en=Zt,tn=en,nn=(n("22d1"),Object(Te["a"])(tn,u,c,!1,null,"01de032c",null)),on=nn.exports,rn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clue_page fullscreen"},[n("div",{staticClass:"clue_wrapper fullscreen",style:{opacity:e.showClue?1:0}},[n("div",{ref:"bt",staticClass:"confirm_bt",style:{pointerEvents:e.showClue?"all":"none"},on:{click:e.confirm}}),n("div",{staticClass:"clue_title"},[n("div",{staticClass:"liushui"}),e._l(e.titles,(function(t,i){return n("div",{key:t+i,staticClass:"clue_title_line"},[n("p",e._l(t,(function(t,i){return n("span",{key:t+i,ref:"t",refInFor:!0},[e._v(e._s(t))])})),0),n("div",{ref:"gap",refInFor:!0,staticClass:"gap",style:{display:i==e.titles.length-1?"none":"block"}})])}))],2),n("div",{class:"clue_index clue_index"+e.clueIndex}),n("div",{ref:"tip",class:"fullscreen clue_tip_wrapper "+(e.hasInteract?"hide":""),style:{pointerEvents:e.lockInteract?"all":"none"}},[n("div",{staticClass:"clue_tip"}),n("div",{staticClass:"clue_tip_hand"})])])])},sn=[];function an(e){return an="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ln(e,t,n){return t&&cn(e.prototype,t),n&&cn(e,n),e}function fn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}function hn(e,t){return hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hn(e,t)}function pn(e){var t=vn();return function(){var n,i=yn(e);if(t){var o=yn(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return mn(this,n)}}function mn(e,t){if(t&&("object"===an(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dn(e)}function dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function yn(e){return yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yn(e)}var gn=function(e){fn(n,e);var t=pn(n);function n(){var e;return un(this,n),e=t.apply(this,arguments),e.titles=["这里有我身份的秘密","选择一个琴音线索","猜猜看","我是谁"],e.showClue=!0,e.lockInteract=!0,e}return ln(n,[{key:"hasInteract",get:function(){return this.$store.state.hasInteract[3]}},{key:"clueIndex",get:function(){return this.$store.state.clueIndex}},{key:"onInteract",value:function(){ne["a"].set(this.$refs.tip,{opacity:0})}},{key:"mounted",value:function(){var e=this,t=(new ne["a"].core.Timeline).addLabel("start").fromTo(this.$refs.t,{opacity:0},{opacity:1,duration:1.5,stagger:.15}).fromTo(this.$refs.gap,{opacity:0},{opacity:1,duration:2,stagger:2},"start");this.hasInteract?(t.set(this.$refs.bt,{opacity:1},"start"),this.lockInteract=!1):t.to(this.$refs.bt,{opacity:1,delay:2},"start").set(this.$refs.tip,{opacity:1,delay:2,onComplete:function(){e.lockInteract=!1}},"start")}},{key:"confirm",value:function(){this.$emit("confirm"),S("btn","selectClue","选择线索-".concat(this.clueIndex))}}]),n}(a["c"]);Object(s["a"])([Object(a["b"])()],gn.prototype,"pageSize",void 0),Object(s["a"])([Object(a["d"])("hasInteract")],gn.prototype,"onInteract",null),gn=Object(s["a"])([Object(a["a"])({components:{}})],gn);var bn=gn,wn=bn,xn=(n("cefc"),Object(Te["a"])(wn,rn,sn,!1,null,"7d6609e4",null)),kn=xn.exports,Tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scene_page fullscreen"},[0==e.sceneIndex?n("div",{staticClass:"scene scene_0 fullscreen"},[n("p",{staticClass:"title"},[e._v(" 场景1 ")]),n("p",{staticClass:"num"},[e._v(" "+e._s(e.sceneConfigs[0].audioIndex)+" / "+e._s(e.sceneConfigs[0].audioNum)+" ")])]):e._e()])},Pn=[],Sn=n("83a4");function On(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function In(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _n(e,t,n){return t&&In(e.prototype,t),n&&In(e,n),e}var jn=function(){function e(){var t=this;On(this,e),this.prefix="/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/audios/",this.hasLoad={},this.loadConfig={},this.config=[{key:"click",preload:!0},{key:"prelude1",preload:!0},{key:"prelude2",preload:!0},{key:"pace",loadKey:"p1"},{key:"paceMud",loadKey:"p1"},{key:"mountain",loadKey:"p1",loop:!0,unique:!0},{key:"water",loop:!0,loadKey:"p1"},{key:"river",loop:!0,loadKey:"p1",unique:!0},{key:"fish",loadKey:"p1"},{key:"birds",loop:!0,loadKey:"p2",unique:!0},{key:"boat",loadKey:"p2"},{key:"fall",loop:!0,loadKey:"p3",unique:!0},{key:"poster",loop:!0,loadKey:"poster",unique:!0}],this.sound={},this.uniqueMap={},this.tempPauseList=[];for(var n=0;n<K.num;n++)this.config.push({key:"p1/".concat(n),loadKey:"p1"});for(var i=0;i<Y.num;i++)this.config.push({key:"p2/".concat(i),loadKey:"p2"});for(var o=0;o<Q.num;o++)this.config.push({key:"p3/".concat(o),loadKey:"p3"});for(var r=0;r<this.config.length;r++){var s=this.config[r],a=s.key,u=this.prefix+"".concat(a,".mp3?32");if(this.sound[a]=new Sn["Howl"]({src:[u],loop:void 0!==s.loop&&s.loop,volume:void 0!==s.volume?s.volume:1,autoplay:void 0!==s.autoPlay&&s.autoPlay,preload:void 0!==s.preload&&s.autoPlay}),s.loadKey){var c=this.loadConfig[s.loadKey];c||(this.loadConfig[s.loadKey]=[]),this.loadConfig[s.loadKey].push(a)}s.unique&&(this.uniqueMap[a]={id:void 0})}window.addEventListener("visibilitychange",(function(){document.hidden?t.pauseAllSound():t.resumeAllSound()}))}return _n(e,[{key:"pauseAllSound",value:function(){var e=this,t=Object.keys(this.sound);this.tempPauseList=[],t.forEach((function(t){var n=e.sound[t];n.playing()&&(e.tempPauseList.push(t),n.pause())}))}},{key:"resumeAllSound",value:function(){var e=this;this.tempPauseList.forEach((function(t){var n=e.sound[t];n.play()}))}},{key:"load",value:function(e){var t=this;if(!this.hasLoad[e]){var n=this.loadConfig[e];n&&n.forEach((function(e){var n;null===(n=t.sound[e])||void 0===n||n.load()})),this.hasLoad[e]=!0}}},{key:"unload",value:function(e){var t=this;if(this.hasLoad[e]){var n=this.loadConfig[e];n&&n.forEach((function(e){var n;null===(n=t.sound[e])||void 0===n||n.unload()})),this.hasLoad[e]=!1}}},{key:"isUnique",value:function(e){return!!this.uniqueMap[e]}},{key:"getId",value:function(e){var t=this.isUnique(e);return t?this.uniqueMap[e].id:void 0}},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.sound.hasOwnProperty(e)){var n=this.sound[e],i=this.isUnique(e),o=this.getId(e);n.playing(o)&&this.stop(e),n.seek(t);var r=n.play(o);i&&void 0===o&&(this.uniqueMap[e].id=r)}}},{key:"playing",value:function(e){if(this.sound.hasOwnProperty(e)){var t=this.sound[e],n=this.getId(e);return t.playing(n)}return!1}},{key:"volume",value:function(e,t){this.sound.hasOwnProperty(e)&&this.sound[e].volume(t)}},{key:"fadeIn",value:function(e){if(this.sound.hasOwnProperty(e)){var t=this.sound[e],n=this.getId(e);if(t.playing(n))return;t.fade(0,1,1e3,n),this.play(e)}}},{key:"getCurrentTime",value:function(e){if(this.sound.hasOwnProperty(e)){var t=this.sound[e];this.getId(e);return t.seek()}return 0}},{key:"getDuration",value:function(e){if(this.sound.hasOwnProperty(e)){var t=this.sound[e],n=this.getId(e);return t.duration(n)}return 0}},{key:"pause",value:function(e){if(this.sound.hasOwnProperty(e)){var t=this.sound[e],n=this.getId(e);t.pause(n)}}},{key:"stop",value:function(e){if(this.sound.hasOwnProperty(e)){var t=this.sound[e],n=this.getId(e);t.stop(n)}}},{key:"setEnabled",value:function(e){e?Sn["Howler"].volume(1):Sn["Howler"].volume(0)}}]),e}(),Cn=new jn,Rn=Cn,Mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"string_wrapper fullscreen"},[n("canvas",{ref:"canvas",class:"fullscreen"})])},En=[];function zn(e){return zn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(e)}function Dn(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function An(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){Dn(r,i,o,s,a,"next",e)}function a(e){Dn(r,i,o,s,a,"throw",e)}s(void 0)}))}}function Bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nn(e,t,n){return t&&Fn(e.prototype,t),n&&Fn(e,n),e}function Un(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wn(e,t)}function Wn(e,t){return Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wn(e,t)}function Xn(e){var t=Hn();return function(){var n,i=qn(e);if(t){var o=qn(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ln(this,n)}}function Ln(e,t){if(t&&("object"===zn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $n(e)}function $n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function qn(e){return qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qn(e)}var Vn=function(e){Un(n,e);var t=Xn(n);function n(){var e;return Bn(this,n),e=t.apply(this,arguments),e.animId=0,e.pixelRatio=window.devicePixelRatio>2?2:window.devicePixelRatio,e.isInteract=!1,e.lastTouch=new g["xb"],e.nodeNum=12,e.pts=[],e.vels=[],e.drawPts=[],e}return Nn(n,[{key:"onPageSizeChange",value:function(){this.onWindowResize()}},{key:"needRotate",get:function(){return this.$store.state.needRotate}},{key:"canvas",get:function(){return this.$refs.canvas}},{key:"mounted",value:function(){var e=An(y.a.mark((function e(){var t;return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(this.animId=requestAnimationFrame(this.anim.bind(this)),this.canvas.width=this.pageSize.x*this.pixelRatio,this.canvas.height=this.pageSize.y*this.pixelRatio,this.ctx=this.canvas.getContext("2d"),t=0;t<this.nodeNum;t++)this.pts.push(0,this.canvas.height/2),this.drawPts.push(0,this.canvas.height/2),this.vels.push(0);this.canvas.addEventListener("touchstart",this.onTouchStart.bind(this)),this.canvas.addEventListener("touchmove",this.onTouchMove.bind(this)),this.canvas.addEventListener("touchend",this.onTouchEnd.bind(this));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCanvasPos",value:function(e){return new g["xb"](this.needRotate?e.pageY:e.pageX,this.needRotate?this.pageSize.y-e.pageX:e.pageY).multiplyScalar(this.pixelRatio)}},{key:"onTouchStart",value:function(e){this.isInteract=!0;var t=e.touches[0];this.lastTouch=this.getCanvasPos(t)}},{key:"onTouchMove",value:function(e){var t=this;if(this.isInteract){var n=e.touches[0],i=this.getCanvasPos(n),o=this.getInteractPts(this.lastTouch,i);o.forEach((function(e){t.vels[e]=40*(i.y-t.lastTouch.y<0?-1:1)})),this.lastTouch.copy(i)}}},{key:"onTouchEnd",value:function(e){this.isInteract=!1}},{key:"getInteractPts",value:function(e,t){var n=.5*(e.x+t.x)/this.canvas.width*(this.nodeNum-1),i=Math.floor(n),o=Math.ceil(n),r=E(e,t,new g["xb"](this.pts[2*i],this.pts[2*i+1]),new g["xb"](this.pts[2*o],this.pts[2*o+1]));return r?i!==o?[i,o]:[i]:[]}},{key:"anim",value:function(e){this.animId=requestAnimationFrame(this.anim.bind(this));for(var t=this.canvas.width,n=this.canvas.height,i=this.nodeNum-1,o=0;o<this.nodeNum;o+=1)if(this.pts[2*o]=t*o/i,0===o||o===this.nodeNum-1)this.pts[2*o+1]=n/2;else{Math.sin(.004*-e+.6*o);var r=.5*(this.pts[2*o-1]+this.pts[2*o+3]);this.vels[o]+=.2*(r-this.pts[2*o+1]),this.vels[o]*=.9,this.pts[2*o+1]+=this.vels[o]}for(var s=0;s<this.nodeNum;s+=1){var a=Math.sin(.004*-e+.6*s)*n/9+n/2;this.drawPts[2*s]=this.pts[2*s],this.drawPts[2*s+1]=.5*(this.pts[2*s+1]+a)}this.ctx.clearRect(0,0,t,n),C(this.ctx,this.drawPts,.5),this.ctx.stroke()}},{key:"onWindowResize",value:function(){this.canvas.width=this.pageSize.x*this.pixelRatio,this.canvas.height=this.pageSize.y*this.pixelRatio}}]),n}(a["c"]);Object(s["a"])([Object(a["b"])()],Vn.prototype,"pageSize",void 0),Object(s["a"])([Object(a["d"])("pageSize")],Vn.prototype,"onPageSizeChange",null),Vn=Object(s["a"])([Object(a["a"])({})],Vn);var Gn=Vn,Kn=Gn,Yn=(n("0e63"),Object(Te["a"])(Kn,Mn,En,!1,null,"07fd1ba4",null)),Qn=Yn.exports;function Jn(e){return Jn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jn(e)}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ei(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ti(e,t,n){return t&&ei(e.prototype,t),n&&ei(e,n),e}function ni(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ii(e,t)}function ii(e,t){return ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ii(e,t)}function oi(e){var t=ai();return function(){var n,i=ui(e);if(t){var o=ui(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ri(this,n)}}function ri(e,t){if(t&&("object"===Jn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return si(e)}function si(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ai(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ui(e){return ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ui(e)}var ci=function(e){ni(n,e);var t=oi(n);function n(){var e;return Zn(this,n),e=t.apply(this,arguments),e.sceneIndex=0,e.sceneConfigs=[{audioNum:17,audioIndex:0}],e}return ti(n,[{key:"currentSceneConfig",get:function(){return this.sceneConfigs[this.sceneIndex]}},{key:"audioIndex",get:function(){return this.currentSceneConfig.audioIndex}},{key:"audioNum",get:function(){return this.currentSceneConfig.audioNum}},{key:"mounted",value:function(){document.addEventListener("click",this.onClick.bind(this))}},{key:"onClick",value:function(){0===this.sceneIndex&&(Rn.play("p1/p1_".concat(this.audioIndex),.5),this.currentSceneConfig.audioIndex++),this.audioIndex>=this.audioNum&&this.nextScene()}},{key:"nextScene",value:function(){this.sceneIndex++,this.sceneIndex>=this.sceneConfigs.length&&(this.sceneIndex=0,this.currentSceneConfig.audioIndex=0)}},{key:"destoryed",value:function(){window.removeEventListener("click",this.onClick.bind(this))}}]),n}(a["c"]);ci=Object(s["a"])([Object(a["a"])({components:{String:Qn}})],ci);var li=ci,fi=li,hi=(n("0f29"),Object(Te["a"])(fi,Tn,Pn,!1,null,"4b7a39bc",null)),pi=hi.exports,mi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"openning_page fullscreen"},[e.hasPlay?e._e():n("img",{staticClass:"fullscreen poster_img",attrs:{src:e.posterSrc}}),n("video",{ref:"video",staticClass:"fullscreen",attrs:{id:"openingVideo",src:e.videoSrc,poster:e.posterSrc,width:"1624",height:"750",preload:"auto",playsinline:"true","webkit-playsinline":"true","x5-video-player-type":"h5","x5-video-orientation":"portraint","x5-video-player-fullscreen":"false",airplay:"allow","x-webkit-airplay":"allow"}}),n("div",{class:"enter_wrapper fullscreen "},[n("div",{ref:"bt",staticClass:"fullscreen enter_bt_wrapper"},[e._l([0,1,2,3],(function(t){return n("div",{key:t,staticClass:"circle_wrapper",style:{transform:"rotate("+45*t+"deg)",left:e.manPos.x+"px",top:e.manPos.y+"px"}},[n("div",{ref:"circle",refInFor:!0,class:"circle circle"+t})])})),n("div",{staticClass:"pointer",style:{left:e.manPos.x+"px",top:e.manPos.y+"px"}}),n("div",{staticClass:"click_text",style:{left:e.manPos.x+"px",top:e.manPos.y+"px"}},[e._v(" 点击 ")]),n("div",{staticClass:"enter_bt",style:{left:e.manPos.x+"px",top:e.manPos.y+"px",pointerEvents:e.timeMarker.showEnterBt.flag?"all":"none"},on:{click:e.resume}})],2)]),n("div",{staticClass:"tone_tip fullscreen"},e._l(e.toneTips,(function(t,i){return n("p",{key:t,style:{opacity:i===e.toneTipIndex?.8:0}},[e._v(" "+e._s(t)+" ")])})),0),n("div",{class:"skip_bt "+(!e.timeMarker.skip.flag&&e.hasStartPlay?"":"hide"),on:{click:e.skip}})])},di=[];function vi(e){return vi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vi(e)}function yi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bi(e,t,n){return t&&gi(e.prototype,t),n&&gi(e,n),e}function wi(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xi(e,t)}function xi(e,t){return xi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xi(e,t)}function ki(e){var t=Si();return function(){var n,i=Oi(e);if(t){var o=Oi(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ti(this,n)}}function Ti(e,t){if(t&&("object"===vi(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pi(e)}function Pi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Si(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Oi(e){return Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oi(e)}var Ii=function(e){wi(n,e);var t=ki(n);function n(){var e;return yi(this,n),e=t.apply(this,arguments),e.posterSrc="/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/images/poster.jpg",e.toneTips=["注: 散音\\托(指法)\\六弦","注: 散音\\勾(指法)\\一弦","注: 散音\\擘（指法）六弦","注: 撮（指法）\\散音一弦、大指按六弦七徽"],e.toneTipIndex=-1,e.hasPlay=!1,e.manPos=new g["xb"],e.manOriginPos=new g["xb"](490,440),e.videoOriginSize=new g["xb"](1920,958),e.hasStartPlay=!1,e.timeMarker={skip:{flag:!1,time:12.88},showEnterBt:{flag:!1,time:16},waitForEnter:{flag:!1,time:18.08},start:{flag:!1,time:21.4},hide:{flag:!1,time:23.4}},e}return bi(n,[{key:"isDEV",get:function(){return this.$store.state.isDEV}},{key:"videoSrc",get:function(){return this.isDEV?"/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/videos/openning.mp4":mediaURLData[8500]}},{key:"onPageSizeChange",value:function(){this.onWindowResize()}},{key:"video",get:function(){return this.$refs.video}},{key:"mounted",value:function(){this.initVideo(),this.onWindowResize(),window.addEventListener("resize",this.onWindowResize.bind(this))}},{key:"initVideo",value:function(){var e=this;this.player=new MMD.VideoPlayer({videoElement:this.$refs.video,src:this.videoSrc,loop:!1,muted:!1,poster:this.posterSrc,tryMultipleVideoPlayAtTheSameTime:!1,timesParam:[{name:"toneIndex0",time:.2},{name:"toneIndex1",time:2.2},{name:"toneIndex2",time:4.4},{name:"toneIndex3",time:7.6},{name:"toneIndex4",time:10.2},{name:"skip",time:12.88},{name:"showEnterBt",time:16},{name:"waitForEnter",time:18.08},{name:"start",time:21.4},{name:"hide",time:23.4}],onTimes:function(t){switch(t){case"toneIndex0":e.toneTipIndex=0;break;case"toneIndex1":e.toneTipIndex=1;break;case"toneIndex2":e.toneTipIndex=2;break;case"toneIndex3":e.toneTipIndex=3;break;case"toneIndex4":e.toneTipIndex=4;break;case"skip":e.toneTipIndex=4,e.timeMarker.skip.flag=!0;break;case"showEnterBt":e.toneTipIndex=4,e.showEnterBt();break;case"waitForEnter":if(e.timeMarker.waitForEnter.flag)return;e.timeMarker.waitForEnter.flag=!0,e.player.pause();break;case"start":e.timeMarker.start.flag=!0,e.$emit("start"),ne["a"].to(e.$el,{opacity:0,duration:.1});break;case"hide":e.timeMarker.hide.flag=!0,e.$emit("hide");break}},onStart:function(){e.hasStartPlay=!0},onEnd:function(){}})}},{key:"onWindowResize",value:function(){var e=this.pageSize.x/this.pageSize.y,t=this.videoOriginSize.x/this.videoOriginSize.y;if(e>t){this.manPos.x=this.pageSize.x*this.manOriginPos.x/this.videoOriginSize.x;var n=this.manPos.x*this.manOriginPos.y/this.manOriginPos.x,i=(this.pageSize.x/t-this.pageSize.y)/2;this.manPos.y=n-i}else{this.manPos.y=this.pageSize.y*this.manOriginPos.y/this.videoOriginSize.y;var o=this.manPos.y*this.manOriginPos.x/this.manOriginPos.y,r=(this.pageSize.y*t-this.pageSize.x)/2;this.manPos.x=o-r}}},{key:"playVideo",value:function(){this.player.play(),this.hasPlay=!0}},{key:"skip",value:function(){this.timeMarker.skip.flag=!0,this.player.currentTimeAndPlay=this.timeMarker.skip.time,S("btn","skipOpenning","跳过开场动画")}},{key:"showEnterBt",value:function(){this.timeMarker.showEnterBt.flag=!0;var e=new ne["a"].core.Timeline;e.fromTo(this.$refs.bt,{opacity:0},{opacity:1,duration:1,ease:"none"})}},{key:"resume",value:function(){this.timeMarker.waitForEnter.flag||(this.timeMarker.waitForEnter.flag=!0,this.player.currentTimeAndPlay=this.timeMarker.waitForEnter.time),this.player.play(),ne["a"].to(this.$refs.bt,{opacity:0}),S("btn","soundSource","点击声源处")}}]),n}(a["c"]);Object(s["a"])([Object(a["b"])()],Ii.prototype,"pageSize",void 0),Object(s["a"])([Object(a["d"])("pageSize")],Ii.prototype,"onPageSizeChange",null),Ii=Object(s["a"])([Object(a["a"])({components:{}})],Ii);var _i,ji=Ii,Ci=ji,Ri=(n("9e85"),Object(Te["a"])(Ci,mi,di,!1,null,"fa0d0302",null)),Mi=Ri.exports,Ei=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"interact_page fullscreen"},[0===e.chapterIndex&&e.isShowTip?n("InteractTip0"):e._e(),1===e.chapterIndex&&e.isShowTip?n("InteractTip1"):e._e(),2===e.chapterIndex&&e.isShowTip?n("InteractTip2"):e._e(),n("div",{class:"skip_bt skip_bt_"+(e.bgColorDark?"light":"dark"),on:{click:e.skip}}),n("video",{ref:"preludeVideo",staticClass:"fullscreen prelude_video",style:{pointerEvents:e.isShowPrelude?"all":"none",display:e.isShowPrelude?"":"none"},attrs:{src:e.videoSrc,width:"1624",height:"750",preload:"auto",playsinline:"true","webkit-playsinline":"true","x5-video-player-type":"h5","x5-video-orientation":"portraint","x5-video-player-fullscreen":"false",airplay:"allow","x-webkit-airplay":"allow",muted:""},domProps:{muted:!0}})],1)},zi=[],Di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"renderer_wrapper fullscreen"},[n("canvas",{ref:"canvas",class:"fullscreen"})])},Ai=[],Bi=n("7e07");function Fi(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function Ni(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){Fi(r,i,o,s,a,"next",e)}function a(e){Fi(r,i,o,s,a,"throw",e)}s(void 0)}))}}function Ui(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xi(e,t,n){return t&&Wi(e.prototype,t),n&&Wi(e,n),e}(function(e){e[e["TEX"]=0]="TEX",e[e["RGBE"]=1]="RGBE"})(_i||(_i={}));var Li=function(){function e(){Ui(this,e),this.texLoader=new g["sb"],this.texMap={noise:{url:"textures/noise4.png?v1",type:_i.TEX,res:null,wrapS:g["O"],wrapT:g["O"],priority:0},manSeq:{url:"textures/manSeq.png?v1",type:_i.TEX,res:null,wrapS:g["O"],wrapT:g["O"],priority:0},manSeq2:{url:"textures/manSeq2.png?v1",type:_i.TEX,res:null,wrapS:g["O"],wrapT:g["O"],priority:0},manSeq3:{url:"textures/manSeq3.png?v1",type:_i.TEX,res:null,wrapS:g["O"],wrapT:g["O"],priority:0},manSeq4:{url:"textures/manSeq4.png?v1",type:_i.TEX,res:null,wrapS:g["O"],wrapT:g["O"],priority:0},string:{url:"textures/string.png?v1",type:_i.TEX,res:null,wrapS:g["O"],wrapT:g["O"],priority:0},wave:{url:"textures/wave.png?v1",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0},spark0:{url:"textures/spark0.png?v1",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0},clue0:{url:"textures/clue0.png?v1",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0},clue1:{url:"textures/clue1.png?v1",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0},clue2:{url:"textures/clue2.png?v1",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0},clue3:{url:"textures/clue3.png?v1",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0},clue4:{url:"textures/clue4.png?v1",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0},clueBg:{url:"textures/clueBg.jpg",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0},inkAnim:{url:"textures/inkAnim3.jpg",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0},poster0:{url:"textures/poster0.jpg",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0,preload:!1},poster1:{url:"textures/poster1.jpg",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0,preload:!1},poster2:{url:"textures/poster2.jpg",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0,preload:!1},poster3:{url:"textures/poster3.jpg",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0,preload:!1},poster4:{url:"textures/poster4.jpg",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0,preload:!1},white:{url:"textures/white.jpg",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0},birds:{url:"textures/birds.png?v1",type:_i.TEX,res:null,wrapS:g["g"],wrapT:g["g"],priority:0}}}return Xi(e,[{key:"init",value:function(){var e=Ni(y.a.mark((function e(t){return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.renderer=t,this.loadPriority(-1);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadPriority",value:function(){var e=Ni(y.a.mark((function e(t){var n,i,o,r,s;return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i in n=[],[],this.texMap)o=this.texMap[i],o.priority!==t&&-1!==t||n.push(o);r=0;case 4:if(!(r<n.length)){e.next=11;break}return s=n[r],e.next=8,this.loadByType(s);case 8:r++,e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initStoreRes",value:function(){for(var e in this.texMap){var t=this.texMap[e];!1!==t.preload&&this.updateProgress(t.url,0)}}},{key:"loadByType",value:function(e){return e.type===_i.TEX?this.loadTex(e):e.type===_i.RGBE?this.loadHDR(e):Promise.resolve(null)}},{key:"loadTex",value:function(e){var t=this;return new Promise((function(n){e.res=t.texLoader.load("/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/"+e.url,(function(i){i.name=e.url,!1!==e.preload&&t.updateProgress(e.url,1),i.wrapS=e.wrapS?e.wrapS:g["kb"],i.wrapT=e.wrapT?e.wrapT:g["kb"],i.encoding=e.encoding?e.encoding:i.encoding,i.magFilter=g["C"],i.minFilter=g["C"],i.needsUpdate=!0,H.state.highVersion&&t.renderer.initTexture(i),n(i)}))}))}},{key:"loadHDR",value:function(e){var t=this;return new Promise((function(n){var i=new g["V"](t.renderer);i.compileEquirectangularShader(),(new Bi["a"]).setDataType(g["wb"]).load(e.url,(function(o){!1!==e.preload&&t.updateProgress(e.url,1);var r=i.fromEquirectangular(o);e.res=r.texture,e.res.name=e.url,H.state.highVersion&&t.renderer.initTexture(e.res),o.dispose(),i.dispose(),n(r.texture)}))}))}},{key:"updateProgress",value:function(e,t){H.commit("UpdateResLoadProgress",{id:e,progress:t})}},{key:"get",value:function(e){var t=this.texMap[e];return t?(t.res||this.loadByType(t),t.res):null}}]),e}(),$i=new Li;function Hi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vi(e,t,n){return t&&qi(e.prototype,t),n&&qi(e,n),e}var Gi=function(){function e(t){Hi(this,e),this.size=new g["xb"],this.pixelRatio=window.devicePixelRatio>2?2:window.devicePixelRatio,this.audioConfig={},this.mats=[],this.texs=[],this.geos=[],this.renderer=t,this.renderer.getSize(this.size),this.pixelRatio=this.renderer.getPixelRatio()}return Vi(e,[{key:"needRotate",get:function(){return H.state.needRotate}},{key:"width",get:function(){return this.size.x}},{key:"height",get:function(){return this.size.y}},{key:"getScreenPos",value:function(e){var t=new g["xb"];return this.needRotate?(t.x=e.pageY,t.y=this.height-e.pageX):(t.x=e.pageX,t.y=e.pageY),t}},{key:"screenPosToUv",value:function(e){var t=e.clone().divide(new g["xb"](this.width,this.height));return t.y=1-t.y,t}},{key:"onWindowResize",value:function(){this.renderer.getSize(this.size),this.pixelRatio=this.renderer.getPixelRatio()}},{key:"onTouchStart",value:function(e){}},{key:"onTouchMove",value:function(e){}},{key:"onTouchEnd",value:function(e){}},{key:"onMouseDown",value:function(e){}},{key:"onMouseMove",value:function(e){}},{key:"onMouseUp",value:function(e){}},{key:"onClick",value:function(e){}},{key:"reset",value:function(){}},{key:"anim",value:function(e,t){}},{key:"updateProgress",value:function(e,t){H.commit("UpdateResLoadProgress",{id:e,progress:t})}},{key:"stopAllAudio",value:function(){var e=this,t=Object.keys(this.audioConfig);t.forEach((function(t){e.audioConfig[t];var n=Rn.playing(t);n&&Rn.stop(t)}))}},{key:"processAudio",value:function(e){var t=this,n=Object.keys(this.audioConfig);n.forEach((function(n){var i=t.audioConfig[n],o=Rn.playing(n),r=!1;i.forEach((function(t){e>=t[0]&&e<=t[1]&&(r=!0)})),r&&!o?Rn.play(n):!r&&o&&Rn.stop(n)}))}},{key:"dispose",value:function(){try{this.geos.forEach((function(e){return null===e||void 0===e?void 0:e.dispose()})),this.mats.forEach((function(e){return null===e||void 0===e?void 0:e.dispose()})),this.texs.forEach((function(e){return null===e||void 0===e?void 0:e.dispose()}))}catch(e){console.log("Error when dispose")}}}]),e}(),Ki=Gi,Yi=n("fbcd"),Qi=n("aa15"),Ji=n("9e21"),Zi=n.n(Ji),eo=n("d7c5"),to=n.n(eo);function no(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function io(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function oo(e,t,n){return t&&io(e.prototype,t),n&&io(e,n),e}var ro=function(){function e(t,n){no(this,e),this.size=new g["xb"],this.isInteract=!1,this.lastInteractDir=0,this.lastTouch=new g["xb"],this.stringThickness=4,this.nodeNum=10,this.subNum=8,this.pts=[],this.vels=[],this.drawPts=[],this.curvePts=[],this.renderer=t,this.scene=n;for(var i=0;i<this.nodeNum;i++)this.pts.push(0,0),this.drawPts.push(0,0),this.vels.push(0);this.mesh=new g["K"](this.createGeo(),new g["mb"]({vertexShader:Zi.a,fragmentShader:to.a,uniforms:{map:{value:$i.get("string")},opacity:{value:0}},side:g["m"],transparent:!0})),this.scene.add(this.mesh)}return oo(e,[{key:"width",get:function(){return this.size.x}},{key:"height",get:function(){return this.size.y}},{key:"geoNodeNum",get:function(){return(this.nodeNum-1)*(this.subNum+1)}},{key:"createGeo",value:function(){for(var e=new g["f"],t=[],n=[],i=[],o=0;o<this.geoNodeNum;o++)n.push(0,4,0),n.push(0,-4,0),t.push(o/this.geoNodeNum,0),t.push(o/this.geoNodeNum,1);for(var r=0;r<this.geoNodeNum-1;r++){var s=2*r;i.push(s,s+2,s+1),i.push(s+1,s+2,s+3)}var a=new Float32Array(n),u=new Float32Array(t);return e.setAttribute("position",new g["e"](a,3)),e.setAttribute("uv",new g["e"](u,2)),e.setIndex(i),e}},{key:"onTouchStart",value:function(e){this.isInteract=!0,this.lastTouch.copy(e)}},{key:"onTouchMove",value:function(e){var t=this;if(this.isInteract){var n=this.getInteractPts(this.lastTouch,e);n.forEach((function(n){t.vels[n]=25*(e.y-t.lastTouch.y<0?-1:1)}));var i=e.y-this.lastTouch.y;return i/=0===i?1:Math.abs(i),this.lastTouch.copy(e),0!==n.length&&i!==this.lastInteractDir&&(this.lastInteractDir=i,!0)}}},{key:"onTouchEnd",value:function(){this.isInteract=!1,this.lastInteractDir=0}},{key:"getInteractPts",value:function(e,t){var n=(.5*(e.x+t.x)+.5*this.width)/this.width*(this.nodeNum-1),i=Math.floor(n),o=Math.ceil(n),r=E(e,t,new g["xb"](this.pts[2*i],this.pts[2*i+1]),new g["xb"](this.pts[2*o],this.pts[2*o+1]));return r?i!==o?[i,o]:[i]:[]}},{key:"onWindowResize",value:function(e){this.size.copy(e)}},{key:"updateString",value:function(e){for(var t=this.width,n=this.height,i=this.nodeNum-1,o=0;o<this.nodeNum;o+=1)if(this.pts[2*o]=t*o/i-t/2,0===o||o===this.nodeNum-1)this.pts[2*o+1]=0;else{var r=.5*(this.pts[2*o-1]+this.pts[2*o+3]);this.vels[o]+=.1*(r-this.pts[2*o+1]),this.vels[o]*=.88,this.pts[2*o+1]+=this.vels[o],this.pts[2*o+1]=g["I"].lerp(0,this.pts[2*o+1],x(1,this.nodeNum/2,o))}for(var s=0;s<this.nodeNum;s+=1){var a=Math.sin(2*-e+1*s)*n/9;this.drawPts[2*s]=this.pts[2*s],this.drawPts[2*s+1]=.5*(this.pts[2*s+1]+a)}this.curvePts=M(this.drawPts,.5,!1,this.subNum)}},{key:"updateStringGeo",value:function(){for(var e=this.mesh.geometry,t=e.attributes.position,n=(t.array,0);n<this.geoNodeNum;n++)t.setXYZ(2*n,this.curvePts[2*n],this.curvePts[2*n+1]-this.stringThickness,0),t.setXYZ(2*n+1,this.curvePts[2*n],this.curvePts[2*n+1]+this.stringThickness,0);t instanceof g["t"]?t.data.needsUpdate=!0:t.needsUpdate=!0}},{key:"setOpacity",value:function(e){var t=this.mesh.material;t.uniforms.opacity.value=e}},{key:"anim",value:function(e,t){this.updateString(e),this.updateStringGeo()}}]),e}(),so=ro,ao=n("54bd"),uo=n.n(ao);function co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fo(e,t,n){return t&&lo(e.prototype,t),n&&lo(e,n),e}var ho=function(){function e(t,n){co(this,e),this.size=new g["xb"],this.clueSize=new g["xb"](703,744),this.clueMaps=[],this.clueIndex=0,this.renderer=t,this.scene=n,this.clueMaps.push($i.get("clue0"),$i.get("clue1"),$i.get("clue2"),$i.get("clue3"),$i.get("clue4")),this.uniforms={time:{value:0},opacity:{value:0},progress:{value:1},angle:{value:0},clueMap0:{value:this.clueMaps[0]},clueMap1:{value:this.clueMaps[0]},inkAnimMap:{value:$i.get("inkAnim")}},this.mesh=new g["K"](new g["Z"](1,1,1,1),new g["mb"]({vertexShader:Zi.a,fragmentShader:uo.a,uniforms:this.uniforms,side:g["m"],transparent:!0})),this.scene.add(this.mesh)}return fo(e,[{key:"width",get:function(){return this.size.x}},{key:"height",get:function(){return this.size.y}},{key:"nextClue",value:function(){this.tl&&(this.tl.pause(),this.tl.kill()),this.tl=new ne["a"].core.Timeline;var e=this.clueIndex;this.clueIndex++,this.clueIndex%=this.clueMaps.length,H.commit("setClueIndex",this.clueIndex),this.uniforms.progress.value=.001,this.uniforms.angle.value=Math.floor(4*Math.random())*Math.PI*.5,this.uniforms.clueMap0.value=this.clueMaps[e],this.uniforms.clueMap1.value=this.clueMaps[this.clueIndex],this.tl.fromTo(this.uniforms.progress,{value:.001},{value:.999,duration:3}),S("btn","swicthClue","切换线索")}},{key:"onWindowResize",value:function(e){this.size.copy(e);var t=.97*this.height,n=t*this.clueSize.x/this.clueSize.y;this.mesh.scale.set(n,t,1),this.mesh.position.set(-this.size.x/2+n/2,this.size.y/2-t/2,3)}},{key:"setOpacity",value:function(e){this.uniforms.opacity.value=e}},{key:"anim",value:function(e,t){this.uniforms.time.value=e}}]),e}(),po=ho,mo=n("819b");function vo(e){return vo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo(e)}function yo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function go(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bo(e,t,n){return t&&go(e.prototype,t),n&&go(e,n),e}function wo(e,t,n){return wo="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=xo(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},wo(e,t,n||e)}function xo(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=_o(e),null===e)break;return e}function ko(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&To(e,t)}function To(e,t){return To=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},To(e,t)}function Po(e){var t=Io();return function(){var n,i=_o(e);if(t){var o=_o(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return So(this,n)}}function So(e,t){if(t&&("object"===vo(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oo(e)}function Oo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Io(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _o(e){return _o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_o(e)}var jo=function(e){ko(n,e);var t=Po(n);function n(e,i){var o;return yo(this,n),o=t.call(this,e),o.isInteract=!1,o.rayCaster=new g["jb"],o.hitPos=new g["yb"],o.mouse=new g["xb"],o.designSize=new g["xb"](1624,750),o.ctr=i,o.scene=new g["lb"],o.scene.background=$i.get("clueBg"),o.scene.name="ClueScene",o.camera=new g["U"](-o.designSize.x/2,o.designSize.x/2,o.designSize.y/2,-o.designSize.y/2,.1,1e3),o.camera.name="ClueCamera",o.camera.position.set(0,0,10),o.camera.lookAt(new g["yb"](0)),o.scene.add(o.camera),o.string=new so(o.renderer,o.scene),o.clue=new po(o.renderer,o.scene),o.renderPass=new Qi["a"](o.scene,o.camera),o.bloomPass=new mo["a"](new g["xb"](o.width,o.height).multiplyScalar(o.pixelRatio),.1,1,.5),o.finalComposer=new Yi["a"](e),o.finalComposer.setPixelRatio(o.pixelRatio),o.finalComposer.renderToScreen=!0,o.finalComposer.addPass(o.renderPass),o.finalComposer.addPass(o.bloomPass),o.onWindowResize(),o}return bo(n,[{key:"onTouchStart",value:function(e){this.isInteract=!0;var t=e.touches[0],n=this.getScreenPos(t);this.mouse.x=n.x/this.width*2-1,this.mouse.y=-n.y/this.height*2+1,this.rayCaster.setFromCamera(this.mouse,this.camera),this.rayCaster.ray.intersectPlane(new g["X"](new g["yb"](0,0,1),0),this.hitPos),this.string.onTouchStart(new g["xb"](this.hitPos.x,this.hitPos.y))}},{key:"onTouchMove",value:function(e){if(this.isInteract){var t=e.touches[0],n=this.getScreenPos(t);this.mouse.x=n.x/this.width*2-1,this.mouse.y=-n.y/this.height*2+1,this.rayCaster.setFromCamera(this.mouse,this.camera),this.rayCaster.ray.intersectPlane(new g["X"](new g["yb"](0,0,1),0),this.hitPos);var i=this.string.onTouchMove(new g["xb"](this.hitPos.x,this.hitPos.y));i&&(Rn.play("p2/".concat(Math.floor(Math.random()*Y.num))),this.clue.nextClue(),H.commit("setHasInteract",{index:3,flag:!0}))}}},{key:"onTouchEnd",value:function(e){this.isInteract=!1,this.string.onTouchEnd()}},{key:"onMouseDown",value:function(e){this.isInteract=!0;var t={pageX:e.pageX,pageY:e.pageY},n=this.getScreenPos(t);this.mouse.x=n.x/this.width*2-1,this.mouse.y=-n.y/this.height*2+1,this.rayCaster.setFromCamera(this.mouse,this.camera),this.rayCaster.ray.intersectPlane(new g["X"](new g["yb"](0,0,1),0),this.hitPos),this.string.onTouchStart(new g["xb"](this.hitPos.x,this.hitPos.y))}},{key:"onMouseMove",value:function(e){if(this.isInteract){var t={pageX:e.pageX,pageY:e.pageY},n=this.getScreenPos(t);this.mouse.x=n.x/this.width*2-1,this.mouse.y=-n.y/this.height*2+1,this.rayCaster.setFromCamera(this.mouse,this.camera),this.rayCaster.ray.intersectPlane(new g["X"](new g["yb"](0,0,1),0),this.hitPos);var i=this.string.onTouchMove(new g["xb"](this.hitPos.x,this.hitPos.y));i&&(Rn.play("p2/".concat(Math.floor(Math.random()*Y.num))),this.clue.nextClue(),H.commit("setHasInteract",{index:3,flag:!0}))}}},{key:"onMouseUp",value:function(e){this.isInteract=!1,this.string.onTouchEnd()}},{key:"reset",value:function(){var e=this,t={p:0},n=new ne["a"].core.Timeline;n.to(t,{p:1,duration:1,onUpdate:function(){e.string.setOpacity(t.p),e.clue.setOpacity(t.p)}}),Rn.load("p2")}},{key:"anim",value:function(e,t){this.string.anim(e,t),this.clue.anim(e,t),this.render(e,t)}},{key:"render",value:function(e,t){this.finalComposer.render()}},{key:"onWindowResize",value:function(){wo(_o(n.prototype),"onWindowResize",this).call(this),this.finalComposer.setSize(this.width,this.height),this.string.onWindowResize(this.size),this.clue.onWindowResize(this.size);var e=this.camera,t=this.height,i=this.width;e.left=-i/2,e.right=i/2,e.top=t/2,e.bottom=-t/2,e.updateProjectionMatrix()}}]),n}(Ki),Co=jo,Ro=n("b483"),Mo=n("fe83"),Eo=n.n(Mo),zo={layers:{INK:99,FINAL:100}},Do=n("3d16"),Ao=n.n(Do);function Bo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function No(e,t,n){return t&&Fo(e.prototype,t),n&&Fo(e,n),e}var Uo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:35;Bo(this,e),this.isJumping=!1,this.jumpPosY=20,this.jumper=new g["T"],this.jumpPosY=t}return No(e,[{key:"jumpingProgress",get:function(){return this.isJumping&&this.jumpTL?this.jumpTL.progress():0}},{key:"getPosition",value:function(){return this.jumper.position}},{key:"jumpTo",value:function(e,t,n,i){var o=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[4,7,11],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[1,2],u=e.clone(),c=t.clone(),l=!1,f={p0:0,p1:0},h=1;this.jumpTL&&this.jumpTL.isActive()&&(this.jumpTL.pause(),this.jumpTL.kill(),this.onJumpComplete&&!l&&this.onJumpComplete()),this.jumpTL=(new ne["a"].core.Timeline).to(f,{p0:1,ease:"none",duration:h,onUpdate:function(){var e=18*f.p0,t=.5*(u.x+c.x),n=.5*(u.z+c.z);if(e<s[1]){var i=z(s[0],s[1],e);i=Math.pow(i,.6),o.jumper.position.x=g["I"].lerp(u.x,t,i),o.jumper.position.z=g["I"].lerp(u.z,n,i)}else{var r=z(s[1],s[2],e);r=Math.pow(r,1.5),o.jumper.position.x=g["I"].lerp(t,c.x,r),o.jumper.position.z=g["I"].lerp(n,c.z,r)}}}).to(f,{p1:1,ease:"none",duration:h,onUpdate:function(){var e=18*f.p1,t=Math.max(u.y,c.y)+o.jumpPosY;if(e<s[1]){var n=z(s[0],s[1],e);n=Math.pow(n,.6),o.jumper.position.y=g["I"].lerp(u.y,t,n)}else{var r=z(s[1],s[2],e);r=Math.pow(r,1.5),o.jumper.position.y=g["I"].lerp(t,c.y,r)}e>=s[2]&&!l&&(i(),o.playAudio(),l=!0)},onStart:function(){n()}},"<").fromTo(this,{myTime:a[0]},{myTime:a[1]-.01,duration:h,ease:"none",onStart:function(){o.isJumping=!0},onComplete:function(){o.isJumping=!1}},"<"),this.jumpTL.seek(r),this.onJumpComplete=i}},{key:"playAudio",value:function(){}},{key:"setPosition",value:function(e){this.jumpTL&&this.jumpTL.isActive()&&(this.jumpTL.pause(),this.jumpTL.kill(),this.onJumpComplete&&this.onJumpComplete()),this.jumper.position.copy(e)}}]),e}(),Wo=Uo;function Xo(e){return Xo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xo(e)}function Lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ho(e,t,n){return t&&$o(e.prototype,t),n&&$o(e,n),e}function qo(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vo(e,t)}function Vo(e,t){return Vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vo(e,t)}function Go(e){var t=Qo();return function(){var n,i=Jo(e);if(t){var o=Jo(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ko(this,n)}}function Ko(e,t){if(t&&("object"===Xo(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yo(e)}function Yo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Jo(e){return Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jo(e)}var Zo=function(e){qo(n,e);var t=Go(n);function n(e,i){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35;return Lo(this,n),o=t.call(this,r),o.myTime=0,o.man=e,o.manUniforms={map:{value:$i.get("manSeq2")},fps:{value:18},time:{value:0},grid:{value:new g["xb"](6,6)}},o.man.material=o.createMat(Ao.a,o.manUniforms),o.man.renderOrder=20,o}return Ho(n,[{key:"createMat",value:function(e,t){var n=new g["mb"]({vertexShader:Zi.a,fragmentShader:e,uniforms:t,transparent:!0,side:g["m"],depthTest:!1});return n}},{key:"playAudio",value:function(){Rn.play("pace")}},{key:"anim",value:function(e,t,n,i){this.isJumping||(this.myTime+=t,this.myTime%=1),this.manUniforms.time.value=this.myTime;var o=x(0,-2.1,this.jumper.position.z);this.man.position.copy(this.jumper.position),this.man.position.x=this.jumper.position.x+i*o*.5;var r=k(1.2,.7,o);this.man.scale.set(r,r,r);var s=new g["yb"];n.getWorldPosition(s)}},{key:"dispose",value:function(){var e,t,n;null===(e=this.man.geometry)||void 0===e||e.dispose(),null===(t=this.man.material)||void 0===t||t.dispose(),null===(n=$i.get("manSeq2"))||void 0===n||n.dispose()}}]),n}(Wo),er=Zo;function tr(e){return tr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(e)}function nr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ir(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function or(e,t,n){return t&&ir(e.prototype,t),n&&ir(e,n),e}function rr(e,t,n){return rr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=sr(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},rr(e,t,n||e)}function sr(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=pr(e),null===e)break;return e}function ar(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ur(e,t)}function ur(e,t){return ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ur(e,t)}function cr(e){var t=hr();return function(){var n,i=pr(e);if(t){var o=pr(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return lr(this,n)}}function lr(e,t){if(t&&("object"===tr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fr(e)}function fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function pr(e){return pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pr(e)}var mr=function(e){ar(n,e);var t=cr(n);function n(e,i,o){var r;return nr(this,n),r=t.call(this,e),r.isInteract=!1,r.viewHeight=700,r.stoneIndex=0,r.stones=[],r.audioStartIndex=-1,r.audioEndIndex=10,r.mouse=new g["xb"],r.lastTouch=new g["xb"],r.animTouch=new g["xb"],r.cameraX=0,r.cameraTargetX=0,r.meshes=[],r.audioConfig={water:[[1,2],[5,8]],mountain:[[1,22]]},r.lastTime=0,r.lastInteractTime=0,r.maxTipGapTime=2,r.hasNextScene=!1,r.ctr=i,r.scene=new g["lb"],r.scene.background=new g["i"](0),r.scene.name="MountainScene",r.camera=new g["W"](64,r.width/r.height,.1,1e3),r.camera.name="MountainCamera",r.camera.position.set(0,0,10),r.camera.lookAt(new g["yb"]),r.scene.add(r.camera),r.loadModel(),r.inkCamera=new g["U"](-10.24,10.24,5.12,-5.12),r.inkCamera.position.set(0,0,10),r.inkRenderPass=new Qi["a"](r.scene,r.inkCamera),r.renderPass=new Qi["a"](r.scene,r.camera),r.inkComposer=new Yi["a"](e),r.inkComposer.setPixelRatio(r.pixelRatio),r.inkComposer.renderToScreen=!1,r.inkComposer.addPass(r.inkRenderPass),r.finalComposer=new Yi["a"](e),r.finalComposer.setPixelRatio(r.pixelRatio),r.finalComposer.renderToScreen=!0,r.finalComposer.addPass(r.renderPass),r.inkScene=o,r.inkPlaneMat=new g["mb"]({vertexShader:Zi.a,fragmentShader:to.a,uniforms:{map:{value:r.inkScene.getTexture()},opacity:{value:1}},side:g["m"]}),r.inkPlane=new g["K"](new g["Z"](20.48,10.24,1,1),r.inkPlaneMat),r.inkPlane.position.z=-3,r.scene.add(r.inkPlane),r}return or(n,[{key:"inkSize",get:function(){return new g["xb"](this.height/this.viewHeight*2048,this.height/this.viewHeight*1024)}},{key:"camFactor",get:function(){return this.camera.position.x/this.cameraX}},{key:"loadModel",value:function(){var e=this,t=new Ro["a"],n="scene1.glb?v1";this.updateProgress(n,0),t.load("/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/"+"models/".concat(n),(function(t){e.updateProgress(n,1),t.scene.traverse((function(t){if(t instanceof g["K"]){var n=t.material,i=n.map;if(i){i.encoding=g["B"],i.wrapS=g["g"],i.wrapT=g["g"],i.magFilter=g["C"],i.minFilter=g["C"],i.needsUpdate=!0;var o=t.geometry.boundingBox,r=o.max.clone().sub(o.min),s={map:{value:i},depthMap:{value:n.metalnessMap},flowMap:{value:n.roughnessMap},noiseMap:{value:$i.get("noise")},enableFlow:{value:e.enableFlow(t.name)?1:0},flowOffset:{value:.006},time:{value:0},offset:{value:0},opacity:{value:1},showSmoke:{value:1},meshBound:{value:new g["xb"](r.x,r.y)}};t.material=new g["mb"]({vertexShader:Zi.a,fragmentShader:Eo.a,uniforms:s,transparent:!0,side:g["m"]}),e.meshes.push({obj:t,z:t.position.z,x:t.position.x,uniforms:s}),"bg"===t.name?t.layers.set(zo.layers.INK):t.layers.enable(zo.layers.INK)}"man"===t.name&&(e.man=new er(t,e.scene,.5)),t.geometry&&e.geos.push(t.geometry),t.material&&e.mats.push(t.material),n&&e.mats.push(n),n.map&&e.texs.push(n.map),n.metalnessMap&&e.texs.push(n.metalnessMap),n.roughnessMap&&e.texs.push(n.roughnessMap)}-1!==t.name.indexOf("stone")&&e.stones.push(t)})),e.stones=I(e.stones),e.man.setPosition(e.stones[0].position),e.camera=t.cameras[0],e.scene.add(t.scene),e.onWindowResize()}))}},{key:"enableFlow",value:function(e){var t=e.split("-");return"f"==t[t.length-1]}},{key:"onClick",value:function(){this.nextStone(),H.commit("setHasInteract",{index:0,flag:!0}),this.lastInteractTime=this.lastTime}},{key:"nextStone",value:function(){var e=this,t=this.stoneIndex;if(!(this.stoneIndex+1>this.stones.length-1)){this.stoneIndex++;var n=this.stoneIndex;this.man.jumpTo(this.stones[t].position,this.stones[this.stoneIndex].position,(function(){e.onLeaveStone(t);var i=e.audioStartIndex+n;i<=e.audioEndIndex&&Rn.play("p1/".concat(i))}),(function(){e.onJumpToStone(n)})),n==this.stones.length-1&&setTimeout((function(){e.ctr.nextScene(),e.hasNextScene=!0}),650)}}},{key:"reset",value:function(){this.stoneIndex=0,this.man&&this.man.setPosition(this.stones[0].position),this.camera.position.x=this.cameraTargetX=-this.cameraX,this.inkScene.resetInkConfig({renderToScene:!1,enableInteract:!1,overrideSize:!0,recoverRateMin:.05,recoverRateMax:.1,isDownFlow:!0}),this.onWindowResize(),this.anim(0,1/60),Rn.load("p1")}},{key:"onJumpToStone",value:function(e){var t=new g["yb"];this.stones[e].getWorldPosition(t);var n=x(0,-2.1,t.z);t.x=t.x+this.camFactor*n*.5,t.x=(t.x+10.24)/20.48,t.y=(t.y+5.12)/10.24,this.inkScene.setPulse(new g["xb"](t.x,t.y),1e3)}},{key:"onLeaveStone",value:function(e){}},{key:"onTouchStart",value:function(e){this.isInteract=!0;var t=e.touches[0],n=this.needRotate?t.pageY:t.pageX,i=this.needRotate?this.height-t.pageX:t.pageY;this.animTouch.set(n,i),this.lastTouch.set(n,i)}},{key:"onTouchMove",value:function(e){if(this.isInteract){var t=e.touches[0],n=this.needRotate?t.pageY:t.pageX,i=this.needRotate?this.height-t.pageX:t.pageY,o=new g["xb"](n,i);this.lastTouch=o}}},{key:"onTouchEnd",value:function(e){this.isInteract=!1}},{key:"anim",value:function(e,t){var n=this;if(!this.hasNextScene){this.animTouch.lerp(this.lastTouch,.1);this.screenPosToUv(this.animTouch);if(this.camera.position.x+=.05*(this.cameraTargetX-this.camera.position.x),this.man){this.man.anim(e,t,this.camera,this.camFactor);var i=this.man.getPosition();this.cameraTargetX=g["I"].clamp(i.x,-this.cameraX,this.cameraX)}this.meshes.forEach((function(t){var i=x(0,-2.1,t.z);t.obj.position.x=t.x+n.camFactor*i*.5,t.uniforms.offset.value=n.camFactor,t.uniforms.time.value=e})),this.render(e,t);var o=this.stoneIndex;this.processAudio(o),this.lastTime-this.lastInteractTime>this.maxTipGapTime&&H.state.hasInteract[0]&&H.commit("setHasInteract",{index:0,flag:!1}),this.lastTime=e}}},{key:"render",value:function(e,t){this.renderPass.camera=this.camera,this.meshes.forEach((function(e){e.uniforms.opacity.value=1})),this.inkCamera.layers.disableAll(),this.inkCamera.layers.enable(zo.layers.INK),this.scene.background=null,this.inkComposer.render(),this.inkScene.setBaseTexture(this.inkComposer.readBuffer.texture),this.inkScene.anim(e,t),this.meshes.forEach((function(e){e.uniforms.opacity.value=0})),this.camera.layers.enableAll(),this.camera.layers.disable(zo.layers.INK),this.inkPlaneMat.uniforms.map.value=this.inkScene.getTexture(),this.finalComposer.render()}},{key:"onWindowResize",value:function(){rr(pr(n.prototype),"onWindowResize",this).call(this);var e=this.camera,t=.01*this.viewHeight,i=t*this.width/this.height;if(e.left=-i/2,e.right=i/2,e.top=t/2,e.bottom=-t/2,e.updateProjectionMatrix(),e.position.z=-.5,this.cameraX=Math.abs((20.48-i)/2),this.man){var o=this.man.getPosition();this.cameraTargetX=g["I"].clamp(o.x,-this.cameraX,this.cameraX),this.camera.position.x=this.cameraTargetX}this.finalComposer.setSize(this.width,this.height),this.inkComposer.setSize(this.inkSize.x,this.inkSize.y),this.inkScene.onOverrideSize(this.inkSize.x,this.inkSize.y)}},{key:"dispose",value:function(){var e;null===(e=this.man)||void 0===e||e.dispose(),rr(pr(n.prototype),"dispose",this).call(this)}}]),n}(Ki),dr=mr,vr=n("692d"),yr=n.n(vr),gr=n("7089");function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xr(e,t,n){return t&&wr(e.prototype,t),n&&wr(e,n),e}var kr=function(){function e(t,n,i,o,r,s){br(this,e),this.rtIndex=0,this.renderer=s,this.name=t,this.WIDTH=n,this.initTexture=i,this.rt0=new g["Bb"](this.WIDTH,this.WIDTH),this.rt1=new g["Bb"](this.WIDTH,this.WIDTH),this.uniforms=Object.assign(r,{lastTexture:{value:null},initTexture:{value:this.initTexture},time:{value:0},delta:{value:.15},resolution:{value:new g["xb"](this.WIDTH,this.WIDTH)}}),this.mat=new g["mb"]({uniforms:this.uniforms,vertexShader:Zi.a,fragmentShader:o})}return xr(e,[{key:"currentRT",get:function(){return 0===this.rtIndex?this.rt0:this.rt1}},{key:"lastRT",get:function(){return 0!==this.rtIndex?this.rt0:this.rt1}},{key:"swap",value:function(){this.rtIndex=1-this.rtIndex}},{key:"compute",value:function(e,t,n,i,o){this.swap(),this.renderer.setRenderTarget(this.currentRT),n.material=this.mat,this.uniforms.lastTexture.value=this.lastRT.texture,this.uniforms.time.value=e,this.uniforms.delta.value=t,this.renderer.render(i,o)}}]),e}(),Tr=kr;function Pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Or(e,t,n){return t&&Sr(e.prototype,t),n&&Sr(e,n),e}var Ir=function(){function e(t,n,i){Pr(this,e),this.pointPosScale=1,this.renderer=t,this.points=n,this.pointPosScale=i,this.camera=new g["U"](-1,1,1,-1,.1,10),this.camera.position.z=1,this.camera.lookAt(new g["yb"]),this.copyMat=new g["mb"]({uniforms:{map:{value:null}},vertexShader:Zi.a,fragmentShader:to.a}),this.quad=new g["K"](new g["Z"](2,2,1,1),this.copyMat),this.scene=new g["lb"],this.scene.add(this.quad),this.posInitTexture=this.createTexture(),this.fillPosTexture(this.posInitTexture),this.posVar=new Tr("pos",this.WIDTH,this.posInitTexture,yr.a,{velTexture:{value:null},nodeNum:{value:this.nodeNum},pointPosScale:{value:this.pointPosScale},noiseTexture:{value:$i.get("noise")},reset:{value:0},stonePos0:{value:new g["zb"](9999,9999,9999,5)},stonePos1:{value:new g["zb"](9999,9999,9999,5)},stonePos2:{value:new g["zb"](9999,9999,9999,5)},stonePos3:{value:new g["zb"](9999,9999,9999,5)},stonePos4:{value:new g["zb"](9999,9999,9999,5)},stonePos5:{value:new g["zb"](9999,9999,9999,5)},stonePos6:{value:new g["zb"](9999,9999,9999,5)},stonePos7:{value:new g["zb"](9999,9999,9999,5)},stonePos8:{value:new g["zb"](9999,9999,9999,5)}},this.renderer),this.initVariable(this.posVar),this.posVar.uniforms.reset.value=1,this.compute(0,.16),this.posVar.uniforms.reset.value=0}return Or(e,[{key:"nodeNum",get:function(){return this.points.length}},{key:"WIDTH",get:function(){var e=Math.ceil(Math.sqrt(this.nodeNum))+1;return 2*e}},{key:"setStonePos",value:function(e,t){this.posVar.uniforms["stonePos".concat(e)].value=new g["zb"](t.x,t.y,t.z,3)}},{key:"stoneWaveStart",value:function(e){var t=this,n={w:6};gr["a"].to(n,{w:16,ease:"elastic.out(1, 0.3)",duration:6,onUpdate:function(){t.posVar.uniforms["stonePos".concat(e)].value.w=n.w}})}},{key:"stoneWaveStop",value:function(e){var t=this,n={w:16};gr["a"].to(n,{w:6,ease:"elastic.out(1, 0.3)",duration:6,onUpdate:function(){t.posVar.uniforms["stonePos".concat(e)].value.w=n.w}})}},{key:"createTexture",value:function(){var e=new Float32Array(this.WIDTH*this.WIDTH*4);return new g["j"](e,this.WIDTH,this.WIDTH,g["fb"],g["o"])}},{key:"initVariable",value:function(e){var t=this.renderer.getRenderTarget(),n=this.quad.material;this.copyMat.uniforms.map.value=e.initTexture,this.quad.material=this.copyMat,this.renderer.setRenderTarget(e.rt0),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(e.rt1),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(t),this.quad.material=n}},{key:"fillPosTexture",value:function(e){for(var t=e.image.data,n=new g["yb"],i=0,o=t.length;i<o;i+=4){var r,s=i/4,a=s%this.nodeNum,u=Math.floor(s/this.nodeNum)%3;null===(r=this.points[a].parent)||void 0===r||r.updateMatrixWorld(),this.points[a].getWorldPosition(n);var c=[n.x,n.y,n.z],l=O(c[u]*this.pointPosScale);t[i+0]=l.x,t[i+1]=l.y,t[i+2]=l.z,t[i+3]=l.w}}},{key:"fillVelTexture",value:function(e){for(var t=e.image.data,n=O(0),i=0,o=t.length;i<o;i+=4){t[i+0]=n.x,t[i+1]=n.y,t[i+2]=n.z,t[i+3]=n.w}}},{key:"getPosTexture",value:function(){return this.posVar.currentRT.texture}},{key:"getInitPosTexture",value:function(){return this.posInitTexture}},{key:"reset",value:function(){}},{key:"compute",value:function(e,t){for(var n=this.renderer.getRenderTarget(),i=this.quad.material,o=0;o<3;o++)this.posVar.compute(e,t,this.quad,this.scene,this.camera);this.renderer.setRenderTarget(n),this.quad.material=i}}]),e}(),_r=Ir,jr=n("246f"),Cr=n.n(jr),Rr=n("7bbf"),Mr=n.n(Rr);function Er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Dr(e,t,n){return t&&zr(e.prototype,t),n&&zr(e,n),e}var Ar=function(){function e(t,n,i,o){Er(this,e),this.pointPosScale=.1,this.timeOffset=0,this.renderer=t,this.scene=n,this.timeOffset=o,this.points=I(i),this.constraint=new _r(this.renderer,this.points,this.pointPosScale),this.uniforms={noiseTexture:{value:$i.get("noise")},stringTexture:{value:$i.get("string")},posTextureWidth:{value:this.constraint.WIDTH},posTexture:{value:null},initPosTexture:{value:null},nodeNum:{value:this.nodeNum},pointPosScale:{value:this.pointPosScale},uvOffset:{value:Math.random()},time:{value:0},opacity:{value:1}};var r=new g["mb"]({vertexShader:Cr.a,fragmentShader:Mr.a,uniforms:this.uniforms,transparent:!0,depthTest:!1,depthWrite:!1,side:g["m"]});this.mesh=new g["K"](this.createGeo(),r),this.mesh.scale.set(1,1,1),this.mesh.layers.enable(zo.layers.INK),this.scene.add(this.mesh)}return Dr(e,[{key:"nodeNum",get:function(){return this.points.length}},{key:"createGeo",value:function(){for(var e=new g["f"],t=[],n=[],i=[],o=[],r=0;r<this.nodeNum;r++)i.push(0,1,0),i.push(0,-1,0),t.push(r),t.push(r),n.push(r/this.nodeNum,0),n.push(r/this.nodeNum,1);for(var s=0;s<this.nodeNum-1;s++){var a=2*s;o.push(a,a+2,a+1),o.push(a+1,a+2,a+3)}var u=new Float32Array(i),c=new Float32Array(t),l=new Float32Array(n);return e.setAttribute("position",new g["e"](u,3)),e.setAttribute("nodeIndex",new g["e"](c,1)),e.setAttribute("uv",new g["e"](l,2)),e.setIndex(o),e}},{key:"reset",value:function(){}},{key:"setStonePos",value:function(e,t){this.constraint.setStonePos(e,t)}},{key:"stoneWaveStart",value:function(e){this.constraint.stoneWaveStart(e)}},{key:"stoneWaveStop",value:function(e){this.constraint.stoneWaveStop(e)}},{key:"onWindowResize",value:function(){}},{key:"interact",value:function(e,t){e.clone()}},{key:"anim",value:function(e,t){this.constraint.compute(e,t),this.uniforms.initPosTexture.value=this.constraint.getInitPosTexture(),this.uniforms.posTexture.value=this.constraint.getPosTexture(),this.uniforms.time.value=e}},{key:"dispose",value:function(){var e,t;null===(e=this.mesh.geometry)||void 0===e||e.dispose(),null===(t=this.mesh.material)||void 0===t||t.dispose()}}]),e}(),Br=Ar,Fr=n("82a9"),Nr=n.n(Fr);function Ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xr(e,t,n){return t&&Wr(e.prototype,t),n&&Wr(e,n),e}var Lr=function(){function e(t,n){Ur(this,e),this.showProgress=0,this.t=0,this.speed=.5,this.stone=t;var i=new g["Z"](36,36,1,1);this.waveUniforms={time:{value:0},opacity:{value:.5},speed:{value:1},waveTexture:{value:$i.get("wave")},noiseTexture:{value:$i.get("noise")}},this.wave=new g["K"](i,new g["mb"]({vertexShader:Zi.a,fragmentShader:Nr.a,uniforms:this.waveUniforms,transparent:!0})),this.wave.position.copy(this.stone.position),this.stone.renderOrder=10,this.wave.renderOrder=5,n.add(this.wave)}return Xr(e,[{key:"getPosition",value:function(){var e=new g["yb"];return this.stone.getWorldPosition(e),e}},{key:"showWave",value:function(){ne["a"].to(this,{showProgress:1})}},{key:"hideWave",value:function(){ne["a"].to(this,{showProgress:0})}},{key:"anim",value:function(e,t){this.speed=g["I"].lerp(.5,2,this.showProgress),this.t+=t*this.speed,this.waveUniforms.time.value=this.t,this.waveUniforms.opacity.value=g["I"].lerp(.5,1,this.showProgress);var n=g["I"].lerp(1,1.6,this.showProgress);this.wave.scale.set(n,n,n)}},{key:"dispose",value:function(){var e,t,n,i,o;null===(e=this.stone.geometry)||void 0===e||e.dispose(),null===(t=this.stone.material)||void 0===t||t.dispose(),null===(n=$i.get("wave"))||void 0===n||n.dispose(),null===(i=this.wave.geometry)||void 0===i||i.dispose(),null===(o=this.wave.material)||void 0===o||o.dispose()}}]),e}(),$r=Lr,Hr=n("f7a9"),qr=n.n(Hr);function Vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kr(e,t,n){return t&&Gr(e.prototype,t),n&&Gr(e,n),e}var Yr=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Vr(this,e),this.r=P(0,2*Math.PI),this.originX=0,this.tree=t,this.originX=this.tree.position.x;var r=t.material.uniforms.map.value;this.treeUniforms={map:{value:r},shakeDir:{value:i},shakePinPos:{value:o},shakeAmp:{value:0},shakeFreq:{value:1},time:{value:0}},this.tree.material=new g["mb"]({vertexShader:Zi.a,fragmentShader:qr.a,uniforms:this.treeUniforms,transparent:!0,side:g["m"]})}return Kr(e,[{key:"getPosition",value:function(){return this.tree.position}},{key:"shake",value:function(){this.tl&&(this.tl.pause(),this.tl.kill()),this.tl=new ne["a"].core.Timeline,this.tl.addLabel("start").to(this.treeUniforms.shakeAmp,{value:.75,duration:.1},"start").to(this.treeUniforms.shakeFreq,{value:2,duration:.1},"start").addLabel("fade",.5).to(this.treeUniforms.shakeAmp,{value:0,duration:2},"fade").to(this.treeUniforms.shakeFreq,{value:6,duration:2},"fade")}},{key:"move",value:function(e){this.tree.position.x=this.originX-e}},{key:"anim",value:function(e,t){this.treeUniforms.time.value=e+this.r}},{key:"dispose",value:function(){var e,t;null===(e=this.tree.geometry)||void 0===e||e.dispose(),null===(t=this.tree.material)||void 0===t||t.dispose()}}]),e}(),Qr=Yr,Jr=n("5fb3"),Zr=n.n(Jr);function es(e){return es="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},es(e)}function ts(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ns(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function is(e,t,n){return t&&ns(e.prototype,t),n&&ns(e,n),e}function os(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rs(e,t)}function rs(e,t){return rs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rs(e,t)}function ss(e){var t=cs();return function(){var n,i=ls(e);if(t){var o=ls(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return as(this,n)}}function as(e,t){if(t&&("object"===es(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return us(e)}function us(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cs(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ls(e){return ls=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ls(e)}var fs=function(e){os(n,e);var t=ss(n);function n(e,i){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return ts(this,n),o=t.call(this,r),o.myTime=0,o.man=e,o.man.scale.set(1.5,1.5,1.5),o.manUniforms={map:{value:$i.get("manSeq")},fps:{value:18},time:{value:0},grid:{value:new g["xb"](8,7)}},o.man.material=o.createMat(Ao.a,o.manUniforms),o.man.renderOrder=20,o.man.visible=s,o.manReflect=o.man.clone(),o.manReflectUniforms={map:{value:$i.get("manSeq")},noiseTexture:{value:$i.get("noise")},fps:{value:18},time:{value:0},opacity:{value:1},grid:{value:new g["xb"](8,7)}},o.manReflect.material=o.createMat(Zr.a,o.manReflectUniforms),o.manReflect.visible=s&&a,i.add(o.manReflect),o}return is(n,[{key:"createMat",value:function(e,t){var n=new g["mb"]({vertexShader:Zi.a,fragmentShader:e,uniforms:t,transparent:!0,side:g["m"],depthTest:!1});return n}},{key:"getManPositionX",value:function(){return this.man.position.x}},{key:"playAudio",value:function(){Rn.play("paceMud")}},{key:"anim",value:function(e,t,n){this.isJumping||(this.myTime+=t,this.myTime%=1),this.manUniforms.time.value=this.myTime,this.manReflectUniforms.time.value=this.myTime,this.man.position.copy(this.jumper.position);var i=new g["yb"];n.getWorldPosition(i),this.man.lookAt(i),this.man.rotation.z=0,this.manReflect.position.copy(this.man.position),this.manReflect.rotation.copy(this.man.rotation),this.manReflect.scale.y=-1}},{key:"dispose",value:function(){var e,t,n;null===(e=this.man.geometry)||void 0===e||e.dispose(),null===(t=this.man.material)||void 0===t||t.dispose(),null===(n=$i.get("manSeq"))||void 0===n||n.dispose()}}]),n}(Wo),hs=fs,ps=n("8a87"),ms=n.n(ps);function ds(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ys(e,t,n){return t&&vs(e.prototype,t),n&&vs(e,n),e}new g["T"];var gs=new g["yb"](0,0,1),bs=function(){function e(t,n,i){ds(this,e),this.pos=new g["yb"],this.s=P(.8,1),this.originVel=new g["yb"],this.vel=new g["yb"],this.angle=0,this.targetAngle=0,this.r1=P(1,5),this.r0=P(.5,2),this.maxLife=1,this.life=1,this.uniforms={time:{value:0},opacity:{value:1},map:{value:i}},this.mat=new g["mb"]({vertexShader:Zi.a,fragmentShader:ms.a,uniforms:this.uniforms,transparent:!0}),this.mesh=new g["K"](n.geometry,this.mat),t.add(this.mesh),this.reset()}return ys(e,[{key:"reset",value:function(){this.pos.x=P(-400,400),this.pos.y=this.pos.x*P(.3,.5),this.pos.z=0,ne["a"].to(this.pos,{z:P(0,1),duration:P(1,2)}),this.originVel=new g["yb"](P(1,16),0,0),this.originVel.y=.4*this.originVel.x,this.vel=this.originVel.clone(),this.life=P(4,20),this.maxLife=this.life}},{key:"setPulse",value:function(e){e.z=this.pos.z;var t=e.distanceTo(this.pos),n=this.pos.clone().sub(e).normalize();this.vel.add(n.multiplyScalar(70*x(70,10,t)));var i=10*x(70,50,t);this.life+=i,this.maxLife+=i,t<30&&Rn.play("fish")}},{key:"anim",value:function(e,t){this.uniforms.time.value=e,this.uniforms.opacity.value=Math.min(x(0,5,this.life),x(this.maxLife,this.maxLife-3,this.life)),this.targetAngle=-Math.atan2(this.vel.x,this.vel.y)+.5*Math.PI,this.angle+=.02*(this.targetAngle-this.angle),this.originVel.y=.4*this.originVel.x+Math.sin(e*this.r0)*this.r1*this.originVel.length()/10,this.vel.lerp(this.originVel,.06),this.pos.add(this.vel.clone().multiplyScalar(t)),this.life-=t,(this.pos.x>300||this.life<0)&&this.reset(),this.mesh.position.copy(this.pos),this.mesh.scale.set(this.s,this.s,this.s),this.mesh.rotation.set(.5*Math.PI,0,0),this.mesh.rotateOnWorldAxis(gs,this.angle)}},{key:"dispose",value:function(){var e,t;null===(e=this.mesh.geometry)||void 0===e||e.dispose(),null===(t=this.mat)||void 0===t||t.dispose()}}]),e}(),ws=function(){function e(t,n){ds(this,e),this.fishNum=12,this.fishes=[],t.visible=!1,this.fishMap=t.material.uniforms.map.value;for(var i=0;i<this.fishNum;i++)this.fishes.push(new bs(n,t,this.fishMap))}return ys(e,[{key:"setPulse",value:function(e){this.fishes.forEach((function(t){t.setPulse(e)}))}},{key:"anim",value:function(e,t){this.fishUniforms&&(this.fishUniforms.time.value=e),this.fishes.forEach((function(n){n.anim(e,t)}))}},{key:"dispose",value:function(){this.fishes.forEach((function(e){e.dispose()}))}}]),e}(),xs=ws;function ks(e){return ks="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ks(e)}function Ts(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ps(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ss(e,t,n){return t&&Ps(e.prototype,t),n&&Ps(e,n),e}function Os(e,t,n){return Os="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=Is(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},Os(e,t,n||e)}function Is(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=zs(e),null===e)break;return e}function _s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&js(e,t)}function js(e,t){return js=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},js(e,t)}function Cs(e){var t=Es();return function(){var n,i=zs(e);if(t){var o=zs(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Rs(this,n)}}function Rs(e,t){if(t&&("object"===ks(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ms(e)}function Ms(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Es(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function zs(e){return zs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},zs(e)}var Ds=function(e){_s(n,e);var t=Cs(n);function n(e,i,o){var r;return Ts(this,n),r=t.call(this,e),r.isInteract=!1,r.rivers=[],r.stones=[],r.trees=[],r.stoneIndex=0,r.audioStartIndex=10,r.audioEndIndex=16,r.mouse=new g["xb"],r.lastTouch=new g["xb"],r.animTouch=new g["xb"],r.audioConfig={river:[[0,1]]},r.lastTime=0,r.lastInteractTime=0,r.maxTipGapTime=2,r.hasNextScene=!1,r.ctr=i,r.scene=new g["lb"],r.scene.background=new g["i"](0),r.scene.name="RiverScene",r.camera=new g["W"](64,r.width/r.height,.1,1e3),r.camera.name="RiverCamera",r.camera.position.set(0,10,10),r.camera.lookAt(new g["yb"]),r.scene.add(r.camera),r.loadModel(),r.renderPass=new Qi["a"](r.scene,r.camera),r.inkComposer=new Yi["a"](e),r.inkComposer.setPixelRatio(r.pixelRatio),r.inkComposer.renderToScreen=!1,r.inkComposer.addPass(r.renderPass),r.finalComposer=new Yi["a"](e),r.finalComposer.setPixelRatio(r.pixelRatio),r.finalComposer.renderToScreen=!0,r.finalComposer.addPass(r.renderPass),r.inkScene=o,r}return Ss(n,[{key:"loadModel",value:function(){var e=this,t=new Ro["a"],n="scene0.glb?v1";this.updateProgress(n,0),t.load("/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/"+"models/".concat(n),(function(t){e.updateProgress(n,1);var i=[];t.scene.traverse((function(t){if(t instanceof g["K"]){var n=t.material,o=n.map;if(o.wrapS=g["g"],o.wrapT=g["g"],o.encoding=g["B"],o.magFilter=g["C"],o.minFilter=g["C"],o.needsUpdate=!0,t.material=new g["mb"]({transparent:!0,vertexShader:Zi.a,fragmentShader:to.a,uniforms:{map:{value:n.map},opacity:{value:1}},side:g["m"],depthTest:!1}),-1!==t.name.indexOf("stone")&&(i.push(t),t.layers.enable(zo.layers.INK)),-1!==t.name.indexOf("tree")){var r=parseInt(t.name.split("-")[1]),s=[{dir:0,pin:1},{dir:0,pin:0},{dir:0,pin:1}];e.trees[r]=new Qr(t,e.scene,s[r].dir,s[r].pin)}-1!==t.name.indexOf("man")&&(e.man=new hs(t,e.scene,10)),-1!==t.name.indexOf("bg")&&t.layers.set(zo.layers.INK),-1!==t.name.indexOf("fish")&&(e.fish=new xs(t,e.scene)),t.geometry&&e.geos.push(t.geometry),t.material&&e.mats.push(t.material),n&&e.mats.push(n),n.map&&e.texs.push(n.map),n.metalnessMap&&e.texs.push(n.metalnessMap),n.roughnessMap&&e.texs.push(n.roughnessMap)}-1!==t.name.indexOf("riverCurve")&&e.rivers.push(new Br(e.renderer,e.scene,t.children,0))})),i=I(i),i.forEach((function(t,n){e.stones.push(new $r(t,e.scene)),e.rivers.forEach((function(e){var i=new g["yb"];t.getWorldPosition(i),e.setStonePos(n,i)}))})),e.man.setPosition(e.stones[0].getPosition()),e.camera=t.cameras[0],e.scene.add(t.scene),e.onWindowResize()}))}},{key:"onClick",value:function(){this.nextStone(),H.commit("setHasInteract",{index:0,flag:!0}),this.lastInteractTime=this.lastTime}},{key:"nextStone",value:function(){var e=this,t=this.stoneIndex;if(!(this.stoneIndex+1>this.stones.length-1)){this.stoneIndex++;var n=this.stoneIndex,i=t>=0?this.stones[t]:this.stones[0],o=this.stones[this.stoneIndex],r=o.getPosition().clone(),s=i.getPosition().clone();this.man.jumpTo(s,r,(function(){t>=0&&e.onLeaveStone(t);var i=e.audioStartIndex+n;i<=e.audioEndIndex&&Rn.play("p1/".concat(i))}),(function(){e.onJumpToStone(n)}),0,[6,8,11],s.y>r.y?[1,2]:[2,3]),H.commit("setRiverStoneIndex",this.stoneIndex)}}},{key:"reset",value:function(){var e=this;this.stoneIndex=0,this.man.jumpTo(this.stones[0].getPosition().sub(new g["yb"](100,0,0)),this.stones[0].getPosition(),(function(){}),(function(){var t=e.stones[0].getPosition().clone();t.project(e.camera),t.multiplyScalar(.5).addScalar(.5),e.inkScene.setPulse(new g["xb"](t.x,t.y),1e3)}),.5,[6,8,11]),this.inkScene.resetInkConfig({renderToScene:!1,enableInteract:!1,overrideSize:!1,recoverRateMin:.05,recoverRateMax:.1,isDownFlow:!1}),this.onWindowResize(),this.anim(0,1/60)}},{key:"onJumpToStone",value:function(e){if(e==this.stones.length-1)return this.ctr.nextScene(),void(this.hasNextScene=!0);this.trees.forEach((function(e){return null===e||void 0===e?void 0:e.shake()})),this.rivers.forEach((function(t){t.stoneWaveStart(e)})),this.stones[e].showWave();var t=this.stones[e].getPosition().clone();t.project(this.camera),t.multiplyScalar(.5).addScalar(.5),this.inkScene.setPulse(new g["xb"](t.x,t.y),1e3),this.fish.setPulse(this.stones[e].getPosition().clone())}},{key:"onLeaveStone",value:function(e){this.rivers.forEach((function(t){t.stoneWaveStop(e)})),this.stones[e].hideWave()}},{key:"onTouchStart",value:function(e){this.isInteract=!0;var t=e.touches[0],n=this.needRotate?t.pageY:t.pageX,i=this.needRotate?this.height-t.pageX:t.pageY;this.animTouch.set(n,i),this.lastTouch.set(n,i)}},{key:"onTouchMove",value:function(e){if(this.isInteract){var t=e.touches[0],n=this.needRotate?t.pageY:t.pageX,i=this.needRotate?this.height-t.pageX:t.pageY,o=new g["xb"](n,i);this.lastTouch=o}}},{key:"onTouchEnd",value:function(e){this.isInteract=!1}},{key:"anim",value:function(e,t){var n,i=this;if(!this.hasNextScene){this.animTouch.lerp(this.lastTouch,.1);this.screenPosToUv(this.animTouch);if(this.rivers.forEach((function(n){n.anim(e,t)})),this.stones.forEach((function(n){n.anim(e,t)})),this.trees.forEach((function(n){n.anim(e,t)})),null===(n=this.fish)||void 0===n||n.anim(e,t),this.man){var o;null===(o=this.man)||void 0===o||o.anim(e,t,this.camera);var r=this.man.getManPositionX(),s=x(-270,270,r),a=g["I"].lerp(0,30,s);this.camera.position.x+=.01*(a-this.camera.position.x),this.trees.forEach((function(e){e.move(i.camera.position.x)}))}this.render(e,t);var u=.5;this.processAudio(u),0===this.lastTime?(this.lastInteractTime=e,this.lastTime=e):this.lastTime-this.lastInteractTime>this.maxTipGapTime&&H.state.hasInteract[0]&&H.commit("setHasInteract",{index:0,flag:!1}),this.lastTime=e}}},{key:"render",value:function(e,t){this.renderPass.camera=this.camera,this.camera.layers.disableAll(),this.camera.layers.enable(zo.layers.INK),this.scene.background=null,this.inkComposer.render(),this.inkScene.setBaseTexture(this.inkComposer.readBuffer.texture),this.inkScene.anim(e,t),this.camera.layers.enableAll(),this.camera.layers.disable(zo.layers.INK),this.scene.background=this.inkScene.getTexture(),this.finalComposer.render()}},{key:"onWindowResize",value:function(){Os(zs(n.prototype),"onWindowResize",this).call(this);var e=this.camera,t=540,i=t*this.height/this.width;e.left=-t/2,e.right=t/2,e.top=i/2,e.bottom=-i/2,e.updateProjectionMatrix(),this.inkComposer.setSize(this.width,this.height),this.finalComposer.setSize(this.width,this.height),this.inkScene.onWindowResize();var o=this.trees[2];o&&(o.tree.position.y=-i/2+45)}},{key:"dispose",value:function(){this.stones.forEach((function(e){e.dispose()})),this.trees.forEach((function(e){e.dispose()})),this.rivers.forEach((function(e){e.dispose()})),this.fish.dispose(),this.man.dispose(),Os(zs(n.prototype),"dispose",this).call(this)}}]),n}(Ki),As=Ds;function Bs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ns(e,t,n){return t&&Fs(e.prototype,t),n&&Fs(e,n),e}var Us=function(){function e(t,n){Bs(this,e),this.proxyObj=new g["T"],this.myTime=0,this.posXClmap={min:-18,max:27},this.isMoving=!1,this.man=t,this.manUniforms={map:{value:$i.get("manSeq3")},fps:{value:12},time:{value:0},grid:{value:new g["xb"](6,6)}},this.man.material=this.createMat(Ao.a,this.manUniforms),this.resetPosition()}return Ns(e,[{key:"progress",get:function(){return(this.proxyObj.position.x-this.posXClmap.min)/(this.posXClmap.max-this.posXClmap.min)}},{key:"animProgress",get:function(){var e=(this.man.position.x-this.posXClmap.min)/(this.posXClmap.max-this.posXClmap.min);return e>.999?1:e}},{key:"createMat",value:function(e,t){var n=new g["mb"]({vertexShader:Zi.a,fragmentShader:e,uniforms:t,transparent:!0,side:g["m"]});return n}},{key:"getPosition",value:function(){return this.man.position.clone()}},{key:"resetPosition",value:function(){this.proxyObj.position.x=this.posXClmap.min,this.man.position.x=this.proxyObj.position.x}},{key:"setPosition",value:function(e){this.proxyObj.position.copy(e),this.man.position.x=this.proxyObj.position.x}},{key:"setPosByProgress",value:function(e){this.proxyObj.position.x=(this.posXClmap.max-this.posXClmap.min)*e+this.posXClmap.min}},{key:"moveOn",value:function(e,t,n){var i=(this.posXClmap.max-this.posXClmap.min)/Y.duration;this.proxyObj.position.x+=t*i*n,this.proxyObj.position.x=g["I"].clamp(this.proxyObj.position.x,this.posXClmap.min,this.posXClmap.max),this.isMoving=!0}},{key:"stopMove",value:function(){this.isMoving=!1}},{key:"anim",value:function(e,t,n,i){this.myTime+=t,this.isMoving?(this.myTime%=2,this.myTime<.5&&this.myTime<.55&&Rn.play("boat")):this.myTime<2||(this.myTime%=1,this.myTime+=2),this.manUniforms.time.value=this.myTime,this.man.position.x+=.05*(this.proxyObj.position.x-this.man.position.x)}},{key:"dispose",value:function(){var e,t,n;null===(e=this.man.geometry)||void 0===e||e.dispose(),null===(t=this.man.material)||void 0===t||t.dispose(),null===(n=$i.get("manSeq3"))||void 0===n||n.dispose()}}]),e}(),Ws=Us,Xs=n("1068"),Ls=n.n(Xs),$s=n("dc58"),Hs=n.n($s);function qs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gs(e,t,n){return t&&Vs(e.prototype,t),n&&Vs(e,n),e}var Ks=function(){function e(t,n,i,o){qs(this,e),this.nodeNum=200,this.renderer=t,this.scene=n,this.uniforms={time:{value:0},manPosX:{value:0},offset:{value:4*-o},speed:{value:1.5},wavePosX:{value:0}},this.mat=new g["mb"]({vertexShader:Ls.a,fragmentShader:Hs.a,uniforms:this.uniforms,side:g["m"],transparent:!0}),this.mesh=new g["K"](this.createGeo(56,.05),this.mat),this.mesh.position.copy(i),this.mesh.layers.set(zo.layers.INK),this.scene.add(this.mesh)}return Gs(e,[{key:"createGeo",value:function(e,t){for(var n=new g["f"],i=[],o=[],r=[],s=[],a=0;a<this.nodeNum;a++)r.push(a/this.nodeNum*e-e/2,t/2,0),r.push(a/this.nodeNum*e-e/2,-t/2,0),i.push(a),i.push(a),o.push(a/this.nodeNum,0),o.push(a/this.nodeNum,1);for(var u=0;u<this.nodeNum-1;u++){var c=2*u;s.push(c,c+2,c+1),s.push(c+1,c+2,c+3)}var l=new Float32Array(r),f=new Float32Array(i),h=new Float32Array(o);return n.setAttribute("position",new g["e"](l,3)),n.setAttribute("nodeIndex",new g["e"](f,1)),n.setAttribute("uv",new g["e"](h,2)),n.setIndex(s),n}},{key:"onWindowResize",value:function(){}},{key:"hitWave",value:function(e){this.waveTween&&(this.waveTween.pause(),this.waveTween.kill()),this.waveTween=ne["a"].fromTo(this.uniforms.wavePosX,{value:e-5},{value:-40,duration:g["I"].lerp(5,15,x(5,50,Math.abs(e+40)))})}},{key:"anim",value:function(e,t,n){this.uniforms.time.value=e,this.uniforms.manPosX.value=n}},{key:"dispose",value:function(){var e,t;null===(e=this.mesh.geometry)||void 0===e||e.dispose(),null===(t=this.mat)||void 0===t||t.dispose()}}]),e}(),Ys=Ks,Qs=n("9e81"),Js=n.n(Qs);function Zs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ea(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ta(e,t,n){return t&&ea(e.prototype,t),n&&ea(e,n),e}var na=function(){function e(t,n){Zs(this,e),this.renderer=t,this.scene=n,this.uniforms={map:{value:$i.get("birds")},fps:{value:18},time:{value:0},opacity:{value:1},grid:{value:new g["xb"](8,8)}},this.mat=new g["mb"]({vertexShader:Zi.a,fragmentShader:Js.a,uniforms:this.uniforms,side:g["m"],transparent:!0}),this.mesh=new g["K"](new g["Z"](9,5.75,1,1),this.mat),this.mesh.layers.set(zo.layers.INK),this.mesh.position.set(-17,5,-2.3),this.scene.add(this.mesh)}return ta(e,[{key:"anim",value:function(e,t){var n=e%(64/18-.01);this.uniforms.time.value=n}},{key:"dispose",value:function(){var e,t,n;null===(e=this.mesh.geometry)||void 0===e||e.dispose(),null===(t=this.mat)||void 0===t||t.dispose(),null===(n=$i.get("birds"))||void 0===n||n.dispose()}}]),e}(),ia=na;function oa(e){return oa="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oa(e)}function ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function aa(e,t,n){return t&&sa(e.prototype,t),n&&sa(e,n),e}function ua(e,t,n){return ua="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=ca(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},ua(e,t,n||e)}function ca(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=va(e),null===e)break;return e}function la(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fa(e,t)}function fa(e,t){return fa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fa(e,t)}function ha(e){var t=da();return function(){var n,i=va(e);if(t){var o=va(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return pa(this,n)}}function pa(e,t){if(t&&("object"===oa(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ma(e)}function ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function da(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function va(e){return va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},va(e)}var ya=function(e){la(n,e);var t=ha(n);function n(e,i,o){var r;ra(this,n),r=t.call(this,e),r.isInteract=!1,r.hasTouchStart=!1,r.touchStartTime=0,r.viewHeight=1500,r.audioIndex=0,r.mouse=new g["xb"],r.lastTouch=new g["xb"],r.animTouch=new g["xb"],r.cameraX=0,r.cameraTargetX=0,r.layers=[],r.us=[],r.strings=[],r.audioConfig={birds:[[-30,2]],water:[[-16,16]]},r.shakeConfig={grass:r.createShakeConfig(V.LEFT,.1*P(.5,1.5),P(1.5,2.5),1),grass0:r.createShakeConfig(V.LEFT,.1*P(.5,1.5),P(1.5,2.5),1),grass1:r.createShakeConfig(V.LEFT,.1*P(.5,1.5),P(1.5,2.5),1),grass2:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),grass3:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),grass4:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),grass5:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),grass6:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),grass7:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),tree:r.createShakeConfig(V.BOTTOM,.3,.5,.4),tree0:r.createShakeConfig(V.BOTTOM,.34,.5,.4)},r.lastTime=0,r.lastInteractTime=0,r.maxTipGapTime=2,r.hasNextScene=!1,r.ctr=i,r.scene=new g["lb"],r.scene.background=new g["i"](0),r.scene.name="LakeScene",r.camera=new g["U"](-1,1,1,-1,.1,100),r.camera.name="MountainCamera",r.camera.position.set(0,0,10),r.camera.lookAt(new g["yb"]),r.scene.add(r.camera),r.loadModel(),r.inkCamera=new g["U"](-30,30,7.5,-7.5),r.inkCamera.position.set(0,0,10),r.inkRenderPass=new Qi["a"](r.scene,r.inkCamera),r.renderPass=new Qi["a"](r.scene,r.camera),r.inkComposer=new Yi["a"](e),r.inkComposer.setPixelRatio(r.pixelRatio),r.inkComposer.renderToScreen=!1,r.inkComposer.addPass(r.inkRenderPass),r.finalComposer=new Yi["a"](e),r.finalComposer.setPixelRatio(r.pixelRatio),r.finalComposer.renderToScreen=!0,r.finalComposer.addPass(r.renderPass),r.inkScene=o,r.inkPlaneMat=new g["mb"]({vertexShader:Zi.a,fragmentShader:to.a,uniforms:{map:{value:r.inkScene.getTexture()},opacity:{value:1}},side:g["m"]}),r.inkPlane=new g["K"](new g["Z"](60,15,1,1),r.inkPlaneMat),r.inkPlane.position.z=-3,r.scene.add(r.inkPlane);for(var s=0;s<5;s++)r.strings.push(new Ys(r.renderer,r.scene,new g["yb"](0,.4*(s-2.5)-3,-.5),s/5));return r.birds=new ia(r.renderer,r.scene),r}return aa(n,[{key:"inkSize",get:function(){return new g["xb"](this.height/this.viewHeight*6e3,this.height/this.viewHeight*1500)}},{key:"camFactor",get:function(){return this.camera.position.x/this.cameraX}},{key:"createShakeConfig",value:function(e,t,n,i){var o={shakeDir:G[e].shakeDir,shakePinPos:G[e].shakePinPos,shakeAmp:t,shakeFreq:n,shakeSpeed:i,shakeOffset:P(0,2*Math.PI)};return o}},{key:"loadModel",value:function(){var e=this,t=new Ro["a"],n="scene2.glb?v1";this.updateProgress(n,0),t.load("/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/"+"models/".concat(n),(function(t){e.updateProgress(n,1),t.scene.traverse((function(t){if(t instanceof g["K"]){var n=t.material,i=n.map;if(i){i.encoding=g["B"],i.wrapS=g["g"],i.wrapT=g["g"],i.magFilter=g["C"],i.minFilter=g["C"],i.needsUpdate=!0;var o=t.geometry.boundingBox,r=o.max.clone().sub(o.min),s=-1!==Object.keys(e.shakeConfig).indexOf(t.name),a=s?e.shakeConfig[t.name]:{},u={map:{value:i},depthMap:{value:n.metalnessMap},flowMap:{value:n.roughnessMap},noiseMap:{value:$i.get("noise")},enableFlow:{value:e.enableFlow(t.name)?1:0},flowOffset:{value:.006},time:{value:0},offset:{value:0},opacity:{value:1},showSmoke:{value:0},meshBound:{value:new g["xb"](r.x,r.y)},shakeDir:{value:s?a.shakeDir:0},shakePinPos:{value:s?a.shakePinPos:0},shakeAmp:{value:s?a.shakeAmp:0},shakeFreq:{value:s?a.shakeFreq:0},shakeSpeed:{value:s?a.shakeSpeed:0},shakeOffset:{value:s?a.shakeOffset:0}};t.material=new g["mb"]({vertexShader:Zi.a,fragmentShader:Eo.a,uniforms:u,transparent:!0,side:g["m"]}),e.us.push(u);-1!==t.name.indexOf("tree")||-1!==t.name.indexOf("grass")||t.layers.set(zo.layers.INK)}"man"===t.name&&(e.man=new Ws(t,e.scene)),t.geometry&&e.geos.push(t.geometry),t.material&&e.mats.push(t.material),n&&e.mats.push(n),n.map&&e.texs.push(n.map),n.metalnessMap&&e.texs.push(n.metalnessMap),n.roughnessMap&&e.texs.push(n.roughnessMap)}else if(-1!==t.name.indexOf("layer")){var c=parseInt(t.name.split("-")[1]);e.layers.push({obj:t,z:c,x:t.position.x,uniforms:{}})}})),e.scene.add(t.scene),e.onWindowResize()}))}},{key:"getAudioTime",value:function(){return this.man?this.man.progress*Y.duration:0}},{key:"enableFlow",value:function(e){var t=e.split("-");return"f"==t[t.length-1]}},{key:"onClick",value:function(){this.nextTone()}},{key:"nextTone",value:function(){if(this.audioIndex<Y.startAt.length){var e=Y.startAt[this.audioIndex],t=(e+.01)/Y.duration;t=g["I"].clamp(t,0,1),this.man.setPosByProgress(t)}else this.man.setPosByProgress(1)}},{key:"reset",value:function(){this.isInteract=!1,this.audioIndex=0,this.man&&this.man.resetPosition(),this.camera.position.x=this.cameraTargetX=-this.cameraX,this.inkScene.resetInkConfig({renderToScene:!1,enableInteract:!1,overrideSize:!0,recoverRateMin:.1,recoverRateMax:.1,isDownFlow:!1}),this.onWindowResize(),this.anim(0,1/60),Rn.load("p2")}},{key:"onTouchStart",value:function(e){this.isInteract=!0,this.hasTouchStart=!0,H.commit("setHasInteract",{index:1,flag:!0}),this.lastInteractTime=this.lastTime}},{key:"onTouchMove",value:function(e){}},{key:"onTouchEnd",value:function(e){this.isInteract=!1,this.lastInteractTime=this.lastTime}},{key:"onMouseDown",value:function(e){this.isInteract=!0,this.hasTouchStart=!0,H.commit("setHasInteract",{index:1,flag:!0}),this.lastInteractTime=this.lastTime}},{key:"onMouseMove",value:function(e){}},{key:"onMouseUp",value:function(e){this.isInteract=!1,this.lastInteractTime=this.lastTime}},{key:"anim",value:function(e,t){var n=this;if(!this.hasNextScene){this.animTouch.lerp(this.lastTouch,.1);this.screenPosToUv(this.animTouch);if(this.camera.position.x+=.05*(this.cameraTargetX-this.camera.position.x),this.man){this.man.anim(e,t,this.camera,this.camFactor);var i=this.man.getPosition();if(this.cameraTargetX=g["I"].clamp(i.x,-this.cameraX,this.cameraX),this.hasTouchStart&&(this.hasTouchStart=!1,this.touchStartTime=e),this.isInteract){var o=g["I"].lerp(1,1.5,x(1,5,e-this.touchStartTime));this.man.moveOn(e,t,o);var r=this.man.getPosition();r.x=(r.x+30)/60,r.y=(r.y+7.5)/15,this.inkScene.setPulse(new g["xb"](r.x,r.y),1e3)}else this.man.stopMove()}if(this.layers.forEach((function(e,t){var i=5,o=(e.z-i)/n.layers.length;e.obj.position.x=e.x+n.camFactor*o*15.5})),this.us.forEach((function(t){t.time.value=e})),this.strings.forEach((function(i){i.anim(e,t,n.man?n.man.getPosition().x:0)})),this.birds.anim(e,t),this.audioIndex<Y.num){var s,a=Y.startAt[this.audioIndex];if(void 0!==a&&this.getAudioTime()>a)Rn.play("p2/".concat(this.audioIndex)),null===(s=this.man)||void 0===s||s.moveOn(e,t,25),this.audioIndex++,this.strings.forEach((function(e){e.hitWave(n.man?n.man.getPosition().x:0)}))}if(this.man&&1===this.man.animProgress)return this.ctr.nextScene(),void(this.hasNextScene=!0);this.render(e,t);var u=this.man?this.man.getPosition().x:-18;this.processAudio(u),this.lastTime-this.lastInteractTime>this.maxTipGapTime&&H.state.hasInteract[1]&&!this.isInteract&&H.commit("setHasInteract",{index:1,flag:!1}),this.lastTime=e}}},{key:"render",value:function(e,t){this.renderPass.camera=this.camera,this.inkCamera.layers.disableAll(),this.inkCamera.layers.enable(zo.layers.INK),this.scene.background=null,this.inkComposer.render(),this.inkScene.setBaseTexture(this.inkComposer.readBuffer.texture),this.inkScene.anim(e,t),this.camera.layers.enableAll(),this.camera.layers.disable(zo.layers.INK),this.inkPlaneMat.uniforms.map.value=this.inkScene.getTexture(),this.finalComposer.render()}},{key:"onWindowResize",value:function(){ua(va(n.prototype),"onWindowResize",this).call(this);var e=this.camera,t=.01*this.viewHeight,i=t*this.width/this.height;if(e.left=-i/2,e.right=i/2,e.top=t/2,e.bottom=-t/2,e.updateProjectionMatrix(),e.position.z=10,this.cameraX=Math.abs((60-i)/2),this.man){var o=this.man.getPosition();this.cameraTargetX=g["I"].clamp(o.x,-this.cameraX,this.cameraX),this.camera.position.x=this.cameraTargetX}this.finalComposer.setSize(this.width,this.height),this.inkComposer.setSize(this.inkSize.x,this.inkSize.y),this.inkScene.onOverrideSize(this.inkSize.x,this.inkSize.y)}},{key:"dispose",value:function(){var e,t;null===(e=this.man)||void 0===e||e.dispose(),null===(t=this.birds)||void 0===t||t.dispose(),this.strings.forEach((function(e){e.dispose()})),ua(va(n.prototype),"dispose",this).call(this)}}]),n}(Ki),ga=ya;function ba(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xa(e,t,n){return t&&wa(e.prototype,t),n&&wa(e,n),e}var ka=function(){function e(t,n){ba(this,e),this.proxyObj=new g["T"],this.myTime=0,this.posXClmap={min:-18,max:27},this.man=t,this.manUniforms={map:{value:$i.get("manSeq4")},fps:{value:18},time:{value:0},grid:{value:new g["xb"](6,6)}},this.man.material=this.createMat(Ao.a,this.manUniforms)}return xa(e,[{key:"createMat",value:function(e,t){var n=new g["mb"]({vertexShader:Zi.a,fragmentShader:e,uniforms:t,transparent:!0,side:g["m"]});return n}},{key:"getPosition",value:function(){return this.proxyObj.position.clone()}},{key:"resetPosition",value:function(){this.proxyObj.position.x=this.posXClmap.min,this.man.position.x=this.proxyObj.position.x}},{key:"setPosition",value:function(e){this.proxyObj.position.copy(e),this.man.position.x=this.proxyObj.position.x}},{key:"anim",value:function(e,t,n){this.myTime+=t,this.myTime%=2,this.manUniforms.time.value=this.myTime,this.man.position.x+=.1*(this.proxyObj.position.x-this.man.position.x),this.man.position.y=g["I"].lerp(-4.5,-3.5,n);var i=g["I"].lerp(1.8,.5,n);this.man.scale.set(i,i,i)}},{key:"dispose",value:function(){var e,t,n;null===(e=this.man.geometry)||void 0===e||e.dispose(),null===(t=this.man.material)||void 0===t||t.dispose(),null===(n=$i.get("manSeq4"))||void 0===n||n.dispose()}}]),e}(),Ta=ka;function Pa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Oa(e,t,n){return t&&Sa(e.prototype,t),n&&Sa(e,n),e}var Ia=function(){function e(t){Pa(this,e),this.maxSize=.3,this.minSize=.1,this.speedFactor=1,this.activeAtStart=!0,this.reBorn=!0,this.maxOpacity=1,t&&(this.activeAtStart=void 0!==t.activeAtStart?t.activeAtStart:this.activeAtStart,this.reBorn=void 0!==t.reBorn?t.reBorn:this.reBorn,this.maxSize=void 0!==t.maxSize?t.maxSize:this.maxSize,this.minSize=void 0!==t.minSize?t.minSize:this.minSize,this.speedFactor=void 0!==t.speedFactor?t.speedFactor:this.speedFactor,this.maxOpacity=void 0!==t.maxOpacity?t.maxOpacity:this.maxOpacity);var n=new g["Z"](1,1);this.material=new g["mb"]({vertexShader:Zi.a,fragmentShader:to.a,uniforms:{map:{value:$i.get("spark0")},opacity:{value:1}},side:g["m"],transparent:!0}),this.spark=new g["K"](n,this.material),this.spark.layers.enable(zo.layers.INK),this.reset(),this.activeAtStart||(this.life=this.maxLife)}return Oa(e,[{key:"lifeProgress",get:function(){return this.life/this.maxLife}},{key:"isDead",get:function(){return this.lifeProgress>=1}},{key:"update",value:function(e){this.velocity.y+=-20*e;var t=e*this.speedFactor;this.spark.position.addScaledVector(this.velocity,t),this.spark.rotation.x+=this.rotation.x*t,this.spark.rotation.y+=this.rotation.y*t,this.spark.rotation.z+=this.rotation.z*t,this.material.opacity=g["I"].lerp(this.maxOpacity,0,T(this.lifeProgress)),this.life+=e,this.isDead&&this.reBorn&&this.reset(this.bbox)}},{key:"reset",value:function(e){e?(this.bbox=e,this.spark.position.set(P(e.min.x,e.max.x),P(e.min.y,e.max.y),P(e.min.z,e.max.z))):this.spark.position.set(g["I"].randFloat(-5,5),-10,0),this.spark.rotation.set(0,0,g["I"].degToRad(g["I"].randFloat(0,360))),this.size=g["I"].randFloat(this.minSize,this.maxSize),this.spark.scale.set(this.size,this.size,this.size),this.material.opacity=this.maxOpacity,this.velocity=new g["yb"](P(-4,4),g["I"].randFloat(5,10),0),this.rotation=new g["yb"](0,0,g["I"].degToRad(g["I"].randFloat(0,50))),this.wind=new g["yb"](0,0,0),this.maxLife=g["I"].randFloat(1,2),this.life=0}},{key:"getMesh",value:function(){return this.spark}},{key:"dispose",value:function(){var e,t;null===(e=this.spark)||void 0===e||e.geometry.dispose(),null===(t=this.material)||void 0===t||t.dispose()}}]),e}(),_a=Ia;function ja(e){return ja="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ja(e)}function Ca(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ra(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ma(e,t,n){return t&&Ra(e.prototype,t),n&&Ra(e,n),e}function Ea(e,t,n){return Ea="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=za(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},Ea(e,t,n||e)}function za(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Wa(e),null===e)break;return e}function Da(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aa(e,t)}function Aa(e,t){return Aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Aa(e,t)}function Ba(e){var t=Ua();return function(){var n,i=Wa(e);if(t){var o=Wa(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Fa(this,n)}}function Fa(e,t){if(t&&("object"===ja(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Na(e)}function Na(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ua(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Wa(e){return Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wa(e)}var Xa=function(e){Da(n,e);var t=Ba(n);function n(e,i,o){var r;return Ca(this,n),r=t.call(this,e),r.isInteract=!1,r.hasTouchStart=!1,r.interactProgress=0,r.interactAnimProgress=0,r.viewHeight=1024,r.audioIndex=0,r.mouse=new g["xb"],r.lastTouch=new g["xb"],r.sparks=[],r.us=[],r.elements={},r.audioConfig={fall:[[0,.97]]},r.shakeConfig={water:r.createShakeConfig(V.TOP,.3,130,2.4)},r.hasInitSparks=!1,r.lastTime=0,r.lastInteractTime=0,r.maxTipGapTime=2,r.hasNextScene=!1,r.ctr=i,r.scene=new g["lb"],r.scene.background=new g["i"](0),r.scene.name="FallScene",r.camera=new g["U"](-1,1,1,-1,.1,300),r.camera.name="FallCamera",r.camera.position.set(0,0,10),r.camera.lookAt(new g["yb"]),r.scene.add(r.camera),r.loadModel(),r.inkRenderPass=new Qi["a"](r.scene,r.camera),r.renderPass=new Qi["a"](r.scene,r.camera),r.inkComposer=new Yi["a"](e),r.inkComposer.setPixelRatio(r.pixelRatio),r.inkComposer.renderToScreen=!1,r.inkComposer.addPass(r.inkRenderPass),r.bloomPass=new mo["a"](new g["xb"](r.width,r.height).multiplyScalar(r.pixelRatio),.1,1,.95),r.finalComposer=new Yi["a"](e),r.finalComposer.setPixelRatio(r.pixelRatio),r.finalComposer.renderToScreen=!0,r.finalComposer.addPass(r.renderPass),r.finalComposer.addPass(r.bloomPass),r.inkScene=o,r}return Ma(n,[{key:"initSparks",value:function(){if(!this.hasInitSparks){for(var e=[new g["d"](new g["yb"](3,-.3,-8),new g["yb"](7,.4,-7)),new g["d"](new g["yb"](-6.3,1.5,-7.4),new g["yb"](-4.5,4,-7)),new g["d"](new g["yb"](5.5,2,-7.4),new g["yb"](6.5,4,-7))],t=0;t<50;t++){var n=P(.08,.2),i=new _a({activeAtStart:!0,reBorn:!0,maxSize:n,minSize:.05,speedFactor:.75,maxOpacity:P(.5,1)});i.reset(e[Math.floor(Math.random()*e.length)]),this.scene.add(i.getMesh()),this.sparks.push(i)}this.hasInitSparks=!0}}},{key:"createShakeConfig",value:function(e,t,n,i){var o={shakeDir:G[e].shakeDir,shakePinPos:G[e].shakePinPos,shakeAmp:t,shakeFreq:n,shakeSpeed:i,shakeOffset:P(0,2*Math.PI)};return o}},{key:"loadModel",value:function(){var e=this,t=new Ro["a"],n="scene3.glb?v1";this.updateProgress(n,0),t.load("/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/"+"models/".concat(n),(function(t){e.updateProgress(n,1),t.scene.traverse((function(t){if(e.elements[t.name]=t,t instanceof g["K"]){var n=t.material,i=n.map;if(i){i.encoding=g["B"],i.wrapS=g["g"],i.wrapT=g["g"],i.magFilter=g["C"],i.minFilter=g["C"],i.needsUpdate=!0;var o=t.geometry.boundingBox,r=o.max.clone().sub(o.min),s=-1!==Object.keys(e.shakeConfig).indexOf(t.name),a=s?e.shakeConfig[t.name]:{},u={map:{value:i},depthMap:{value:n.metalnessMap},flowMap:{value:n.roughnessMap},noiseMap:{value:$i.get("noise")},enableFlow:{value:e.enableFlow(t.name)?1:0},flowOffset:{value:.5},time:{value:0},offset:{value:0},opacity:{value:1},showSmoke:{value:0},meshBound:{value:new g["xb"](r.x,r.y)},shakeDir:{value:s?a.shakeDir:0},shakePinPos:{value:s?a.shakePinPos:0},shakeAmp:{value:s?a.shakeAmp:0},shakeFreq:{value:s?a.shakeFreq:0},shakeSpeed:{value:s?a.shakeSpeed:0},shakeOffset:{value:s?a.shakeOffset:0}};t.material=new g["mb"]({vertexShader:Zi.a,fragmentShader:Eo.a,uniforms:u,transparent:!0,side:g["m"]}),e.us.push(u),"bubble"===t.name&&(t.visible=!1);var c=["top","water","lines"];-1!==c.indexOf(t.name)?t.layers.enable(zo.layers.INK):t.layers.set(zo.layers.INK)}"man"===t.name&&(e.man=new Ta(t,e.scene)),t.geometry&&e.geos.push(t.geometry),t.material&&e.mats.push(t.material),n&&e.mats.push(n),n.map&&e.texs.push(n.map),n.metalnessMap&&e.texs.push(n.metalnessMap),n.roughnessMap&&e.texs.push(n.roughnessMap)}})),e.scene.add(t.scene),e.onWindowResize()}))}},{key:"getAudioTime",value:function(){return this.interactAnimProgress*Q.duration}},{key:"getAudioIndex",value:function(){for(var e=this.getAudioTime(),t=1;t<Q.startAt.length;t++){var n=Q.startAt[t];if(n>e)return t-1}return 0}},{key:"enableFlow",value:function(e){var t=e.split("-");return"f"==t[t.length-1]}},{key:"onClick",value:function(){}},{key:"reset",value:function(){this.isInteract=!1,this.audioIndex=0,this.interactProgress=0,this.initSparks(),this.inkScene.resetInkConfig({renderToScene:!1,enableInteract:!1,overrideSize:!1,recoverRateMin:.1,recoverRateMax:.2,isDownFlow:!1}),this.onWindowResize(),this.anim(0,1/60),Rn.load("p3")}},{key:"onTouchStart",value:function(e){this.hasTouchStart=!0,this.audioIndex=this.getAudioIndex(),this.isInteract=!0;var t=e.touches[0],n=this.getScreenPos(t);this.lastTouch=n}},{key:"onTouchMove",value:function(e){if(this.hasTouchStart){var t=e.touches[0],n=this.getScreenPos(t),i=Math.abs(n.x-this.lastTouch.x);this.interactProgress+=3e-5*i*g["I"].lerp(4,7,this.interactProgress),this.interactProgress=g["I"].clamp(this.interactProgress,0,1),this.lastTouch=n,this.inkScene.setPulse(this.screenPosToUv(this.lastTouch)),H.commit("setHasInteract",{index:2,flag:!0}),this.lastInteractTime=this.lastTime}}},{key:"onTouchEnd",value:function(e){this.isInteract=!1,this.lastInteractTime=this.lastTime}},{key:"onMouseDown",value:function(e){this.hasTouchStart=!0,this.audioIndex=this.getAudioIndex(),this.isInteract=!0;var t={pageX:e.pageX,pageY:e.pageY},n=this.getScreenPos(t);this.lastTouch=n}},{key:"onMouseMove",value:function(e){if(this.hasTouchStart){var t={pageX:e.pageX,pageY:e.pageY},n=this.getScreenPos(t),i=Math.abs(n.x-this.lastTouch.x);this.interactProgress+=3e-5*i*g["I"].lerp(4,7,this.interactProgress),this.interactProgress=g["I"].clamp(this.interactProgress,0,1),this.lastTouch=n,this.inkScene.setPulse(this.screenPosToUv(this.lastTouch)),H.commit("setHasInteract",{index:2,flag:!0}),this.lastInteractTime=this.lastTime}}},{key:"onMouseUp",value:function(e){this.isInteract=!1,this.lastInteractTime=this.lastTime}},{key:"anim",value:function(e,t){if(!this.hasNextScene){this.isInteract||(this.interactProgress-=2e-4,this.interactProgress=Math.max(0,this.interactProgress)),this.interactAnimProgress+=(this.interactProgress-this.interactAnimProgress)*g["I"].lerp(.1,.2,this.interactProgress),this.us.forEach((function(t){t.time.value=e})),this.man&&this.man.anim(e,t,this.interactAnimProgress),this.sparks.forEach((function(e){e.update(t)}));var n=this.camera,i=g["I"].lerp(1,.075,this.interactAnimProgress);if(n.left=-this.camViewWidth/2*i,n.right=this.camViewWidth/2*i,n.top=this.camViewHeight/2*i,n.bottom=-this.camViewHeight/2*i,n.position.y=g["I"].lerp(0,-3.2,this.interactAnimProgress),n.updateProjectionMatrix(),this.audioIndex<=Q.num){var o=Q.startAt[this.audioIndex];if(this.getAudioTime()>o&&(Rn.play("p3/".concat(this.audioIndex)),this.audioIndex++),this.getAudioTime()>=Q.duration-.01)return this.ctr.nextScene(),void(this.hasNextScene=!0)}this.render(e,t);var r=this.interactAnimProgress;this.processAudio(r),this.lastTime-this.lastInteractTime>this.maxTipGapTime&&H.state.hasInteract[2]&&!this.isInteract&&H.commit("setHasInteract",{index:2,flag:!1}),this.lastTime=e}}},{key:"render",value:function(e,t){this.renderPass.camera=this.camera,this.camera.layers.disableAll(),this.camera.layers.enable(zo.layers.INK),this.scene.background=null,this.inkComposer.render(),this.inkScene.setBaseTexture(this.inkComposer.readBuffer.texture),this.inkScene.anim(e,t),this.camera.layers.enableAll(),this.camera.layers.disable(zo.layers.INK),this.scene.background=this.inkScene.getTexture(),this.bloomPass.strength=Math.pow(this.interactAnimProgress,8),this.finalComposer.render()}},{key:"camViewHeight",get:function(){var e=.01*this.viewHeight;return e}},{key:"camViewWidth",get:function(){var e=this.camViewHeight,t=e*this.width/this.height;return t}},{key:"resetElementsPos",value:function(){var e=this.camViewWidth-20.48,t=this.elements["LEFT"],n=this.elements["RIGHT"];t&&(t.position.x=-e/2),n&&(n.position.x=e/2)}},{key:"onWindowResize",value:function(){Ea(Wa(n.prototype),"onWindowResize",this).call(this);var e=this.camera,t=this.camViewHeight,i=this.camViewWidth;e.left=-i/2,e.right=i/2,e.top=t/2,e.bottom=-t/2,e.updateProjectionMatrix(),e.position.z=10,this.resetElementsPos(),this.finalComposer.setSize(this.width,this.height),this.inkComposer.setSize(this.width,this.height),this.inkScene.onWindowResize()}},{key:"dispose",value:function(){var e;null===(e=this.man)||void 0===e||e.dispose(),this.sparks.forEach((function(e){e.dispose()})),Ea(Wa(n.prototype),"dispose",this).call(this)}}]),n}(Ki),La=Xa,$a=n("436f"),Ha=n("6b0b"),qa=n.n(Ha),Va=n("74f5"),Ga=n.n(Va),Ka=n("46b0"),Ya=n.n(Ka);function Qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ja(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Za(e,t,n){return t&&Ja(e.prototype,t),n&&Ja(e,n),e}var eu=function(){function e(t){Qa(this,e),this.size=new g["xb"],this.pixelRatio=t.getPixelRatio(),t.getSize(this.size),this.composer=new Yi["a"](t),this.composer.setPixelRatio(this.pixelRatio),this.composer.renderToScreen=!1}return Za(e,[{key:"getTex",value:function(){return this.composer.readBuffer.texture}},{key:"setSize",value:function(e,t){this.size=new g["xb"](e,t),this.composer.setSize(e,t)}},{key:"update",value:function(e,t,n,i){this.composer.render()}}]),e}(),tu=eu;function nu(e){return nu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nu(e)}function iu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ou(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ru(e,t,n){return t&&ou(e.prototype,t),n&&ou(e,n),e}function su(e,t,n){return su="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=au(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},su(e,t,n||e)}function au(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=mu(e),null===e)break;return e}function uu(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cu(e,t)}function cu(e,t){return cu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cu(e,t)}function lu(e){var t=pu();return function(){var n,i=mu(e);if(t){var o=mu(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return fu(this,n)}}function fu(e,t){if(t&&("object"===nu(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hu(e)}function hu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pu(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function mu(e){return mu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mu(e)}var du=function(e){uu(n,e);var t=lu(n);function n(e,i){var o;return iu(this,n),o=t.call(this,e),o.isDownFlow=!1,o.isDownFlow=void 0!==i.isDownFlow?i.isDownFlow:o.isDownFlow,o.uniforms={initTexture:{value:$i.get("p3")},lastTexture:{value:null},noiseTexture:{value:$i.get("noise")},time:{value:0},mouse:{value:new g["xb"]},isInteract:{value:0},isDownFlow:{value:o.isDownFlow?1:0},affectRadius:{value:.04},dir:{value:new g["xb"](0,-1)},resolution:{value:o.size.clone().multiplyScalar(o.pixelRatio)}},o.pass=new $a["a"](new g["mb"]({vertexShader:Zi.a,fragmentShader:Ya.a,uniforms:o.uniforms}),"lastTexture"),o.composer.addPass(o.pass),o}return ru(n,[{key:"setIsDownFlow",value:function(e){this.isDownFlow=e,this.uniforms.isDownFlow.value=this.isDownFlow?1:0}},{key:"setSize",value:function(e,t){su(mu(n.prototype),"setSize",this).call(this,e,t),this.uniforms.resolution.value=this.size.clone().multiplyScalar(this.pixelRatio)}},{key:"setAffectRadius",value:function(e){this.uniforms.affectRadius.value=.04*e}},{key:"update",value:function(e,t,n,i){this.uniforms.time.value=e,this.uniforms.mouse.value=n,this.uniforms.isInteract.value=i?1:0,this.composer.render()}}]),n}(tu),vu=du,yu=n("63be"),gu=n.n(yu);function bu(e){return bu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bu(e)}function wu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ku(e,t,n){return t&&xu(e.prototype,t),n&&xu(e,n),e}function Tu(e,t,n){return Tu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=Pu(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},Tu(e,t,n||e)}function Pu(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Ru(e),null===e)break;return e}function Su(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ou(e,t)}function Ou(e,t){return Ou=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ou(e,t)}function Iu(e){var t=Cu();return function(){var n,i=Ru(e);if(t){var o=Ru(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _u(this,n)}}function _u(e,t){if(t&&("object"===bu(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ju(e)}function ju(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cu(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ru(e){return Ru=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ru(e)}var Mu=function(e){Su(n,e);var t=Iu(n);function n(e,i,o){var r;return wu(this,n),r=t.call(this,e),r.reoverRateTarget=.1,r.isBlackInk=!1,r.isSpread=!1,r.fuildVel=i,r.isBlackInk=void 0!==o.isBlackInk?o.isBlackInk:r.isBlackInk,r.isSpread=void 0!==o.isSpread?o.isSpread:r.isSpread,r.uniforms={initTexture:{value:null},colTexture:{value:null},velTexture:{value:null},time:{value:0},mouse:{value:new g["xb"]},isInteract:{value:0},recoverRate:{value:1},resolution:{value:r.size.clone().multiplyScalar(r.pixelRatio)},isBlackInk:{value:r.isBlackInk?1:0},isSpread:{value:r.isSpread?1:0},keepAspect:{value:0},initTextureSize:{value:new g["xb"]}},r.pass=new $a["a"](new g["mb"]({vertexShader:Zi.a,fragmentShader:gu.a,uniforms:r.uniforms}),"colTexture"),r.composer.addPass(r.pass),r}return ku(n,[{key:"setIsBlackInk",value:function(e){this.isBlackInk=e,this.uniforms.isBlackInk.value=this.isBlackInk?1:0}},{key:"setIsSpread",value:function(e){this.isSpread=e,this.uniforms.isSpread.value=this.isSpread?1:0}},{key:"setSize",value:function(e,t){Tu(Ru(n.prototype),"setSize",this).call(this,e,t),this.uniforms.resolution.value=this.size.clone().multiplyScalar(this.pixelRatio)}},{key:"setBaseTexture",value:function(e){this.uniforms.initTexture.value=e}},{key:"setRecoverRate",value:function(e){this.reoverRateTarget=e}},{key:"setKeepAspect",value:function(e,t){this.uniforms.keepAspect.value=e,e&&(this.uniforms.initTextureSize.value=t)}},{key:"update",value:function(e,t,n,i){var o=i?1:0;this.uniforms.time.value=e,this.uniforms.mouse.value=n,this.uniforms.isInteract.value=o,this.uniforms.recoverRate.value+=.1*(this.reoverRateTarget-this.uniforms.recoverRate.value),this.uniforms.velTexture.value=this.fuildVel.getTex(),this.composer.render()}}]),n}(tu),Eu=Mu;function zu(e){return zu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(e)}function Du(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Au(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bu(e,t,n){return t&&Au(e.prototype,t),n&&Au(e,n),e}function Fu(e,t,n){return Fu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=Nu(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},Fu(e,t,n||e)}function Nu(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=qu(e),null===e)break;return e}function Uu(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wu(e,t)}function Wu(e,t){return Wu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wu(e,t)}function Xu(e){var t=Hu();return function(){var n,i=qu(e);if(t){var o=qu(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Lu(this,n)}}function Lu(e,t){if(t&&("object"===zu(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $u(e)}function $u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hu(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function qu(e){return qu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qu(e)}var Vu=function(e){Uu(n,e);var t=Xu(n);function n(e,i){var o;return Du(this,n),o=t.call(this,e),o.renderToScene=!1,o.enableInteract=!1,o.overrideSize=!1,o.isInteract=!1,o.mouse=new g["xb"],o.targetMouse=new g["xb"],o.recoverRate=.1,o.recoverRateTarget=.1,o.recoverRateMin=.1,o.recoverRateMax=.1,o.isDownFlow=!1,o.isBlackInk=!1,o.isSpread=!1,o.lastTime=0,o.pulseHandler=0,o.renderToScene=void 0!==i.renderToScene?i.renderToScene:o.renderToScene,o.enableInteract=void 0!==i.enableInteract?i.enableInteract:o.enableInteract,o.overrideSize=void 0!==i.overrideSize?i.overrideSize:o.overrideSize,o.recoverRateMin=void 0!==i.recoverRateMin?i.recoverRateMin:o.recoverRateMin,o.recoverRateMax=void 0!==i.recoverRateMax?i.recoverRateMax:o.recoverRateMax,o.isDownFlow=void 0!==i.isDownFlow?i.isDownFlow:o.isDownFlow,o.isBlackInk=void 0!==i.isBlackInk?i.isBlackInk:o.isBlackInk,o.isBlackInk=void 0!==i.isBlackInk?i.isBlackInk:o.isBlackInk,o.isSpread=void 0!==i.isSpread?i.isSpread:o.isSpread,o.init(),o}return Bu(n,[{key:"init",value:function(){this.initFuild(),this.initComposer(),this.enableInteract&&this.initInteract()}},{key:"resetInkConfig",value:function(e){this.renderToScene=void 0!==e.renderToScene?e.renderToScene:this.renderToScene,this.enableInteract=void 0!==e.enableInteract?e.enableInteract:this.enableInteract,this.overrideSize=void 0!==e.overrideSize?e.overrideSize:this.overrideSize,this.recoverRateMin=void 0!==e.recoverRateMin?e.recoverRateMin:this.recoverRateMin,this.recoverRateMax=void 0!==e.recoverRateMax?e.recoverRateMax:this.recoverRateMax,this.isDownFlow=void 0!==e.isDownFlow?e.isDownFlow:this.isDownFlow,this.isBlackInk=void 0!==e.isBlackInk?e.isBlackInk:this.isBlackInk,this.isSpread=void 0!==e.isSpread?e.isSpread:this.isSpread,this.recoverRateTarget=this.recoverRateMax,this.fuildVel.setIsDownFlow(this.isDownFlow),this.fuildCol.setIsBlackInk(this.isBlackInk),this.fuildCol.setIsSpread(this.isSpread),this.finalComposer.renderToScreen=this.renderToScene,e.keepAspect?this.fuildCol.setKeepAspect(!0,e.initTextureSize):this.fuildCol.setKeepAspect(!1)}},{key:"initFuild",value:function(){this.fuildVel=new vu(this.renderer,{isDownFlow:this.isDownFlow}),this.fuildCol=new Eu(this.renderer,this.fuildVel,{isBlackInk:this.isBlackInk,isSpread:this.isSpread})}},{key:"initComposer",value:function(){this.finalComposer=new Yi["a"](this.renderer),this.finalComposer.setPixelRatio(this.pixelRatio),this.finalComposer.renderToScreen=this.renderToScene,this.finalPassUniforms={finalTexture:{value:null}},this.finalPass=new $a["a"](new g["mb"]({vertexShader:Zi.a,fragmentShader:Ga.a,uniforms:this.finalPassUniforms})),this.finalComposer.addPass(this.finalPass)}},{key:"initInteract",value:function(){var e=this.renderer.domElement;e.addEventListener("touchstart",this.onTouchStart.bind(this)),e.addEventListener("touchmove",this.onTouchMove.bind(this)),e.addEventListener("touchend",this.onTouchEnd.bind(this)),this.renderer.domElement.addEventListener("click",this.onClick.bind(this),!0)}},{key:"setAffectRadius",value:function(e){this.fuildVel.setAffectRadius(e)}},{key:"onTouchStart",value:function(e){if(!this.isInteract){this.isInteract=!0;var t=e.touches[0],n=this.getScreenPos(t),i=this.screenPosToUv(n);this.mouse.copy(i),this.targetMouse.copy(i)}}},{key:"onTouchMove",value:function(e){if(this.isInteract){var t=e.touches[0],n=this.getScreenPos(t),i=this.screenPosToUv(n);this.targetMouse.copy(i)}else{this.isInteract=!0;var o=e.touches[0],r=this.getScreenPos(o),s=this.screenPosToUv(r);this.mouse.copy(s),this.targetMouse.copy(s)}this.recoverRateTarget=this.recoverRateMin}},{key:"onTouchEnd",value:function(){this.isInteract=!1,this.targetMouse.set(9999,9999),this.mouse.set(9999,9999),this.recoverRateTarget=this.recoverRateMax}},{key:"onTouchStart2",value:function(e){if(!this.isInteract){this.isInteract=!0;var t=this.getScreenPos(e),n=this.screenPosToUv(t);this.mouse.copy(n),this.targetMouse.copy(n)}}},{key:"onTouchMove2",value:function(e){if(this.isInteract){var t=this.getScreenPos(e),n=this.screenPosToUv(t);this.targetMouse.copy(n)}else{this.isInteract=!0;var i=this.getScreenPos(e),o=this.screenPosToUv(i);this.mouse.copy(o),this.targetMouse.copy(o)}this.recoverRateTarget=this.recoverRateMin}},{key:"onClick",value:function(e){}},{key:"anim",value:function(e,t){this.lastTime=e,this.render(e,t)}},{key:"setBaseTexture",value:function(e){this.fuildCol.setBaseTexture(e)}},{key:"getTexture",value:function(){return this.finalComposer.readBuffer.texture}},{key:"setPulse",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;this.isInteract=!0,this.targetMouse.copy(e),this.mouse.copy(e),this.recoverRateTarget=this.recoverRateMin,clearTimeout(this.pulseHandler),this.pulseHandler=setTimeout((function(){t.isInteract=!1,t.targetMouse.set(9999,9999),t.mouse.set(9999,9999),t.recoverRateTarget=t.recoverRateMax}),n)}},{key:"render",value:function(e,t){this.mouse.lerp(this.targetMouse,.1),this.recoverRate+=.1*(this.recoverRateTarget-this.recoverRate),this.fuildVel.update(e,t,this.mouse,this.isInteract),this.fuildCol.setRecoverRate(this.recoverRate),this.fuildCol.update(e,t,this.mouse,this.isInteract),this.finalPassUniforms.finalTexture.value=this.fuildCol.getTex(),this.finalComposer.render()}},{key:"onOverrideSize",value:function(e,t){this.overrideSize&&(this.size.x=e,this.size.y=t,this.fuildVel.setSize(this.width,this.height),this.fuildCol.setSize(this.width,this.height),this.finalComposer.setSize(this.width,this.height),this.render(0,1/60))}},{key:"onWindowResize",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.overrideSize||(Fu(qu(n.prototype),"onWindowResize",this).call(this),this.fuildVel.setSize(this.width,this.height),this.fuildCol.setSize(this.width,this.height),this.finalComposer.setSize(this.width,this.height),e&&this.render(0,1/60))}}]),n}(Ki),Gu=Vu;function Ku(e){return Ku="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ku(e)}function Yu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ju(e,t,n){return t&&Qu(e.prototype,t),n&&Qu(e,n),e}function Zu(e,t,n){return Zu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=ec(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},Zu(e,t,n||e)}function ec(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=ac(e),null===e)break;return e}function tc(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nc(e,t)}function nc(e,t){return nc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nc(e,t)}function ic(e){var t=sc();return function(){var n,i=ac(e);if(t){var o=ac(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return oc(this,n)}}function oc(e,t){if(t&&("object"===Ku(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rc(e)}function rc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ac(e){return ac=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ac(e)}var uc=function(e){tc(n,e);var t=ic(n);function n(e,i,o){var r;return Yu(this,n),r=t.call(this,e),r.hasInteract=!1,r.hasPlayMusic=!1,r.isInteract=!1,r.rayCaster=new g["jb"],r.hitPos=new g["yb"],r.mouse=new g["xb"],r.designSize=new g["xb"](1624,750),r.audioIndex=0,r.animBeat=0,r.ctr=i,r.scene=new g["lb"],r.scene.name="PosterScene",r.camera=new g["U"](-r.designSize.x/2,r.designSize.x/2,r.designSize.y/2,-r.designSize.y/2,.1,1e3),r.camera.name="PosterCamera",r.camera.position.set(0,0,10),r.camera.lookAt(new g["yb"](0)),r.scene.add(r.camera),r.inkScene=o,r.maskInkScene=new Gu(r.renderer,{renderToScene:!1,enableInteract:!1,overrideSize:!1,recoverRateMin:0,recoverRateMax:0,isDownFlow:!1,isBlackInk:!0,isSpread:!0}),r.finalPass=new $a["a"](new g["mb"]({vertexShader:Zi.a,fragmentShader:qa.a,uniforms:{maskTexture:{value:r.maskInkScene.getTexture()},inkTexture:{value:r.inkScene.getTexture()}}})),r.finalComposer=new Yi["a"](e),r.finalComposer.setPixelRatio(r.pixelRatio),r.finalComposer.renderToScreen=!0,r.finalComposer.addPass(r.finalPass),r.onWindowResize(),r}return Ju(n,[{key:"drawPoster",value:function(){}},{key:"onTouchStart",value:function(e){if(this.isInteract=!0,this.inkScene.onTouchStart(e),this.maskInkScene.onTouchStart(e),!this.hasPlayMusic){var t=ee.startPoint[H.state.clueIndex]||0;Rn.play("poster",t),this.hasPlayMusic=!0}}},{key:"onTouchMove",value:function(e){this.isInteract&&(this.hasInteract=!0,H.commit("setHasInteract",{index:4,flag:!0}),this.inkScene.onTouchMove(e),this.maskInkScene.onTouchMove(e))}},{key:"onTouchEnd",value:function(e){this.isInteract=!1,this.inkScene.onTouchEnd(),this.maskInkScene.onTouchEnd(),this.inkScene.resetInkConfig({recoverRateMin:.3,recoverRateMax:.3})}},{key:"onMouseDown",value:function(e){if(this.isInteract=!0,this.inkScene.onTouchStart2(e),this.maskInkScene.onTouchStart2(e),!this.hasPlayMusic){var t=ee.startPoint[H.state.clueIndex]||0;Rn.play("poster",t),this.hasPlayMusic=!0}}},{key:"onMouseMove",value:function(e){this.isInteract&&(this.hasInteract=!0,H.commit("setHasInteract",{index:4,flag:!0}),this.inkScene.onTouchMove2(e),this.maskInkScene.onTouchMove2(e))}},{key:"onMouseUp",value:function(){this.isInteract=!1,this.inkScene.onTouchEnd(),this.maskInkScene.onTouchEnd(),this.inkScene.resetInkConfig({recoverRateMin:.3,recoverRateMax:.3})}},{key:"reset",value:function(){this.hasInteract=!1,this.hasPlayMusic=!1,this.audioIndex=H.state.clueIndex%ee.num,this.inkScene.resetInkConfig({renderToScene:!1,enableInteract:!1,overrideSize:!1,recoverRateMin:.07,recoverRateMax:.3,isDownFlow:!1,keepAspect:!0,initTextureSize:new g["xb"](1624,812)}),this.onWindowResize(),this.anim(0,1/60),Rn.load("poster")}},{key:"pauseMusic",value:function(){Rn.stop("poster")}},{key:"anim",value:function(e,t){var n=te["poster"].data,i=Rn.getCurrentTime("poster")||0,o=Math.floor(25*i);o=Math.min(o,n.length);var r=n[o];if(this.animBeat=Math.max(this.animBeat,r),this.animBeat*=.95,!isNaN(this.animBeat)){this.inkScene.setAffectRadius(g["I"].lerp(.3,10,this.animBeat));var s=g["I"].lerp(.2,0,Math.pow(this.animBeat,.2));this.inkScene.resetInkConfig({recoverRateMin:s,recoverRateMax:s,keepAspect:!0,initTextureSize:new g["xb"](1624,812)})}this.render(e,t)}},{key:"render",value:function(e,t){var n=$i.get("poster".concat(H.state.clueIndex)),i=$i.get("white");this.inkScene.setBaseTexture(n),this.inkScene.anim(e,t),this.maskInkScene.setBaseTexture(i),this.maskInkScene.anim(e,t),this.finalPass.uniforms.inkTexture.value=this.inkScene.getTexture(),this.finalPass.uniforms.maskTexture.value=this.maskInkScene.getTexture(),this.finalComposer.render()}},{key:"onWindowResize",value:function(){Zu(ac(n.prototype),"onWindowResize",this).call(this),this.finalComposer.setSize(this.width,this.height),this.inkScene.onWindowResize(),this.maskInkScene.onWindowResize(!1);var e=this.camera,t=this.height,i=this.width;e.left=-i/2,e.right=i/2,e.top=t/2,e.bottom=-t/2,e.updateProjectionMatrix()}}]),n}(Ki),cc=uc;function lc(e){return lc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(e)}function fc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pc(e,t,n){return t&&hc(e.prototype,t),n&&hc(e,n),e}function mc(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dc(e,t)}function dc(e,t){return dc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},dc(e,t)}function vc(e){var t=bc();return function(){var n,i=wc(e);if(t){var o=wc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return yc(this,n)}}function yc(e,t){if(t&&("object"===lc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gc(e)}function gc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function wc(e){return wc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wc(e)}var xc=function(e){mc(n,e);var t=vc(n);function n(e,i){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35;return fc(this,n),o=t.call(this,r),o.myTime=0,o.man=e,o.manUniforms={map:{value:$i.get("manSeq2")},fps:{value:18},time:{value:0},grid:{value:new g["xb"](6,6)}},o.man.material=o.createMat(Ao.a,o.manUniforms),o.man.renderOrder=20,o}return pc(n,[{key:"createMat",value:function(e,t){var n=new g["mb"]({vertexShader:Zi.a,fragmentShader:e,uniforms:t,transparent:!0,side:g["m"],depthTest:!1});return n}},{key:"playAudio",value:function(){Rn.play("pace")}},{key:"anim",value:function(e,t,n,i){this.isJumping||(this.myTime+=t,this.myTime%=1),this.manUniforms.time.value=this.myTime;var o=x(0,-2.1,this.jumper.position.z);this.man.position.copy(this.jumper.position),this.man.position.x=this.jumper.position.x;var r=k(1.2,.7,o);this.man.scale.set(r,r,r);var s=new g["yb"];n.getWorldPosition(s)}},{key:"dispose",value:function(){var e,t,n;null===(e=this.man.geometry)||void 0===e||e.dispose(),null===(t=this.man.material)||void 0===t||t.dispose(),null===(n=$i.get("manSeq2"))||void 0===n||n.dispose()}}]),n}(Wo),kc=xc;function Tc(e){return Tc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(e)}function Pc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Oc(e,t,n){return t&&Sc(e.prototype,t),n&&Sc(e,n),e}function Ic(e,t,n){return Ic="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_c(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},Ic(e,t,n||e)}function _c(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Dc(e),null===e)break;return e}function jc(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cc(e,t)}function Cc(e,t){return Cc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Cc(e,t)}function Rc(e){var t=zc();return function(){var n,i=Dc(e);if(t){var o=Dc(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Mc(this,n)}}function Mc(e,t){if(t&&("object"===Tc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ec(e)}function Ec(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Dc(e){return Dc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dc(e)}var Ac=function(e){jc(n,e);var t=Rc(n);function n(e,i,o){var r;return Pc(this,n),r=t.call(this,e),r.isInteract=!1,r.viewHeight=700,r.stoneIndex=0,r.stones=[],r.audioStartIndex=-1,r.audioEndIndex=10,r.mouse=new g["xb"],r.lastTouch=new g["xb"],r.animTouch=new g["xb"],r.cameraX=0,r.cameraTargetX=0,r.meshes=[],r.audioConfig={water:[[1,2],[5,8]],mountain:[[1,22]]},r.lastTime=0,r.lastInteractTime=0,r.maxTipGapTime=2,r.ctr=i,r.scene=new g["lb"],r.scene.background=new g["i"](0),r.scene.name="MountainScene",r.camera=new g["W"](64,r.width/r.height,.1,1e3),r.camera.name="MountainCamera",r.camera.position.set(0,0,10),r.camera.lookAt(new g["yb"]),r.scene.add(r.camera),r.loadModel(),r.inkCamera=new g["U"](-10.24,10.24,5.12,-5.12),r.inkCamera.position.set(0,0,10),r.renderPass=new Qi["a"](r.scene,r.camera),r.finalComposer=new Yi["a"](e),r.finalComposer.setPixelRatio(r.pixelRatio),r.finalComposer.renderToScreen=!0,r.finalComposer.addPass(r.renderPass),r.inkScene=o,r}return Oc(n,[{key:"inkSize",get:function(){return new g["xb"](this.height/this.viewHeight*2048,this.height/this.viewHeight*1024)}},{key:"camFactor",get:function(){return this.camera.position.x/this.cameraX}},{key:"loadModel",value:function(){var e=this,t=new Ro["a"],n="scene1-low.glb?v1";this.updateProgress(n,0),t.load("/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/"+"models/".concat(n),(function(t){e.updateProgress(n,1),t.scene.traverse((function(t){if(t instanceof g["K"]){var n=t.material,i=n.map;if(i){i.encoding=g["B"],i.wrapS=g["g"],i.wrapT=g["g"],i.magFilter=g["C"],i.minFilter=g["C"],i.needsUpdate=!0;var o=t.geometry.boundingBox,r=o.max.clone().sub(o.min),s={map:{value:i},depthMap:{value:n.metalnessMap},flowMap:{value:n.roughnessMap},noiseMap:{value:$i.get("noise")},enableFlow:{value:e.enableFlow(t.name)?1:0},flowOffset:{value:.006},time:{value:0},offset:{value:0},opacity:{value:1},showSmoke:{value:1},meshBound:{value:new g["xb"](r.x,r.y)}};t.material=new g["mb"]({vertexShader:Zi.a,fragmentShader:Eo.a,uniforms:s,transparent:!0,side:g["m"]}),e.meshes.push({obj:t,z:t.position.z,x:t.position.x,uniforms:s})}"man"===t.name&&(e.man=new kc(t,e.scene,.5)),t.geometry&&e.geos.push(t.geometry),t.material&&e.mats.push(t.material),n&&e.mats.push(n),n.map&&e.texs.push(n.map),n.metalnessMap&&e.texs.push(n.metalnessMap),n.roughnessMap&&e.texs.push(n.roughnessMap)}-1!==t.name.indexOf("stone")&&e.stones.push(t)})),e.stones=I(e.stones),e.man.setPosition(e.stones[0].position),e.camera=t.cameras[0],e.scene.add(t.scene),e.onWindowResize()}))}},{key:"enableFlow",value:function(e){var t=e.split("-");return"f"==t[t.length-1]}},{key:"onClick",value:function(){this.nextStone(),H.commit("setHasInteract",{index:0,flag:!0}),this.lastInteractTime=this.lastTime}},{key:"nextStone",value:function(){var e=this,t=this.stoneIndex;if(!(this.stoneIndex+1>this.stones.length-1)){this.stoneIndex++;var n=this.stoneIndex;this.man.jumpTo(this.stones[t].position,this.stones[this.stoneIndex].position,(function(){e.onLeaveStone(t);var i=e.audioStartIndex+n;i<=e.audioEndIndex&&Rn.play("p1/".concat(i))}),(function(){e.onJumpToStone(n)})),n==this.stones.length-1&&setTimeout((function(){e.ctr.nextScene()}),650)}}},{key:"reset",value:function(){this.stoneIndex=0,this.man&&this.man.setPosition(this.stones[0].position),this.camera.position.x=this.cameraTargetX=-this.cameraX,this.inkScene.resetInkConfig({renderToScene:!1,enableInteract:!1,overrideSize:!0,recoverRateMin:.05,recoverRateMax:.1,isDownFlow:!0}),this.onWindowResize(),this.anim(0,1/60),Rn.load("p1")}},{key:"onJumpToStone",value:function(e){}},{key:"onLeaveStone",value:function(e){}},{key:"onTouchStart",value:function(e){this.isInteract=!0;var t=e.touches[0],n=this.needRotate?t.pageY:t.pageX,i=this.needRotate?this.height-t.pageX:t.pageY;this.animTouch.set(n,i),this.lastTouch.set(n,i)}},{key:"onTouchMove",value:function(e){if(this.isInteract){var t=e.touches[0],n=this.needRotate?t.pageY:t.pageX,i=this.needRotate?this.height-t.pageX:t.pageY,o=new g["xb"](n,i);this.lastTouch=o}}},{key:"onTouchEnd",value:function(e){this.isInteract=!1}},{key:"anim",value:function(e,t){var n=this;this.animTouch.lerp(this.lastTouch,.1);this.screenPosToUv(this.animTouch);if(this.camera.position.x+=.05*(this.cameraTargetX-this.camera.position.x),this.man){this.man.anim(e,t,this.camera,this.camFactor);var i=this.man.getPosition();this.cameraTargetX=g["I"].clamp(i.x,-this.cameraX,this.cameraX)}this.meshes.forEach((function(t){x(0,-2.1,t.z);t.obj.position.x=t.x,t.uniforms.offset.value=n.camFactor,t.uniforms.time.value=e})),this.render(e,t);var o=this.stoneIndex;this.processAudio(o),this.lastTime-this.lastInteractTime>this.maxTipGapTime&&H.state.hasInteract[0]&&H.commit("setHasInteract",{index:0,flag:!1}),this.lastTime=e}},{key:"render",value:function(e,t){this.renderPass.camera=this.camera,this.meshes.forEach((function(e){e.uniforms.opacity.value=1})),this.finalComposer.render()}},{key:"onWindowResize",value:function(){Ic(Dc(n.prototype),"onWindowResize",this).call(this);var e=this.camera,t=.01*this.viewHeight,i=t*this.width/this.height;if(e.left=-i/2,e.right=i/2,e.top=t/2,e.bottom=-t/2,e.updateProjectionMatrix(),e.position.z=-.5,this.cameraX=Math.abs((20.48-i)/2),this.man){var o=this.man.getPosition();this.cameraTargetX=g["I"].clamp(o.x,-this.cameraX,this.cameraX),this.camera.position.x=this.cameraTargetX}this.finalComposer.setSize(this.width,this.height)}},{key:"dispose",value:function(){var e;null===(e=this.man)||void 0===e||e.dispose(),Ic(Dc(n.prototype),"dispose",this).call(this)}}]),n}(Ki),Bc=Ac;function Fc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Uc(e,t,n){return t&&Nc(e.prototype,t),n&&Nc(e,n),e}var Wc=function(){function e(t,n){Fc(this,e),this.showProgress=0,this.t=0,this.speed=.5,this.stone=t,this.stone.visible=!1}return Uc(e,[{key:"getPosition",value:function(){var e=new g["yb"];return this.stone.getWorldPosition(e),e}},{key:"showWave",value:function(){}},{key:"hideWave",value:function(){}},{key:"anim",value:function(e,t){}}]),e}(),Xc=Wc;function Lc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hc(e,t,n){return t&&$c(e.prototype,t),n&&$c(e,n),e}var qc=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Lc(this,e),this.r=P(0,2*Math.PI),this.originX=0,this.tree=t,this.originX=this.tree.position.x;var r=t.material.uniforms.map.value;this.treeUniforms={map:{value:r},shakeDir:{value:i},shakePinPos:{value:o},shakeAmp:{value:0},shakeFreq:{value:1},time:{value:0}},this.tree.material=new g["mb"]({vertexShader:Zi.a,fragmentShader:qr.a,uniforms:this.treeUniforms,transparent:!0,side:g["m"]})}return Hc(e,[{key:"getPosition",value:function(){return this.tree.position}},{key:"shake",value:function(){this.tl&&(this.tl.pause(),this.tl.kill()),this.tl=new ne["a"].core.Timeline,this.tl.addLabel("start").to(this.treeUniforms.shakeAmp,{value:.75,duration:.1},"start").to(this.treeUniforms.shakeFreq,{value:2,duration:.1},"start").addLabel("fade",.5).to(this.treeUniforms.shakeAmp,{value:0,duration:2},"fade").to(this.treeUniforms.shakeFreq,{value:6,duration:2},"fade")}},{key:"move",value:function(e){this.tree.position.x=this.originX-e}},{key:"anim",value:function(e,t){this.treeUniforms.time.value=e+this.r}}]),e}(),Vc=qc;function Gc(e){return Gc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gc(e)}function Kc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qc(e,t,n){return t&&Yc(e.prototype,t),n&&Yc(e,n),e}function Jc(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zc(e,t)}function Zc(e,t){return Zc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Zc(e,t)}function el(e){var t=il();return function(){var n,i=ol(e);if(t){var o=ol(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return tl(this,n)}}function tl(e,t){if(t&&("object"===Gc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nl(e)}function nl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function il(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ol(e){return ol=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ol(e)}var rl=function(e){Jc(n,e);var t=el(n);function n(e,i){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return Kc(this,n),o=t.call(this,r),o.myTime=0,o.man=e,o.man.scale.set(1.5,1.5,1.5),o.manUniforms={map:{value:$i.get("manSeq")},fps:{value:18},time:{value:0},grid:{value:new g["xb"](8,7)}},o.man.material=o.createMat(Ao.a,o.manUniforms),o.man.renderOrder=20,o.man.visible=s,o.manReflect=o.man.clone(),o.manReflectUniforms={map:{value:$i.get("manSeq")},noiseTexture:{value:$i.get("noise")},fps:{value:18},time:{value:0},opacity:{value:1},grid:{value:new g["xb"](8,7)}},o.manReflect.material=o.createMat(Zr.a,o.manReflectUniforms),o.manReflect.visible=s&&a,i.add(o.manReflect),o}return Qc(n,[{key:"createMat",value:function(e,t){var n=new g["mb"]({vertexShader:Zi.a,fragmentShader:e,uniforms:t,transparent:!0,side:g["m"],depthTest:!1});return n}},{key:"getManPositionX",value:function(){return this.man.position.x}},{key:"playAudio",value:function(){Rn.play("paceMud")}},{key:"anim",value:function(e,t,n){this.isJumping||(this.myTime+=t,this.myTime%=1),this.manUniforms.time.value=this.myTime,this.manReflectUniforms.time.value=this.myTime,this.man.position.copy(this.jumper.position);var i=new g["yb"];n.getWorldPosition(i),this.man.lookAt(i),this.man.rotation.z=0,this.manReflect.position.copy(this.man.position),this.manReflect.rotation.copy(this.man.rotation),this.manReflect.scale.y=-1}}]),n}(Wo),sl=rl;function al(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ul(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cl(e,t,n){return t&&ul(e.prototype,t),n&&ul(e,n),e}new g["T"];var ll=new g["yb"](0,0,1),fl=function(){function e(t,n,i){al(this,e),this.pos=new g["yb"],this.s=P(.8,1),this.originVel=new g["yb"],this.vel=new g["yb"],this.angle=0,this.targetAngle=0,this.r1=P(1,5),this.r0=P(.5,2),this.maxLife=1,this.life=1,this.uniforms={time:{value:0},opacity:{value:1},map:{value:i}},this.mat=new g["mb"]({vertexShader:Zi.a,fragmentShader:ms.a,uniforms:this.uniforms,transparent:!0}),this.mesh=new g["K"](n.geometry,this.mat),t.add(this.mesh),this.reset()}return cl(e,[{key:"reset",value:function(){this.pos.x=P(-400,400),this.pos.y=this.pos.x*P(.3,.5),this.pos.z=0,ne["a"].to(this.pos,{z:P(0,1),duration:P(1,2)}),this.originVel=new g["yb"](P(1,16),0,0),this.originVel.y=.4*this.originVel.x,this.vel=this.originVel.clone(),this.life=P(4,20),this.maxLife=this.life}},{key:"setPulse",value:function(e){e.z=this.pos.z;var t=e.distanceTo(this.pos),n=this.pos.clone().sub(e).normalize();this.vel.add(n.multiplyScalar(70*x(70,10,t)));var i=10*x(70,50,t);this.life+=i,this.maxLife+=i,t<30&&Rn.play("fish")}},{key:"anim",value:function(e,t){this.uniforms.time.value=e,this.uniforms.opacity.value=Math.min(x(0,5,this.life),x(this.maxLife,this.maxLife-3,this.life)),this.targetAngle=-Math.atan2(this.vel.x,this.vel.y)+.5*Math.PI,this.angle+=.02*(this.targetAngle-this.angle),this.originVel.y=.4*this.originVel.x+Math.sin(e*this.r0)*this.r1*this.originVel.length()/10,this.vel.lerp(this.originVel,.06),this.pos.add(this.vel.clone().multiplyScalar(t)),this.life-=t,(this.pos.x>300||this.life<0)&&this.reset(),this.mesh.position.copy(this.pos),this.mesh.scale.set(this.s,this.s,this.s),this.mesh.rotation.set(.5*Math.PI,0,0),this.mesh.rotateOnWorldAxis(ll,this.angle)}}]),e}(),hl=function(){function e(t,n){al(this,e),this.fishNum=3,this.fishes=[],t.visible=!1,this.fishMap=t.material.uniforms.map.value;for(var i=0;i<this.fishNum;i++)this.fishes.push(new fl(n,t,this.fishMap))}return cl(e,[{key:"setPulse",value:function(e){this.fishes.forEach((function(t){t.setPulse(e)}))}},{key:"anim",value:function(e,t){this.fishUniforms&&(this.fishUniforms.time.value=e),this.fishes.forEach((function(n){n.anim(e,t)}))}}]),e}(),pl=hl;function ml(e){return ml="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ml(e)}function dl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yl(e,t,n){return t&&vl(e.prototype,t),n&&vl(e,n),e}function gl(e,t,n){return gl="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=bl(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},gl(e,t,n||e)}function bl(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Ol(e),null===e)break;return e}function wl(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xl(e,t)}function xl(e,t){return xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xl(e,t)}function kl(e){var t=Sl();return function(){var n,i=Ol(e);if(t){var o=Ol(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Tl(this,n)}}function Tl(e,t){if(t&&("object"===ml(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pl(e)}function Pl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sl(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ol(e){return Ol=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ol(e)}var Il=function(e){wl(n,e);var t=kl(n);function n(e,i,o){var r;return dl(this,n),r=t.call(this,e),r.isInteract=!1,r.rivers=[],r.stones=[],r.trees=[],r.stoneIndex=0,r.audioStartIndex=10,r.audioEndIndex=16,r.mouse=new g["xb"],r.lastTouch=new g["xb"],r.animTouch=new g["xb"],r.audioConfig={river:[[0,1]]},r.lastTime=0,r.lastInteractTime=0,r.maxTipGapTime=2,r.ctr=i,r.scene=new g["lb"],r.scene.background=new g["i"](0),r.scene.name="RiverScene",r.camera=new g["W"](64,r.width/r.height,.1,1e3),r.camera.name="RiverCamera",r.camera.position.set(0,10,10),r.camera.lookAt(new g["yb"]),r.scene.add(r.camera),r.loadModel(),r.renderPass=new Qi["a"](r.scene,r.camera),r.inkComposer=new Yi["a"](e),r.inkComposer.setPixelRatio(r.pixelRatio),r.inkComposer.renderToScreen=!1,r.inkComposer.addPass(r.renderPass),r.finalComposer=new Yi["a"](e),r.finalComposer.setPixelRatio(r.pixelRatio),r.finalComposer.renderToScreen=!0,r.finalComposer.addPass(r.renderPass),r.inkScene=o,r}return yl(n,[{key:"loadModel",value:function(){var e=this,t=new Ro["a"],n="scene0-low.glb?v1";this.updateProgress(n,0),t.load("/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/"+"models/".concat(n),(function(t){e.updateProgress(n,1);var i=[];t.scene.traverse((function(t){if(t instanceof g["K"]){var n=t.material,o=n.map;if(o&&(o.wrapS=g["g"],o.wrapT=g["g"],o.encoding=g["B"],o.magFilter=g["C"],o.minFilter=g["C"],o.needsUpdate=!0),t.material=new g["mb"]({transparent:!0,vertexShader:Zi.a,fragmentShader:to.a,uniforms:{map:{value:n.map},opacity:{value:1}},side:g["m"],depthTest:!1}),-1!==t.name.indexOf("stone")&&(i.push(t),t.layers.enable(zo.layers.INK)),-1!==t.name.indexOf("tree")){var r=parseInt(t.name.split("-")[1]),s=[{dir:0,pin:1},{dir:0,pin:0},{dir:0,pin:1}];e.trees[r]=new Vc(t,e.scene,s[r].dir,s[r].pin)}-1!==t.name.indexOf("man")&&(e.man=new sl(t,e.scene,10)),-1!==t.name.indexOf("fish")&&(e.fish=new pl(t,e.scene)),t.geometry&&e.geos.push(t.geometry),t.material&&e.mats.push(t.material),n&&e.mats.push(n),n.map&&e.texs.push(n.map),n.metalnessMap&&e.texs.push(n.metalnessMap),n.roughnessMap&&e.texs.push(n.roughnessMap)}-1!==t.name.indexOf("riverCurve")&&e.rivers.push(new Br(e.renderer,e.scene,t.children,0))})),i=I(i),i.forEach((function(t,n){e.stones.push(new Xc(t,e.scene)),e.rivers.forEach((function(e){var i=new g["yb"];t.getWorldPosition(i),e.setStonePos(n,i)}))})),e.man.setPosition(e.stones[0].getPosition()),e.camera=t.cameras[0],e.scene.add(t.scene),e.onWindowResize()}))}},{key:"onClick",value:function(){this.nextStone(),H.commit("setHasInteract",{index:0,flag:!0}),this.lastInteractTime=this.lastTime}},{key:"nextStone",value:function(){var e=this,t=this.stoneIndex;if(!(this.stoneIndex+1>this.stones.length-1)){this.stoneIndex++;var n=this.stoneIndex,i=t>=0?this.stones[t]:this.stones[0],o=this.stones[this.stoneIndex],r=o.getPosition().clone(),s=i.getPosition().clone();this.man.jumpTo(s,r,(function(){t>=0&&e.onLeaveStone(t);var i=e.audioStartIndex+n;i<=e.audioEndIndex&&Rn.play("p1/".concat(i))}),(function(){e.onJumpToStone(n)}),0,[6,8,11],s.y>r.y?[1,2]:[2,3]),H.commit("setRiverStoneIndex",this.stoneIndex)}}},{key:"reset",value:function(){var e=this;this.stoneIndex=0,this.man.jumpTo(this.stones[0].getPosition().sub(new g["yb"](100,0,0)),this.stones[0].getPosition(),(function(){}),(function(){var t=e.stones[0].getPosition().clone();t.project(e.camera),t.multiplyScalar(.5).addScalar(.5),e.inkScene.setPulse(new g["xb"](t.x,t.y),1e3)}),.5,[6,8,11]),this.onWindowResize(),this.anim(0,1/60)}},{key:"onJumpToStone",value:function(e){if(e!=this.stones.length-1){this.trees.forEach((function(e){return null===e||void 0===e?void 0:e.shake()})),this.rivers.forEach((function(t){t.stoneWaveStart(e)})),this.stones[e].showWave();var t=this.stones[e].getPosition().clone();t.project(this.camera),t.multiplyScalar(.5).addScalar(.5),this.inkScene.setPulse(new g["xb"](t.x,t.y),1e3),this.fish.setPulse(this.stones[e].getPosition().clone())}else this.ctr.nextScene()}},{key:"onLeaveStone",value:function(e){this.rivers.forEach((function(t){t.stoneWaveStop(e)})),this.stones[e].hideWave()}},{key:"onTouchStart",value:function(e){this.isInteract=!0;var t=e.touches[0],n=this.needRotate?t.pageY:t.pageX,i=this.needRotate?this.height-t.pageX:t.pageY;this.animTouch.set(n,i),this.lastTouch.set(n,i)}},{key:"onTouchMove",value:function(e){if(this.isInteract){var t=e.touches[0],n=this.needRotate?t.pageY:t.pageX,i=this.needRotate?this.height-t.pageX:t.pageY,o=new g["xb"](n,i);this.lastTouch=o}}},{key:"onTouchEnd",value:function(e){this.isInteract=!1}},{key:"anim",value:function(e,t){var n,i=this;this.animTouch.lerp(this.lastTouch,.1);this.screenPosToUv(this.animTouch);if(this.rivers.forEach((function(n){n.anim(e,t)})),this.stones.forEach((function(n){n.anim(e,t)})),this.trees.forEach((function(n){n.anim(e,t)})),null===(n=this.fish)||void 0===n||n.anim(e,t),this.man){var o;null===(o=this.man)||void 0===o||o.anim(e,t,this.camera);var r=this.man.getManPositionX(),s=x(-270,270,r),a=g["I"].lerp(0,30,s);this.camera.position.x+=.01*(a-this.camera.position.x),this.trees.forEach((function(e){e.move(i.camera.position.x)}))}this.render(e,t);var u=.5;this.processAudio(u),0===this.lastTime?(this.lastInteractTime=e,this.lastTime=e):this.lastTime-this.lastInteractTime>this.maxTipGapTime&&H.state.hasInteract[0]&&H.commit("setHasInteract",{index:0,flag:!1}),this.lastTime=e}},{key:"render",value:function(e,t){this.renderPass.camera=this.camera,this.finalComposer.render()}},{key:"onWindowResize",value:function(){gl(Ol(n.prototype),"onWindowResize",this).call(this);var e=this.camera,t=540,i=t*this.height/this.width;e.left=-t/2,e.right=t/2,e.top=i/2,e.bottom=-i/2,e.updateProjectionMatrix(),this.inkComposer.setSize(this.width,this.height),this.finalComposer.setSize(this.width,this.height),this.inkScene.onWindowResize();var o=this.trees[2];o&&(o.tree.position.y=-i/2+45)}}]),n}(Ki),_l=Il;function jl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rl(e,t,n){return t&&Cl(e.prototype,t),n&&Cl(e,n),e}var Ml=function(){function e(t,n){jl(this,e),this.proxyObj=new g["T"],this.myTime=0,this.posXClmap={min:-18,max:27},this.isMoving=!1,this.man=t,this.manUniforms={map:{value:$i.get("manSeq3")},fps:{value:12},time:{value:0},grid:{value:new g["xb"](6,6)}},this.man.material=this.createMat(Ao.a,this.manUniforms),this.resetPosition()}return Rl(e,[{key:"progress",get:function(){return(this.proxyObj.position.x-this.posXClmap.min)/(this.posXClmap.max-this.posXClmap.min)}},{key:"animProgress",get:function(){var e=(this.man.position.x-this.posXClmap.min)/(this.posXClmap.max-this.posXClmap.min);return e>.99?1:e}},{key:"createMat",value:function(e,t){var n=new g["mb"]({vertexShader:Zi.a,fragmentShader:e,uniforms:t,transparent:!0,side:g["m"]});return n}},{key:"getPosition",value:function(){return this.man.position.clone()}},{key:"resetPosition",value:function(){this.proxyObj.position.x=this.posXClmap.min,this.man.position.x=this.proxyObj.position.x}},{key:"setPosition",value:function(e){this.proxyObj.position.copy(e),this.man.position.x=this.proxyObj.position.x}},{key:"setPosByProgress",value:function(e){this.proxyObj.position.x=(this.posXClmap.max-this.posXClmap.min)*e+this.posXClmap.min}},{key:"moveOn",value:function(e,t,n){var i=(this.posXClmap.max-this.posXClmap.min)/Y.duration;this.proxyObj.position.x+=t*i*n,this.proxyObj.position.x=g["I"].clamp(this.proxyObj.position.x,this.posXClmap.min,this.posXClmap.max),this.isMoving=!0}},{key:"stopMove",value:function(){this.isMoving=!1}},{key:"anim",value:function(e,t,n,i){this.myTime+=t,this.isMoving?(this.myTime%=2,this.myTime<.5&&this.myTime<.55&&Rn.play("boat")):this.myTime<2||(this.myTime%=1,this.myTime+=2),this.manUniforms.time.value=this.myTime,this.man.position.x+=.05*(this.proxyObj.position.x-this.man.position.x)}},{key:"dispose",value:function(){var e,t,n;null===(e=this.man.geometry)||void 0===e||e.dispose(),null===(t=this.man.material)||void 0===t||t.dispose(),null===(n=$i.get("manSeq3"))||void 0===n||n.dispose()}}]),e}(),El=Ml;function zl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Al(e,t,n){return t&&Dl(e.prototype,t),n&&Dl(e,n),e}var Bl=function(){function e(t,n){zl(this,e),this.renderer=t,this.scene=n,this.uniforms={map:{value:$i.get("birds")},fps:{value:18},time:{value:0},opacity:{value:1},grid:{value:new g["xb"](8,8)}},this.mat=new g["mb"]({vertexShader:Zi.a,fragmentShader:Js.a,uniforms:this.uniforms,side:g["m"],transparent:!0}),this.mesh=new g["K"](new g["Z"](9,5.75,1,1),this.mat),this.mesh.layers.set(zo.layers.INK),this.mesh.position.set(-17,5,-2.3),this.scene.add(this.mesh)}return Al(e,[{key:"anim",value:function(e,t){var n=e%(64/18-.01);this.uniforms.time.value=n}},{key:"dispose",value:function(){var e,t,n;null===(e=this.mesh.geometry)||void 0===e||e.dispose(),null===(t=this.mat)||void 0===t||t.dispose(),null===(n=$i.get("birds"))||void 0===n||n.dispose()}}]),e}(),Fl=Bl;function Nl(e){return Nl="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nl(e)}function Ul(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xl(e,t,n){return t&&Wl(e.prototype,t),n&&Wl(e,n),e}function Ll(e,t,n){return Ll="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=$l(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},Ll(e,t,n||e)}function $l(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Ql(e),null===e)break;return e}function Hl(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ql(e,t)}function ql(e,t){return ql=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ql(e,t)}function Vl(e){var t=Yl();return function(){var n,i=Ql(e);if(t){var o=Ql(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Gl(this,n)}}function Gl(e,t){if(t&&("object"===Nl(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kl(e)}function Kl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yl(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ql(e){return Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ql(e)}var Jl=function(e){Hl(n,e);var t=Vl(n);function n(e,i,o){var r;return Ul(this,n),r=t.call(this,e),r.isInteract=!1,r.hasTouchStart=!1,r.touchStartTime=0,r.viewHeight=1500,r.audioIndex=0,r.mouse=new g["xb"],r.lastTouch=new g["xb"],r.animTouch=new g["xb"],r.cameraX=0,r.cameraTargetX=0,r.layers=[],r.us=[],r.audioConfig={birds:[[-30,2]],water:[[-16,16]]},r.shakeConfig={grass:r.createShakeConfig(V.LEFT,.1*P(.5,1.5),P(1.5,2.5),1),grass0:r.createShakeConfig(V.LEFT,.1*P(.5,1.5),P(1.5,2.5),1),grass1:r.createShakeConfig(V.LEFT,.1*P(.5,1.5),P(1.5,2.5),1),grass2:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),grass3:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),grass4:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),grass5:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),grass6:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),grass7:r.createShakeConfig(V.RIGHT,.1*P(.5,1.5),P(1.5,2.5),1),tree:r.createShakeConfig(V.BOTTOM,.3,.5,.4),tree0:r.createShakeConfig(V.BOTTOM,.34,.5,.4)},r.lastTime=0,r.lastInteractTime=0,r.maxTipGapTime=2,r.hasNextScene=!1,r.ctr=i,r.scene=new g["lb"],r.scene.background=new g["i"](0),r.scene.name="LakeScene",r.camera=new g["U"](-1,1,1,-1,.1,100),r.camera.name="MountainCamera",r.camera.position.set(0,0,10),r.camera.lookAt(new g["yb"]),r.scene.add(r.camera),r.loadModel(),r.renderPass=new Qi["a"](r.scene,r.camera),r.finalComposer=new Yi["a"](e),r.finalComposer.setPixelRatio(r.pixelRatio),r.finalComposer.renderToScreen=!0,r.finalComposer.addPass(r.renderPass),r.inkScene=o,r.birds=new Fl(r.renderer,r.scene),r}return Xl(n,[{key:"inkSize",get:function(){return new g["xb"](this.height/this.viewHeight*6e3,this.height/this.viewHeight*1500)}},{key:"camFactor",get:function(){return this.camera.position.x/this.cameraX}},{key:"createShakeConfig",value:function(e,t,n,i){var o={shakeDir:G[e].shakeDir,shakePinPos:G[e].shakePinPos,shakeAmp:t,shakeFreq:n,shakeSpeed:i,shakeOffset:P(0,2*Math.PI)};return o}},{key:"loadModel",value:function(){var e=this,t=new Ro["a"],n="scene2-low.glb?v1";this.updateProgress(n,0),t.load("/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/"+"models/".concat(n),(function(t){e.updateProgress(n,1),t.scene.traverse((function(t){if(t instanceof g["K"]){var n=t.material,i=n.map;if(i){i.encoding=g["B"],i.wrapS=g["g"],i.wrapT=g["g"],i.magFilter=g["C"],i.minFilter=g["C"],i.needsUpdate=!0;var o=t.geometry.boundingBox,r=o.max.clone().sub(o.min),s=-1!==Object.keys(e.shakeConfig).indexOf(t.name),a=s?e.shakeConfig[t.name]:{},u={map:{value:i},depthMap:{value:n.metalnessMap},flowMap:{value:n.roughnessMap},noiseMap:{value:$i.get("noise")},enableFlow:{value:e.enableFlow(t.name)?1:0},flowOffset:{value:.006},time:{value:0},offset:{value:0},opacity:{value:1},showSmoke:{value:0},meshBound:{value:new g["xb"](r.x,r.y)},shakeDir:{value:s?a.shakeDir:0},shakePinPos:{value:s?a.shakePinPos:0},shakeAmp:{value:s?a.shakeAmp:0},shakeFreq:{value:s?a.shakeFreq:0},shakeSpeed:{value:s?a.shakeSpeed:0},shakeOffset:{value:s?a.shakeOffset:0}};t.material=new g["mb"]({vertexShader:Zi.a,fragmentShader:Eo.a,uniforms:u,transparent:!0,side:g["m"]}),e.us.push(u)}"man"===t.name&&(e.man=new El(t,e.scene)),t.geometry&&e.geos.push(t.geometry),t.material&&e.mats.push(t.material),n&&e.mats.push(n),n.map&&e.texs.push(n.map),n.metalnessMap&&e.texs.push(n.metalnessMap),n.roughnessMap&&e.texs.push(n.roughnessMap)}})),e.scene.add(t.scene),e.onWindowResize()}))}},{key:"getAudioTime",value:function(){return this.man?this.man.progress*Y.duration:0}},{key:"enableFlow",value:function(e){var t=e.split("-");return"f"==t[t.length-1]}},{key:"onClick",value:function(){this.nextTone()}},{key:"nextTone",value:function(){if(this.audioIndex<Y.num){var e=Y.startAt[this.audioIndex],t=(e+.01)/Y.duration;t=g["I"].clamp(t,0,1),this.man.setPosByProgress(t)}else this.man.setPosByProgress(1)}},{key:"reset",value:function(){this.isInteract=!1,this.audioIndex=0,this.man&&this.man.resetPosition(),this.camera.position.x=this.cameraTargetX=-this.cameraX,this.onWindowResize(),this.anim(0,1/60),Rn.load("p2")}},{key:"onTouchStart",value:function(e){this.isInteract=!0,this.hasTouchStart=!0,H.commit("setHasInteract",{index:1,flag:!0}),this.lastInteractTime=this.lastTime}},{key:"onTouchMove",value:function(e){}},{key:"onTouchEnd",value:function(e){this.isInteract=!1,this.lastInteractTime=this.lastTime}},{key:"onMouseDown",value:function(e){this.isInteract=!0,this.hasTouchStart=!0,H.commit("setHasInteract",{index:1,flag:!0}),this.lastInteractTime=this.lastTime}},{key:"onMouseMove",value:function(e){}},{key:"onMouseUp",value:function(e){this.isInteract=!1,this.lastInteractTime=this.lastTime}},{key:"anim",value:function(e,t){if(!this.hasNextScene){this.animTouch.lerp(this.lastTouch,.1);this.screenPosToUv(this.animTouch);if(this.camera.position.x+=.05*(this.cameraTargetX-this.camera.position.x),this.man){this.man.anim(e,t,this.camera,this.camFactor);var n=this.man.getPosition();if(this.cameraTargetX=g["I"].clamp(n.x,-this.cameraX,this.cameraX),this.hasTouchStart&&(this.hasTouchStart=!1,this.touchStartTime=e),this.isInteract){var i=g["I"].lerp(1,1.5,x(1,5,e-this.touchStartTime));this.man.moveOn(e,t,i);var o=this.man.getPosition();o.x=(o.x+30)/60,o.y=(o.y+7.5)/15}else this.man.stopMove()}if(this.us.forEach((function(t){t.time.value=e})),this.birds.anim(e,t),this.audioIndex<Y.num){var r,s=Y.startAt[this.audioIndex];if(this.getAudioTime()>s)Rn.play("p2/".concat(this.audioIndex)),null===(r=this.man)||void 0===r||r.moveOn(e,t,25),this.audioIndex++}if(this.man&&1===this.man.animProgress)return this.ctr.nextScene(),void(this.hasNextScene=!0);this.render(e,t);var a=this.man?this.man.getPosition().x:-18;this.processAudio(a),this.lastTime-this.lastInteractTime>this.maxTipGapTime&&H.state.hasInteract[1]&&!this.isInteract&&H.commit("setHasInteract",{index:1,flag:!1}),this.lastTime=e}}},{key:"render",value:function(e,t){this.renderPass.camera=this.camera,this.finalComposer.render()}},{key:"onWindowResize",value:function(){Ll(Ql(n.prototype),"onWindowResize",this).call(this);var e=this.camera,t=.01*this.viewHeight,i=t*this.width/this.height;if(e.left=-i/2,e.right=i/2,e.top=t/2,e.bottom=-t/2,e.updateProjectionMatrix(),e.position.z=10,this.cameraX=Math.abs((60-i)/2),this.man){var o=this.man.getPosition();this.cameraTargetX=g["I"].clamp(o.x,-this.cameraX,this.cameraX),this.camera.position.x=this.cameraTargetX}this.finalComposer.setSize(this.width,this.height)}},{key:"dispose",value:function(){var e,t;null===(e=this.man)||void 0===e||e.dispose(),null===(t=this.birds)||void 0===t||t.dispose(),Ll(Ql(n.prototype),"dispose",this).call(this)}}]),n}(Ki),Zl=Jl;function ef(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tf(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function nf(e,t,n){return t&&tf(e.prototype,t),n&&tf(e,n),e}var of=function(){function e(t,n){ef(this,e),this.proxyObj=new g["T"],this.myTime=0,this.posXClmap={min:-18,max:27},this.man=t,this.manUniforms={map:{value:$i.get("manSeq4")},fps:{value:18},time:{value:0},grid:{value:new g["xb"](6,6)}},this.man.material=this.createMat(Ao.a,this.manUniforms)}return nf(e,[{key:"createMat",value:function(e,t){var n=new g["mb"]({vertexShader:Zi.a,fragmentShader:e,uniforms:t,transparent:!0,side:g["m"]});return n}},{key:"getPosition",value:function(){return this.proxyObj.position.clone()}},{key:"resetPosition",value:function(){this.proxyObj.position.x=this.posXClmap.min,this.man.position.x=this.proxyObj.position.x}},{key:"setPosition",value:function(e){this.proxyObj.position.copy(e),this.man.position.x=this.proxyObj.position.x}},{key:"anim",value:function(e,t,n){this.myTime+=t,this.myTime%=2,this.manUniforms.time.value=this.myTime,this.man.position.x+=.1*(this.proxyObj.position.x-this.man.position.x),this.man.position.y=g["I"].lerp(-4.5,-3.6,n);var i=g["I"].lerp(1.8,.5,n);this.man.scale.set(i,i,i)}},{key:"dispose",value:function(){var e,t,n;null===(e=this.man.geometry)||void 0===e||e.dispose(),null===(t=this.man.material)||void 0===t||t.dispose(),null===(n=$i.get("manSeq4"))||void 0===n||n.dispose()}}]),e}(),rf=of;function sf(e){return sf="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(e)}function af(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uf(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cf(e,t,n){return t&&uf(e.prototype,t),n&&uf(e,n),e}function lf(e,t,n){return lf="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=ff(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},lf(e,t,n||e)}function ff(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=gf(e),null===e)break;return e}function hf(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pf(e,t)}function pf(e,t){return pf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pf(e,t)}function mf(e){var t=yf();return function(){var n,i=gf(e);if(t){var o=gf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return df(this,n)}}function df(e,t){if(t&&("object"===sf(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vf(e)}function vf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yf(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function gf(e){return gf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gf(e)}var bf=function(e){hf(n,e);var t=mf(n);function n(e,i,o){var r;return af(this,n),r=t.call(this,e),r.isInteract=!1,r.hasTouchStart=!1,r.interactProgress=0,r.interactAnimProgress=0,r.viewHeight=1024,r.audioIndex=0,r.mouse=new g["xb"],r.lastTouch=new g["xb"],r.us=[],r.elements={},r.audioConfig={fall:[[0,.97]]},r.shakeConfig={water:r.createShakeConfig(V.TOP,.3,130,2.4)},r.lastTime=0,r.lastInteractTime=0,r.maxTipGapTime=2,r.ctr=i,r.scene=new g["lb"],r.scene.background=new g["i"](0),r.scene.name="FallScene",r.camera=new g["U"](-1,1,1,-1,.1,300),r.camera.name="FallCamera",r.camera.position.set(0,0,10),r.camera.lookAt(new g["yb"]),r.scene.add(r.camera),r.loadModel(),r.renderPass=new Qi["a"](r.scene,r.camera),r.bloomPass=new mo["a"](new g["xb"](r.width,r.height).multiplyScalar(r.pixelRatio),.1,1,.95),r.finalComposer=new Yi["a"](e),r.finalComposer.setPixelRatio(r.pixelRatio),r.finalComposer.renderToScreen=!0,r.finalComposer.addPass(r.renderPass),r.finalComposer.addPass(r.bloomPass),r.inkScene=o,r}return cf(n,[{key:"createShakeConfig",value:function(e,t,n,i){var o={shakeDir:G[e].shakeDir,shakePinPos:G[e].shakePinPos,shakeAmp:t,shakeFreq:n,shakeSpeed:i,shakeOffset:P(0,2*Math.PI)};return o}},{key:"loadModel",value:function(){var e=this,t=new Ro["a"],n="scene3-low.glb?v1";this.updateProgress(n,0),t.load("/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/"+"models/".concat(n),(function(t){e.updateProgress(n,1),t.scene.traverse((function(t){if(e.elements[t.name]=t,t instanceof g["K"]){var n=t.material,i=n.map;if(i){i.encoding=g["B"],i.wrapS=g["g"],i.wrapT=g["g"],i.magFilter=g["C"],i.minFilter=g["C"],i.needsUpdate=!0;var o=t.geometry.boundingBox,r=o.max.clone().sub(o.min),s=-1!==Object.keys(e.shakeConfig).indexOf(t.name),a=s?e.shakeConfig[t.name]:{},u={map:{value:i},depthMap:{value:n.metalnessMap},flowMap:{value:n.roughnessMap},noiseMap:{value:$i.get("noise")},enableFlow:{value:e.enableFlow(t.name)?1:0},flowOffset:{value:.5},time:{value:0},offset:{value:0},opacity:{value:1},showSmoke:{value:0},meshBound:{value:new g["xb"](r.x,r.y)},shakeDir:{value:s?a.shakeDir:0},shakePinPos:{value:s?a.shakePinPos:0},shakeAmp:{value:s?a.shakeAmp:0},shakeFreq:{value:s?a.shakeFreq:0},shakeSpeed:{value:s?a.shakeSpeed:0},shakeOffset:{value:s?a.shakeOffset:0}};t.material=new g["mb"]({vertexShader:Zi.a,fragmentShader:Eo.a,uniforms:u,transparent:!0,side:g["m"]}),e.us.push(u)}"man"===t.name&&(e.man=new rf(t,e.scene)),t.geometry&&e.geos.push(t.geometry),t.material&&e.mats.push(t.material),n&&e.mats.push(n),n.map&&e.texs.push(n.map),n.metalnessMap&&e.texs.push(n.metalnessMap),n.roughnessMap&&e.texs.push(n.roughnessMap)}})),e.scene.add(t.scene),e.onWindowResize()}))}},{key:"getAudioTime",value:function(){return this.interactAnimProgress*Q.duration}},{key:"getAudioIndex",value:function(){for(var e=this.getAudioTime(),t=1;t<Q.num;t++){var n=Q.startAt[t];if(n>e)return t-1}return 0}},{key:"enableFlow",value:function(e){var t=e.split("-");return"f"==t[t.length-1]}},{key:"onClick",value:function(){}},{key:"reset",value:function(){this.isInteract=!1,this.audioIndex=0,this.interactProgress=0,this.onWindowResize(),this.anim(0,1/60),Rn.load("p3")}},{key:"onTouchStart",value:function(e){this.hasTouchStart=!0,this.audioIndex=this.getAudioIndex(),this.isInteract=!0;var t=e.touches[0],n=this.getScreenPos(t);this.lastTouch=n}},{key:"onTouchMove",value:function(e){if(this.hasTouchStart){var t=e.touches[0],n=this.getScreenPos(t),i=Math.abs(n.x-this.lastTouch.x);this.interactProgress+=3e-5*i*g["I"].lerp(4,7,this.interactProgress),this.interactProgress=g["I"].clamp(this.interactProgress,0,1),this.lastTouch=n,this.inkScene.setPulse(this.screenPosToUv(this.lastTouch)),H.commit("setHasInteract",{index:2,flag:!0}),this.lastInteractTime=this.lastTime}}},{key:"onTouchEnd",value:function(e){this.isInteract=!1,this.lastInteractTime=this.lastTime}},{key:"onMouseDown",value:function(e){this.hasTouchStart=!0,this.audioIndex=this.getAudioIndex(),this.isInteract=!0;var t={pageX:e.pageX,pageY:e.pageY},n=this.getScreenPos(t);this.lastTouch=n}},{key:"onMouseMove",value:function(e){if(this.hasTouchStart){var t={pageX:e.pageX,pageY:e.pageY},n=this.getScreenPos(t),i=Math.abs(n.x-this.lastTouch.x);this.interactProgress+=3e-5*i*g["I"].lerp(4,7,this.interactProgress),this.interactProgress=g["I"].clamp(this.interactProgress,0,1),this.lastTouch=n,this.inkScene.setPulse(this.screenPosToUv(this.lastTouch)),H.commit("setHasInteract",{index:2,flag:!0}),this.lastInteractTime=this.lastTime}}},{key:"onMouseUp",value:function(e){this.isInteract=!1,this.lastInteractTime=this.lastTime}},{key:"anim",value:function(e,t){this.isInteract||(this.interactProgress-=2e-4,this.interactProgress=Math.max(0,this.interactProgress)),this.interactAnimProgress+=(this.interactProgress-this.interactAnimProgress)*g["I"].lerp(.1,.2,this.interactProgress),this.us.forEach((function(t){t.time.value=e})),this.man&&this.man.anim(e,t,this.interactAnimProgress);var n=this.camera,i=g["I"].lerp(1,.075,this.interactAnimProgress);if(n.left=-this.camViewWidth/2*i,n.right=this.camViewWidth/2*i,n.top=this.camViewHeight/2*i,n.bottom=-this.camViewHeight/2*i,n.position.y=g["I"].lerp(0,-3.2,this.interactAnimProgress),n.updateProjectionMatrix(),this.audioIndex<=Q.num){var o=Q.startAt[this.audioIndex];this.getAudioTime()>o&&(Rn.play("p3/".concat(this.audioIndex)),this.audioIndex++),this.getAudioTime()>=Q.duration-.01&&this.ctr.nextScene()}this.render(e,t);var r=this.interactAnimProgress;this.processAudio(r),this.lastTime-this.lastInteractTime>this.maxTipGapTime&&H.state.hasInteract[2]&&!this.isInteract&&H.commit("setHasInteract",{index:2,flag:!1}),this.lastTime=e}},{key:"render",value:function(e,t){this.renderPass.camera=this.camera,this.finalComposer.render()}},{key:"camViewHeight",get:function(){var e=.01*this.viewHeight;return e}},{key:"camViewWidth",get:function(){var e=this.camViewHeight,t=e*this.width/this.height;return t}},{key:"resetElementsPos",value:function(){var e=this.camViewWidth-20.48,t=this.elements["LEFT"],n=this.elements["RIGHT"];t&&(t.position.x=-e/2),n&&(n.position.x=e/2)}},{key:"onWindowResize",value:function(){lf(gf(n.prototype),"onWindowResize",this).call(this);var e=this.camera,t=this.camViewHeight,i=this.camViewWidth;e.left=-i/2,e.right=i/2,e.top=t/2,e.bottom=-t/2,e.updateProjectionMatrix(),e.position.z=10,this.resetElementsPos(),this.finalComposer.setSize(this.width,this.height)}},{key:"dispose",value:function(){var e;null===(e=this.man)||void 0===e||e.dispose(),lf(gf(n.prototype),"dispose",this).call(this)}}]),n}(Ki),wf=bf;function xf(e){return xf="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(e)}function kf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tf(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Pf(e,t,n){return t&&Tf(e.prototype,t),n&&Tf(e,n),e}function Sf(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Of(e,t)}function Of(e,t){return Of=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Of(e,t)}function If(e){var t=Cf();return function(){var n,i=Rf(e);if(t){var o=Rf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _f(this,n)}}function _f(e,t){if(t&&("object"===xf(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jf(e)}function jf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cf(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Rf(e){return Rf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Rf(e)}var Mf=function(e){Sf(n,e);var t=If(n);function n(e,i,o){var r;return kf(this,n),r=t.call(this,e),r.hasInteract=!1,r.hasPlayMusic=!1,r.isInteract=!1,r.rayCaster=new g["jb"],r.hitPos=new g["yb"],r.mouse=new g["xb"],r.designSize=new g["xb"](1624,750),r.audioIndex=0,r.animBeat=0,r.ctr=i,r}return Pf(n,[{key:"drawPoster",value:function(){}},{key:"onTouchStart",value:function(e){}},{key:"onTouchMove",value:function(e){}},{key:"onTouchEnd",value:function(e){}},{key:"onMouseDown",value:function(e){}},{key:"onMouseMove",value:function(e){}},{key:"onMouseUp",value:function(){}},{key:"reset",value:function(){var e=this;this.hasInteract=!1,this.hasPlayMusic=!1,this.audioIndex=H.state.clueIndex%ee.num,this.onWindowResize(),this.anim(0,1/60),Rn.load("poster"),setTimeout((function(){var t=ee.startPoint[H.state.clueIndex]||0;Rn.play("poster",t),e.hasPlayMusic=!0}),100)}},{key:"pauseMusic",value:function(){Rn.stop("poster")}},{key:"anim",value:function(e,t){}},{key:"render",value:function(e,t){}},{key:"onWindowResize",value:function(){}}]),n}(Ki),Ef=Mf;function zf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Df(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Af(e,t,n){return t&&Df(e.prototype,t),n&&Df(e,n),e}var Bf=function(){function e(t,n){zf(this,e),this.hasInit=!1,this.pixelRatio=window.devicePixelRatio>2?2:window.devicePixelRatio,this.clock=new g["h"],this.scenes={},this.sceneSeq=["mountain","river","lake","fall","clue","poster"],this.sceneIndex=0,this.androidReducePixelRatio(),this.container=t,this.canvas=n;var i=this.container.clientWidth,o=this.container.clientHeight;this.width=Math.max(i,o),this.height=Math.min(i,o),this.renderer=new g["Cb"]({canvas:this.canvas,alpha:!0,antialias:!0}),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(this.pixelRatio),$i.init(this.renderer),this.inkScene=new Gu(this.renderer,{renderToScene:!1,enableInteract:!1}),H.state.highVersion?(this.scenes["mountain"]=new dr(this.renderer,this,this.inkScene),this.scenes["river"]=new As(this.renderer,this,this.inkScene),this.scenes["lake"]=new ga(this.renderer,this,this.inkScene),this.scenes["fall"]=new La(this.renderer,this,this.inkScene),this.scenes["clue"]=new Co(this.renderer,this),this.scenes["poster"]=new cc(this.renderer,this,this.inkScene)):(this.scenes["mountain"]=new Bc(this.renderer,this,this.inkScene),this.scenes["river"]=new _l(this.renderer,this,this.inkScene),this.scenes["lake"]=new Zl(this.renderer,this,this.inkScene),this.scenes["fall"]=new wf(this.renderer,this,this.inkScene),this.scenes["clue"]=new Co(this.renderer,this),this.scenes["poster"]=new Ef(this.renderer,this,this.inkScene)),this.onWindowResize(),this.canvas.addEventListener("touchstart",this.onTouchStart.bind(this)),this.canvas.addEventListener("touchmove",this.onTouchMove.bind(this)),this.canvas.addEventListener("touchend",this.onTouchEnd.bind(this)),this.canvas.addEventListener("mousedown",this.onMouseDown.bind(this)),this.canvas.addEventListener("mousemove",this.onMouseMove.bind(this)),this.canvas.addEventListener("mouseup",this.onMouseUp.bind(this)),this.canvas.addEventListener("click",this.onClick.bind(this))}return Af(e,[{key:"needRotate",get:function(){return H.state.needRotate}},{key:"currentScene",get:function(){return this.scenes[this.sceneSeq[this.sceneIndex]]}},{key:"currentSceneName",get:function(){return this.sceneSeq[this.sceneIndex]}},{key:"androidReducePixelRatio",value:function(){try{var e=navigator.userAgent,t=e.indexOf("Android")>-1||e.indexOf("Adr")>-1;t&&this.pixelRatio>1.5&&(this.pixelRatio=1.5)}catch(n){}}},{key:"init",value:function(){this.hasInit=!0,this.currentScene.reset()}},{key:"onTouchStart",value:function(e){this.currentScene.onTouchStart(e)}},{key:"onTouchMove",value:function(e){this.currentScene.onTouchMove(e),e.preventDefault()}},{key:"onTouchEnd",value:function(e){this.currentScene.onTouchEnd(e)}},{key:"onMouseDown",value:function(e){this.currentScene.onMouseDown(e)}},{key:"onMouseMove",value:function(e){this.currentScene.onMouseMove(e),e.preventDefault()}},{key:"onMouseUp",value:function(e){this.currentScene.onMouseUp(e)}},{key:"onClick",value:function(e){this.currentScene.onClick(e)}},{key:"nextScene",value:function(){var e=this;this.hasInit=!0,this.currentScene.stopAllAudio(),this.sceneIndex<4&&this.currentScene.dispose(),this.sceneIndex++,2!=this.sceneIndex&&3!=this.sceneIndex||H.commit("setChapter",this.sceneIndex-1),"clue"==this.currentSceneName&&H.commit("setChapter",3),H.commit("setCurrentSceneName",this.currentSceneName),setTimeout((function(){e.currentScene.reset()}),20)}},{key:"swicthPage",value:function(e,t){H.commit("UpdatePageSwitch",{pageName:e,enabled:t})}},{key:"setScene",value:function(e){this.hasInit=!0;var t=this.sceneSeq.indexOf(e);if(!(t<0||t===this.sceneIndex)){if(this.currentScene.stopAllAudio(),"poster"!=e&&"poster"==this.currentSceneName){var n=this.scenes["poster"];n.pauseMusic()}this.sceneIndex=t,this.currentScene.reset(),H.commit("setCurrentSceneName",this.currentSceneName)}}},{key:"showPosterDirect",value:function(){if("poster"===this.currentSceneName)this.currentScene}},{key:"anim",value:function(e){this.hasInit&&this.render(e)}},{key:"render",value:function(e){var t=this.clock.getDelta();t=Math.min(.02,t);var n=this.clock.getElapsedTime();this.currentScene.anim(n,t)}},{key:"onWindowResize",value:function(){var e=this;setTimeout((function(){var t=e.container.clientWidth,n=e.container.clientHeight;e.width=Math.max(t,n),e.height=Math.min(t,n),e.renderer.setSize(e.width,e.height);var i=Object.keys(e.scenes);i.forEach((function(t){e.scenes[t].onWindowResize()}))}),100)}}]),e}(),Ff=n("1fef"),Nf=n.n(Ff);function Uf(e){return Uf="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(e)}function Wf(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function Xf(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){Wf(r,i,o,s,a,"next",e)}function a(e){Wf(r,i,o,s,a,"throw",e)}s(void 0)}))}}function Lf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hf(e,t,n){return t&&$f(e.prototype,t),n&&$f(e,n),e}function qf(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vf(e,t)}function Vf(e,t){return Vf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vf(e,t)}function Gf(e){var t=Qf();return function(){var n,i=Jf(e);if(t){var o=Jf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Kf(this,n)}}function Kf(e,t){if(t&&("object"===Uf(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yf(e)}function Yf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qf(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Jf(e){return Jf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jf(e)}var Zf=function(e){qf(n,e);var t=Gf(n);function n(){var e;return Lf(this,n),e=t.apply(this,arguments),e.animId=0,e}return Hf(n,[{key:"canvas",get:function(){return this.$refs.canvas}},{key:"mounted",value:function(){var e=Xf(y.a.mark((function e(){return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.ctr=new Bf(this.$el,this.canvas),this.anim(0);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"anim",value:function(e){var t,n;null===(t=this.stats)||void 0===t||t.begin(),this.ctr.anim(e),null===(n=this.stats)||void 0===n||n.end(),this.animId=requestAnimationFrame(this.anim)}},{key:"initStats",value:function(){this.stats=new Nf.a,this.stats.showPanel(0),document.body.appendChild(this.stats.dom)}},{key:"init",value:function(){this.ctr.init()}},{key:"setScene",value:function(e){this.ctr.setScene(e)}},{key:"nextScene",value:function(){this.ctr.nextScene()}},{key:"showPosterDirect",value:function(){this.ctr.showPosterDirect()}},{key:"reset",value:function(){}},{key:"onWindowResize",value:function(){this.ctr.onWindowResize()}}]),n}(a["c"]);Zf=Object(s["a"])([Object(a["a"])({})],Zf);var eh=Zf,th=eh,nh=(n("ae42"),Object(Te["a"])(th,Di,Ai,!1,null,"4837d378",null)),ih=nh.exports,oh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fullscreen interact_tip0_wrapper"},[n("div",{ref:"tip",staticClass:"tip_containner fullscreen"},[n("div",{staticClass:"tip_wrapper"}),n("div",{staticClass:"fullscreen wave"},e._l([0,1,2,3],(function(e){return n("div",{key:e,staticClass:"circle_wrapper",style:{transform:"rotate("+45*e+"deg)"}},[n("div",{class:"circle circle"+e})])})),0),n("div",{staticClass:"tip_text"})]),n("Question",{ref:"question",attrs:{text:"何为泛？"},on:{hide:e.showTipAnim}}),e.showAnswer?n("Answer",{ref:"answer",staticClass:"answer",style:{opacity:e.riverStoneIndex<4?1:0},attrs:{text:e.answerTexts}}):e._e()],1)},rh=[],sh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fullscreen question_wrapper",style:{opacity:e.isShow?1:0,pointerEvents:e.isShow?"all":"none"}},[n("div",{staticClass:"tip_wrapper"},[n("p",{staticClass:"q_text"},e._l(e.text,(function(t,i){return n("span",{key:t+i,ref:"t",refInFor:!0},[e._v(e._s(t))])})),0)])])},ah=[];function uh(e){return uh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(e)}function ch(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function lh(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){ch(r,i,o,s,a,"next",e)}function a(e){ch(r,i,o,s,a,"throw",e)}s(void 0)}))}}function fh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ph(e,t,n){return t&&hh(e.prototype,t),n&&hh(e,n),e}function mh(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dh(e,t)}function dh(e,t){return dh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},dh(e,t)}function vh(e){var t=bh();return function(){var n,i=wh(e);if(t){var o=wh(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return yh(this,n)}}function yh(e,t){if(t&&("object"===uh(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gh(e)}function gh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bh(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function wh(e){return wh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wh(e)}var xh=function(e){mh(n,e);var t=vh(n);function n(){var e;return fh(this,n),e=t.apply(this,arguments),e.isShow=!0,e}return ph(n,[{key:"mounted",value:function(){var e=lh(y.a.mark((function e(){var t=this;return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ne["a"].fromTo(this.$refs.t,{opacity:0},{opacity:1,duration:1,stagger:.2}),setTimeout((function(){t.hide()}),2500);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hide",value:function(){var e=this;this.isShow=!1,setTimeout((function(){e.$emit("hide")}),500)}},{key:"anim",value:function(e){}}]),n}(a["c"]);Object(s["a"])([Object(a["b"])()],xh.prototype,"text",void 0),xh=Object(s["a"])([Object(a["a"])({})],xh);var kh=xh,Th=kh,Ph=(n("1c6b"),Object(Te["a"])(Th,sh,ah,!1,null,"164bb06a",null)),Sh=Ph.exports,Oh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fullscreen answer_wrapper",style:{opacity:e.isShow?1:0,pointerEvents:"none"}},[n("div",{staticClass:"a_text"},e._l(e.text,(function(t,i){return n("p",{key:t+i},e._l(t,(function(t,i){return n("span",{key:t+i,ref:"t",refInFor:!0},[e._v(e._s(t))])})),0)})),0)])},Ih=[];function _h(e){return _h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(e)}function jh(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function Ch(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){jh(r,i,o,s,a,"next",e)}function a(e){jh(r,i,o,s,a,"throw",e)}s(void 0)}))}}function Rh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Eh(e,t,n){return t&&Mh(e.prototype,t),n&&Mh(e,n),e}function zh(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dh(e,t)}function Dh(e,t){return Dh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Dh(e,t)}function Ah(e){var t=Nh();return function(){var n,i=Uh(e);if(t){var o=Uh(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Bh(this,n)}}function Bh(e,t){if(t&&("object"===_h(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fh(e)}function Fh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nh(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Uh(e){return Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Uh(e)}var Wh=function(e){zh(n,e);var t=Ah(n);function n(){var e;return Rh(this,n),e=t.apply(this,arguments),e.isShow=!0,e}return Eh(n,[{key:"mounted",value:function(){var e=Ch(y.a.mark((function e(){return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ne["a"].fromTo(this.$el,{opacity:0},{opacity:1}),ne["a"].fromTo(this.$refs.t,{opacity:0},{opacity:1,duration:2,stagger:.2});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hide",value:function(){this.isShow=!1}},{key:"anim",value:function(e){}}]),n}(a["c"]);Object(s["a"])([Object(a["b"])()],Wh.prototype,"text",void 0),Wh=Object(s["a"])([Object(a["a"])({})],Wh);var Xh=Wh,Lh=Xh,$h=(n("8b09"),Object(Te["a"])(Lh,Oh,Ih,!1,null,"1e7032b6",null)),Hh=$h.exports;function qh(e){return qh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(e)}function Vh(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function Gh(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){Vh(r,i,o,s,a,"next",e)}function a(e){Vh(r,i,o,s,a,"throw",e)}s(void 0)}))}}function Kh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qh(e,t,n){return t&&Yh(e.prototype,t),n&&Yh(e,n),e}function Jh(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zh(e,t)}function Zh(e,t){return Zh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Zh(e,t)}function ep(e){var t=ip();return function(){var n,i=op(e);if(t){var o=op(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return tp(this,n)}}function tp(e,t){if(t&&("object"===qh(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return np(e)}function np(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ip(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function op(e){return op=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},op(e)}var rp=function(e){Jh(n,e);var t=ep(n);function n(){var e;return Kh(this,n),e=t.apply(this,arguments),e.showAnswer=!1,e.answerTexts=["泛音","似山间涧流","叮咚潺潺","轻盈跳跃"],e}return Qh(n,[{key:"riverStoneIndex",get:function(){return this.$store.state.riverStoneIndex}},{key:"hasInteract",get:function(){return this.$store.state.hasInteract[0]}},{key:"onHasInteractChange",value:function(e){e?(this.hideTipAnim(),this.showAnswer=!0):this.showTipAnim()}},{key:"showTipAnim",value:function(){ne["a"].to(this.$refs.tip,{opacity:1})}},{key:"hideTipAnim",value:function(){ne["a"].to(this.$refs.tip,{opacity:0,delay:.5})}},{key:"mounted",value:function(){var e=Gh(y.a.mark((function e(){return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"anim",value:function(e){}}]),n}(a["c"]);Object(s["a"])([Object(a["d"])("hasInteract",{deep:!0})],rp.prototype,"onHasInteractChange",null),rp=Object(s["a"])([Object(a["a"])({components:{Question:Sh,Answer:Hh}})],rp);var sp=rp,ap=sp,up=(n("3a9f"),Object(Te["a"])(ap,oh,rh,!1,null,"22cfffda",null)),cp=up.exports,lp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fullscreen interact_top0_wrapper"},[n("div",{ref:"tip",staticClass:"tip_containner fullscreen"},[n("div",{staticClass:"tip_wrapper"}),e._l([0,1,2,3],(function(e){return n("div",{key:e,class:"bubble bubble"+e})})),n("div",{staticClass:"tip_text"})],2),n("Question",{ref:"question",attrs:{text:"何为进？"},on:{hide:e.showTipAnim}}),e.showAnswer?n("Answer",{ref:"answer",attrs:{text:e.answerTexts}}):e._e()],1)},fp=[];function hp(e){return hp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(e)}function pp(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function mp(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){pp(r,i,o,s,a,"next",e)}function a(e){pp(r,i,o,s,a,"throw",e)}s(void 0)}))}}function dp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vp(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yp(e,t,n){return t&&vp(e.prototype,t),n&&vp(e,n),e}function gp(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bp(e,t)}function bp(e,t){return bp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bp(e,t)}function wp(e){var t=Tp();return function(){var n,i=Pp(e);if(t){var o=Pp(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return xp(this,n)}}function xp(e,t){if(t&&("object"===hp(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kp(e)}function kp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tp(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Pp(e){return Pp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pp(e)}var Sp=function(e){gp(n,e);var t=wp(n);function n(){var e;return dp(this,n),e=t.apply(this,arguments),e.showAnswer=!1,e.answerTexts=["进为古琴指法","余韵悠扬","如静水流深","空山鸣响"],e}return yp(n,[{key:"hasInteract",get:function(){return this.$store.state.hasInteract[1]}},{key:"onHasInteractChange",value:function(e){e?(this.hideTipAnim(),this.showAnswer=!0):this.showTipAnim()}},{key:"showTipAnim",value:function(){ne["a"].to(this.$refs.tip,{opacity:1})}},{key:"hideTipAnim",value:function(){ne["a"].to(this.$refs.tip,{opacity:0,delay:.5})}},{key:"mounted",value:function(){var e=mp(y.a.mark((function e(){return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"anim",value:function(e){}}]),n}(a["c"]);Object(s["a"])([Object(a["d"])("hasInteract",{deep:!0})],Sp.prototype,"onHasInteractChange",null),Sp=Object(s["a"])([Object(a["a"])({components:{Question:Sh,Answer:Hh}})],Sp);var Op=Sp,Ip=Op,_p=(n("ce9f"),Object(Te["a"])(Ip,lp,fp,!1,null,"557d92d0",null)),jp=_p.exports,Cp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fullscreen interact_top0_wrapper"},[n("div",{ref:"tip",staticClass:"tip_containner fullscreen"},[n("div",{staticClass:"tip_wrapper"}),n("div",{staticClass:"tip_text"}),n("div",{staticClass:"tip_hand"})]),n("Question",{ref:"question",attrs:{text:"何为滚拂？"},on:{hide:e.showTipAnim}}),e.showAnswer?n("Answer",{ref:"answer",attrs:{text:e.answerTexts}}):e._e()],1)},Rp=[];function Mp(e){return Mp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(e)}function Ep(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function zp(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){Ep(r,i,o,s,a,"next",e)}function a(e){Ep(r,i,o,s,a,"throw",e)}s(void 0)}))}}function Dp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ap(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bp(e,t,n){return t&&Ap(e.prototype,t),n&&Ap(e,n),e}function Fp(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Np(e,t)}function Np(e,t){return Np=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Np(e,t)}function Up(e){var t=Lp();return function(){var n,i=$p(e);if(t){var o=$p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Wp(this,n)}}function Wp(e,t){if(t&&("object"===Mp(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xp(e)}function Xp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lp(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function $p(e){return $p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$p(e)}var Hp=function(e){Fp(n,e);var t=Up(n);function n(){var e;return Dp(this,n),e=t.apply(this,arguments),e.showAnswer=!1,e.answerTexts=["滚拂","汹涌奔腾","如瀑布飞流","汇入江海"],e}return Bp(n,[{key:"hasInteract",get:function(){return this.$store.state.hasInteract[2]}},{key:"onHasInteractChange",value:function(e){e?(this.hideTipAnim(),this.showAnswer=!0):this.showTipAnim()}},{key:"showTipAnim",value:function(){ne["a"].to(this.$refs.tip,{opacity:1})}},{key:"hideTipAnim",value:function(){ne["a"].to(this.$refs.tip,{opacity:0,delay:.5})}},{key:"mounted",value:function(){var e=zp(y.a.mark((function e(){return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"anim",value:function(e){}}]),n}(a["c"]);Object(s["a"])([Object(a["d"])("hasInteract",{deep:!0})],Hp.prototype,"onHasInteractChange",null),Hp=Object(s["a"])([Object(a["a"])({components:{Question:Sh,Answer:Hh}})],Hp);var qp=Hp,Vp=qp,Gp=(n("f318"),Object(Te["a"])(Vp,Cp,Rp,!1,null,"8551125a",null)),Kp=Gp.exports;function Yp(e){return Yp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(e)}function Qp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jp(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zp(e,t,n){return t&&Jp(e.prototype,t),n&&Jp(e,n),e}function em(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tm(e,t)}function tm(e,t){return tm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},tm(e,t)}function nm(e){var t=rm();return function(){var n,i=sm(e);if(t){var o=sm(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return im(this,n)}}function im(e,t){if(t&&("object"===Yp(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return om(e)}function om(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function sm(e){return sm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},sm(e)}var am=function(e){em(n,e);var t=nm(n);function n(){var e;return Qp(this,n),e=t.apply(this,arguments),e.isShowPrelude=!1,e.isShowTip=!1,e.audoPlayHander=null,e.timeConfig={prelude0:{start:.1,end:3.7},prelude1:{start:4.1,end:7.7},prelude2:{start:8.1,end:11.7},prelude3:{start:12.1,end:19.7}},e}return Zp(n,[{key:"isDEV",get:function(){return this.$store.state.isDEV}},{key:"videoSrc",get:function(){return this.isDEV?"/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/videos/prelude.mp4":mediaURLData[8487]}},{key:"chapterIndex",get:function(){return this.$store.state.interactChapterIndex}},{key:"preludeVideo",get:function(){return this.$refs.preludeVideo}},{key:"preludeName",get:function(){return"prelude".concat(this.chapterIndex)}},{key:"currentSceneName",get:function(){return this.$store.state.currentSceneName}},{key:"bgColorDark",get:function(){return"river"===this.currentSceneName||"fall"===this.currentSceneName}},{key:"onChapterChange",value:function(e){this.showPrelude(e)}},{key:"mounted",value:function(){this.initVideo(),this.audoPlayHander=this.autoPlay.bind(this),document.addEventListener("touchstart",this.audoPlayHander)}},{key:"initVideo",value:function(){var e=this;this.player=new MMD.VideoPlayer({videoElement:this.preludeVideo,src:this.videoSrc,loop:!1,muted:!0,tryMultipleVideoPlayAtTheSameTime:!1,timesParam:[{name:"preludeEnd0",time:3.7},{name:"preludeEnd1",time:7.7},{name:"preludeEnd2",time:11.7},{name:"preludeEnd3",time:19.7}],onTimes:function(t){e.chapterIndex<0||e.hidePrelude()},onStart:function(){},onEnd:function(){}})}},{key:"hidePrelude",value:function(){var e=this;this.isShowTip=!0,this.player.pause(),ne["a"].to(this.preludeVideo,{opacity:0,onComplete:function(){e.isShowPrelude=!1,setTimeout((function(){e.chapterIndex<e.timeConfig.length-1&&(e.player.currentTimeAndPause=e.timeConfig["prelude".concat(e.chapterIndex+1)].start)}),20)}}),"prelude3"===this.preludeName&&ne["a"].to(this.$el,{opacity:0,onComplete:function(){e.$emit("hide")}}),this.$store.state.pageSwitch.openning&&this.$store.commit("UpdatePageSwitch",{pageName:"openning",enabled:!1})}},{key:"showPrelude",value:function(e){this.isShowTip=!1;var t="prelude".concat(e);0!==e&&Rn.play(t),this.player.currentTimeAndPlay=this.timeConfig[t].start,ne["a"].set(this.preludeVideo,{opacity:1}),this.isShowPrelude=!0,S("btn","showPrelude","展示大字幕-".concat(t))}},{key:"autoPlay",value:function(){var e=this;this.player.play(),this.$nextTick((function(){document.removeEventListener("touchstart",e.audoPlayHander),e.player.pause()}))}},{key:"skip",value:function(){"prelude3"!==this.preludeName&&(S("btn","skipScene","跳过交互场景-".concat(this.currentSceneName)),this.$emit("skip"))}}]),n}(a["c"]);Object(s["a"])([Object(a["d"])("chapterIndex")],am.prototype,"onChapterChange",null),am=Object(s["a"])([Object(a["a"])({components:{Renderer:ih,InteractTip0:cp,InteractTip1:jp,InteractTip2:Kp}})],am);var um=am,cm=um,lm=(n("f92a"),Object(Te["a"])(cm,Ei,zi,!1,null,"4b006a1d",null)),fm=lm.exports,hm=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loading_page fullscreen"},[n("canvas",{ref:"canvasBg",staticClass:"fullscreen"}),n("div",{class:"progress_wrapper fullscreen "+(e.showTone?"hide":"")},[n("div",{staticClass:"progress fzljd"},[e._v(" "+e._s(e.formattedProgress)),n("span",{staticClass:"percent"},[e._v("%")])])]),n("div",{class:"tone_wrapper fullscreen "+(e.showTone?"":"hide")},[e.showTone?n("ClickTip",{staticClass:"click_tip"}):e._e(),n("div",{staticClass:"tone_parent"},[n("div",{ref:"tone",staticClass:"tone",on:{click:e.toOpenning}})])],1),n("div",{staticClass:"sound_tip",style:{opacity:e.showTone?0:.7}},[e._v("请打开声音体验更佳")]),n("div",{staticClass:"progress_tip tip fzss"},e._l(e.loadingText,(function(t,i){return n("span",{key:t+i+e.loadTextIndex,ref:"loadingChar",refInFor:!0},[e._v(e._s(t))])})),0)])},pm=[],mm=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"click_tip_wrapper"},[n("div",{staticClass:"wave"},e._l([0,1,2],(function(e){return n("div",{key:e,staticClass:"circle_wrapper",style:{transform:"rotate("+45*e+"deg)"}},[n("div",{class:"circle circle"+e})])})),0),n("div",{staticClass:"hand"})])},dm=[];function vm(e){return vm="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vm(e)}function ym(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function gm(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){ym(r,i,o,s,a,"next",e)}function a(e){ym(r,i,o,s,a,"throw",e)}s(void 0)}))}}function bm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xm(e,t,n){return t&&wm(e.prototype,t),n&&wm(e,n),e}function km(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tm(e,t)}function Tm(e,t){return Tm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tm(e,t)}function Pm(e){var t=Im();return function(){var n,i=_m(e);if(t){var o=_m(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Sm(this,n)}}function Sm(e,t){if(t&&("object"===vm(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Om(e)}function Om(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Im(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _m(e){return _m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_m(e)}var jm=function(e){km(n,e);var t=Pm(n);function n(){return bm(this,n),t.apply(this,arguments)}return xm(n,[{key:"hasInteract",get:function(){return this.$store.state.hasInteract[1]}},{key:"onHasInteractChange",value:function(){ne["a"].to(this.$el,{opacity:0})}},{key:"mounted",value:function(){var e=gm(y.a.mark((function e(){return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ne["a"].to(this.$el,{opacity:1,duration:1,delay:.6});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"anim",value:function(e){}}]),n}(a["c"]);Object(s["a"])([Object(a["d"])("hasInteract",{deep:!0})],jm.prototype,"onHasInteractChange",null),jm=Object(s["a"])([Object(a["a"])({})],jm);var Cm=jm,Rm=Cm,Mm=(n("b917"),Object(Te["a"])(Rm,mm,dm,!1,null,"4925165e",null)),Em=Mm.exports;function zm(e){return zm="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zm(e)}function Dm(e,t,n,i,o,r,s){try{var a=e[r](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(i,o)}function Am(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){Dm(r,i,o,s,a,"next",e)}function a(e){Dm(r,i,o,s,a,"throw",e)}s(void 0)}))}}function Bm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nm(e,t,n){return t&&Fm(e.prototype,t),n&&Fm(e,n),e}function Um(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wm(e,t)}function Wm(e,t){return Wm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wm(e,t)}function Xm(e){var t=Hm();return function(){var n,i=qm(e);if(t){var o=qm(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Lm(this,n)}}function Lm(e,t){if(t&&("object"===zm(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $m(e)}function $m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function qm(e){return qm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qm(e)}var Vm=function(e){Um(n,e);var t=Xm(n);function n(){var e;return Bm(this,n),e=t.apply(this,arguments),e.bgWidth=window.innerWidth,e.bgSize=new g["xb"](2e3,1e3),e.designSize=new g["xb"](1624,750),e.loadingTexts=["这些奇怪的文字是古琴的琴谱——减字谱","点击减字音符，解锁周年庆皮肤的秘密"],e.lastTime=-1,e.progress=0,e.animId=0,e.showTone=!1,e.wordOpacity=0,e.hasLoadBg=!1,e.bgImgs={center:{src:"/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/images/center.png",img:null},right:{src:"/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/images/wordRight.png",img:null},words:{src:"/game.gtimg.cn/images/yxzj/act/6749/a20210927pf/images/words.png",img:null}},e}return Nm(n,[{key:"loadTextIndex",get:function(){return Math.floor(this.progress*(this.loadingTexts.length-1))}},{key:"loadingText",get:function(){return this.loadingTexts[this.loadTextIndex]}},{key:"onLoadingTextChange",value:function(){var e=this;this.$nextTick((function(){ne["a"].fromTo(e.$refs.loadingChar,{opacity:0},{opacity:1,y:0,duration:.6,stagger:.05})}))}},{key:"onPageSizeChange",value:function(){this.drawBg()}},{key:"targetProgress",get:function(){return this.$store.getters.loadProgress}},{key:"formattedProgress",get:function(){return Math.round(100*this.progress)}},{key:"tone",get:function(){return this.$refs.tone}},{key:"canvasBg",get:function(){return this.$refs.canvasBg}},{key:"mounted",value:function(){var e="1"==D("bres");e||(this.loadBgImgs(),this.animId=requestAnimationFrame(this.anim))}},{key:"loadBgImgs",value:function(){var e=Am(y.a.mark((function e(){var t,n,i=this;return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],n=Object.keys(this.bgImgs),n.forEach(function(){var e=Am(y.a.mark((function e(n){return y.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.push(_(i.bgImgs[n].src,(function(e){i.bgImgs[n].img=e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(t);case 5:this.hasLoadBg=!0,this.$store.commit("setStartLoad",!0),this.drawBg(),S("loading","loadstart","开始加载");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"drawBg",value:function(){if(this.hasLoadBg){var e=window.devicePixelRatio>2?2:window.devicePixelRatio,t=this.pageSize.x*e,n=this.pageSize.y*e,i=.07*n,o=n-2*i,r=t-2*i;this.canvasBg.width=t,this.canvasBg.height=n,void 0===this.ctx&&(this.ctx=this.canvasBg.getContext("2d"));var s=o/654,a=this.bgImgs.center.img;this.ctx.drawImage(a,0,0,a.width,a.height,t/2-a.width*s/2,i,a.width*s,o);var u=this.bgImgs.right.img;this.ctx.drawImage(u,0,0,u.width,u.height,t-i-u.width*s,i,u.width*s,o),this.drawWords(this.bgImgs.words.img,t,s,r,o,a,u,i,1)}}},{key:"drawWords",value:function(e,t,n,i,o,r,s,a,u){for(var c=8,l=e.width/c*n,f=i/2-r.width*n/2,h=Math.round(f/l),p=(f-h*l)/h,m=a,d=0;d<h;d++){var v=e,y=d%c;this.ctx.drawImage(v,v.width*y/c,0,v.width/c,v.height,m,a,l,o),m+=l+p}var g=i/2-r.width*n/2-s.width*n,b=Math.round(g/l),w=(g-b*l)/b;m=t/2+r.width*n/2+w;for(var x=0;x<b;x++){var k=e,T=x%c;this.ctx.drawImage(k,k.width*T/c,0,k.width/c,k.height,m,a,l,o),m+=l+w}}},{key:"anim",value:function(e){this.animId=requestAnimationFrame(this.anim);var t=0;if(this.lastTime<0)this.lastTime=.001*e;else{var n=.001*e;t=n-this.lastTime,this.lastTime=n}this.progress+=Math.min(.06*(this.targetProgress-this.progress),t/2),this.progress>.99&&1===this.targetProgress&&(this.progress=1,cancelAnimationFrame(this.animId),this.onload())}},{key:"onload",value:function(){var e=this;setTimeout((function(){e.showTone=!0,e.tone.classList.add("tone_anim")}),500)}},{key:"toOpenning",value:function(){this.$emit("load")}}]),n}(a["c"]);Object(s["a"])([Object(a["d"])("loadingText")],Vm.prototype,"onLoadingTextChange",null),Object(s["a"])([Object(a["b"])()],Vm.prototype,"pageSize",void 0),Object(s["a"])([Object(a["d"])("pageSize")],Vm.prototype,"onPageSizeChange",null),Vm=Object(s["a"])([Object(a["a"])({components:{ClickTip:Em}})],Vm);var Gm=Vm,Km=Gm,Ym=(n("9f24"),Object(Te["a"])(Km,hm,pm,!1,null,"7009dd86",null)),Qm=Ym.exports,Jm=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"welfare_wrapper fullscreen"},[e.dialogSwicth===e.DIALOG.WELFARE?n("div",{staticClass:"fullscreen welfare_get"},[n("div",{staticClass:"welfare_get_dialog"},[n("div",{staticClass:"close_bt",on:{click:e.close}})]),n("div",{staticClass:"get_bt",on:{click:e.get}})]):e._e(),e.dialogSwicth===e.DIALOG.HASGET?n("div",{staticClass:"fullscreen welfare_hasget"},[n("div",{staticClass:"welfare_hasget_dialog"},[n("div",{staticClass:"close_bt",on:{click:e.close}})]),n("div",{staticClass:"back_bt",on:{click:e.close}})]):e._e(),e.dialogSwicth===e.DIALOG.SUCCESS?n("div",{staticClass:"fullscreen welfare_success"},[n("div",{staticClass:"welfare_success_dialog"},[n("div",{staticClass:"close_bt",on:{click:e.close}})]),n("div",{staticClass:"back_bt",on:{click:e.close}})]):e._e(),e.dialogSwicth===e.DIALOG.FAIL?n("div",{staticClass:"fullscreen welfare_fail"},[n("div",{staticClass:"welfare_fail_dialog"},[n("div",{staticClass:"close_bt",on:{click:e.close}})]),n("div",{staticClass:"back_bt",on:{click:e.close}})]):e._e(),e.dialogSwicth===e.DIALOG.EXPIRED?n("div",{staticClass:"fullscreen welfare_expired"},[n("div",{staticClass:"welfare_expired_dialog"},[n("div",{staticClass:"close_bt",on:{click:e.close}})]),n("div",{staticClass:"back_bt",on:{click:e.close}})]):e._e(),e.dialogSwicth===e.DIALOG.WECHAT?n("div",{staticClass:"fullscreen welfare_wechat"},[n("div",{staticClass:"welfare_wechat_dialog"},[n("div",{staticClass:"close_bt",on:{click:e.close}})]),n("div",{staticClass:"back_bt",on:{click:e.close}})]):e._e(),e.dialogSwicth===e.DIALOG.QQ?n("div",{staticClass:"fullscreen welfare_qq"},[n("div",{staticClass:"welfare_qq_dialog"},[n("div",{staticClass:"close_bt",on:{click:e.close}})]),n("div",{staticClass:"back_bt",on:{click:e.close}})]):e._e(),n("BindDialog",{class:"bind_dialog "+(e.dialogSwicth===e.DIALOG.BIND?"show":"hide"),on:{close:e.close}}),e.dialogSwicth===e.DIALOG.LOGIN?n("LoginDialog",{on:{close:e.close,showWechatMsg:e.showWechatMsg,showQQMsg:e.showQQMsg}}):e._e(),n("keep-alive",[e.showAlert?n("AlertDialog",{attrs:{msg:e.msg,callback:e.alertCallback},on:{close:e.closeAlert}}):e._e()],1)],1)},Zm=[],ed=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bind_wrapper fullscreen"},[n("div",{staticClass:"bind_bg",attrs:{id:"input_wrapper"}},[n("div",{staticClass:"close_bt",on:{click:e.close}}),n("div",{staticClass:"bind_bt",attrs:{id:"bind_bt"},on:{click:e.bind}}),e._m(0)])])},td=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input_wrapper"},[n("div",{staticClass:"area_select_wrapper select_wrapper",attrs:{id:"area_select_wrapper"}},[n("select",{staticClass:"my_select",attrs:{id:"area_select"}},[n("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("请选择您的系统")])]),n("div",{staticClass:"select_down_icon"})]),n("div",{staticClass:"server_select_wrapper select_wrapper",attrs:{id:"server_select_wrapper"}},[n("select",{staticClass:"my_select",attrs:{id:"server_select"}},[n("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("请选择您的大区")])]),n("div",{staticClass:"select_down_icon"})]),n("div",{staticClass:"role_select_wrapper select_wrapper",attrs:{id:"role_select_wrapper"}},[n("select",{staticClass:"my_select",attrs:{id:"role_select"}},[n("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("请选择您的角色")])]),n("div",{staticClass:"select_down_icon"})]),n("div",{staticClass:"warn_text ",attrs:{id:"warn_tip"}})])}];function nd(e){return nd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nd(e)}function id(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function od(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rd(e,t,n){return t&&od(e.prototype,t),n&&od(e,n),e}function sd(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ad(e,t)}function ad(e,t){return ad=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ad(e,t)}function ud(e){var t=fd();return function(){var n,i=hd(e);if(t){var o=hd(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return cd(this,n)}}function cd(e,t){if(t&&("object"===nd(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ld(e)}function ld(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fd(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function hd(e){return hd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},hd(e)}var pd=function(e){sd(n,e);var t=ud(n);function n(){return id(this,n),t.apply(this,arguments)}return rd(n,[{key:"mounted",value:function(){}},{key:"close",value:function(){this.$emit("close")}},{key:"bind",value:function(){S("btn","bindRole","")}}]),n}(a["c"]);pd=Object(s["a"])([Object(a["a"])({components:{}})],pd);var md=pd,dd=md,vd=(n("014c"),Object(Te["a"])(dd,ed,td,!1,null,"5c31cfff",null)),yd=vd.exports,gd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login_wrapper fullscreen"},[n("div",{staticClass:"login_bg"},[n("div",{staticClass:"close_bt",on:{click:e.close}}),n("div",{ref:"qqBt",staticClass:"qq_bt",attrs:{"data-clipboard-text":"https://pvp.qq.com/act/6749/a20210927pf/index.html"},on:{click:e.toQQ}}),n("div",{ref:"wechatBt",staticClass:"wechat_bt",attrs:{"data-clipboard-text":"https://pvp.qq.com/act/6749/a20210927pf/index.html"},on:{click:e.toWechat}})])])},bd=[],wd=n("7094"),xd=n.n(wd);function kd(e){return kd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(e)}function Td(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pd(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Sd(e,t,n){return t&&Pd(e.prototype,t),n&&Pd(e,n),e}function Od(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Id(e,t)}function Id(e,t){return Id=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Id(e,t)}function _d(e){var t=Rd();return function(){var n,i=Md(e);if(t){var o=Md(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return jd(this,n)}}function jd(e,t){if(t&&("object"===kd(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cd(e)}function Cd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rd(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Md(e){return Md=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Md(e)}var Ed=function(e){Od(n,e);var t=_d(n);function n(){return Td(this,n),t.apply(this,arguments)}return Sd(n,[{key:"mounted",value:function(){ne["a"].fromTo(this.$el,{opacity:0},{opacity:1}),new xd.a(this.$refs.qqBt),new xd.a(this.$refs.wechatBt)}},{key:"close",value:function(){var e=this;ne["a"].fromTo(this.$el,{opacity:1},{opacity:0,duration:.3,onComplete:function(){e.$emit("close")}})}},{key:"toQQ",value:function(){S("btn","login","toQQ"),this.$emit("showQQMsg")}},{key:"toWechat",value:function(){S("btn","login","toWechat"),this.$emit("showWechatMsg")}}]),n}(a["c"]);Ed=Object(s["a"])([Object(a["a"])({components:{}})],Ed);var zd=Ed,Dd=zd,Ad=(n("0574"),Object(Te["a"])(Dd,gd,bd,!1,null,"a2e5955a",null)),Bd=Ad.exports,Fd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"alert_wrapper fullscreen"},[n("div",{staticClass:"alert_bg"},[n("p",{staticClass:"msg"},[e._v(e._s(e.msg))])]),n("div",{staticClass:"back_bt",on:{click:e.close}})])},Nd=[];function Ud(e){return Ud="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(e)}function Wd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xd(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ld(e,t,n){return t&&Xd(e.prototype,t),n&&Xd(e,n),e}function $d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hd(e,t)}function Hd(e,t){return Hd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Hd(e,t)}function qd(e){var t=Kd();return function(){var n,i=Yd(e);if(t){var o=Yd(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Vd(this,n)}}function Vd(e,t){if(t&&("object"===Ud(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gd(e)}function Gd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kd(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Yd(e){return Yd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Yd(e)}var Qd=function(e){$d(n,e);var t=qd(n);function n(){return Wd(this,n),t.apply(this,arguments)}return Ld(n,[{key:"mounted",value:function(){this.show()}},{key:"activated",value:function(){this.show()}},{key:"show",value:function(){ne["a"].fromTo(this.$el,{opacity:0},{opacity:1})}},{key:"close",value:function(){var e=this;this.callback&&this.callback(),ne["a"].fromTo(this.$el,{opacity:1},{opacity:0,duration:.3,onComplete:function(){e.$emit("close")}})}}]),n}(a["c"]);Object(s["a"])([Object(a["b"])()],Qd.prototype,"msg",void 0),Object(s["a"])([Object(a["b"])()],Qd.prototype,"callback",void 0),Qd=Object(s["a"])([Object(a["a"])({components:{}})],Qd);var Jd=Qd,Zd=Jd,ev=(n("b4c7"),Object(Te["a"])(Zd,Fd,Nd,!1,null,"562eb600",null)),tv=ev.exports;function nv(e){return nv="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nv(e)}function iv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ov(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rv(e,t,n){return t&&ov(e.prototype,t),n&&ov(e,n),e}function sv(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&av(e,t)}function av(e,t){return av=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},av(e,t)}function uv(e){var t=fv();return function(){var n,i=hv(e);if(t){var o=hv(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return cv(this,n)}}function cv(e,t){if(t&&("object"===nv(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lv(e)}function lv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fv(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function hv(e){return hv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},hv(e)}var pv=function(e){sv(n,e);var t=uv(n);function n(){var e;return iv(this,n),e=t.apply(this,arguments),e.DIALOG={WELFARE:0,BIND:1,LOGIN:2,SUCCESS:3,HASGET:4,FAIL:5,EXPIRED:6,WECHAT:7,QQ:8},e.dialogSwicth=e.DIALOG.WELFARE,e.showAlert=!1,e.msg="",e.alertCallback=null,e}return rv(n,[{key:"hasGetWelfare",get:function(){return this.$store.state.hasGetWelfare}},{key:"mounted",value:function(){}},{key:"alertTips",value:function(e,t){this.showAlert=!0,this.msg=e,this.alertCallback=t||null}},{key:"showWechatMsg",value:function(){this.showAlert=!1,this.dialogSwicth=this.DIALOG.WECHAT}},{key:"showQQMsg",value:function(){this.showAlert=!1,this.dialogSwicth=this.DIALOG.QQ}},{key:"showDialog",value:function(e){this.dialogSwicth=e}},{key:"closeAlert",value:function(){this.showAlert=!1,this.close()}},{key:"close",value:function(){this.$emit("close")}},{key:"showWelfare",value:function(){this.dialogSwicth=this.DIALOG.WELFARE}},{key:"get",value:function(){window.checkLogin()}}]),n}(a["c"]);pv=Object(s["a"])([Object(a["a"])({components:{BindDialog:yd,LoginDialog:Bd,AlertDialog:tv}})],pv);var mv=pv,dv=mv,vv=(n("a0bf"),Object(Te["a"])(dv,Jm,Zm,!1,null,"51a3b55e",null)),yv=vv.exports;function gv(e){return gv="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gv(e)}function bv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xv(e,t,n){return t&&wv(e.prototype,t),n&&wv(e,n),e}function kv(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tv(e,t)}function Tv(e,t){return Tv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tv(e,t)}function Pv(e){var t=Iv();return function(){var n,i=_v(e);if(t){var o=_v(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Sv(this,n)}}function Sv(e,t){if(t&&("object"===gv(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ov(e)}function Ov(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Iv(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _v(e){return _v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_v(e)}var jv=function(e){kv(n,e);var t=Pv(n);function n(){var e;return bv(this,n),e=t.apply(this,arguments),e.intervalId=0,e.width=window.innerWidth,e.height=window.innerHeight,e.showDialog=!1,e}return xv(n,[{key:"startLoad",get:function(){return this.$store.state.startLoad}},{key:"pageSize",get:function(){return new g["xb"](this.width,this.height)}},{key:"pageSwitch",get:function(){return this.$store.state.pageSwitch}},{key:"needRotate",get:function(){return this.$store.state.needRotate}},{key:"openningPage",get:function(){return this.$refs.openningPage}},{key:"mounted",value:function(){console.log("App mounted"),this.detectRotate(),this.intervalId=setInterval(this.detectRotate.bind(this),200),window.addEventListener("resize",this.detectRotate.bind(this)),window.showDialog=this.showDialogFunc.bind(this),window.alertTips=this.alertTips.bind(this);var e="1"==D("bres");e&&this.onShowPosterPage()}},{key:"showDialogFunc",value:function(e){this.showDialog=!0;var t=this.$refs.dailog;t&&t.showDialog(e)}},{key:"alertTips",value:function(e,t){this.showDialog=!0;var n=this.$refs.dailog;n&&n.alertTips(e,t)}},{key:"onTouchMove",value:function(e){e.preventDefault()}},{key:"detectRotate",value:function(){var e=this.width,t=this.height;this.width=Math.max(window.innerWidth,window.innerHeight),this.height=Math.min(window.innerWidth,window.innerHeight);var n=window.innerWidth<window.innerHeight;this.$store.commit("setNeedRotate",n);var i=document.querySelector(":root");if(i.style.fontSize="".concat(.2*this.height,"px"),this.width!==e||this.height!==t){var o=this.$refs.renderer;null===o||void 0===o||o.onWindowResize()}}},{key:"destoryed",value:function(){clearInterval(this.intervalId),window.removeEventListener("resize",this.detectRotate.bind(this))}},{key:"onStart",value:function(){this.$store.commit("setChapter",0);var e=this.$refs.renderer;e.init()}},{key:"hideOpenning",value:function(){this.swicthPage("openning",!1)}},{key:"onLoad",value:function(){this.swicthPage("loading",!1),this.openningPage.playVideo(),S("loading","loadstart","加载完成")}},{key:"onShowPosterPage",value:function(){var e=this;this.swicthPage("loading",!1),this.swicthPage("openning",!1),this.swicthPage("interact",!1),this.swicthPage("poster",!0),this.$store.commit("setStartLoad",!0),this.$nextTick((function(){e.$refs.posterPage;var t=e.$refs.renderer;t.setScene("poster"),t.showPosterDirect()})),window.history.pushState("object or string","Title",A(window.location.href,"bres")),S("page","showResult","展示结果页")}},{key:"onSkipScene",value:function(){var e=this.$refs.renderer;e.nextScene(),S("btn","skipScene","跳过交互场景")}},{key:"showCluePage",value:function(){this.swicthPage("interact",!1),this.swicthPage("clue",!0),S("btn","cluePage","线索页")}},{key:"onConfirm",value:function(){this.swicthPage("clue",!1),this.swicthPage("poster",!0);var e=this.$refs.renderer;e.setScene("poster"),S("btn","posterPage","海报页")}},{key:"onAgain",value:function(){this.swicthPage("clue",!0),this.swicthPage("poster",!1);var e=this.$refs.renderer;e.setScene("clue"),this.$store.commit("setHasInteract",{index:4,flag:!1}),S("btn","reSelectClue","重选线索")}},{key:"onGetWelfare",value:function(){this.showDialog=!0;var e=this.$refs.dailog;e&&e.showWelfare(),S("btn","welfare","领取福利窗口")}},{key:"onCloseDialog",value:function(){this.showDialog=!1}},{key:"swicthPage",value:function(e,t){this.$store.commit("UpdatePageSwitch",{pageName:e,enabled:t})}}]),n}(a["c"]);jv=Object(s["a"])([Object(a["a"])({components:{Renderer:ih,CluePage:kn,PosterPage:on,ScenePage:pi,OpenningPage:Mi,InteractPage:fm,LoadingPage:Qm,Dialog:yv}})],jv);var Cv=jv,Rv=Cv,Mv=(n("5c0b"),Object(Te["a"])(Rv,o,r,!1,null,null,null)),Ev=Mv.exports,zv=n("6639");i["default"].use(zv["a"]),i["default"].config.productionTip=!1,window.onload=function(){new i["default"]({render:function(e){return e(Ev)},store:H}).$mount("#app"),H.state.enablePoster&&new i["default"]({store:H,render:function(e){return e(Se)}}).$mount("#saved_poster")}},ce9f:function(e,t,n){"use strict";n("d762")},cefc:function(e,t,n){"use strict";n("583c")},d68a:function(e,t,n){},d762:function(e,t,n){},d7c5:function(e,t){e.exports="precision highp float;\nuniform sampler2D map;\nuniform float opacity;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D(map, vUv);\n\tgl_FragColor.a *= opacity;\n}\n"},dc58:function(e,t){e.exports="precision highp float;\nuniform sampler2D stringTexture;\nuniform sampler2D noiseTexture;\nuniform float uvOffset;\nuniform float time;\nuniform float opacity;\nvarying vec2 vUv;\nvarying vec3 vWorldPos;\nvoid main() {\n\tvec2 uv = vUv;\n\tgl_FragColor = vec4(1.0, 1.0, 1.0, 0.5);\n\tgl_FragColor.a *= (smoothstep(0.15, 0.2, uv.x) * smoothstep(1.0, 0.9, uv.x));\n}\n"},e4f4:function(e,t,n){},f318:function(e,t,n){"use strict";n("a480")},f7a9:function(e,t){e.exports="precision highp float;\nuniform float time;\nuniform float shakeDir;\nuniform float shakePinPos;\nuniform float shakeAmp;\nuniform float shakeFreq;\nuniform sampler2D noiseTexture;\nuniform sampler2D map;\nvarying vec2 vUv;\nvoid main() {\n\tvec2 uv = vUv;\n\tfloat shake = 0.0;\n\tif (shakeDir == 0.0) {\n\t\tfloat pin = smoothstep(1.0 - shakePinPos, shakePinPos, uv.x);\n\t\tshake = ((sin((-time * 8.0) + ((uv.x * 0.5) * shakeFreq)) * 0.04) * pin) * shakeAmp;\n\t\tuv.y += shake;\n\t}\n\telse {\n\t\tfloat pin = smoothstep(1.0 - shakePinPos, shakePinPos, uv.y);\n\t\tshake = ((sin((-time * 8.0) + ((uv.y * 0.5) * shakeFreq)) * 0.04) * pin) * shakeAmp;\n\t\tuv.x += shake;\n\t}\n\tfloat n = texture2D(noiseTexture, (vUv * 0.15) + (time * 0.01)).r;\n\tvec4 col = texture2D(map, uv);\n\tgl_FragColor = col;\n}\n"},f92a:function(e,t,n){"use strict";n("487d")},fa2cd:function(e,t,n){},fe83:function(e,t){e.exports="precision highp float;\nuniform float time;\nuniform float offset;\nuniform float enableFlow;\nuniform float opacity;\nuniform float showSmoke;\nuniform float shakeDir;\nuniform float shakePinPos;\nuniform float shakeAmp;\nuniform float shakeFreq;\nuniform float shakeSpeed;\nuniform float shakeOffset;\nuniform sampler2D map;\nuniform sampler2D depthMap;\nuniform sampler2D flowMap;\nuniform float flowOffset;\nuniform sampler2D noiseMap;\nuniform vec2 meshBound;\nvarying vec2 vUv;\nvoid main() {\n\tvec2 uv = vUv;\n\tfloat shake = 0.0;\n\tif (shakeDir == 0.0) {\n\t\tfloat pin = smoothstep(1.0 - shakePinPos, shakePinPos, uv.x);\n\t\tshake = ((sin((((-time * shakeSpeed) * 3.0) + ((uv.x * 0.5) * shakeFreq)) + shakeOffset) * 0.04) * pin) * shakeAmp;\n\t\tuv.y += shake;\n\t}\n\telse {\n\t\tfloat pin = smoothstep(1.0 - shakePinPos, shakePinPos, uv.y);\n\t\tshake = ((sin((((-time * shakeSpeed) * 3.0) + ((uv.y * 0.5) * shakeFreq)) + shakeOffset) * 0.04) * pin) * shakeAmp;\n\t\tuv.x += shake;\n\t}\n\tfloat d = texture2D(depthMap, uv).b;\n\tvec2 targetUv = uv + ((vec2(d, 0) * 0.03) * offset);\n\tfloat flow = texture2D(flowMap, targetUv).g * enableFlow;\n\tvec4 col = texture2D(map, uv);\n\tgl_FragColor = col;\n\tfloat n = texture2D(noiseMap, (targetUv * vec2(15.0, 0.8)) + vec2(0.0, -time * 0.3)).r;\n\tvec4 flowCol = texture2D(map, targetUv + vec2((n - 0.5) * flowOffset, 0.0));\n\tgl_FragColor.rgb = mix(gl_FragColor.rgb, flowCol.rgb, flow * flowCol.a);\n\tfloat smoke = 0.0;\n\tvec2 smokeUv = (targetUv * meshBound) * 0.1;\n\tsmoke += texture2D(noiseMap, smokeUv + vec2(-time * 0.05, 0.0)).r;\n\tsmoke += (texture2D(noiseMap, (smokeUv * 2.0) + vec2(-time * 0.1, 0.0)).r * 0.5);\n\tgl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(1.0), ((smoothstep(0.5, 1.0, vUv.y) * smoke) * 0.8) * showSmoke);\n\tgl_FragColor.a *= opacity;\n}\n"},fea4:function(e,t,n){},ffb8:function(e,t,n){"use strict";n("6f83")}});